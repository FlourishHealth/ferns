{"ast":null,"code":"var _worklet_2968916340903_init_data = {\n  code: \"function bisectRoot(_ref) {\\n  let {\\n    min: min,\\n    max: max,\\n    func: func,\\n    maxIterations = 20\\n  } = _ref;\\n  const ACCURACY = 0.00005;\\n  let idx = maxIterations;\\n  let current = (max + min) / 2;\\n  while (Math.abs(func(current)) > ACCURACY && idx > 0) {\\n    idx -= 1;\\n    if (func(current) < 0) {\\n      min = current;\\n    } else {\\n      max = current;\\n    }\\n    current = (min + max) / 2;\\n  }\\n  return current;\\n}\",\n  location: \"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"bisectRoot\\\",\\\"_ref\\\",\\\"min\\\",\\\"max\\\",\\\"func\\\",\\\"maxIterations\\\",\\\"ACCURACY\\\",\\\"idx\\\",\\\"current\\\",\\\"Math\\\",\\\"abs\\\"],\\\"sources\\\":[\\\"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\\\"],\\\"mappings\\\":\\\"AAAA,SAAAA,UAASA,CAAWC,IAAA,EAAI;EAGtB,IAAI;IACFC,GAAG,EAAHA,GAAG;IACHC,GAAG,EAAHA,GAAG;IACHC,IAAI,EAAJA,IAAI;IACJC,aAAa,GAAG;EAClB,CAAC,GAAGJ,IAAI;EACR,MAAMK,QAAQ,GAAG,OAAO;EACxB,IAAIC,GAAG,GAAGF,aAAa;EACvB,IAAIG,OAAO,GAAG,CAACL,GAAG,GAAGD,GAAG,IAAI,CAAC;EAC7B,OAAOO,IAAI,CAACC,GAAG,CAACN,IAAI,CAACI,OAAO,CAAC,CAAC,GAAGF,QAAQ,IAAIC,GAAG,GAAG,CAAC,EAAE;IACpDA,GAAG,IAAI,CAAC;IACR,IAAIH,IAAI,CAACI,OAAO,CAAC,GAAG,CAAC,EAAE;MACrBN,GAAG,GAAGM,OAAO;IACf,CAAC,MAAM;MACLL,GAAG,GAAGK,OAAO;IACf;IACAA,OAAO,GAAG,CAACN,GAAG,GAAGC,GAAG,IAAI,CAAC;EAC3B;EACA,OAAOK,OAAO;AAChB\\\"}\"\n};\nvar bisectRoot = function () {\n  var _e = [new global.Error(), 1, -27];\n  var _f = function _f(_ref) {\n    var min = _ref.min,\n      max = _ref.max,\n      func = _ref.func,\n      _ref$maxIterations = _ref.maxIterations,\n      maxIterations = _ref$maxIterations === void 0 ? 20 : _ref$maxIterations;\n    var ACCURACY = 0.00005;\n    var idx = maxIterations;\n    var current = (max + min) / 2;\n    while (Math.abs(func(current)) > ACCURACY && idx > 0) {\n      idx -= 1;\n      if (func(current) < 0) {\n        min = current;\n      } else {\n        max = current;\n      }\n      current = (min + max) / 2;\n    }\n    return current;\n  };\n  _f._closure = {};\n  _f.__initData = _worklet_2968916340903_init_data;\n  _f.__workletHash = 2968916340903;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\nvar _worklet_15750509760427_init_data = {\n  code: \"function initialCalculations() {\\n  let mass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\\n  let config = arguments.length > 1 ? arguments[1] : undefined;\\n  if (config.configIsInvalid) {\\n    return {\\n      zeta: 0,\\n      omega0: 0,\\n      omega1: 0\\n    };\\n  }\\n  if (config.useDuration) {\\n    const {\\n      stiffness: k,\\n      dampingRatio: zeta\\n    } = config;\\n    const omega0 = Math.sqrt(k / mass);\\n    const omega1 = omega0 * Math.sqrt(1 - zeta ** 2);\\n    return {\\n      zeta: zeta,\\n      omega0: omega0,\\n      omega1: omega1\\n    };\\n  } else {\\n    const {\\n      damping: c,\\n      mass: m,\\n      stiffness: k\\n    } = config;\\n    const zeta = c / (2 * Math.sqrt(k * m));\\n    const omega0 = Math.sqrt(k / m);\\n    const omega1 = omega0 * Math.sqrt(1 - zeta ** 2);\\n    return {\\n      zeta: zeta,\\n      omega0: omega0,\\n      omega1: omega1\\n    };\\n  }\\n}\",\n  location: \"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"initialCalculations\\\",\\\"mass\\\",\\\"arguments\\\",\\\"length\\\",\\\"undefined\\\",\\\"config\\\",\\\"configIsInvalid\\\",\\\"zeta\\\",\\\"omega0\\\",\\\"omega1\\\",\\\"useDuration\\\",\\\"stiffness\\\",\\\"k\\\",\\\"dampingRatio\\\",\\\"Math\\\",\\\"sqrt\\\",\\\"damping\\\",\\\"c\\\",\\\"m\\\"],\\\"sources\\\":[\\\"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\\\"],\\\"mappings\\\":\\\"AAuBO,SAAAA,mBAASA,CAAA,EAAmB;EAGjC,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;EAChF,IAAIG,MAAM,GAAGH,SAAS,CAACC,MAAM,GAAG,CAAC,GAAGD,SAAS,CAAC,CAAC,CAAC,GAAGE,SAAS;EAC5D,IAAIC,MAAM,CAACC,eAAe,EAAE;IAC1B,OAAO;MACLC,IAAI,EAAE,CAAC;MACPC,MAAM,EAAE,CAAC;MACTC,MAAM,EAAE;IACV,CAAC;EACH;EACA,IAAIJ,MAAM,CAACK,WAAW,EAAE;IACtB,MAAM;MACJC,SAAS,EAAEC,CAAC;MACZC,YAAY,EAAEN;IAChB,CAAC,GAAGF,MAAM;IAKV,MAAMG,MAAM,GAAGM,IAAI,CAACC,IAAI,CAACH,CAAC,GAAGX,IAAI,CAAC;IAClC,MAAMQ,MAAM,GAAGD,MAAM,GAAGM,IAAI,CAACC,IAAI,CAAC,CAAC,GAAGR,IAAI,IAAI,CAAC,CAAC;IAChD,OAAO;MACLA,IAAI,EAAJA,IAAI;MACJC,MAAM,EAANA,MAAM;MACNC,MAAA,EAAAA;IACF,CAAC;EACH,CAAC,MAAM;IACL,MAAM;MACJO,OAAO,EAAEC,CAAC;MACVhB,IAAI,EAAEiB,CAAC;MACPP,SAAS,EAAEC;IACb,CAAC,GAAGP,MAAM;IACV,MAAME,IAAI,GAAGU,CAAC,IAAI,CAAC,GAAGH,IAAI,CAACC,IAAI,CAACH,CAAC,GAAGM,CAAC,CAAC,CAAC;IACvC,MAAMV,MAAM,GAAGM,IAAI,CAACC,IAAI,CAACH,CAAC,GAAGM,CAAC,CAAC;IAC/B,MAAMT,MAAM,GAAGD,MAAM,GAAGM,IAAI,CAACC,IAAI,CAAC,CAAC,GAAGR,IAAI,IAAI,CAAC,CAAC;IAEhD,OAAO;MACLA,IAAI,EAAJA,IAAI;MACJC,MAAM,EAANA,MAAM;MACNC,MAAA,EAAAA;IACF,CAAC;EACH;AACF\\\"}\"\n};\nexport var initialCalculations = function () {\n  var _e = [new global.Error(), 1, -27];\n  var _f = function _f() {\n    var mass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var config = arguments.length > 1 ? arguments[1] : undefined;\n    if (config.configIsInvalid) {\n      return {\n        zeta: 0,\n        omega0: 0,\n        omega1: 0\n      };\n    }\n    if (config.useDuration) {\n      var k = config.stiffness,\n        zeta = config.dampingRatio;\n      var omega0 = Math.sqrt(k / mass);\n      var omega1 = omega0 * Math.sqrt(1 - zeta ** 2);\n      return {\n        zeta: zeta,\n        omega0: omega0,\n        omega1: omega1\n      };\n    } else {\n      var c = config.damping,\n        m = config.mass,\n        _k = config.stiffness;\n      var _zeta = c / (2 * Math.sqrt(_k * m));\n      var _omega = Math.sqrt(_k / m);\n      var _omega2 = _omega * Math.sqrt(1 - _zeta ** 2);\n      return {\n        zeta: _zeta,\n        omega0: _omega,\n        omega1: _omega2\n      };\n    }\n  };\n  _f._closure = {};\n  _f.__initData = _worklet_15750509760427_init_data;\n  _f.__workletHash = 15750509760427;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\nvar _worklet_4593224459311_init_data = {\n  code: \"function calcuateNewMassToMatchDuration(x0, config, v0) {\\n  const {\\n    bisectRoot\\n  } = this._closure;\\n  if (config.configIsInvalid) {\\n    return 0;\\n  }\\n  const {\\n    stiffness: k,\\n    dampingRatio: zeta,\\n    restSpeedThreshold: threshold,\\n    duration: duration\\n  } = config;\\n  const durationForMass = function (mass) {\\n    'worklet';\\n\\n    const amplitude = (mass * v0 * v0 + k * x0 * x0) / (Math.exp(1 - 0.5 * zeta) * k);\\n    const c = zeta * 2 * Math.sqrt(k * mass);\\n    return 1000 * (-2 * mass / c) * Math.log(threshold * 0.01 / amplitude) - duration;\\n  };\\n  return bisectRoot({\\n    min: 0,\\n    max: 100,\\n    func: durationForMass\\n  });\\n}\",\n  location: \"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"calcuateNewMassToMatchDuration\\\",\\\"x0\\\",\\\"config\\\",\\\"v0\\\",\\\"bisectRoot\\\",\\\"_closure\\\",\\\"configIsInvalid\\\",\\\"stiffness\\\",\\\"k\\\",\\\"dampingRatio\\\",\\\"zeta\\\",\\\"restSpeedThreshold\\\",\\\"threshold\\\",\\\"duration\\\",\\\"durationForMass\\\",\\\"mass\\\",\\\"amplitude\\\",\\\"Math\\\",\\\"exp\\\",\\\"c\\\",\\\"sqrt\\\",\\\"log\\\",\\\"min\\\",\\\"max\\\",\\\"func\\\"],\\\"sources\\\":[\\\"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\\\"],\\\"mappings\\\":\\\"AAoEO,SAAAA,8BAASA,CAA+BC,EAAA,EAAEC,MAAE,EAAMC,EAAE,EAAE;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAG3D,IAAIH,MAAM,CAACI,eAAe,EAAE;IAC1B,OAAO,CAAC;EACV;EAiBA,MAAM;IACJC,SAAS,EAAEC,CAAC;IACZC,YAAY,EAAEC,IAAI;IAClBC,kBAAkB,EAAEC,SAAS;IAC7BC,QAAA,EAAAA;EACF,CAAC,GAAGX,MAAM;EACV,MAAMY,eAAe,GAAG,SAAAA,CAAAC,IAAI,EAAI;IAC9B,SAAS;;IAET,MAAMC,SAAS,GAAG,CAACD,IAAI,GAAGZ,EAAE,GAAGA,EAAE,GAAGK,CAAC,GAAGP,EAAE,GAAGA,EAAE,KAAKgB,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGR,IAAI,CAAC,GAAGF,CAAC,CAAC;IACjF,MAAMW,CAAC,GAAGT,IAAI,GAAG,CAAC,GAAGO,IAAI,CAACG,IAAI,CAACZ,CAAC,GAAGO,IAAI,CAAC;IACxC,OAAO,IAAI,IAAI,CAAC,CAAC,GAAGA,IAAI,GAAGI,CAAC,CAAC,GAAGF,IAAI,CAACI,GAAG,CAACT,SAAS,GAAG,IAAI,GAAGI,SAAS,CAAC,GAAGH,QAAQ;EACnF,CAAC;EAGD,OAAOT,UAAU,CAAC;IAChBkB,GAAG,EAAE,CAAC;IACNC,GAAG,EAAE,GAAG;IACRC,IAAI,EAAEV;EACR,CAAC,CAAC;AACJ\\\"}\"\n};\nvar _worklet_411302994911_init_data = {\n  code: \"function anonymous(mass) {\\n  const {\\n    v0,\\n    k,\\n    x0,\\n    zeta,\\n    threshold,\\n    duration\\n  } = this._closure;\\n  const amplitude = (mass * v0 * v0 + k * x0 * x0) / (Math.exp(1 - 0.5 * zeta) * k);\\n  const c = zeta * 2 * Math.sqrt(k * mass);\\n  return 1000 * (-2 * mass / c) * Math.log(threshold * 0.01 / amplitude) - duration;\\n}\",\n  location: \"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"mass\\\",\\\"v0\\\",\\\"k\\\",\\\"x0\\\",\\\"zeta\\\",\\\"threshold\\\",\\\"duration\\\",\\\"_closure\\\",\\\"amplitude\\\",\\\"Math\\\",\\\"exp\\\",\\\"c\\\",\\\"sqrt\\\",\\\"log\\\"],\\\"sources\\\":[\\\"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\\\"],\\\"mappings\\\":\\\"AAgG0B,SAAAA,SAAQA,CAAAC,IAAA;EAAA;IAAAC,EAAA;IAAAC,CAAA;IAAAC,EAAA;IAAAC,IAAA;IAAAC,SAAA;IAAAC;EAAA,SAAAC,QAAA;EAG9B,MAAMC,SAAS,GAAG,CAACR,IAAI,GAAGC,EAAE,GAAGA,EAAE,GAAGC,CAAC,GAAGC,EAAE,GAAGA,EAAE,KAAKM,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGN,IAAI,CAAC,GAAGF,CAAC,CAAC;EACjF,MAAMS,CAAC,GAAGP,IAAI,GAAG,CAAC,GAAGK,IAAI,CAACG,IAAI,CAACV,CAAC,GAAGF,IAAI,CAAC;EACxC,OAAO,IAAI,IAAI,CAAC,CAAC,GAAGA,IAAI,GAAGW,CAAC,CAAC,GAAGF,IAAI,CAACI,GAAG,CAACR,SAAS,GAAG,IAAI,GAAGG,SAAS,CAAC,GAAGF,QAAQ;AACnF\\\"}\"\n};\nexport var calcuateNewMassToMatchDuration = function () {\n  var _e = [new global.Error(), -2, -27];\n  var _f = function _f(x0, config, v0) {\n    if (config.configIsInvalid) {\n      return 0;\n    }\n    var k = config.stiffness,\n      zeta = config.dampingRatio,\n      threshold = config.restSpeedThreshold,\n      duration = config.duration;\n    var durationForMass = function () {\n      var _e = [new global.Error(), -7, -27];\n      var _f = function _f(mass) {\n        var amplitude = (mass * v0 * v0 + k * x0 * x0) / (Math.exp(1 - 0.5 * zeta) * k);\n        var c = zeta * 2 * Math.sqrt(k * mass);\n        return 1000 * (-2 * mass / c) * Math.log(threshold * 0.01 / amplitude) - duration;\n      };\n      _f._closure = {\n        v0: v0,\n        k: k,\n        x0: x0,\n        zeta: zeta,\n        threshold: threshold,\n        duration: duration\n      };\n      _f.__initData = _worklet_411302994911_init_data;\n      _f.__workletHash = 411302994911;\n      _f.__stackDetails = _e;\n      _f.__version = \"3.3.0\";\n      return _f;\n    }();\n    return bisectRoot({\n      min: 0,\n      max: 100,\n      func: durationForMass\n    });\n  };\n  _f._closure = {\n    bisectRoot: bisectRoot\n  };\n  _f.__initData = _worklet_4593224459311_init_data;\n  _f.__workletHash = 4593224459311;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\nvar _worklet_17497043282573_init_data = {\n  code: \"function criticallyDampedSpringCalculations(animation, precalculatedValues) {\\n  const {\\n    toValue: toValue\\n  } = animation;\\n  const {\\n    v0: v0,\\n    x0: x0,\\n    omega0: omega0,\\n    t: t\\n  } = precalculatedValues;\\n  const criticallyDampedEnvelope = Math.exp(-omega0 * t);\\n  const criticallyDampedPosition = toValue - criticallyDampedEnvelope * (x0 + (v0 + omega0 * x0) * t);\\n  const criticallyDampedVelocity = criticallyDampedEnvelope * (v0 * (t * omega0 - 1) + t * x0 * omega0 * omega0);\\n  return {\\n    position: criticallyDampedPosition,\\n    velocity: criticallyDampedVelocity\\n  };\\n}\",\n  location: \"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"criticallyDampedSpringCalculations\\\",\\\"animation\\\",\\\"precalculatedValues\\\",\\\"toValue\\\",\\\"v0\\\",\\\"x0\\\",\\\"omega0\\\",\\\"t\\\",\\\"criticallyDampedEnvelope\\\",\\\"Math\\\",\\\"exp\\\",\\\"criticallyDampedPosition\\\",\\\"criticallyDampedVelocity\\\",\\\"position\\\",\\\"velocity\\\"],\\\"sources\\\":[\\\"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\\\"],\\\"mappings\\\":\\\"AA+GO,SAAAA,kCAASA,CAAmCC,SAAA,EAASC,mBAAE,EAAmB;EAG/E,MAAM;IACJC,OAAA,EAAAA;EACF,CAAC,GAAGF,SAAS;EACb,MAAM;IACJG,EAAE,EAAFA,EAAE;IACFC,EAAE,EAAFA,EAAE;IACFC,MAAM,EAANA,MAAM;IACNC,CAAA,EAAAA;EACF,CAAC,GAAGL,mBAAmB;EACvB,MAAMM,wBAAwB,GAAGC,IAAI,CAACC,GAAG,CAAC,CAACJ,MAAM,GAAGC,CAAC,CAAC;EACtD,MAAMI,wBAAwB,GAAGR,OAAO,GAAGK,wBAAwB,IAAIH,EAAE,GAAG,CAACD,EAAE,GAAGE,MAAM,GAAGD,EAAE,IAAIE,CAAC,CAAC;EACnG,MAAMK,wBAAwB,GAAGJ,wBAAwB,IAAIJ,EAAE,IAAIG,CAAC,GAAGD,MAAM,GAAG,CAAC,CAAC,GAAGC,CAAC,GAAGF,EAAE,GAAGC,MAAM,GAAGA,MAAM,CAAC;EAC9G,OAAO;IACLO,QAAQ,EAAEF,wBAAwB;IAClCG,QAAQ,EAAEF;EACZ,CAAC;AACH\\\"}\"\n};\nexport var criticallyDampedSpringCalculations = function () {\n  var _e = [new global.Error(), 1, -27];\n  var _f = function _f(animation, precalculatedValues) {\n    var toValue = animation.toValue;\n    var v0 = precalculatedValues.v0,\n      x0 = precalculatedValues.x0,\n      omega0 = precalculatedValues.omega0,\n      t = precalculatedValues.t;\n    var criticallyDampedEnvelope = Math.exp(-omega0 * t);\n    var criticallyDampedPosition = toValue - criticallyDampedEnvelope * (x0 + (v0 + omega0 * x0) * t);\n    var criticallyDampedVelocity = criticallyDampedEnvelope * (v0 * (t * omega0 - 1) + t * x0 * omega0 * omega0);\n    return {\n      position: criticallyDampedPosition,\n      velocity: criticallyDampedVelocity\n    };\n  };\n  _f._closure = {};\n  _f.__initData = _worklet_17497043282573_init_data;\n  _f.__workletHash = 17497043282573;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\nvar _worklet_14463682152611_init_data = {\n  code: \"function underDampedSpringCalculations(animation, precalculatedValues) {\\n  const {\\n    toValue: toValue,\\n    current: current,\\n    velocity: velocity\\n  } = animation;\\n  const {\\n    zeta: zeta,\\n    t: t,\\n    omega0: omega0,\\n    omega1: omega1\\n  } = precalculatedValues;\\n  const v0 = -velocity;\\n  const x0 = toValue - current;\\n  const sin1 = Math.sin(omega1 * t);\\n  const cos1 = Math.cos(omega1 * t);\\n  const underDampedEnvelope = Math.exp(-zeta * omega0 * t);\\n  const underDampedFrag1 = underDampedEnvelope * (sin1 * ((v0 + zeta * omega0 * x0) / omega1) + x0 * cos1);\\n  const underDampedPosition = toValue - underDampedFrag1;\\n  const underDampedVelocity = zeta * omega0 * underDampedFrag1 - underDampedEnvelope * (cos1 * (v0 + zeta * omega0 * x0) - omega1 * x0 * sin1);\\n  return {\\n    position: underDampedPosition,\\n    velocity: underDampedVelocity\\n  };\\n}\",\n  location: \"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"underDampedSpringCalculations\\\",\\\"animation\\\",\\\"precalculatedValues\\\",\\\"toValue\\\",\\\"current\\\",\\\"velocity\\\",\\\"zeta\\\",\\\"t\\\",\\\"omega0\\\",\\\"omega1\\\",\\\"v0\\\",\\\"x0\\\",\\\"sin1\\\",\\\"Math\\\",\\\"sin\\\",\\\"cos1\\\",\\\"cos\\\",\\\"underDampedEnvelope\\\",\\\"exp\\\",\\\"underDampedFrag1\\\",\\\"underDampedPosition\\\",\\\"underDampedVelocity\\\",\\\"position\\\"],\\\"sources\\\":[\\\"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\\\"],\\\"mappings\\\":\\\"AAmIO,SAAAA,6BAASA,CAA8BC,SAAA,EAASC,mBAAE,EAAmB;EAG1E,MAAM;IACJC,OAAO,EAAPA,OAAO;IACPC,OAAO,EAAPA,OAAO;IACPC,QAAA,EAAAA;EACF,CAAC,GAAGJ,SAAS;EACb,MAAM;IACJK,IAAI,EAAJA,IAAI;IACJC,CAAC,EAADA,CAAC;IACDC,MAAM,EAANA,MAAM;IACNC,MAAA,EAAAA;EACF,CAAC,GAAGP,mBAAmB;EACvB,MAAMQ,EAAE,GAAG,CAACL,QAAQ;EACpB,MAAMM,EAAE,GAAGR,OAAO,GAAGC,OAAO;EAC5B,MAAMQ,IAAI,GAAGC,IAAI,CAACC,GAAG,CAACL,MAAM,GAAGF,CAAC,CAAC;EACjC,MAAMQ,IAAI,GAAGF,IAAI,CAACG,GAAG,CAACP,MAAM,GAAGF,CAAC,CAAC;EAGjC,MAAMU,mBAAmB,GAAGJ,IAAI,CAACK,GAAG,CAAC,CAACZ,IAAI,GAAGE,MAAM,GAAGD,CAAC,CAAC;EACxD,MAAMY,gBAAgB,GAAGF,mBAAmB,IAAIL,IAAI,IAAI,CAACF,EAAE,GAAGJ,IAAI,GAAGE,MAAM,GAAGG,EAAE,IAAIF,MAAM,CAAC,GAAGE,EAAE,GAAGI,IAAI,CAAC;EACxG,MAAMK,mBAAmB,GAAGjB,OAAO,GAAGgB,gBAAgB;EAEtD,MAAME,mBAAmB,GAAGf,IAAI,GAAGE,MAAM,GAAGW,gBAAgB,GAAGF,mBAAmB,IAAIF,IAAI,IAAIL,EAAE,GAAGJ,IAAI,GAAGE,MAAM,GAAGG,EAAE,CAAC,GAAGF,MAAM,GAAGE,EAAE,GAAGC,IAAI,CAAC;EAC5I,OAAO;IACLU,QAAQ,EAAEF,mBAAmB;IAC7Bf,QAAQ,EAAEgB;EACZ,CAAC;AACH\\\"}\"\n};\nexport var underDampedSpringCalculations = function () {\n  var _e = [new global.Error(), 1, -27];\n  var _f = function _f(animation, precalculatedValues) {\n    var toValue = animation.toValue,\n      current = animation.current,\n      velocity = animation.velocity;\n    var zeta = precalculatedValues.zeta,\n      t = precalculatedValues.t,\n      omega0 = precalculatedValues.omega0,\n      omega1 = precalculatedValues.omega1;\n    var v0 = -velocity;\n    var x0 = toValue - current;\n    var sin1 = Math.sin(omega1 * t);\n    var cos1 = Math.cos(omega1 * t);\n    var underDampedEnvelope = Math.exp(-zeta * omega0 * t);\n    var underDampedFrag1 = underDampedEnvelope * (sin1 * ((v0 + zeta * omega0 * x0) / omega1) + x0 * cos1);\n    var underDampedPosition = toValue - underDampedFrag1;\n    var underDampedVelocity = zeta * omega0 * underDampedFrag1 - underDampedEnvelope * (cos1 * (v0 + zeta * omega0 * x0) - omega1 * x0 * sin1);\n    return {\n      position: underDampedPosition,\n      velocity: underDampedVelocity\n    };\n  };\n  _f._closure = {};\n  _f.__initData = _worklet_14463682152611_init_data;\n  _f.__workletHash = 14463682152611;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\nvar _worklet_6231286114166_init_data = {\n  code: \"function isAnimationTerminatingCalculation(animation, config) {\\n  const {\\n    toValue: toValue,\\n    velocity: velocity,\\n    startValue: startValue,\\n    current: current\\n  } = animation;\\n  const isOvershooting = config.overshootClamping ? current > toValue && startValue < toValue || current < toValue && startValue > toValue : false;\\n  const isVelocity = Math.abs(velocity) < config.restSpeedThreshold;\\n  const isDisplacement = Math.abs(toValue - current) < config.restDisplacementThreshold;\\n  return {\\n    isOvershooting: isOvershooting,\\n    isVelocity: isVelocity,\\n    isDisplacement: isDisplacement\\n  };\\n}\",\n  location: \"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"isAnimationTerminatingCalculation\\\",\\\"animation\\\",\\\"config\\\",\\\"toValue\\\",\\\"velocity\\\",\\\"startValue\\\",\\\"current\\\",\\\"isOvershooting\\\",\\\"overshootClamping\\\",\\\"isVelocity\\\",\\\"Math\\\",\\\"abs\\\",\\\"restSpeedThreshold\\\",\\\"isDisplacement\\\",\\\"restDisplacementThreshold\\\"],\\\"sources\\\":[\\\"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/springUtils.js\\\"],\\\"mappings\\\":\\\"AAiKO,SAAAA,iCAASA,CAAkCC,SAAA,EAASC,MAAE,EAAM;EAGjE,MAAM;IACJC,OAAO,EAAPA,OAAO;IACPC,QAAQ,EAARA,QAAQ;IACRC,UAAU,EAAVA,UAAU;IACVC,OAAA,EAAAA;EACF,CAAC,GAAGL,SAAS;EACb,MAAMM,cAAc,GAAGL,MAAM,CAACM,iBAAiB,GAAGF,OAAO,GAAGH,OAAO,IAAIE,UAAU,GAAGF,OAAO,IAAIG,OAAO,GAAGH,OAAO,IAAIE,UAAU,GAAGF,OAAO,GAAG,KAAK;EAChJ,MAAMM,UAAU,GAAGC,IAAI,CAACC,GAAG,CAACP,QAAQ,CAAC,GAAGF,MAAM,CAACU,kBAAkB;EACjE,MAAMC,cAAc,GAAGH,IAAI,CAACC,GAAG,CAACR,OAAO,GAAGG,OAAO,CAAC,GAAGJ,MAAM,CAACY,yBAAyB;EACrF,OAAO;IACLP,cAAc,EAAdA,cAAc;IACdE,UAAU,EAAVA,UAAU;IACVI,cAAA,EAAAA;EACF,CAAC;AACH\\\"}\"\n};\nexport var isAnimationTerminatingCalculation = function () {\n  var _e = [new global.Error(), 1, -27];\n  var _f = function _f(animation, config) {\n    var toValue = animation.toValue,\n      velocity = animation.velocity,\n      startValue = animation.startValue,\n      current = animation.current;\n    var isOvershooting = config.overshootClamping ? current > toValue && startValue < toValue || current < toValue && startValue > toValue : false;\n    var isVelocity = Math.abs(velocity) < config.restSpeedThreshold;\n    var isDisplacement = Math.abs(toValue - current) < config.restDisplacementThreshold;\n    return {\n      isOvershooting: isOvershooting,\n      isVelocity: isVelocity,\n      isDisplacement: isDisplacement\n    };\n  };\n  _f._closure = {};\n  _f.__initData = _worklet_6231286114166_init_data;\n  _f.__workletHash = 6231286114166;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();","map":{"version":3,"sources":["springUtils.ts"],"names":["bisectRoot","min","max","func","maxIterations","ACCURACY","idx","current","Math","abs","initialCalculations","mass","config","configIsInvalid","zeta","omega0","omega1","useDuration","stiffness","k","dampingRatio","sqrt","damping","c","m","calcuateNewMassToMatchDuration","x0","v0","restSpeedThreshold","threshold","duration","durationForMass","amplitude","exp","log","criticallyDampedSpringCalculations","animation","precalculatedValues","toValue","t","criticallyDampedEnvelope","criticallyDampedPosition","criticallyDampedVelocity","position","velocity","underDampedSpringCalculations","sin1","sin","cos1","cos","underDampedEnvelope","underDampedFrag1","underDampedPosition","underDampedVelocity","isAnimationTerminatingCalculation","startValue","isOvershooting","overshootClamping","isVelocity","isDisplacement","restDisplacementThreshold"],"mappings":";;;;;IA8CSA,UAAUA;EAAAA,IAAAA,EAAAA,QAAAA,MAAAA,CAAAA,KAAAA;EAAAA,IAAAA,EAAAA,YAAAA,GAAAA,IAAAA,EAUhB;IAViB,IAClBC,GAAG,GASJ,IAAA,CATCA,GAAG;MACHC,GAAG,GAQJ,IAAA,CARCA,GAAG;MACHC,IAAI,GAOL,IAAA,CAPCA,IAAI;MAAA,kBAAA,GAOL,IAAA,CANCC,aAAa;MAAbA,aAAa,GAAA,kBAAA,cAAG,EAAA,GAAA,kBAAA;IAQhB,IAAMC,QAAQ,GAAG,OAAO;IACxB,IAAIC,GAAG,GAAGF,aAAa;IACvB,IAAIG,OAAO,GAAG,CAACL,GAAG,GAAGD,GAAG,IAAI,CAAC;IAC7B,OAAOO,IAAI,CAACC,GAAG,CAACN,IAAI,CAACI,OAAO,CAAC,CAAC,GAAGF,QAAQ,IAAIC,GAAG,GAAG,CAAC,EAAE;MACpDA,GAAG,IAAI,CAAC;MAER,IAAIH,IAAI,CAACI,OAAO,CAAC,GAAG,CAAC,EAAE;QACrBN,GAAG,GAAGM,OAAO;MACf,CAAC,MAAM;QACLL,GAAG,GAAGK,OAAO;MACf;MACAA,OAAO,GAAG,CAACN,GAAG,GAAGC,GAAG,IAAI,CAAC;IAC3B;IACA,OAAOK,OAAO;EAChB,CAAA;EAAA,EAAA,CAAA,QAAA;EAAA,EAAA,CAAA,UAAA,GAAA,gCAAA;EAAA,EAAA,CAAA,aAAA;EAAA,EAAA,CAAA,cAAA,GAAA,EAAA;EAAA,EAAA,CAAA,SAAA;EAAA,OAAA,EAAA;AAAA;AAAA,IAAA,iCAAA;EAAA,IAAA;EAAA,QAAA;EAAA,SAAA;AAAA;AAEA,WAAgBG,mBAAmBA;EAAAA,IAAAA,EAAAA,QAAAA,MAAAA,CAAAA,KAAAA;EAAAA,IAAAA,EAAAA,YAAAA,GAAAA,EAOjC;IACU,IAPVC,IAAI,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAG,CAAC;IAAA,IACRC,MAA2D,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,SAAA;IAQ3D,IAAIA,MAAM,CAACC,eAAe,EAAE;MAC1B,OAAO;QAAEC,IAAI,EAAE,CAAC;QAAEC,MAAM,EAAE,CAAC;QAAEC,MAAM,EAAE;MAAE,CAAC;IAC1C;IAEA,IAAIJ,MAAM,CAACK,WAAW,EAAE;MACtB,IAAmBE,CAAC,GAAyBP,MAAM,CAA3CM,SAAS;QAAmBJ,IAAAA,GAASF,MAAM,CAA7BQ,YAAY;MAKlC,IAAML,MAAM,GAAGP,IAAI,CAACa,IAAI,CAACF,CAAC,GAAGR,IAAI,CAAC;MAClC,IAAMK,MAAM,GAAGD,MAAM,GAAGP,IAAI,CAACa,IAAI,CAAC,CAAC,GAAGP,IAAI,IAAI,CAAC,CAAC;MAEhD,OAAO;QAAEA,IAAI,EAAJA,IAAI;QAAEC,MAAM,EAANA,MAAM;QAAEC,MAAAA,EAAAA;MAAO,CAAC;IACjC,CAAC,MAAM;MACL,IAAiBO,CAAC,GAA4BX,MAAM,CAA5CU,OAAO;QAAWE,CAAC,GAAmBZ,MAAM,CAAhCD,IAAI;QAAgBQ,EAAAA,GAAMP,MAAM,CAAvBM,SAAS;MAEtC,IAAMJ,KAAI,GAAGS,CAAC,IAAI,CAAC,GAAGf,IAAI,CAACa,IAAI,CAACF,EAAC,GAAGK,CAAC,CAAC,CAAC;MACvC,IAAMT,MAAM,GAAGP,IAAI,CAACa,IAAI,CAACF,EAAC,GAAGK,CAAC,CAAC;MAC/B,IAAMR,OAAM,GAAGD,MAAM,GAAGP,IAAI,CAACa,IAAI,CAAC,CAAC,GAAGP,KAAI,IAAI,CAAC,CAAC;MAEhD,OAAO;QAAEA,IAAI,EAAJA,KAAI;QAAEC,MAAM,EAANA,MAAM;QAAEC,MAAAA,EAAAA;MAAO,CAAC;IACjC;EACF,CAAA;EAAA,EAAA,CAAA,QAAA;EAAA,EAAA,CAAA,UAAA,GAAA,iCAAA;EAAA,EAAA,CAAA,aAAA;EAAA,EAAA,CAAA,cAAA,GAAA,EAAA;EAAA,EAAA,CAAA,SAAA;EAAA,OAAA,EAAA;AAAA;AAAA,IAAA,gCAAA;EAAA,IAAA;EAAA,QAAA;EAAA,SAAA;AAAA;AAAA,IAAA,+BAAA;EAAA,IAAA;EAAA,QAAA;EAAA,SAAA;AAAA;AAEA,WAAgBS,8BAA8BA;EAAAA,IAAAA,EAAAA,QAAAA,MAAAA,CAAAA,KAAAA;EAAAA,IAAAA,EAAAA,YAAAA,GAC5CC,EAAU,EACVd,MAA2D,EAC3De,EAAU,EACV;IAEA,IAAIf,MAAM,CAACC,eAAe,EAAE;MAC1B,OAAO,CAAC;IACV;IAoBA,IACaM,CAAC,GAIVP,MAAM,CAJRM,SAAS;MACKJ,IAAI,GAGhBF,MAAM,CAHRQ,YAAY;MACQS,SAAS,GAE3BjB,MAAM,CAFRgB,kBAAkB;MAClBE,QAAAA,GACElB,MAAM,CADRkB,QAAAA;IAGF,IAAMC,eAAe;MAAA,IAAA,EAAA,QAAA,MAAA,CAAA,KAAA;MAAA,IAAA,EAAA,YAAA,GAAIpB,IAAY,EAAK;QAExC,IAAMqB,SAAS,GACb,CAACrB,IAAI,GAAGgB,EAAE,GAAGA,EAAE,GAAGR,CAAC,GAAGO,EAAE,GAAGA,EAAE,KAAKlB,IAAI,CAACyB,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGnB,IAAI,CAAC,GAAGK,CAAC,CAAC;QACjE,IAAMI,CAAC,GAAGT,IAAI,GAAG,CAAC,GAAGN,IAAI,CAACa,IAAI,CAACF,CAAC,GAAGR,IAAI,CAAC;QACxC,OACE,IAAI,IAAK,CAAC,CAAC,GAAGA,IAAI,GAAIY,CAAC,CAAC,GAAGf,IAAI,CAAC0B,GAAG,CAAEL,SAAS,GAAG,IAAI,GAAIG,SAAS,CAAC,GACnEF,QAAQ;MAEZ,CAAC;MAAA,EAAA,CAAA,QAAA;QAAA,EAAA,EAhGQ,EAAA;QAAA,CAAA,E;YAAA,EAAA;QAAA,IAAA,E;mBAXS,SAAA;QAAA,QAAA,EAAA;MAAA;MAAA,EAAA,CAAA,UAAA,GAAA,+BAAA;MAAA,EAAA,CAAA,aAAA;MAAA,EAAA,CAAA,cAAA,GAAA,EAAA;MAAA,EAAA,CAAA,SAAA;MAAA,OAAA,EAAA;IAAA,GA2GjB;IAGD,OAAO9B,UAAU,CAAC;MAAEC,GAAG,EAAE,CAAC;MAAEC,GAAG,EAAE,GAAG;MAAEC,IAAI,EAAE4B;IAAgB,CAAC,CAAC;EAChE,CAAA;EAAA,EAAA,CAAA,QAAA;IAAA,UAAA,EArEMnB;EAAOK;EAAAA,EAAAA,CAAAA,UAAAA,GAAAA,gCAAAA;EAAAA,EAAAA,CAAAA,aAAAA;EAAAA,EAAAA,CAAAA,cAAAA,GAAAA,EAAAA;EAAAA,EAAAA,CAAAA,SAAAA;EAAAA,OAAAA,EAAAA;AAAAA;AAqEb,IAAA,iCAAA;EAAA,IAAA;EAAA,QAAA;EAAA,SAAA;AAAA;AAEA,WAAgBkB,kCAAkCA;EAAAA,IAAAA,EAAAA,QAAAA,MAAAA,CAAAA,KAAAA;EAAAA,IAAAA,EAAAA,YAAAA,GAChDC,SAA+B,EAC/BC,mBAKC,EACuC;IAExC,IAAQC,OAAAA,GAAYF,SAAS,CAArBE,OAAAA;IAER,IAAQX,EAAE,GAAoBU,mBAAmB,CAAzCV,EAAE;MAAED,EAAE,GAAgBW,mBAAmB,CAArCX,EAAE;MAAEX,MAAM,GAAQsB,mBAAmB,CAAjCtB,MAAM;MAAEwB,CAAAA,GAAMF,mBAAmB,CAAzBE,CAAAA;IAExB,IAAMC,wBAAwB,GAAGhC,IAAI,CAACyB,GAAG,CAAC,CAAClB,MAAM,GAAGwB,CAAC,CAAC;IACtD,IAAME,wBAAwB,GAC5BH,OAAO,GAAGE,wBAAwB,IAAId,EAAE,GAAG,CAACC,EAAE,GAAGZ,MAAM,GAAGW,EAAE,IAAIa,CAAC,CAAC;IAEpE,IAAMG,wBAAwB,GAC5BF,wBAAwB,IACvBb,EAAE,IAAIY,CAAC,GAAGxB,MAAM,GAAG,CAAC,CAAC,GAAGwB,CAAC,GAAGb,EAAE,GAAGX,MAAM,GAAGA,MAAM,CAAC;IAEpD,OAAO;MACL4B,QAAQ,EAAEF,wBAAwB;MAClCG,QAAQ,EAAEF;IACZ,CAAC;EACH,CAAA;EAAA,EAAA,CAAA,QAAA;EAAA,EAAA,CAAA,UAAA,GAAA,iCAAA;EAAA,EAAA,CAAA,aAAA;EAAA,EAAA,CAAA,cAAA,GAAA,EAAA;EAAA,EAAA,CAAA,SAAA;EAAA,OAAA,EAAA;AAAA;AAAA,IAAA,iCAAA;EAAA,IAAA;EAAA,QAAA;EAAA,SAAA;AAAA;AAEA,WAAgBG,6BAA6BA;EAAAA,IAAAA,EAAAA,QAAAA,MAAAA,CAAAA,KAAAA;EAAAA,IAAAA,EAAAA,YAAAA,GAC3CT,SAA+B,EAC/BC,mBAOC,EACuC;IAExC,IAAQC,OAAO,GAAwBF,SAAS,CAAxCE,OAAO;MAAE/B,OAAO,GAAe6B,SAAS,CAA/B7B,OAAO;MAAEqC,QAAAA,GAAaR,SAAS,CAAtBQ,QAAAA;IAE1B,IAAQ9B,IAAI,GAAwBuB,mBAAmB,CAA/CvB,IAAI;MAAEyB,CAAC,GAAqBF,mBAAmB,CAAzCE,CAAC;MAAExB,MAAM,GAAasB,mBAAmB,CAAtCtB,MAAM;MAAEC,MAAAA,GAAWqB,mBAAmB,CAA9BrB,MAAAA;IAEzB,IAAMW,EAAE,GAAG,CAACiB,QAAQ;IACpB,IAAMlB,EAAE,GAAGY,OAAO,GAAG/B,OAAO;IAE5B,IAAMuC,IAAI,GAAGtC,IAAI,CAACuC,GAAG,CAAC/B,MAAM,GAAGuB,CAAC,CAAC;IACjC,IAAMS,IAAI,GAAGxC,IAAI,CAACyC,GAAG,CAACjC,MAAM,GAAGuB,CAAC,CAAC;IAGjC,IAAMW,mBAAmB,GAAG1C,IAAI,CAACyB,GAAG,CAAC,CAACnB,IAAI,GAAGC,MAAM,GAAGwB,CAAC,CAAC;IACxD,IAAMY,gBAAgB,GACpBD,mBAAmB,IAClBJ,IAAI,IAAI,CAACnB,EAAE,GAAGb,IAAI,GAAGC,MAAM,GAAGW,EAAE,IAAIV,MAAM,CAAC,GAAGU,EAAE,GAAGsB,IAAI,CAAC;IAE3D,IAAMI,mBAAmB,GAAGd,OAAO,GAAGa,gBAAgB;IAEtD,IAAME,mBAAmB,GACvBvC,IAAI,GAAGC,MAAM,GAAGoC,gBAAgB,GAChCD,mBAAmB,IAChBF,IAAI,IAAIrB,EAAE,GAAGb,IAAI,GAAGC,MAAM,GAAGW,EAAE,CAAC,GAAGV,MAAM,GAAGU,EAAE,GAAGoB,IAAI,CAAC;IAE3D,OAAO;MAAEH,QAAQ,EAAES,mBAAmB;MAAER,QAAQ,EAAES;IAAoB,CAAC;EACzE,CAAA;EAAA,EAAA,CAAA,QAAA;EAAA,EAAA,CAAA,UAAA,GAAA,iCAAA;EAAA,EAAA,CAAA,aAAA;EAAA,EAAA,CAAA,cAAA,GAAA,EAAA;EAAA,EAAA,CAAA,SAAA;EAAA,OAAA,EAAA;AAAA;AAAA,IAAA,gCAAA;EAAA,IAAA;EAAA,QAAA;EAAA,SAAA;AAAA;AAEA,WAAgBC,iCAAiCA;EAAAA,IAAAA,EAAAA,QAAAA,MAAAA,CAAAA,KAAAA;EAAAA,IAAAA,EAAAA,YAAAA,GAC/ClB,SAA+B,EAC/BxB,MAGG,EAKH;IAEA,IAAQ0B,OAAO,GAAoCF,SAAS,CAApDE,OAAO;MAAEM,QAAQ,GAA0BR,SAAS,CAA3CQ,QAAQ;MAAEW,UAAU,GAAcnB,SAAS,CAAjCmB,UAAU;MAAEhD,OAAAA,GAAY6B,SAAS,CAArB7B,OAAAA;IAEvC,IAAMiD,cAAc,GAAG5C,MAAM,CAAC6C,iBAAiB,GAC1ClD,OAAO,GAAG+B,OAAO,IAAIiB,UAAU,GAAGjB,OAAO,IACzC/B,OAAO,GAAG+B,OAAO,IAAIiB,UAAU,GAAGjB,OAAQ,GAC3C,KAAK;IAET,IAAMoB,UAAU,GAAGlD,IAAI,CAACC,GAAG,CAACmC,QAAQ,CAAC,GAAGhC,MAAM,CAACgB,kBAAkB;IACjE,IAAM+B,cAAc,GAClBnD,IAAI,CAACC,GAAG,CAAC6B,OAAO,GAAG/B,OAAO,CAAC,GAAGK,MAAM,CAACgD,yBAAyB;IAEhE,OAAO;MAAEJ,cAAc,EAAdA,cAAc;MAAEE,UAAU,EAAVA,UAAU;MAAEC,cAAAA,EAAAA;IAAe,CAAC;EACvD,CAAA;EAAA,EAAA,CAAA,QAAA;EAAA,EAAA,CAAA,UAAA,GAAA,gCAAA;EAAA,EAAA,CAAA,aAAA;EAAA,EAAA,CAAA,cAAA,GAAA,EAAA;EAAA,EAAA,CAAA,SAAA;EAAA,OAAA,EAAA;AAAA","sourcesContent":["import { Animation, AnimatableValue, Timestamp } from '../commonTypes';\n\nexport type SpringConfig = {\n  stiffness?: number;\n  overshootClamping?: boolean;\n  restDisplacementThreshold?: number;\n  restSpeedThreshold?: number;\n  velocity?: number;\n} & (\n  | {\n      mass?: number;\n      damping?: number;\n      duration?: never;\n      dampingRatio?: never;\n    }\n  | {\n      mass?: never;\n      damping?: never;\n      duration?: number;\n      dampingRatio?: number;\n    }\n);\n\nexport interface SpringConfigInner {\n  useDuration: boolean;\n  configIsInvalid: boolean;\n}\n\nexport interface SpringAnimation extends Animation<SpringAnimation> {\n  current: AnimatableValue;\n  toValue: AnimatableValue;\n  velocity: number;\n  lastTimestamp: Timestamp;\n  startTimestamp: Timestamp;\n  startValue: number;\n  zeta: number;\n  omega0: number;\n  omega1: number;\n}\n\nexport interface InnerSpringAnimation\n  extends Omit<SpringAnimation, 'toValue' | 'current'> {\n  toValue: number;\n  current: number;\n}\n\nfunction bisectRoot({\n  min,\n  max,\n  func,\n  maxIterations = 20,\n}: {\n  min: number;\n  max: number;\n  func: (x: number) => number;\n  maxIterations?: number;\n}) {\n  'worklet';\n  const ACCURACY = 0.00005;\n  let idx = maxIterations;\n  let current = (max + min) / 2;\n  while (Math.abs(func(current)) > ACCURACY && idx > 0) {\n    idx -= 1;\n\n    if (func(current) < 0) {\n      min = current;\n    } else {\n      max = current;\n    }\n    current = (min + max) / 2;\n  }\n  return current;\n}\n\nexport function initialCalculations(\n  mass = 0,\n  config: Record<keyof SpringConfig, any> & SpringConfigInner\n): {\n  zeta: number;\n  omega0: number;\n  omega1: number;\n} {\n  'worklet';\n\n  if (config.configIsInvalid) {\n    return { zeta: 0, omega0: 0, omega1: 0 };\n  }\n\n  if (config.useDuration) {\n    const { stiffness: k, dampingRatio: zeta } = config;\n\n    /** omega0 and omega1 denote angular frequency and natural angular frequency, see this link for formulas:\n     *  https://courses.lumenlearning.com/suny-osuniversityphysics/chapter/15-5-damped-oscillations/\n     */\n    const omega0 = Math.sqrt(k / mass);\n    const omega1 = omega0 * Math.sqrt(1 - zeta ** 2);\n\n    return { zeta, omega0, omega1 };\n  } else {\n    const { damping: c, mass: m, stiffness: k } = config;\n\n    const zeta = c / (2 * Math.sqrt(k * m)); // damping ratio\n    const omega0 = Math.sqrt(k / m); // undamped angular frequency of the oscillator (rad/ms)\n    const omega1 = omega0 * Math.sqrt(1 - zeta ** 2); // exponential decay\n\n    return { zeta, omega0, omega1 };\n  }\n}\n\nexport function calcuateNewMassToMatchDuration(\n  x0: number,\n  config: Record<keyof SpringConfig, any> & SpringConfigInner,\n  v0: number\n) {\n  'worklet';\n  if (config.configIsInvalid) {\n    return 0;\n  }\n\n  /** Use this formula: https://phys.libretexts.org/Bookshelves/University_Physics/Book%3A_University_Physics_(OpenStax)/Book%3A_University_Physics_I_-_Mechanics_Sound_Oscillations_and_Waves_(OpenStax)/15%3A_Oscillations/15.06%3A_Damped_Oscillations\n       * to find the asympotote and esitmate the damping that gives us the expected duration \n\n            ⎛ ⎛ c⎞           ⎞           \n            ⎜-⎜──⎟ ⋅ duration⎟           \n            ⎝ ⎝2m⎠           ⎠           \n       A ⋅ e                   = treshold\n\n \n      Amplitude calculated using \"Conservation of energy\"\n                       _________________\n                      ╱      2         2\n                     ╱ m ⋅ v0  + k ⋅ x0 \n      amplitude =   ╱  ─────────────────\n                  ╲╱           k        \n\n      And replace mass with damping ratio which is provided: m = (c^2)/(4 * k * zeta^2)   \n      */\n  const {\n    stiffness: k,\n    dampingRatio: zeta,\n    restSpeedThreshold: threshold,\n    duration,\n  } = config;\n\n  const durationForMass = (mass: number) => {\n    'worklet';\n    const amplitude =\n      (mass * v0 * v0 + k * x0 * x0) / (Math.exp(1 - 0.5 * zeta) * k);\n    const c = zeta * 2 * Math.sqrt(k * mass);\n    return (\n      1000 * ((-2 * mass) / c) * Math.log((threshold * 0.01) / amplitude) -\n      duration\n    );\n  };\n\n  // Bisection turns out to be much faster than Newton's method in our case\n  return bisectRoot({ min: 0, max: 100, func: durationForMass });\n}\n\nexport function criticallyDampedSpringCalculations(\n  animation: InnerSpringAnimation,\n  precalculatedValues: {\n    v0: number;\n    x0: number;\n    omega0: number;\n    t: number;\n  }\n): { position: number; velocity: number } {\n  'worklet';\n  const { toValue } = animation;\n\n  const { v0, x0, omega0, t } = precalculatedValues;\n\n  const criticallyDampedEnvelope = Math.exp(-omega0 * t);\n  const criticallyDampedPosition =\n    toValue - criticallyDampedEnvelope * (x0 + (v0 + omega0 * x0) * t);\n\n  const criticallyDampedVelocity =\n    criticallyDampedEnvelope *\n    (v0 * (t * omega0 - 1) + t * x0 * omega0 * omega0);\n\n  return {\n    position: criticallyDampedPosition,\n    velocity: criticallyDampedVelocity,\n  };\n}\n\nexport function underDampedSpringCalculations(\n  animation: InnerSpringAnimation,\n  precalculatedValues: {\n    zeta: number;\n    v0: number;\n    x0: number;\n    omega0: number;\n    omega1: number;\n    t: number;\n  }\n): { position: number; velocity: number } {\n  'worklet';\n  const { toValue, current, velocity } = animation;\n\n  const { zeta, t, omega0, omega1 } = precalculatedValues;\n\n  const v0 = -velocity;\n  const x0 = toValue - current;\n\n  const sin1 = Math.sin(omega1 * t);\n  const cos1 = Math.cos(omega1 * t);\n\n  // under damped\n  const underDampedEnvelope = Math.exp(-zeta * omega0 * t);\n  const underDampedFrag1 =\n    underDampedEnvelope *\n    (sin1 * ((v0 + zeta * omega0 * x0) / omega1) + x0 * cos1);\n\n  const underDampedPosition = toValue - underDampedFrag1;\n  // This looks crazy -- it's actually just the derivative of the oscillation function\n  const underDampedVelocity =\n    zeta * omega0 * underDampedFrag1 -\n    underDampedEnvelope *\n      (cos1 * (v0 + zeta * omega0 * x0) - omega1 * x0 * sin1);\n\n  return { position: underDampedPosition, velocity: underDampedVelocity };\n}\n\nexport function isAnimationTerminatingCalculation(\n  animation: InnerSpringAnimation,\n  config: Partial<SpringConfig> &\n    Required<\n      Pick<SpringConfig, 'restSpeedThreshold' | 'restDisplacementThreshold'>\n    >\n): {\n  isOvershooting: boolean;\n  isVelocity: boolean;\n  isDisplacement: boolean;\n} {\n  'worklet';\n  const { toValue, velocity, startValue, current } = animation;\n\n  const isOvershooting = config.overshootClamping\n    ? (current > toValue && startValue < toValue) ||\n      (current < toValue && startValue > toValue)\n    : false;\n\n  const isVelocity = Math.abs(velocity) < config.restSpeedThreshold;\n  const isDisplacement =\n    Math.abs(toValue - current) < config.restDisplacementThreshold;\n\n  return { isOvershooting, isVelocity, isDisplacement };\n}\n"]},"metadata":{},"sourceType":"module"}