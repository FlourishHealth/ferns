{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/josh/src/ui/node_modules/react-native-tabular-grid-markdown-view/src/Grid.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport style from './style';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Grid = function (_Component) {\n  _inherits(Grid, _Component);\n  var _super = _createSuper(Grid);\n  function Grid() {\n    var _this;\n    _classCallCheck(this, Grid);\n    _this = _super.apply(this, arguments);\n    _this.columns = [];\n    _this.rowHeights = {};\n    return _this;\n  }\n  _createClass(Grid, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return {\n        rntgAddRowToGrid: this.addRowToGrid.bind(this),\n        rntgMeasureCell: this.measureCell.bind(this)\n      };\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      if (nextState) {\n        if (!this.state || Object.keys(nextState).join('.') !== Object.keys(this.state).join('.')) {\n          return true;\n        }\n        if (nextState.rowHeights) {\n          for (var rowId of Object.keys(nextState.rowHeights)) {\n            if (nextState.rowHeights[rowId] !== this.state.rowHeights[rowId]) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    }\n  }, {\n    key: \"lastChild\",\n    get: function get() {\n      return this.props.children[this.props.children.length - 1];\n    }\n  }, {\n    key: \"addRowToGrid\",\n    value: function addRowToGrid(row) {\n      this.mapRowIntoColumns(row);\n      this.updateIfRowIsLast(row);\n    }\n  }, {\n    key: \"measureCell\",\n    value: function measureCell(rowId, cellId, x, y, w, h) {\n      this.rowHeights[rowId] = Math.max(h, this.rowHeights[rowId] || 0);\n      this.updateIfCellIsLast(rowId, cellId);\n    }\n  }, {\n    key: \"mapRowIntoColumns\",\n    value: function mapRowIntoColumns(row) {\n      var _this2 = this;\n      row.props.children.forEach(function (cell, index) {\n        if (!_this2.columns[index]) {\n          _this2.columns[index] = [];\n        }\n        _this2.columns[index].push(cell);\n      });\n    }\n  }, {\n    key: \"updateIfRowIsLast\",\n    value: function updateIfRowIsLast(row) {\n      if (row.props.id === this.lastChild.props.id) {\n        this.setState({\n          columns: this.columns\n        });\n      }\n    }\n  }, {\n    key: \"updateIfCellIsLast\",\n    value: function updateIfCellIsLast(rowId, cellId) {\n      if (rowId === this.lastChild.props.id) {\n        var lastCell = this.lastChild.props.children[this.lastChild.props.children.length - 1];\n        if (cellId === lastCell.props.id) {\n          this.setState({\n            rowHeights: _objectSpread({}, this.rowHeights)\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      if (!this.columns.length) {\n        return _jsxDEV(View, {\n          style: style.grid,\n          children: this.props.children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 20\n        }, this);\n      }\n      return _jsxDEV(View, {\n        style: [style.grid, style.gridColumn, this.props.style],\n        children: this.columns.map(function (col, i) {\n          return _jsxDEV(View, {\n            style: [style.column],\n            children: col.map(function (cell, index) {\n              return _jsxDEV(View, {\n                style: [{\n                  minHeight: _this3.state.rowHeights && _this3.state.rowHeights[index + 1]\n                }],\n                children: cell\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 21\n              }, _this3);\n            })\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, _this3);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n  return Grid;\n}(Component);\nGrid.propTypes = {\n  children: PropTypes.arrayOf(PropTypes.element).isRequired\n};\nGrid.childContextTypes = {\n  rntgAddRowToGrid: PropTypes.func,\n  rntgMeasureCell: PropTypes.func\n};\nexport { Grid as default };","map":{"version":3,"names":["PropTypes","React","Component","View","style","jsxDEV","_jsxDEV","Grid","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","columns","rowHeights","_createClass","key","value","getChildContext","rntgAddRowToGrid","addRowToGrid","bind","rntgMeasureCell","measureCell","shouldComponentUpdate","nextProps","nextState","state","Object","keys","join","rowId","get","props","children","length","row","mapRowIntoColumns","updateIfRowIsLast","cellId","x","y","w","h","Math","max","updateIfCellIsLast","_this2","forEach","cell","index","push","id","lastChild","setState","lastCell","_objectSpread","render","_this3","grid","fileName","_jsxFileName","lineNumber","columnNumber","gridColumn","map","col","i","column","minHeight","propTypes","arrayOf","element","isRequired","childContextTypes","func","default"],"sources":["/Users/josh/src/ui/node_modules/react-native-tabular-grid-markdown-view/src/Grid.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport {View} from 'react-native';\n\nimport style from './style';\n\nexport default class Grid extends Component {\n\n    static propTypes = {\n        children: PropTypes.arrayOf(PropTypes.element).isRequired\n    };\n\n    static childContextTypes = {\n        rntgAddRowToGrid: PropTypes.func,\n        rntgMeasureCell: PropTypes.func\n    };\n\n    constructor() {\n        super(...arguments);\n        this.columns = [];\n        this.rowHeights = {};\n    }\n\n    getChildContext() {\n        return {\n            rntgAddRowToGrid: this.addRowToGrid.bind(this),\n            rntgMeasureCell: this.measureCell.bind(this)\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState) {\n            if (!this.state || Object.keys(nextState).join('.') !== Object.keys(this.state).join('.')) {\n                return true;\n            }\n            if (nextState.rowHeights) {\n                for (let rowId of Object.keys(nextState.rowHeights)) {\n                    if (nextState.rowHeights[rowId] !== this.state.rowHeights[rowId]) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    get lastChild() {\n        return this.props.children[this.props.children.length-1];\n    }\n\n    addRowToGrid(row) {\n        this.mapRowIntoColumns(row);\n        this.updateIfRowIsLast(row);\n    }\n\n    measureCell(rowId, cellId, x, y, w, h) {\n        this.rowHeights[rowId] = Math.max(h, this.rowHeights[rowId]||0);\n        this.updateIfCellIsLast(rowId, cellId);\n    }\n\n    mapRowIntoColumns(row) {\n        row.props.children.forEach((cell, index) => {\n            if (!this.columns[index]) {\n                this.columns[index] = [];\n            }\n            this.columns[index].push(cell);\n        });\n    }\n\n    updateIfRowIsLast(row) {\n        //if we have all rows, save the column structure into 'state' so\n        //that we can render it\n        if (row.props.id === this.lastChild.props.id) {\n            this.setState({\n                columns: this.columns\n            });\n        }\n    }\n\n    updateIfCellIsLast(rowId, cellId) {\n        if (rowId === this.lastChild.props.id) {\n            const lastCell = this.lastChild.props.children[this.lastChild.props.children.length-1];\n            if (cellId === lastCell.props.id) {\n                this.setState({\n                    rowHeights: {...this.rowHeights}\n                });\n            }\n        }\n    }\n\n    render() {\n        if (!this.columns.length) {\n            return <View style={style.grid}>{this.props.children}</View>;\n        }\n        return (\n            <View style={[style.grid, style.gridColumn, this.props.style]}>\n            {this.columns.map((col, i) => (\n                <View key={i} style={[style.column]}>\n                {col.map((cell, index) => (\n                    <View key={index} style={[\n                        {minHeight: this.state.rowHeights && this.state.rowHeights[index+1]}\n                    ]}>\n                        {cell}\n                    </View>\n                ))}\n                </View>\n            ))}\n            </View>\n        );\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}