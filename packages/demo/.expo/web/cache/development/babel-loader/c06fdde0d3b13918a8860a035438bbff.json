{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport { Box } from \"./Box\";\nimport { Button } from \"./Button\";\nimport { Icon } from \"./Icon\";\nimport { IconButton } from \"./IconButton\";\nimport { Text } from \"./Text\";\nimport { Unifier } from \"./Unifier\";\nfunction getKey(id) {\n  return `@FernsUI:${id}`;\n}\nexport var hideBanner = function hideBanner(id) {\n  console.debug(`[banner] Hiding ${getKey(id)} `);\n  return Unifier.storage.setItem(getKey(id), \"true\");\n};\nvar BannerType = {\n  ACTION: \"action\",\n  DISMISS: \"dismiss\",\n  PERMANENT: \"permanent\",\n  CUSTOM_BUTTON: \"customButton\"\n};\nexport var Banner = function Banner(_ref) {\n  var id = _ref.id,\n    customButtonProps = _ref.customButtonProps,\n    text = _ref.text,\n    subtext = _ref.subtext,\n    _ref$color = _ref.color,\n    color = _ref$color === void 0 ? \"secondaryDark\" : _ref$color,\n    iconName = _ref.iconName,\n    _ref$textColor = _ref.textColor,\n    textColor = _ref$textColor === void 0 ? \"white\" : _ref$textColor,\n    _ref$negativeXMargin = _ref.negativeXMargin,\n    negativeXMargin = _ref$negativeXMargin === void 0 ? 0 : _ref$negativeXMargin,\n    width = _ref.width,\n    shape = _ref.shape,\n    type = _ref.type,\n    _onClick = _ref.onClick;\n  var ACTION = BannerType.ACTION,\n    DISMISS = BannerType.DISMISS,\n    CUSTOM_BUTTON = BannerType.CUSTOM_BUTTON;\n  var _useState = useState(type !== DISMISS),\n    _useState2 = _slicedToArray(_useState, 2),\n    show = _useState2[0],\n    setShow = _useState2[1];\n  useEffect(function () {\n    if (type === DISMISS) {\n      void Unifier.storage.getItem(getKey(id)).then(function (isSeen) {\n        console.debug(`[banner] ${getKey(id)} seen? ${isSeen}`);\n        setShow(!isSeen);\n      });\n    }\n  }, [id, type]);\n  var dismiss = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (type !== DISMISS) {\n        return;\n      }\n      yield hideBanner(id);\n      setShow(false);\n    });\n    return function dismiss() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var renderButton = function renderButton() {\n    var _a, _b, _c;\n    if (type === CUSTOM_BUTTON) {\n      return React.createElement(Button, Object.assign({}, customButtonProps, {\n        color: (_a = customButtonProps === null || customButtonProps === void 0 ? void 0 : customButtonProps.color) !== null && _a !== void 0 ? _a : \"primary\",\n        size: (_b = customButtonProps === null || customButtonProps === void 0 ? void 0 : customButtonProps.size) !== null && _b !== void 0 ? _b : \"sm\",\n        text: (_c = customButtonProps === null || customButtonProps === void 0 ? void 0 : customButtonProps.text) !== null && _c !== void 0 ? _c : \"\",\n        onClick: _onClick\n      }));\n    } else if (type === ACTION) {\n      return React.createElement(Box, {\n        alignItems: \"center\",\n        display: \"block\",\n        justifyContent: \"center\",\n        width: 40\n      }, React.createElement(IconButton, {\n        accessibilityLabel: \"\",\n        icon: \"arrow-right\",\n        iconColor: textColor,\n        prefix: \"fas\",\n        onClick: function onClick() {\n          return _onClick === null || _onClick === void 0 ? void 0 : _onClick();\n        }\n      }));\n    } else if (type === DISMISS) {\n      return React.createElement(Box, {\n        alignItems: \"center\",\n        display: \"block\",\n        justifyContent: \"center\",\n        width: 40\n      }, React.createElement(IconButton, {\n        accessibilityLabel: \"\",\n        icon: \"times-circle\",\n        iconColor: textColor,\n        prefix: \"fas\",\n        onClick: dismiss\n      }));\n    } else {\n      return null;\n    }\n  };\n  if (!show) {\n    return null;\n  }\n  if (type === ACTION && !_onClick || type === CUSTOM_BUTTON && !_onClick) {\n    console.warn(\"Banners with type action require an onClick property.\");\n  }\n  var negativeMargin = negativeXMargin * -4;\n  return React.createElement(Box, {\n    color: color,\n    dangerouslySetInlineStyle: {\n      __style: {\n        marginLeft: negativeMargin,\n        marginRight: negativeMargin\n      }\n    },\n    direction: \"row\",\n    justifyContent: \"between\",\n    paddingX: 3,\n    paddingY: 2,\n    rounding: shape,\n    shadow: true,\n    width: width || Unifier.utils.dimensions().width || \"100%\",\n    onClick: type === DISMISS ? dismiss : undefined\n  }, iconName && (React.createElement(Box, {\n    justifyContent: \"center\",\n    width: 32\n  }, React.createElement(Icon, {\n    color: textColor,\n    name: iconName,\n    size: \"lg\"\n  }))), React.createElement(Box, {\n    alignItems: \"center\",\n    direction: \"column\",\n    flex: \"shrink\",\n    justifyContent: \"center\"\n  }, React.createElement(Box, {\n    paddingY: 1\n  }, React.createElement(Text, {\n    align: \"center\",\n    color: textColor,\n    weight: \"bold\"\n  }, text)), subtext && (React.createElement(Box, {\n    paddingY: 1\n  }, React.createElement(Text, {\n    align: \"center\",\n    color: textColor\n  }, subtext)))), renderButton());\n};","map":{"version":3,"sources":["../src/Banner.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Box } from \"./Box\";\nimport { Button } from \"./Button\";\nimport { Icon } from \"./Icon\";\nimport { IconButton } from \"./IconButton\";\nimport { Text } from \"./Text\";\nimport { Unifier } from \"./Unifier\";\nfunction getKey(id) {\n    return `@FernsUI:${id}`;\n}\nexport const hideBanner = (id) => {\n    console.debug(`[banner] Hiding ${getKey(id)} `);\n    return Unifier.storage.setItem(getKey(id), \"true\");\n};\nconst BannerType = {\n    ACTION: \"action\",\n    DISMISS: \"dismiss\",\n    PERMANENT: \"permanent\", // deprecated in favor of default behavior\n    CUSTOM_BUTTON: \"customButton\",\n};\nexport const Banner = ({ id, customButtonProps, text, subtext, color = \"secondaryDark\", iconName, textColor = \"white\", negativeXMargin = 0, width, shape, type, onClick, }) => {\n    // If the banner is not type dismiss, show it immediately.\n    const { ACTION, DISMISS, CUSTOM_BUTTON } = BannerType;\n    const [show, setShow] = useState(type !== DISMISS);\n    // Load seen from async storage.\n    useEffect(() => {\n        if (type === DISMISS) {\n            void Unifier.storage.getItem(getKey(id)).then((isSeen) => {\n                console.debug(`[banner] ${getKey(id)} seen? ${isSeen}`);\n                setShow(!isSeen);\n            });\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [id, type]);\n    const dismiss = async () => {\n        if (type !== DISMISS) {\n            return;\n        }\n        await hideBanner(id);\n        setShow(false);\n    };\n    const renderButton = () => {\n        var _a, _b, _c;\n        if (type === CUSTOM_BUTTON) {\n            return (React.createElement(Button, Object.assign({}, customButtonProps, { color: (_a = customButtonProps === null || customButtonProps === void 0 ? void 0 : customButtonProps.color) !== null && _a !== void 0 ? _a : \"primary\", size: (_b = customButtonProps === null || customButtonProps === void 0 ? void 0 : customButtonProps.size) !== null && _b !== void 0 ? _b : \"sm\", text: (_c = customButtonProps === null || customButtonProps === void 0 ? void 0 : customButtonProps.text) !== null && _c !== void 0 ? _c : \"\", onClick: onClick })));\n        }\n        else if (type === ACTION) {\n            return (React.createElement(Box, { alignItems: \"center\", display: \"block\", justifyContent: \"center\", width: 40 },\n                React.createElement(IconButton, { accessibilityLabel: \"\", icon: \"arrow-right\", iconColor: textColor, prefix: \"fas\", onClick: () => onClick === null || onClick === void 0 ? void 0 : onClick() })));\n        }\n        else if (type === DISMISS) {\n            return (React.createElement(Box, { alignItems: \"center\", display: \"block\", justifyContent: \"center\", width: 40 },\n                React.createElement(IconButton, { accessibilityLabel: \"\", icon: \"times-circle\", iconColor: textColor, prefix: \"fas\", onClick: dismiss })));\n        }\n        else {\n            return null;\n        }\n    };\n    if (!show) {\n        return null;\n    }\n    if ((type === ACTION && !onClick) || (type === CUSTOM_BUTTON && !onClick)) {\n        console.warn(\"Banners with type action require an onClick property.\");\n    }\n    const negativeMargin = negativeXMargin * -4;\n    return (React.createElement(Box, { color: color, dangerouslySetInlineStyle: {\n            __style: {\n                marginLeft: negativeMargin,\n                marginRight: negativeMargin,\n            },\n        }, direction: \"row\", justifyContent: \"between\", paddingX: 3, paddingY: 2, rounding: shape, shadow: true, width: width || Unifier.utils.dimensions().width || \"100%\", onClick: type === DISMISS ? dismiss : undefined },\n        iconName && (React.createElement(Box, { justifyContent: \"center\", width: 32 },\n            React.createElement(Icon, { color: textColor, name: iconName, size: \"lg\" }))),\n        React.createElement(Box, { alignItems: \"center\", direction: \"column\", flex: \"shrink\", justifyContent: \"center\" },\n            React.createElement(Box, { paddingY: 1 },\n                React.createElement(Text, { align: \"center\", color: textColor, weight: \"bold\" }, text)),\n            subtext && (React.createElement(Box, { paddingY: 1 },\n                React.createElement(Text, { align: \"center\", color: textColor }, subtext)))),\n        renderButton()));\n};\n//# sourceMappingURL=Banner.js.map"]},"metadata":{},"sourceType":"module"}