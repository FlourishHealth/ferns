{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"/Users/josh/src/ui/node_modules/react-native-actions-sheet/dist/src/index.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport React, { forwardRef, useCallback, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { GestureHandlerRootView, PanGestureHandler } from 'react-native-gesture-handler';\nimport { DraggableNodesContext, PanGestureRefContext } from './context';\nimport EventManager, { actionSheetEventManager } from './eventmanager';\nimport { RouterContext, RouterParamsContext, useRouter } from './hooks/use-router';\nimport { resolveScrollRef, ScrollState } from './hooks/use-scroll-handlers';\nimport useSheetManager from './hooks/use-sheet-manager';\nimport { useKeyboard } from './hooks/useKeyboard';\nimport { SheetProvider, useProviderContext, useSheetIDContext, useSheetPayload, useSheetRef } from './provider';\nimport { getZIndexFromStack, isRenderedOnTop, SheetManager } from './sheetmanager';\nimport { styles } from './styles';\nimport { getElevation, SUPPORTED_ORIENTATIONS } from './utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar EVENTS_INTERNAL = {\n  safeAreaLayout: 'safeAreaLayout'\n};\nexport default forwardRef(function ActionSheet(_a, ref) {\n  var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n  var _r = _a.animated,\n    animated = _r === void 0 ? true : _r,\n    _s = _a.closeOnPressBack,\n    closeOnPressBack = _s === void 0 ? true : _s,\n    _t = _a.springOffset,\n    springOffset = _t === void 0 ? 50 : _t,\n    _u = _a.elevation,\n    elevation = _u === void 0 ? 5 : _u,\n    _v = _a.defaultOverlayOpacity,\n    defaultOverlayOpacity = _v === void 0 ? 0.3 : _v,\n    _w = _a.overlayColor,\n    overlayColor = _w === void 0 ? 'black' : _w,\n    _x = _a.closable,\n    closable = _x === void 0 ? true : _x,\n    _y = _a.closeOnTouchBackdrop,\n    closeOnTouchBackdrop = _y === void 0 ? true : _y,\n    onTouchBackdrop = _a.onTouchBackdrop,\n    _z = _a.drawUnderStatusBar,\n    drawUnderStatusBar = _z === void 0 ? false : _z,\n    _0 = _a.gestureEnabled,\n    gestureEnabled = _0 === void 0 ? false : _0,\n    _1 = _a.isModal,\n    isModal = _1 === void 0 ? true : _1,\n    _2 = _a.snapPoints,\n    snapPoints = _2 === void 0 ? [100] : _2,\n    _3 = _a.initialSnapIndex,\n    initialSnapIndex = _3 === void 0 ? 0 : _3,\n    _4 = _a.overdrawEnabled,\n    overdrawEnabled = _4 === void 0 ? true : _4,\n    _5 = _a.overdrawFactor,\n    overdrawFactor = _5 === void 0 ? 15 : _5,\n    _6 = _a.overdrawSize,\n    overdrawSize = _6 === void 0 ? 100 : _6,\n    _7 = _a.zIndex,\n    zIndex = _7 === void 0 ? 999 : _7,\n    _8 = _a.keyboardHandlerEnabled,\n    keyboardHandlerEnabled = _8 === void 0 ? true : _8,\n    ExtraOverlayComponent = _a.ExtraOverlayComponent,\n    payload = _a.payload,\n    safeAreaInsets = _a.safeAreaInsets,\n    routes = _a.routes,\n    initialRoute = _a.initialRoute,\n    _onBeforeShow = _a.onBeforeShow,\n    enableRouterBackNavigation = _a.enableRouterBackNavigation,\n    onBeforeClose = _a.onBeforeClose,\n    _9 = _a.enableGesturesInScrollView,\n    enableGesturesInScrollView = _9 === void 0 ? true : _9,\n    disableDragBeyondMinimumSnapPoint = _a.disableDragBeyondMinimumSnapPoint,\n    props = __rest(_a, [\"animated\", \"closeOnPressBack\", \"springOffset\", \"elevation\", \"defaultOverlayOpacity\", \"overlayColor\", \"closable\", \"closeOnTouchBackdrop\", \"onTouchBackdrop\", \"drawUnderStatusBar\", \"gestureEnabled\", \"isModal\", \"snapPoints\", \"initialSnapIndex\", \"overdrawEnabled\", \"overdrawFactor\", \"overdrawSize\", \"zIndex\", \"keyboardHandlerEnabled\", \"ExtraOverlayComponent\", \"payload\", \"safeAreaInsets\", \"routes\", \"initialRoute\", \"onBeforeShow\", \"enableRouterBackNavigation\", \"onBeforeClose\", \"enableGesturesInScrollView\", \"disableDragBeyondMinimumSnapPoint\"]);\n  snapPoints = snapPoints[snapPoints.length - 1] !== 100 ? __spreadArray(__spreadArray([], snapPoints, true), [100], false) : snapPoints;\n  var initialValue = useRef(-1);\n  var actionSheetHeight = useRef(0);\n  var safeAreaPaddings = useRef(safeAreaInsets || {\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0\n  });\n  var internalEventManager = React.useMemo(function () {\n    return new EventManager();\n  }, []);\n  var currentContext = useProviderContext();\n  var _currentSnapIndex = useRef(initialSnapIndex);\n  var sheetRef = useSheetRef();\n  var dimensionsRef = useRef({\n    width: 0,\n    height: 0,\n    portrait: true\n  });\n  var minTranslateValue = useRef(0);\n  var keyboardWasVisible = useRef(false);\n  var prevKeyboardHeight = useRef(0);\n  var id = useSheetIDContext();\n  var sheetId = props.id || id;\n  var lock = useRef(false);\n  var panViewRef = useRef(null);\n  var rootViewContainerRef = useRef(null);\n  var gestureBoundaries = useRef({});\n  var hiding = useRef(false);\n  var payloadRef = useRef(payload);\n  var sheetPayload = useSheetPayload();\n  var panHandlerRef = useRef();\n  var closing = useRef(false);\n  var draggableNodes = useRef([]);\n  var sheetLayoutRef = useRef();\n  var _10 = useState({\n      width: Dimensions.get('window').width,\n      height: 0,\n      portrait: true,\n      paddingBottom: (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding) ? 25 : 0\n    }),\n    dimensions = _10[0],\n    setDimensions = _10[1];\n  var rootViewLayoutEventValues = useRef({});\n  if (safeAreaInsets) {\n    safeAreaPaddings.current = safeAreaInsets;\n  }\n  var _11 = useSheetManager({\n      id: sheetId,\n      onHide: function onHide(data) {\n        hideSheet(undefined, data, true);\n      },\n      onBeforeShow: function onBeforeShow(data) {\n        var _a;\n        (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n        _onBeforeShow === null || _onBeforeShow === void 0 ? void 0 : _onBeforeShow(data);\n      },\n      onContextUpdate: function onContextUpdate() {\n        if (sheetId) {\n          SheetManager.add(sheetId, currentContext);\n          SheetManager.registerRef(sheetId, currentContext, {\n            current: _getRef()\n          });\n        }\n      }\n    }),\n    visible = _11.visible,\n    setVisible = _11.setVisible;\n  var animations = useMemo(function () {\n    return {\n      opacity: new Animated.Value(0),\n      translateY: new Animated.Value(0),\n      underlayTranslateY: new Animated.Value(100),\n      keyboardTranslate: new Animated.Value(0),\n      routeOpacity: new Animated.Value(0)\n    };\n  }, []);\n  var animationListeners = useRef({});\n  var router = useRouter({\n    routes: routes,\n    getRef: function getRef() {\n      return _getRef();\n    },\n    initialRoute: initialRoute,\n    onNavigate: props.onNavigate,\n    onNavigateBack: props.onNavigateBack,\n    routeOpacity: animations.routeOpacity\n  });\n  var routerRef = useRef(router);\n  payloadRef.current = payload;\n  routerRef.current = router;\n  var keyboard = useKeyboard(keyboardHandlerEnabled);\n  var prevSnapIndex = useRef(initialSnapIndex);\n  var draggableNodesContext = React.useMemo(function () {\n    return {\n      nodes: draggableNodes\n    };\n  }, []);\n  var notifyOffsetChange = function notifyOffsetChange(value) {\n    internalEventManager.publish('onoffsetchange', value);\n  };\n  var notifySnapIndexChanged = React.useCallback(function () {\n    var _a;\n    if (prevSnapIndex.current !== _currentSnapIndex.current) {\n      prevSnapIndex.current = _currentSnapIndex.current;\n      (_a = props.onSnapIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, _currentSnapIndex.current);\n    }\n  }, [props.onSnapIndexChange]);\n  var returnAnimation = React.useCallback(function (velocity) {\n    if (!animated) {\n      animations.translateY.setValue(initialValue.current);\n      return;\n    }\n    var config = props.openAnimationConfig;\n    var correctedValue = initialValue.current > minTranslateValue.current ? initialValue.current : 0;\n    notifyOffsetChange(correctedValue);\n    Animated.spring(animations.translateY, __assign(__assign({\n      toValue: initialValue.current,\n      useNativeDriver: true,\n      friction: 8\n    }, config), {\n      velocity: typeof velocity !== 'number' ? undefined : velocity\n    })).start();\n    notifySnapIndexChanged();\n  }, [animated, props.openAnimationConfig]);\n  var opacityAnimation = React.useCallback(function (opacity) {\n    Animated.timing(animations.opacity, {\n      duration: 150,\n      easing: Easing.in(Easing.ease),\n      toValue: opacity,\n      useNativeDriver: true\n    }).start();\n  }, []);\n  var hideAnimation = React.useCallback(function (vy, callback) {\n    if (!animated) {\n      callback === null || callback === void 0 ? void 0 : callback({\n        finished: true\n      });\n      return;\n    }\n    var config = props.closeAnimationConfig;\n    opacityAnimation(0);\n    var animation = Animated.spring(animations.translateY, __assign({\n      velocity: typeof vy !== 'number' ? 3.0 : vy + 1,\n      toValue: dimensionsRef.current.height * 1.3,\n      useNativeDriver: true\n    }, config));\n    animation.start();\n    setTimeout(function () {\n      animation.stop();\n      callback === null || callback === void 0 ? void 0 : callback({\n        finished: true\n      });\n    }, 150);\n  }, [animated, opacityAnimation, props.closeAnimationConfig]);\n  var getCurrentPosition = React.useCallback(function () {\n    return animations.translateY._value <= minTranslateValue.current + 5 ? 0 : animations.translateY._value;\n  }, []);\n  var getNextPosition = React.useCallback(function (snapIndex) {\n    return actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * snapPoints[snapIndex] / 100;\n  }, [snapPoints]);\n  var hardwareBackPressEvent = useRef();\n  var Root = isModal && !(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? Modal : Animated.View;\n  useEffect(function () {\n    var animationListener;\n    if (drawUnderStatusBar || props.onChange) {\n      animationListener = animations.translateY.addListener(function (value) {\n        var _a;\n        var correctedValue = value.value > minTranslateValue.current ? value.value : 0;\n        (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, correctedValue, actionSheetHeight.current);\n        if (drawUnderStatusBar) {\n          if (lock.current) return;\n          var correctedHeight = keyboard.keyboardShown ? dimensionsRef.current.height - (keyboard.keyboardHeight + safeAreaPaddings.current.bottom) : dimensionsRef.current.height - safeAreaPaddings.current.bottom;\n          var correctedOffset = keyboard.keyboardShown ? value.value - keyboard.keyboardHeight : value.value;\n          if (actionSheetHeight.current > correctedHeight - 1) {\n            if (correctedOffset < 100) {\n              animations.underlayTranslateY.setValue(Math.max(correctedOffset - 20, -20));\n            } else {\n              if (animations.underlayTranslateY._value < 100) {\n                animations.underlayTranslateY.setValue(100);\n              }\n            }\n          }\n        }\n      });\n    }\n    animationListeners.current.translateY = animationListener;\n    return function () {\n      animationListener && animations.translateY.removeListener(animationListener);\n    };\n  }, [props === null || props === void 0 ? void 0 : props.id, keyboard.keyboardShown, keyboard.keyboardHeight]);\n  var onSheetLayout = React.useCallback(function (event) {\n    var _a, _b;\n    sheetLayoutRef.current = __assign({}, event.nativeEvent.layout);\n    if (rootViewLayoutEventValues.current.resizing) return;\n    if (closing.current) return;\n    var rootViewHeight = (_a = dimensionsRef.current) === null || _a === void 0 ? void 0 : _a.height;\n    actionSheetHeight.current = event.nativeEvent.layout.height > dimensionsRef.current.height ? dimensionsRef.current.height : event.nativeEvent.layout.height;\n    minTranslateValue.current = rootViewHeight - (actionSheetHeight.current + safeAreaPaddings.current.bottom);\n    if (initialValue.current < 0) {\n      animations.translateY.setValue(rootViewHeight * 1.1);\n    }\n    var nextInitialValue = actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * snapPoints[_currentSnapIndex.current] / 100;\n    initialValue.current = (keyboard.keyboardShown || keyboardWasVisible.current) && initialValue.current <= nextInitialValue && initialValue.current >= minTranslateValue.current ? initialValue.current : nextInitialValue;\n    var sheetBottomEdgePosition = initialValue.current + actionSheetHeight.current * snapPoints[_currentSnapIndex.current] / 100;\n    var sheetPositionWithKeyboard = sheetBottomEdgePosition - (((_b = dimensionsRef.current) === null || _b === void 0 ? void 0 : _b.height) - keyboard.keyboardHeight);\n    initialValue.current = sheetPositionWithKeyboard > 0 ? initialValue.current - sheetPositionWithKeyboard : initialValue.current;\n    if (keyboard.keyboardShown) {\n      minTranslateValue.current = minTranslateValue.current - (keyboard.keyboardHeight + safeAreaPaddings.current.bottom);\n      keyboardWasVisible.current = true;\n      prevKeyboardHeight.current = keyboard.keyboardHeight;\n    } else {\n      keyboardWasVisible.current = false;\n    }\n    opacityAnimation(1);\n    setTimeout(function () {\n      returnAnimation();\n    }, 1);\n    if (initialValue.current > 100) {\n      if (lock.current) return;\n      animations.underlayTranslateY.setValue(100);\n    }\n    if (Platform.OS === 'web') {\n      document.body.style.overflowY = 'hidden';\n      document.documentElement.style.overflowY = 'hidden';\n    }\n  }, [snapPoints, keyboard.keyboardShown, keyboard.keyboardHeight, opacityAnimation, animations.translateY, animations.underlayTranslateY, returnAnimation]);\n  var onRootViewLayout = React.useCallback(function (event) {\n    var _a, _b;\n    if (keyboard.keyboardShown && !isModal) {\n      return;\n    }\n    rootViewLayoutEventValues.current.resizing = true;\n    var rootViewHeight = event.nativeEvent.layout.height;\n    var rootViewWidth = event.nativeEvent.layout.width;\n    (_a = rootViewLayoutEventValues.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    rootViewLayoutEventValues.current.sub = internalEventManager.subscribe(EVENTS_INTERNAL.safeAreaLayout, function () {\n      var _a;\n      (_a = rootViewLayoutEventValues.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n      var safeMarginFromTop = Platform.OS === 'ios' ? safeAreaPaddings.current.top < 20 ? 20 : safeAreaPaddings.current.top : StatusBar.currentHeight || 0;\n      var height = rootViewHeight - safeMarginFromTop;\n      var width = rootViewWidth;\n      dimensionsRef.current = {\n        width: width,\n        height: height,\n        portrait: width < height\n      };\n      setDimensions(__assign({}, dimensionsRef.current));\n      rootViewLayoutEventValues.current.resizing = false;\n      if (sheetLayoutRef.current) {\n        onSheetLayout({\n          nativeEvent: {\n            layout: sheetLayoutRef.current\n          }\n        });\n      }\n    });\n    clearTimeout(rootViewLayoutEventValues.current.timer);\n    clearTimeout(rootViewLayoutEventValues.current.layouTimer);\n    if (safeAreaPaddings.current.top !== undefined || Platform.OS !== 'ios') {\n      rootViewLayoutEventValues.current.layouTimer = setTimeout(function () {\n        internalEventManager.publish(EVENTS_INTERNAL.safeAreaLayout);\n      }, Platform.OS === 'ios' || rootViewLayoutEventValues.current.firstEventFired ? 0 : 300);\n    }\n    if (!((_b = rootViewLayoutEventValues.current) === null || _b === void 0 ? void 0 : _b.firstEventFired)) {\n      rootViewLayoutEventValues.current.firstEventFired = true;\n    }\n  }, [keyboard.keyboardShown, isModal, internalEventManager, onSheetLayout]);\n  var hideSheet = React.useCallback(function (vy, data, isSheetManagerOrRef) {\n    if (hiding.current) return;\n    if (!closable && !isSheetManagerOrRef) {\n      returnAnimation(vy);\n      return;\n    }\n    hiding.current = true;\n    onBeforeClose === null || onBeforeClose === void 0 ? void 0 : onBeforeClose(data || payloadRef.current || data);\n    setTimeout(function () {\n      if (closable) {\n        closing.current = true;\n        Keyboard.dismiss();\n        animationListeners.current.translateY && animations.translateY.removeListener(animationListeners.current.translateY);\n        animationListeners.current.translateY = undefined;\n      }\n      hideAnimation(vy, function (_a) {\n        var _b, _c;\n        var finished = _a.finished;\n        if (finished) {\n          if (closable || isSheetManagerOrRef) {\n            setVisible(false);\n            if (props.onClose) {\n              (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props, data || payloadRef.current || data);\n              hiding.current = false;\n            }\n            (_c = hardwareBackPressEvent.current) === null || _c === void 0 ? void 0 : _c.remove();\n            if (sheetId) {\n              SheetManager.remove(sheetId, currentContext);\n              hiding.current = false;\n              actionSheetEventManager.publish(\"onclose_\".concat(sheetId), data || payloadRef.current || data, currentContext);\n            } else {\n              hiding.current = false;\n            }\n            _currentSnapIndex.current = initialSnapIndex;\n            closing.current = false;\n            setTimeout(function () {\n              keyboard.reset();\n            });\n          } else {\n            animations.opacity.setValue(1);\n            returnAnimation();\n          }\n        }\n      });\n    }, 1);\n    if (Platform.OS === 'web') {\n      document.body.style.overflowY = 'auto';\n      document.documentElement.style.overflowY = 'auto';\n    }\n  }, [closable, hideAnimation, props.onClose, returnAnimation, setVisible, keyboard]);\n  var onHardwareBackPress = React.useCallback(function () {\n    var _a, _b;\n    if (visible && enableRouterBackNavigation && ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n      (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n      return true;\n    }\n    if (visible && closable && closeOnPressBack) {\n      hideSheet();\n      return true;\n    }\n    return false;\n  }, [closable, closeOnPressBack, hideSheet, enableRouterBackNavigation, visible]);\n  var snapForward = React.useCallback(function (vy) {\n    if (_currentSnapIndex.current === snapPoints.length - 1) {\n      initialValue.current = getNextPosition(_currentSnapIndex.current);\n      returnAnimation(vy);\n      return;\n    }\n    var nextSnapPoint = 0;\n    var nextSnapIndex = 0;\n    if (getCurrentPosition() === 0) {\n      nextSnapPoint = snapPoints[nextSnapIndex = snapPoints.length - 1];\n    } else {\n      for (var i = _currentSnapIndex.current; i < snapPoints.length; i++) {\n        if (getNextPosition(i) < getCurrentPosition()) {\n          nextSnapPoint = snapPoints[nextSnapIndex = i];\n          break;\n        }\n      }\n    }\n    if (nextSnapPoint > 100) {\n      console.warn('Snap points should range between 0 to 100.');\n      returnAnimation(vy);\n      return;\n    }\n    _currentSnapIndex.current = nextSnapIndex;\n    initialValue.current = getNextPosition(_currentSnapIndex.current);\n    returnAnimation(vy);\n  }, [getCurrentPosition, getNextPosition, returnAnimation, snapPoints]);\n  var snapBackward = React.useCallback(function (vy) {\n    if (_currentSnapIndex.current === 0) {\n      if (closable) {\n        initialValue.current = dimensionsRef.current.height * 1.3;\n        hideSheet(vy);\n      } else {\n        initialValue.current = getNextPosition(_currentSnapIndex.current);\n        returnAnimation(vy);\n      }\n      return;\n    }\n    var nextSnapPoint = 0;\n    var nextSnapIndex = 0;\n    for (var i = _currentSnapIndex.current; i > -1; i--) {\n      if (getNextPosition(i) > getCurrentPosition()) {\n        nextSnapPoint = snapPoints[nextSnapIndex = i];\n        break;\n      }\n    }\n    if (nextSnapPoint < 0) {\n      console.warn('Snap points should range between 0 to 100.');\n      returnAnimation(vy);\n      return;\n    }\n    _currentSnapIndex.current = nextSnapIndex;\n    initialValue.current = getNextPosition(_currentSnapIndex.current);\n    returnAnimation(vy);\n  }, [closable, getCurrentPosition, getNextPosition, hideSheet, returnAnimation, snapPoints]);\n  function getRectBoundary(rect) {\n    if (rect) {\n      var w = rect.w,\n        h = rect.h,\n        px = rect.px,\n        py = rect.py;\n      return __assign(__assign({}, rect), {\n        boundryX: px + w,\n        boundryY: py + h\n      });\n    }\n    return {\n      w: 0,\n      h: 0,\n      px: 0,\n      py: 0,\n      x: 0,\n      y: 0,\n      boundryX: 0,\n      boundryY: 0\n    };\n  }\n  var getActiveDraggableNodes = React.useCallback(function (absoluteX, absoluteY) {\n    var _a;\n    if (((_a = draggableNodes.current) === null || _a === void 0 ? void 0 : _a.length) === 0) return [];\n    var activeNodes = [];\n    for (var _i = 0, _b = draggableNodes.current; _i < _b.length; _i++) {\n      var node = _b[_i];\n      var rect = getRectBoundary(node.rect.current);\n      if (rect.boundryX === 0 && rect.boundryY === 0) continue;\n      if (absoluteX > rect.px && absoluteY > rect.py && absoluteX < rect.boundryX && absoluteY < rect.boundryY) {\n        activeNodes.push({\n          rectWithBoundry: rect,\n          node: node\n        });\n      }\n    }\n    return activeNodes;\n  }, []);\n  var panHandlers = React.useMemo(function () {\n    var velocity = 0;\n    var prevDeltaY = 0;\n    var offsets = [];\n    var lockGesture = false;\n    var gestureEventCounter = 0;\n    var isScrollingGesture = false;\n    var deltaYOnGestureStart = 0;\n    var start;\n    function scrollable(value) {\n      if (Platform.OS === 'ios') return;\n      for (var i = 0; i < draggableNodes.current.length; i++) {\n        var node = draggableNodes.current[i];\n        var scrollRef = resolveScrollRef(node.ref);\n        scrollRef.setNativeProps({\n          scrollEnabled: value\n        });\n      }\n    }\n    return Platform.OS === 'web' ? {\n      enabled: false\n    } : {\n      onBegan: function onBegan() {\n        if (Platform.OS === 'android') {\n          scrollable(false);\n        }\n      },\n      onGestureEvent: function onGestureEvent(event) {\n        var _a, _b;\n        if (sheetId && !isRenderedOnTop(sheetId, currentContext)) return;\n        var gesture = event.nativeEvent;\n        var deltaY = gesture.translationY;\n        var swipingDown = prevDeltaY < deltaY;\n        prevDeltaY = deltaY;\n        if (!start) {\n          start = {\n            x: event.nativeEvent.absoluteX,\n            y: event.nativeEvent.absoluteY\n          };\n        }\n        var activeDraggableNodes = getActiveDraggableNodes(start.x, start.y);\n        var isFullOpen = getCurrentPosition() === 0;\n        var blockSwipeGesture = false;\n        if (activeDraggableNodes.length > 0) {\n          if (isFullOpen) {\n            if (swipingDown) {\n              for (var _i = 0, activeDraggableNodes_1 = activeDraggableNodes; _i < activeDraggableNodes_1.length; _i++) {\n                var node = activeDraggableNodes_1[_i];\n                if (!node.node.offset.current) continue;\n                var y = node.node.offset.current.y;\n                if (y === ScrollState.END) {\n                  blockSwipeGesture = true;\n                  continue;\n                }\n                if (y < 1 && node.node.handlerConfig.hasRefreshControl) {\n                  var refreshControlBounds = node.rectWithBoundry.py + node.rectWithBoundry.h * node.node.handlerConfig.refreshControlBoundary;\n                  if (!refreshControlBounds) continue;\n                  if (event.nativeEvent.absoluteY < refreshControlBounds) {\n                    lockGesture = true;\n                    blockSwipeGesture = false;\n                    continue;\n                  } else {\n                    blockSwipeGesture = false;\n                    continue;\n                  }\n                }\n                if (y > 1) {\n                  blockSwipeGesture = true;\n                  continue;\n                }\n              }\n            } else {\n              for (var _c = 0, activeDraggableNodes_2 = activeDraggableNodes; _c < activeDraggableNodes_2.length; _c++) {\n                var node = activeDraggableNodes_2[_c];\n                if (!node.node.offset.current) continue;\n                var y = node.node.offset.current.y;\n                if (y !== ScrollState.END) {\n                  blockSwipeGesture = true;\n                  continue;\n                }\n              }\n            }\n          }\n        }\n        gestureEventCounter++;\n        if (isFullOpen && (blockSwipeGesture || lockGesture)) {\n          isScrollingGesture = true;\n          scrollable(true);\n          return;\n        }\n        var startY = event.nativeEvent.y - event.nativeEvent.translationY;\n        if (!enableGesturesInScrollView && startY > 100) {\n          return;\n        }\n        if (gestureEventCounter < 2) {\n          return;\n        }\n        if (swipingDown || !isFullOpen) {\n          if (Platform.OS === 'ios') {\n            for (var i = 0; i < draggableNodes.current.length; i++) {\n              var node = draggableNodes.current[i];\n              var scrollRef = resolveScrollRef(node.ref);\n              if (!offsets[i] || ((_a = node.offset.current) === null || _a === void 0 ? void 0 : _a.y) === 0) {\n                offsets[i] = ((_b = node.offset.current) === null || _b === void 0 ? void 0 : _b.y) || 0;\n              }\n              scrollRef.scrollTo({\n                x: 0,\n                y: offsets[i],\n                animated: false\n              });\n            }\n          }\n        }\n        if (!isFullOpen) {\n          isScrollingGesture = false;\n          blockSwipeGesture = false;\n        }\n        if (isScrollingGesture && !swipingDown) {\n          return scrollable(true);\n        } else {\n          scrollable(false);\n        }\n        isScrollingGesture = false;\n        if (!deltaYOnGestureStart) {\n          deltaYOnGestureStart = deltaY;\n        }\n        deltaY = deltaY - deltaYOnGestureStart;\n        var value = initialValue.current + deltaY;\n        velocity = 1;\n        var correctedValue = value <= minTranslateValue.current ? minTranslateValue.current - value : value;\n        if (correctedValue / overdrawFactor >= overdrawSize && deltaY <= 0) {\n          return;\n        }\n        var minSnapPoint = getNextPosition(0);\n        var translateYValue = value <= minTranslateValue.current ? overdrawEnabled ? minTranslateValue.current - correctedValue / overdrawFactor : minTranslateValue.current : value;\n        if (!closable && disableDragBeyondMinimumSnapPoint) {\n          animations.translateY.setValue(translateYValue >= minSnapPoint ? minSnapPoint : translateYValue);\n        } else {\n          animations.translateY.setValue(translateYValue);\n        }\n      },\n      failOffsetX: [-20, 20],\n      activeOffsetY: [-5, 5],\n      onEnded: function onEnded() {\n        deltaYOnGestureStart = 0;\n        offsets = [];\n        start = undefined;\n        isScrollingGesture = false;\n        gestureEventCounter = 0;\n        lockGesture = false;\n        var isMovingUp = getCurrentPosition() < initialValue.current;\n        scrollable(true);\n        if (!isMovingUp && getCurrentPosition() < initialValue.current + springOffset || isMovingUp && getCurrentPosition() > initialValue.current - springOffset) {\n          returnAnimation(1);\n          velocity = 0;\n          return;\n        }\n        if (!isMovingUp) {\n          snapBackward(velocity);\n        } else {\n          snapForward(velocity);\n        }\n        velocity = 0;\n      },\n      enabled: gestureEnabled\n    };\n  }, [animations.translateY, closable, currentContext, disableDragBeyondMinimumSnapPoint, enableGesturesInScrollView, gestureEnabled, getActiveDraggableNodes, getCurrentPosition, getNextPosition, overdrawEnabled, overdrawFactor, overdrawSize, returnAnimation, sheetId, snapBackward, snapForward, springOffset]);\n  var handlers = React.useMemo(function () {\n    var prevDeltaY = 0;\n    var lockGesture = false;\n    var offsets = [];\n    var start;\n    var deltaYOnGestureStart = 0;\n    return !gestureEnabled || Platform.OS !== 'web' ? {\n      panHandlers: {}\n    } : PanResponder.create({\n      onMoveShouldSetPanResponder: function onMoveShouldSetPanResponder(_event, gesture) {\n        if (sheetId && !isRenderedOnTop(sheetId, currentContext)) return false;\n        var vy = gesture.vy < 0 ? gesture.vy * -1 : gesture.vy;\n        var vx = gesture.vx < 0 ? gesture.vx * -1 : gesture.vx;\n        if (vy < 0.05 || vx > 0.05) {\n          return false;\n        }\n        var activeDraggableNodes = getActiveDraggableNodes(_event.nativeEvent.pageX, _event.nativeEvent.pageY);\n        for (var _i = 0, activeDraggableNodes_3 = activeDraggableNodes; _i < activeDraggableNodes_3.length; _i++) {\n          var node = activeDraggableNodes_3[_i];\n          var scrollRef = resolveScrollRef(node.node.ref);\n          offsets.push(scrollRef.scrollTop);\n        }\n        return true;\n      },\n      onStartShouldSetPanResponder: function onStartShouldSetPanResponder(_event, _gesture) {\n        if (sheetId && !isRenderedOnTop(sheetId, currentContext)) return false;\n        var activeDraggableNodes = getActiveDraggableNodes(_event.nativeEvent.pageX, _event.nativeEvent.pageY);\n        for (var _i = 0, activeDraggableNodes_4 = activeDraggableNodes; _i < activeDraggableNodes_4.length; _i++) {\n          var node = activeDraggableNodes_4[_i];\n          var scrollRef = resolveScrollRef(node.node.ref);\n          offsets.push(scrollRef.scrollTop);\n        }\n        return true;\n      },\n      onPanResponderMove: function onPanResponderMove(_event, gesture) {\n        var deltaY = gesture.dy;\n        var swipingDown = prevDeltaY < deltaY;\n        prevDeltaY = deltaY;\n        var isFullOpen = getCurrentPosition() === 0;\n        var blockSwipeGesture = false;\n        if (!start) {\n          start = {\n            x: _event.nativeEvent.pageX,\n            y: _event.nativeEvent.pageY\n          };\n        }\n        var activeDraggableNodes = getActiveDraggableNodes(start.x, start.y);\n        if (activeDraggableNodes.length > 0) {\n          if (isFullOpen) {\n            if (swipingDown) {\n              for (var i = 0; i < activeDraggableNodes.length; i++) {\n                var node = activeDraggableNodes[i];\n                if (!node.node.offset.current) continue;\n                var y = node.node.offset.current.y;\n                if (y === ScrollState.END) {\n                  blockSwipeGesture = true;\n                  var scrollRef = resolveScrollRef(node.node.ref);\n                  offsets[i] = scrollRef.scrollTop;\n                  continue;\n                }\n                if (y === 0 && node.node.handlerConfig.hasRefreshControl) {\n                  var refreshControlBounds = node.rectWithBoundry.py + node.rectWithBoundry.h * node.node.handlerConfig.refreshControlBoundary;\n                  if (!refreshControlBounds) continue;\n                  if (_event.nativeEvent.pageY < refreshControlBounds) {\n                    lockGesture = true;\n                    blockSwipeGesture = false;\n                    continue;\n                  } else {\n                    blockSwipeGesture = false;\n                    continue;\n                  }\n                }\n                if (y > 5) {\n                  blockSwipeGesture = true;\n                  var scrollRef = resolveScrollRef(node.node.ref);\n                  offsets[i] = scrollRef.scrollTop;\n                  continue;\n                }\n              }\n            } else {\n              for (var i = 0; i < activeDraggableNodes.length; i++) {\n                var node = activeDraggableNodes[i];\n                if (!node.node.offset.current) continue;\n                var y = node.node.offset.current.y;\n                if (y > -1) {\n                  blockSwipeGesture = true;\n                  continue;\n                }\n              }\n            }\n          } else {\n            for (var i = 0; i < activeDraggableNodes.length; i++) {\n              var node = activeDraggableNodes[i];\n              var scrollRef = resolveScrollRef(node.node.ref);\n              scrollRef.scrollTop = offsets[i];\n            }\n          }\n        }\n        if (blockSwipeGesture || lockGesture) {\n          return;\n        }\n        var startY = gesture.moveY - gesture.dy;\n        if (!enableGesturesInScrollView && startY > 100) {\n          return;\n        }\n        if (!deltaYOnGestureStart) {\n          deltaYOnGestureStart = deltaY;\n        }\n        deltaY = deltaY - deltaYOnGestureStart;\n        var value = initialValue.current + deltaY;\n        var correctedValue = value <= minTranslateValue.current ? minTranslateValue.current - value : value;\n        if (correctedValue / overdrawFactor >= overdrawSize && gesture.dy <= 0) {\n          return;\n        }\n        var minSnapPoint = getNextPosition(0);\n        var translateYValue = value <= minTranslateValue.current ? overdrawEnabled ? minTranslateValue.current - correctedValue / overdrawFactor : minTranslateValue.current : value;\n        if (!closable && disableDragBeyondMinimumSnapPoint) {\n          animations.translateY.setValue(translateYValue >= minSnapPoint ? minSnapPoint : translateYValue);\n        } else {\n          animations.translateY.setValue(translateYValue);\n        }\n      },\n      onPanResponderEnd: function onPanResponderEnd(_event, gesture) {\n        start = undefined;\n        offsets = [];\n        prevDeltaY = 0;\n        deltaYOnGestureStart = 0;\n        var isMovingUp = getCurrentPosition() < initialValue.current;\n        if (!isMovingUp && getCurrentPosition() < initialValue.current + springOffset || isMovingUp && getCurrentPosition() > initialValue.current - springOffset) {\n          returnAnimation(gesture.vy);\n          return;\n        }\n        if (!isMovingUp) {\n          snapBackward(gesture.vy);\n        } else {\n          snapForward(gesture.vy);\n        }\n      }\n    });\n  }, [gestureEnabled, sheetId, currentContext, getActiveDraggableNodes, getCurrentPosition, enableGesturesInScrollView, overdrawFactor, overdrawSize, getNextPosition, overdrawEnabled, closable, disableDragBeyondMinimumSnapPoint, animations.translateY, springOffset, returnAnimation, snapBackward, snapForward]);\n  var onTouch = function onTouch(event) {\n    onTouchBackdrop === null || onTouchBackdrop === void 0 ? void 0 : onTouchBackdrop(event);\n    if (enableRouterBackNavigation && router.canGoBack()) {\n      router.goBack();\n      return;\n    }\n    if (closeOnTouchBackdrop && closable) {\n      hideSheet();\n    }\n  };\n  var _getRef = useCallback(function () {\n    return {\n      show: function show(snapIndex) {\n        var _a;\n        if (typeof snapIndex === 'number') {\n          _currentSnapIndex.current = snapIndex;\n        }\n        _onBeforeShow === null || _onBeforeShow === void 0 ? void 0 : _onBeforeShow();\n        (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n        setVisible(true);\n      },\n      hide: function hide(data) {\n        hideSheet(undefined, data, true);\n      },\n      setModalVisible: function setModalVisible(_visible) {\n        if (_visible) {\n          setVisible(true);\n        } else {\n          hideSheet();\n        }\n      },\n      snapToOffset: function snapToOffset(offset) {\n        initialValue.current = actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * offset / 100;\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n      },\n      snapToRelativeOffset: function snapToRelativeOffset(offset) {\n        if (offset === 0) {\n          _getRef().snapToIndex(_currentSnapIndex.current);\n          return;\n        }\n        var availableHeight = actionSheetHeight.current + minTranslateValue.current;\n        initialValue.current = initialValue.current + initialValue.current * (offset / 100);\n        if (initialValue.current > availableHeight) {\n          _getRef().snapToOffset(100);\n          return;\n        }\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n      },\n      snapToIndex: function snapToIndex(index) {\n        if (index > snapPoints.length || index < 0) return;\n        _currentSnapIndex.current = index;\n        initialValue.current = getNextPosition(index);\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n        notifySnapIndexChanged();\n      },\n      handleChildScrollEnd: function handleChildScrollEnd() {\n        console.warn('handleChildScrollEnd has been removed. Please use `useScrollHandlers` hook to enable scrolling in ActionSheet');\n      },\n      modifyGesturesForLayout: function modifyGesturesForLayout(_id, layout, scrollOffset) {\n        gestureBoundaries.current[_id] = __assign(__assign({}, layout), {\n          scrollOffset: scrollOffset\n        });\n      },\n      currentSnapIndex: function currentSnapIndex() {\n        return _currentSnapIndex.current;\n      },\n      isGestureEnabled: function isGestureEnabled() {\n        return gestureEnabled;\n      },\n      isOpen: function isOpen() {\n        return visible;\n      },\n      keyboardHandler: function keyboardHandler(enabled) {\n        keyboard.pauseKeyboardHandler.current = enabled;\n      },\n      ev: internalEventManager\n    };\n  }, [internalEventManager, _onBeforeShow, setVisible, hideSheet, animations.translateY, props.openAnimationConfig, snapPoints.length, getNextPosition, notifySnapIndexChanged, gestureEnabled, visible, keyboard.pauseKeyboardHandler]);\n  useImperativeHandle(ref, _getRef, [_getRef]);\n  useEffect(function () {\n    if (sheetId) {\n      SheetManager.registerRef(sheetId, currentContext, {\n        current: _getRef()\n      });\n    }\n    sheetRef.current = _getRef();\n  }, [currentContext, _getRef, sheetId, sheetRef]);\n  var onRequestClose = React.useCallback(function () {\n    var _a, _b;\n    if (enableRouterBackNavigation && ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n      (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n      return;\n    }\n    if (visible && closeOnPressBack) {\n      hideSheet();\n    }\n  }, [hideSheet, enableRouterBackNavigation, closeOnPressBack, visible]);\n  var rootProps = React.useMemo(function () {\n    var _a, _b;\n    return isModal && !props.backgroundInteractionEnabled ? {\n      visible: true,\n      animationType: 'none',\n      testID: ((_a = props.testIDs) === null || _a === void 0 ? void 0 : _a.modal) || props.testID,\n      supportedOrientations: SUPPORTED_ORIENTATIONS,\n      onShow: props.onOpen,\n      onRequestClose: onRequestClose,\n      transparent: true,\n      statusBarTranslucent: true\n    } : {\n      testID: ((_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.root) || props.testID,\n      onLayout: function onLayout() {\n        var _a;\n        hardwareBackPressEvent.current = BackHandler.addEventListener('hardwareBackPress', onHardwareBackPress);\n        (_a = props === null || props === void 0 ? void 0 : props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props);\n      },\n      style: {\n        position: 'absolute',\n        zIndex: zIndex ? zIndex : sheetId ? getZIndexFromStack(sheetId, currentContext) : 999,\n        width: '100%',\n        height: '100%'\n      },\n      pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto'\n    };\n  }, [currentContext, isModal, onHardwareBackPress, onRequestClose, props, zIndex, sheetId]);\n  var renderRoute = useCallback(function (route) {\n    var _a;\n    var RouteComponent = route.component;\n    return _jsxDEV(Animated.View, {\n      style: {\n        display: route.name !== ((_a = router.currentRoute) === null || _a === void 0 ? void 0 : _a.name) ? 'none' : 'flex',\n        opacity: animations.routeOpacity\n      },\n      children: _jsxDEV(RouterParamsContext.Provider, {\n        value: route === null || route === void 0 ? void 0 : route.params,\n        children: _jsxDEV(RouteComponent, {\n          router: router,\n          params: route === null || route === void 0 ? void 0 : route.params,\n          payload: sheetPayload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1122,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1121,\n        columnNumber: 13\n      }, this)\n    }, route.name, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1117,\n      columnNumber: 17\n    }, this);\n  }, [animations.routeOpacity, router, sheetPayload]);\n  var context = {\n    ref: panHandlerRef,\n    eventManager: internalEventManager\n  };\n  return _jsxDEV(_Fragment, {\n    children: [Platform.OS === 'ios' && !safeAreaInsets ? _jsxDEV(SafeAreaView, {\n      pointerEvents: \"none\",\n      collapsable: false,\n      onLayout: function onLayout(event) {\n        var height = event.nativeEvent.layout.height;\n        if (height !== undefined) {\n          safeAreaPaddings.current.top = height;\n          clearTimeout(rootViewLayoutEventValues.current.timer);\n          rootViewLayoutEventValues.current.timer = setTimeout(function () {\n            internalEventManager.publish(EVENTS_INTERNAL.safeAreaLayout);\n          }, 0);\n        }\n      },\n      style: {\n        position: 'absolute',\n        width: 1,\n        height: 0,\n        top: 0,\n        left: 0,\n        backgroundColor: 'transparent'\n      },\n      children: _jsxDEV(View, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1148,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1131,\n      columnNumber: 54\n    }, this) : null, Platform.OS === 'ios' && !safeAreaInsets ? _jsxDEV(SafeAreaView, {\n      pointerEvents: \"none\",\n      collapsable: false,\n      onLayout: function onLayout(event) {\n        var height = event.nativeEvent.layout.height;\n        if (height !== undefined) {\n          safeAreaPaddings.current.bottom = height;\n          clearTimeout(rootViewLayoutEventValues.current.timer);\n          rootViewLayoutEventValues.current.timer = setTimeout(function () {\n            internalEventManager.publish(EVENTS_INTERNAL.safeAreaLayout);\n          }, 0);\n        }\n      },\n      style: {\n        position: 'absolute',\n        width: 1,\n        height: 1,\n        bottom: 0,\n        left: 0,\n        backgroundColor: 'transparent'\n      },\n      children: _jsxDEV(View, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1168,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1151,\n      columnNumber: 54\n    }, this) : null, visible ? _jsxDEV(Root, _objectSpread(_objectSpread({}, rootProps), {}, {\n      children: _jsxDEV(GestureHandlerRoot, {\n        isModal: isModal,\n        style: styles.parentContainer,\n        children: _jsxDEV(PanGestureRefContext.Provider, {\n          value: context,\n          children: _jsxDEV(DraggableNodesContext.Provider, {\n            value: draggableNodesContext,\n            children: _jsxDEV(Animated.View, {\n              onLayout: onRootViewLayout,\n              ref: rootViewContainerRef,\n              pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto',\n              style: [styles.parentContainer, {\n                opacity: animations.opacity,\n                width: '100%',\n                justifyContent: 'flex-end',\n                transform: [{\n                  translateY: animations.keyboardTranslate\n                }]\n              }],\n              children: [!(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? _jsxDEV(TouchableOpacity, _objectSpread({\n                onPress: onTouch,\n                activeOpacity: defaultOverlayOpacity,\n                testID: (_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.backdrop,\n                style: {\n                  height: dimensions.height + (safeAreaPaddings.current.top || 0) + 100,\n                  width: '100%',\n                  position: 'absolute',\n                  backgroundColor: overlayColor,\n                  opacity: defaultOverlayOpacity\n                }\n              }, props.backdropProps ? props.backdropProps : {}), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1188,\n                columnNumber: 109\n              }, this) : null, _jsxDEV(Animated.View, {\n                pointerEvents: \"box-none\",\n                style: __assign(__assign({\n                  borderTopRightRadius: ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.borderTopRightRadius) || 10,\n                  borderTopLeftRadius: ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.borderTopLeftRadius) || 10,\n                  backgroundColor: ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.backgroundColor) || 'white',\n                  borderBottomLeftRadius: ((_f = props.containerStyle) === null || _f === void 0 ? void 0 : _f.borderBottomLeftRadius) || undefined,\n                  borderBottomRightRadius: ((_g = props.containerStyle) === null || _g === void 0 ? void 0 : _g.borderBottomRightRadius) || undefined,\n                  borderRadius: ((_h = props.containerStyle) === null || _h === void 0 ? void 0 : _h.borderRadius) || undefined,\n                  width: ((_j = props.containerStyle) === null || _j === void 0 ? void 0 : _j.width) || '100%'\n                }, getElevation(typeof elevation === 'number' ? elevation : 5)), {\n                  flex: undefined,\n                  height: dimensions.height,\n                  maxHeight: dimensions.height,\n                  paddingBottom: keyboard.keyboardShown ? keyboard.keyboardHeight || 0 : safeAreaPaddings.current.bottom,\n                  transform: [{\n                    translateY: animations.translateY\n                  }]\n                }),\n                children: [dimensions.height === 0 ? null : _jsxDEV(PanGestureHandler, _objectSpread(_objectSpread({}, panHandlers), {}, {\n                  ref: panHandlerRef,\n                  children: _jsxDEV(Animated.View, _objectSpread(_objectSpread({}, handlers.panHandlers), {}, {\n                    onLayout: onSheetLayout,\n                    ref: panViewRef,\n                    testID: (_k = props.testIDs) === null || _k === void 0 ? void 0 : _k.sheet,\n                    style: [styles.container, {\n                      borderTopRightRadius: 10,\n                      borderTopLeftRadius: 10\n                    }, props.containerStyle, {\n                      maxHeight: keyboard.keyboardShown ? dimensions.height - keyboard.keyboardHeight : dimensions.height,\n                      marginTop: keyboard.keyboardShown ? 0.5 : 0\n                    }],\n                    children: [drawUnderStatusBar ? _jsxDEV(Animated.View, {\n                      style: {\n                        height: 100,\n                        position: 'absolute',\n                        top: -50,\n                        backgroundColor: ((_l = props.containerStyle) === null || _l === void 0 ? void 0 : _l.backgroundColor) || 'white',\n                        width: '100%',\n                        borderTopRightRadius: ((_m = props.containerStyle) === null || _m === void 0 ? void 0 : _m.borderRadius) || 10,\n                        borderTopLeftRadius: ((_o = props.containerStyle) === null || _o === void 0 ? void 0 : _o.borderRadius) || 10,\n                        transform: [{\n                          translateY: animations.underlayTranslateY\n                        }]\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1224,\n                      columnNumber: 52\n                    }, this) : null, gestureEnabled || props.headerAlwaysVisible ? props.CustomHeaderComponent ? props.CustomHeaderComponent : _jsxDEV(Animated.View, {\n                      style: [styles.indicator, props.indicatorStyle]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1239,\n                      columnNumber: 140\n                    }, this) : null, _jsxDEV(View, {\n                      style: {\n                        flexShrink: 1\n                      },\n                      children: (router === null || router === void 0 ? void 0 : router.hasRoutes()) ? _jsxDEV(RouterContext.Provider, {\n                        value: router,\n                        children: router === null || router === void 0 ? void 0 : router.stack.map(renderRoute)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1247,\n                        columnNumber: 104\n                      }, this) : props === null || props === void 0 ? void 0 : props.children\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1244,\n                      columnNumber: 29\n                    }, this)]\n                  }), void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1210,\n                    columnNumber: 27\n                  }, this)\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1209,\n                  columnNumber: 58\n                }, this), overdrawEnabled ? _jsxDEV(Animated.View, {\n                  style: {\n                    position: 'absolute',\n                    height: overdrawSize,\n                    bottom: -overdrawSize,\n                    backgroundColor: ((_p = props.containerStyle) === null || _p === void 0 ? void 0 : _p.backgroundColor) || 'white',\n                    width: ((_q = props.containerStyle) === null || _q === void 0 ? void 0 : _q.width) || dimensions.width\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1254,\n                  columnNumber: 43\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1198,\n                columnNumber: 21\n              }, this), ExtraOverlayComponent, props.withNestedSheetProvider, sheetId ? _jsxDEV(SheetProvider, {\n                context: \"$$-auto-\".concat(sheetId, \"-\").concat(currentContext, \"-provider\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1265,\n                columnNumber: 33\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1175,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1174,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1173,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1172,\n        columnNumber: 13\n      }, this)\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1171,\n      columnNumber: 21\n    }, this) : null]\n  }, void 0, true);\n});\nvar GestureHandlerRoot = function GestureHandlerRoot(props) {\n  return props.isModal ? _jsxDEV(GestureHandlerRootView, {\n    style: props.style,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1274,\n    columnNumber: 29\n  }, this) : _jsxDEV(_Fragment, {\n    children: props.children\n  }, void 0, false);\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","l","ar","Array","slice","concat","React","forwardRef","useCallback","useEffect","useImperativeHandle","useMemo","useRef","useState","Animated","BackHandler","Dimensions","Easing","Keyboard","Modal","PanResponder","Platform","SafeAreaView","StatusBar","TouchableOpacity","View","GestureHandlerRootView","PanGestureHandler","DraggableNodesContext","PanGestureRefContext","EventManager","actionSheetEventManager","RouterContext","RouterParamsContext","useRouter","resolveScrollRef","ScrollState","useSheetManager","useKeyboard","SheetProvider","useProviderContext","useSheetIDContext","useSheetPayload","useSheetRef","getZIndexFromStack","isRenderedOnTop","SheetManager","styles","getElevation","SUPPORTED_ORIENTATIONS","jsxDEV","_jsxDEV","Fragment","_Fragment","EVENTS_INTERNAL","safeAreaLayout","ActionSheet","_a","ref","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","animated","_s","closeOnPressBack","_t","springOffset","_u","elevation","_v","defaultOverlayOpacity","_w","overlayColor","_x","closable","_y","closeOnTouchBackdrop","onTouchBackdrop","_z","drawUnderStatusBar","_0","gestureEnabled","_1","isModal","_2","snapPoints","_3","initialSnapIndex","_4","overdrawEnabled","_5","overdrawFactor","_6","overdrawSize","_7","zIndex","_8","keyboardHandlerEnabled","ExtraOverlayComponent","payload","safeAreaInsets","routes","initialRoute","onBeforeShow","enableRouterBackNavigation","onBeforeClose","_9","enableGesturesInScrollView","disableDragBeyondMinimumSnapPoint","props","initialValue","actionSheetHeight","safeAreaPaddings","top","left","bottom","right","internalEventManager","currentContext","currentSnapIndex","sheetRef","dimensionsRef","width","height","portrait","minTranslateValue","keyboardWasVisible","prevKeyboardHeight","id","sheetId","lock","panViewRef","rootViewContainerRef","gestureBoundaries","hiding","payloadRef","sheetPayload","panHandlerRef","closing","draggableNodes","sheetLayoutRef","_10","get","paddingBottom","useBottomSafeAreaPadding","dimensions","setDimensions","rootViewLayoutEventValues","current","_11","onHide","data","hideSheet","undefined","routerRef","initialNavigation","onContextUpdate","add","registerRef","getRef","visible","setVisible","animations","opacity","Value","translateY","underlayTranslateY","keyboardTranslate","routeOpacity","animationListeners","router","onNavigate","onNavigateBack","keyboard","prevSnapIndex","draggableNodesContext","nodes","notifyOffsetChange","value","publish","notifySnapIndexChanged","onSnapIndexChange","returnAnimation","velocity","setValue","config","openAnimationConfig","correctedValue","spring","toValue","useNativeDriver","friction","start","opacityAnimation","timing","duration","easing","in","ease","hideAnimation","vy","callback","finished","closeAnimationConfig","animation","setTimeout","stop","getCurrentPosition","_value","getNextPosition","snapIndex","hardwareBackPressEvent","Root","backgroundInteractionEnabled","animationListener","onChange","addListener","correctedHeight","keyboardShown","keyboardHeight","correctedOffset","Math","max","removeListener","onSheetLayout","event","nativeEvent","layout","resizing","rootViewHeight","nextInitialValue","sheetBottomEdgePosition","sheetPositionWithKeyboard","OS","document","body","style","overflowY","documentElement","onRootViewLayout","rootViewWidth","sub","unsubscribe","subscribe","safeMarginFromTop","currentHeight","clearTimeout","timer","layouTimer","firstEventFired","isSheetManagerOrRef","dismiss","onClose","remove","reset","onHardwareBackPress","canGoBack","goBack","snapForward","nextSnapPoint","nextSnapIndex","console","warn","snapBackward","getRectBoundary","rect","w","h","px","py","boundryX","boundryY","x","y","getActiveDraggableNodes","absoluteX","absoluteY","activeNodes","_i","node","push","rectWithBoundry","panHandlers","prevDeltaY","offsets","lockGesture","gestureEventCounter","isScrollingGesture","deltaYOnGestureStart","scrollable","scrollRef","setNativeProps","scrollEnabled","enabled","onBegan","onGestureEvent","gesture","deltaY","translationY","swipingDown","activeDraggableNodes","isFullOpen","blockSwipeGesture","activeDraggableNodes_1","offset","END","handlerConfig","hasRefreshControl","refreshControlBounds","refreshControlBoundary","activeDraggableNodes_2","startY","scrollTo","minSnapPoint","translateYValue","failOffsetX","activeOffsetY","onEnded","isMovingUp","handlers","create","onMoveShouldSetPanResponder","_event","vx","pageX","pageY","activeDraggableNodes_3","scrollTop","onStartShouldSetPanResponder","_gesture","activeDraggableNodes_4","onPanResponderMove","dy","moveY","onPanResponderEnd","onTouch","show","hide","setModalVisible","_visible","snapToOffset","snapToRelativeOffset","snapToIndex","availableHeight","index","handleChildScrollEnd","modifyGesturesForLayout","_id","scrollOffset","isGestureEnabled","isOpen","keyboardHandler","pauseKeyboardHandler","ev","onRequestClose","rootProps","animationType","testID","testIDs","modal","supportedOrientations","onShow","onOpen","transparent","statusBarTranslucent","root","onLayout","addEventListener","position","pointerEvents","renderRoute","route","RouteComponent","component","display","name","currentRoute","children","Provider","params","fileName","_jsxFileName","lineNumber","columnNumber","context","eventManager","collapsable","backgroundColor","_objectSpread","GestureHandlerRoot","parentContainer","justifyContent","transform","onPress","activeOpacity","backdrop","backdropProps","borderTopRightRadius","containerStyle","borderTopLeftRadius","borderBottomLeftRadius","borderBottomRightRadius","borderRadius","flex","maxHeight","sheet","container","marginTop","headerAlwaysVisible","CustomHeaderComponent","indicator","indicatorStyle","flexShrink","hasRoutes","stack","map","withNestedSheetProvider"],"sources":["/Users/josh/src/ui/node_modules/react-native-actions-sheet/dist/src/index.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n/* eslint-disable curly */\nimport React, { forwardRef, useCallback, useEffect, useImperativeHandle, useMemo, useRef, useState, } from 'react';\nimport { Animated, BackHandler, Dimensions, Easing, Keyboard, Modal, PanResponder, Platform, SafeAreaView, StatusBar, TouchableOpacity, View, } from 'react-native';\nimport { GestureHandlerRootView, PanGestureHandler, } from 'react-native-gesture-handler';\nimport { DraggableNodesContext, PanGestureRefContext, } from './context';\nimport EventManager, { actionSheetEventManager } from './eventmanager';\nimport { RouterContext, RouterParamsContext, useRouter, } from './hooks/use-router';\nimport { resolveScrollRef, ScrollState } from './hooks/use-scroll-handlers';\nimport useSheetManager from './hooks/use-sheet-manager';\nimport { useKeyboard } from './hooks/useKeyboard';\nimport { SheetProvider, useProviderContext, useSheetIDContext, useSheetPayload, useSheetRef, } from './provider';\nimport { getZIndexFromStack, isRenderedOnTop, SheetManager, } from './sheetmanager';\nimport { styles } from './styles';\nimport { getElevation, SUPPORTED_ORIENTATIONS } from './utils';\nvar EVENTS_INTERNAL = {\n    safeAreaLayout: 'safeAreaLayout',\n};\nexport default forwardRef(function ActionSheet(_a, ref) {\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n    var _r = _a.animated, animated = _r === void 0 ? true : _r, _s = _a.closeOnPressBack, closeOnPressBack = _s === void 0 ? true : _s, _t = _a.springOffset, springOffset = _t === void 0 ? 50 : _t, _u = _a.elevation, elevation = _u === void 0 ? 5 : _u, _v = _a.defaultOverlayOpacity, defaultOverlayOpacity = _v === void 0 ? 0.3 : _v, _w = _a.overlayColor, overlayColor = _w === void 0 ? 'black' : _w, _x = _a.closable, closable = _x === void 0 ? true : _x, _y = _a.closeOnTouchBackdrop, closeOnTouchBackdrop = _y === void 0 ? true : _y, onTouchBackdrop = _a.onTouchBackdrop, _z = _a.drawUnderStatusBar, drawUnderStatusBar = _z === void 0 ? false : _z, _0 = _a.gestureEnabled, gestureEnabled = _0 === void 0 ? false : _0, _1 = _a.isModal, isModal = _1 === void 0 ? true : _1, _2 = _a.snapPoints, snapPoints = _2 === void 0 ? [100] : _2, _3 = _a.initialSnapIndex, initialSnapIndex = _3 === void 0 ? 0 : _3, _4 = _a.overdrawEnabled, overdrawEnabled = _4 === void 0 ? true : _4, _5 = _a.overdrawFactor, overdrawFactor = _5 === void 0 ? 15 : _5, _6 = _a.overdrawSize, overdrawSize = _6 === void 0 ? 100 : _6, _7 = _a.zIndex, zIndex = _7 === void 0 ? 999 : _7, _8 = _a.keyboardHandlerEnabled, keyboardHandlerEnabled = _8 === void 0 ? true : _8, ExtraOverlayComponent = _a.ExtraOverlayComponent, payload = _a.payload, safeAreaInsets = _a.safeAreaInsets, routes = _a.routes, initialRoute = _a.initialRoute, onBeforeShow = _a.onBeforeShow, enableRouterBackNavigation = _a.enableRouterBackNavigation, onBeforeClose = _a.onBeforeClose, _9 = _a.enableGesturesInScrollView, enableGesturesInScrollView = _9 === void 0 ? true : _9, disableDragBeyondMinimumSnapPoint = _a.disableDragBeyondMinimumSnapPoint, props = __rest(_a, [\"animated\", \"closeOnPressBack\", \"springOffset\", \"elevation\", \"defaultOverlayOpacity\", \"overlayColor\", \"closable\", \"closeOnTouchBackdrop\", \"onTouchBackdrop\", \"drawUnderStatusBar\", \"gestureEnabled\", \"isModal\", \"snapPoints\", \"initialSnapIndex\", \"overdrawEnabled\", \"overdrawFactor\", \"overdrawSize\", \"zIndex\", \"keyboardHandlerEnabled\", \"ExtraOverlayComponent\", \"payload\", \"safeAreaInsets\", \"routes\", \"initialRoute\", \"onBeforeShow\", \"enableRouterBackNavigation\", \"onBeforeClose\", \"enableGesturesInScrollView\", \"disableDragBeyondMinimumSnapPoint\"]);\n    snapPoints =\n        snapPoints[snapPoints.length - 1] !== 100\n            ? __spreadArray(__spreadArray([], snapPoints, true), [100], false) : snapPoints;\n    var initialValue = useRef(-1);\n    var actionSheetHeight = useRef(0);\n    var safeAreaPaddings = useRef(safeAreaInsets || {\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0,\n    });\n    var internalEventManager = React.useMemo(function () { return new EventManager(); }, []);\n    var currentContext = useProviderContext();\n    var currentSnapIndex = useRef(initialSnapIndex);\n    var sheetRef = useSheetRef();\n    var dimensionsRef = useRef({\n        width: 0,\n        height: 0,\n        portrait: true,\n    });\n    var minTranslateValue = useRef(0);\n    var keyboardWasVisible = useRef(false);\n    var prevKeyboardHeight = useRef(0);\n    var id = useSheetIDContext();\n    var sheetId = props.id || id;\n    var lock = useRef(false);\n    var panViewRef = useRef(null);\n    var rootViewContainerRef = useRef(null);\n    var gestureBoundaries = useRef({});\n    var hiding = useRef(false);\n    var payloadRef = useRef(payload);\n    var sheetPayload = useSheetPayload();\n    var panHandlerRef = useRef();\n    var closing = useRef(false);\n    var draggableNodes = useRef([]);\n    var sheetLayoutRef = useRef();\n    var _10 = useState({\n        width: Dimensions.get('window').width,\n        height: 0,\n        portrait: true,\n        paddingBottom: (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding) ? 25 : 0,\n    }), dimensions = _10[0], setDimensions = _10[1];\n    var rootViewLayoutEventValues = useRef({});\n    if (safeAreaInsets) {\n        safeAreaPaddings.current = safeAreaInsets;\n    }\n    var _11 = useSheetManager({\n        id: sheetId,\n        onHide: function (data) {\n            hideSheet(undefined, data, true);\n        },\n        onBeforeShow: function (data) {\n            var _a;\n            (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n            onBeforeShow === null || onBeforeShow === void 0 ? void 0 : onBeforeShow(data);\n        },\n        onContextUpdate: function () {\n            if (sheetId) {\n                SheetManager.add(sheetId, currentContext);\n                SheetManager.registerRef(sheetId, currentContext, {\n                    current: getRef(),\n                });\n            }\n        },\n    }), visible = _11.visible, setVisible = _11.setVisible;\n    var animations = useMemo(function () { return ({\n        opacity: new Animated.Value(0),\n        translateY: new Animated.Value(0),\n        underlayTranslateY: new Animated.Value(100),\n        keyboardTranslate: new Animated.Value(0),\n        routeOpacity: new Animated.Value(0),\n    }); }, []);\n    var animationListeners = useRef({});\n    var router = useRouter({\n        routes: routes,\n        getRef: function () { return getRef(); },\n        initialRoute: initialRoute,\n        onNavigate: props.onNavigate,\n        onNavigateBack: props.onNavigateBack,\n        routeOpacity: animations.routeOpacity,\n    });\n    var routerRef = useRef(router);\n    payloadRef.current = payload;\n    routerRef.current = router;\n    var keyboard = useKeyboard(keyboardHandlerEnabled);\n    var prevSnapIndex = useRef(initialSnapIndex);\n    var draggableNodesContext = React.useMemo(function () { return ({\n        nodes: draggableNodes,\n    }); }, []);\n    var notifyOffsetChange = function (value) {\n        internalEventManager.publish('onoffsetchange', value);\n    };\n    var notifySnapIndexChanged = React.useCallback(function () {\n        var _a;\n        if (prevSnapIndex.current !== currentSnapIndex.current) {\n            prevSnapIndex.current = currentSnapIndex.current;\n            (_a = props.onSnapIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, currentSnapIndex.current);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.onSnapIndexChange]);\n    var returnAnimation = React.useCallback(function (velocity) {\n        if (!animated) {\n            animations.translateY.setValue(initialValue.current);\n            return;\n        }\n        var config = props.openAnimationConfig;\n        var correctedValue = initialValue.current > minTranslateValue.current\n            ? initialValue.current\n            : 0;\n        notifyOffsetChange(correctedValue);\n        Animated.spring(animations.translateY, __assign(__assign({ toValue: initialValue.current, useNativeDriver: true, friction: 8 }, config), { velocity: typeof velocity !== 'number' ? undefined : velocity })).start();\n        notifySnapIndexChanged();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [animated, props.openAnimationConfig]);\n    var opacityAnimation = React.useCallback(function (opacity) {\n        Animated.timing(animations.opacity, {\n            duration: 150,\n            easing: Easing.in(Easing.ease),\n            toValue: opacity,\n            useNativeDriver: true,\n        }).start();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []);\n    var hideAnimation = React.useCallback(function (vy, callback) {\n        if (!animated) {\n            callback === null || callback === void 0 ? void 0 : callback({ finished: true });\n            return;\n        }\n        var config = props.closeAnimationConfig;\n        opacityAnimation(0);\n        var animation = Animated.spring(animations.translateY, __assign({ velocity: typeof vy !== 'number' ? 3.0 : vy + 1, toValue: dimensionsRef.current.height * 1.3, useNativeDriver: true }, config));\n        animation.start();\n        setTimeout(function () {\n            animation.stop();\n            callback === null || callback === void 0 ? void 0 : callback({ finished: true });\n        }, 150);\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [animated, opacityAnimation, props.closeAnimationConfig]);\n    var getCurrentPosition = React.useCallback(function () {\n        //@ts-ignore\n        return animations.translateY._value <= minTranslateValue.current + 5\n            ? 0\n            : //@ts-ignore\n                animations.translateY._value;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    var getNextPosition = React.useCallback(function (snapIndex) {\n        return (actionSheetHeight.current +\n            minTranslateValue.current -\n            (actionSheetHeight.current * snapPoints[snapIndex]) / 100);\n    }, [snapPoints]);\n    var hardwareBackPressEvent = useRef();\n    var Root = isModal && !(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? Modal : Animated.View;\n    useEffect(function () {\n        var animationListener;\n        if (drawUnderStatusBar || props.onChange) {\n            animationListener = animations.translateY.addListener(function (value) {\n                var _a;\n                var correctedValue = value.value > minTranslateValue.current ? value.value : 0;\n                (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, correctedValue, actionSheetHeight.current);\n                if (drawUnderStatusBar) {\n                    if (lock.current)\n                        return;\n                    var correctedHeight = keyboard.keyboardShown\n                        ? dimensionsRef.current.height -\n                            (keyboard.keyboardHeight + safeAreaPaddings.current.bottom)\n                        : dimensionsRef.current.height - safeAreaPaddings.current.bottom;\n                    var correctedOffset = keyboard.keyboardShown\n                        ? value.value - keyboard.keyboardHeight\n                        : value.value;\n                    if (actionSheetHeight.current > correctedHeight - 1) {\n                        if (correctedOffset < 100) {\n                            animations.underlayTranslateY.setValue(Math.max(correctedOffset - 20, -20));\n                        }\n                        else {\n                            //@ts-ignore\n                            if (animations.underlayTranslateY._value < 100) {\n                                animations.underlayTranslateY.setValue(100);\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        animationListeners.current.translateY = animationListener;\n        return function () {\n            animationListener &&\n                animations.translateY.removeListener(animationListener);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props === null || props === void 0 ? void 0 : props.id, keyboard.keyboardShown, keyboard.keyboardHeight]);\n    var onSheetLayout = React.useCallback(function (event) {\n        var _a, _b;\n        sheetLayoutRef.current = __assign({}, event.nativeEvent.layout);\n        if (rootViewLayoutEventValues.current.resizing)\n            return;\n        if (closing.current)\n            return;\n        var rootViewHeight = (_a = dimensionsRef.current) === null || _a === void 0 ? void 0 : _a.height;\n        actionSheetHeight.current =\n            event.nativeEvent.layout.height > dimensionsRef.current.height\n                ? dimensionsRef.current.height\n                : event.nativeEvent.layout.height;\n        minTranslateValue.current =\n            rootViewHeight -\n                (actionSheetHeight.current + safeAreaPaddings.current.bottom);\n        if (initialValue.current < 0) {\n            animations.translateY.setValue(rootViewHeight * 1.1);\n        }\n        var nextInitialValue = actionSheetHeight.current +\n            minTranslateValue.current -\n            (actionSheetHeight.current * snapPoints[currentSnapIndex.current]) /\n                100;\n        initialValue.current =\n            (keyboard.keyboardShown || keyboardWasVisible.current) &&\n                initialValue.current <= nextInitialValue &&\n                initialValue.current >= minTranslateValue.current\n                ? initialValue.current\n                : nextInitialValue;\n        var sheetBottomEdgePosition = initialValue.current +\n            (actionSheetHeight.current * snapPoints[currentSnapIndex.current]) /\n                100;\n        var sheetPositionWithKeyboard = sheetBottomEdgePosition -\n            (((_b = dimensionsRef.current) === null || _b === void 0 ? void 0 : _b.height) - keyboard.keyboardHeight);\n        initialValue.current =\n            sheetPositionWithKeyboard > 0\n                ? initialValue.current - sheetPositionWithKeyboard\n                : initialValue.current;\n        if (keyboard.keyboardShown) {\n            minTranslateValue.current =\n                minTranslateValue.current -\n                    (keyboard.keyboardHeight + safeAreaPaddings.current.bottom);\n            keyboardWasVisible.current = true;\n            prevKeyboardHeight.current = keyboard.keyboardHeight;\n        }\n        else {\n            keyboardWasVisible.current = false;\n        }\n        opacityAnimation(1);\n        setTimeout(function () {\n            returnAnimation();\n        }, 1);\n        if (initialValue.current > 100) {\n            if (lock.current)\n                return;\n            animations.underlayTranslateY.setValue(100);\n        }\n        if (Platform.OS === 'web') {\n            document.body.style.overflowY = 'hidden';\n            document.documentElement.style.overflowY = 'hidden';\n        }\n    }, [\n        snapPoints,\n        keyboard.keyboardShown,\n        keyboard.keyboardHeight,\n        opacityAnimation,\n        animations.translateY,\n        animations.underlayTranslateY,\n        returnAnimation,\n    ]);\n    var onRootViewLayout = React.useCallback(function (event) {\n        var _a, _b;\n        if (keyboard.keyboardShown && !isModal) {\n            return;\n        }\n        rootViewLayoutEventValues.current.resizing = true;\n        var rootViewHeight = event.nativeEvent.layout.height;\n        var rootViewWidth = event.nativeEvent.layout.width;\n        (_a = rootViewLayoutEventValues.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n        rootViewLayoutEventValues.current.sub = internalEventManager.subscribe(EVENTS_INTERNAL.safeAreaLayout, function () {\n            var _a;\n            (_a = rootViewLayoutEventValues.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n            var safeMarginFromTop = Platform.OS === 'ios'\n                ? safeAreaPaddings.current.top < 20\n                    ? 20\n                    : safeAreaPaddings.current.top\n                : StatusBar.currentHeight || 0;\n            var height = rootViewHeight - safeMarginFromTop;\n            var width = rootViewWidth;\n            dimensionsRef.current = {\n                width: width,\n                height: height,\n                portrait: width < height,\n            };\n            setDimensions(__assign({}, dimensionsRef.current));\n            rootViewLayoutEventValues.current.resizing = false;\n            if (sheetLayoutRef.current) {\n                onSheetLayout({\n                    nativeEvent: {\n                        layout: sheetLayoutRef.current,\n                    },\n                });\n            }\n        });\n        clearTimeout(rootViewLayoutEventValues.current.timer);\n        clearTimeout(rootViewLayoutEventValues.current.layouTimer);\n        if (safeAreaPaddings.current.top !== undefined ||\n            Platform.OS !== 'ios') {\n            rootViewLayoutEventValues.current.layouTimer = setTimeout(function () {\n                internalEventManager.publish(EVENTS_INTERNAL.safeAreaLayout);\n            }, Platform.OS === 'ios' ||\n                rootViewLayoutEventValues.current.firstEventFired\n                ? 0\n                : 300);\n        }\n        if (!((_b = rootViewLayoutEventValues.current) === null || _b === void 0 ? void 0 : _b.firstEventFired)) {\n            rootViewLayoutEventValues.current.firstEventFired = true;\n        }\n    }, [keyboard.keyboardShown, isModal, internalEventManager, onSheetLayout]);\n    var hideSheet = React.useCallback(function (vy, data, isSheetManagerOrRef) {\n        if (hiding.current)\n            return;\n        if (!closable && !isSheetManagerOrRef) {\n            returnAnimation(vy);\n            return;\n        }\n        hiding.current = true;\n        onBeforeClose === null || onBeforeClose === void 0 ? void 0 : onBeforeClose((data || payloadRef.current || data));\n        setTimeout(function () {\n            if (closable) {\n                closing.current = true;\n                Keyboard.dismiss();\n                animationListeners.current.translateY &&\n                    animations.translateY.removeListener(animationListeners.current.translateY);\n                animationListeners.current.translateY = undefined;\n            }\n            hideAnimation(vy, function (_a) {\n                var _b, _c;\n                var finished = _a.finished;\n                if (finished) {\n                    if (closable || isSheetManagerOrRef) {\n                        setVisible(false);\n                        if (props.onClose) {\n                            (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props, (data || payloadRef.current || data));\n                            hiding.current = false;\n                        }\n                        (_c = hardwareBackPressEvent.current) === null || _c === void 0 ? void 0 : _c.remove();\n                        if (sheetId) {\n                            SheetManager.remove(sheetId, currentContext);\n                            hiding.current = false;\n                            actionSheetEventManager.publish(\"onclose_\".concat(sheetId), data || payloadRef.current || data, currentContext);\n                        }\n                        else {\n                            hiding.current = false;\n                        }\n                        currentSnapIndex.current = initialSnapIndex;\n                        closing.current = false;\n                        setTimeout(function () {\n                            keyboard.reset();\n                        });\n                    }\n                    else {\n                        animations.opacity.setValue(1);\n                        returnAnimation();\n                    }\n                }\n            });\n        }, 1);\n        if (Platform.OS === 'web') {\n            document.body.style.overflowY = 'auto';\n            document.documentElement.style.overflowY = 'auto';\n        }\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n        closable,\n        hideAnimation,\n        props.onClose,\n        returnAnimation,\n        setVisible,\n        keyboard,\n    ]);\n    var onHardwareBackPress = React.useCallback(function () {\n        var _a, _b;\n        if (visible &&\n            enableRouterBackNavigation &&\n            ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n            (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n            return true;\n        }\n        if (visible && closable && closeOnPressBack) {\n            hideSheet();\n            return true;\n        }\n        return false;\n    }, [\n        closable,\n        closeOnPressBack,\n        hideSheet,\n        enableRouterBackNavigation,\n        visible,\n    ]);\n    /**\n     * Snap towards the top\n     */\n    var snapForward = React.useCallback(function (vy) {\n        if (currentSnapIndex.current === snapPoints.length - 1) {\n            initialValue.current = getNextPosition(currentSnapIndex.current);\n            returnAnimation(vy);\n            return;\n        }\n        var nextSnapPoint = 0;\n        var nextSnapIndex = 0;\n        if (getCurrentPosition() === 0) {\n            nextSnapPoint = snapPoints[(nextSnapIndex = snapPoints.length - 1)];\n        }\n        else {\n            for (var i = currentSnapIndex.current; i < snapPoints.length; i++) {\n                if (getNextPosition(i) < getCurrentPosition()) {\n                    nextSnapPoint = snapPoints[(nextSnapIndex = i)];\n                    break;\n                }\n            }\n        }\n        if (nextSnapPoint > 100) {\n            console.warn('Snap points should range between 0 to 100.');\n            returnAnimation(vy);\n            return;\n        }\n        currentSnapIndex.current = nextSnapIndex;\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n    }, [getCurrentPosition, getNextPosition, returnAnimation, snapPoints]);\n    /**\n     * Snap towards the bottom\n     */\n    var snapBackward = React.useCallback(function (vy) {\n        if (currentSnapIndex.current === 0) {\n            if (closable) {\n                initialValue.current = dimensionsRef.current.height * 1.3;\n                hideSheet(vy);\n            }\n            else {\n                initialValue.current = getNextPosition(currentSnapIndex.current);\n                returnAnimation(vy);\n            }\n            return;\n        }\n        var nextSnapPoint = 0;\n        var nextSnapIndex = 0;\n        for (var i = currentSnapIndex.current; i > -1; i--) {\n            if (getNextPosition(i) > getCurrentPosition()) {\n                nextSnapPoint = snapPoints[(nextSnapIndex = i)];\n                break;\n            }\n        }\n        if (nextSnapPoint < 0) {\n            console.warn('Snap points should range between 0 to 100.');\n            returnAnimation(vy);\n            return;\n        }\n        currentSnapIndex.current = nextSnapIndex;\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n    }, [\n        closable,\n        getCurrentPosition,\n        getNextPosition,\n        hideSheet,\n        returnAnimation,\n        snapPoints,\n    ]);\n    function getRectBoundary(rect) {\n        if (rect) {\n            var w = rect.w, h = rect.h, px = rect.px, py = rect.py;\n            return __assign(__assign({}, rect), { boundryX: px + w, boundryY: py + h });\n        }\n        return { w: 0, h: 0, px: 0, py: 0, x: 0, y: 0, boundryX: 0, boundryY: 0 };\n    }\n    var getActiveDraggableNodes = React.useCallback(function (absoluteX, absoluteY) {\n        var _a;\n        if (((_a = draggableNodes.current) === null || _a === void 0 ? void 0 : _a.length) === 0)\n            return [];\n        var activeNodes = [];\n        for (var _i = 0, _b = draggableNodes.current; _i < _b.length; _i++) {\n            var node = _b[_i];\n            var rect = getRectBoundary(node.rect.current);\n            if (rect.boundryX === 0 && rect.boundryY === 0)\n                continue;\n            if (absoluteX > rect.px &&\n                absoluteY > rect.py &&\n                absoluteX < rect.boundryX &&\n                absoluteY < rect.boundryY) {\n                activeNodes.push({\n                    rectWithBoundry: rect,\n                    node: node,\n                });\n            }\n        }\n        return activeNodes;\n    }, []);\n    var panHandlers = React.useMemo(function () {\n        var velocity = 0;\n        var prevDeltaY = 0;\n        var offsets = [];\n        var lockGesture = false;\n        var gestureEventCounter = 0;\n        var isScrollingGesture = false;\n        var deltaYOnGestureStart = 0;\n        var start;\n        function scrollable(value) {\n            if (Platform.OS === 'ios')\n                return;\n            for (var i = 0; i < draggableNodes.current.length; i++) {\n                var node = draggableNodes.current[i];\n                var scrollRef = resolveScrollRef(node.ref);\n                scrollRef.setNativeProps({\n                    scrollEnabled: value,\n                });\n            }\n        }\n        return Platform.OS === 'web'\n            ? { enabled: false }\n            : {\n                onBegan: function () {\n                    if (Platform.OS === 'android') {\n                        scrollable(false);\n                    }\n                },\n                onGestureEvent: function (event) {\n                    var _a, _b;\n                    if (sheetId && !isRenderedOnTop(sheetId, currentContext))\n                        return;\n                    var gesture = event.nativeEvent;\n                    var deltaY = gesture.translationY;\n                    var swipingDown = prevDeltaY < deltaY;\n                    prevDeltaY = deltaY;\n                    if (!start) {\n                        start = {\n                            x: event.nativeEvent.absoluteX,\n                            y: event.nativeEvent.absoluteY,\n                        };\n                    }\n                    var activeDraggableNodes = getActiveDraggableNodes(start.x, start.y);\n                    var isFullOpen = getCurrentPosition() === 0;\n                    var blockSwipeGesture = false;\n                    if (activeDraggableNodes.length > 0) {\n                        if (isFullOpen) {\n                            if (swipingDown) {\n                                for (var _i = 0, activeDraggableNodes_1 = activeDraggableNodes; _i < activeDraggableNodes_1.length; _i++) {\n                                    var node = activeDraggableNodes_1[_i];\n                                    if (!node.node.offset.current)\n                                        continue;\n                                    var y = node.node.offset.current.y;\n                                    if (y === ScrollState.END) {\n                                        blockSwipeGesture = true;\n                                        continue;\n                                    }\n                                    if (y < 1 && node.node.handlerConfig.hasRefreshControl) {\n                                        // Refresh Control will work in to 15% area of the DraggableNode.\n                                        var refreshControlBounds = node.rectWithBoundry.py +\n                                            node.rectWithBoundry.h *\n                                                node.node.handlerConfig.refreshControlBoundary;\n                                        if (!refreshControlBounds)\n                                            continue;\n                                        if (event.nativeEvent.absoluteY < refreshControlBounds) {\n                                            lockGesture = true;\n                                            blockSwipeGesture = false;\n                                            continue;\n                                        }\n                                        else {\n                                            blockSwipeGesture = false;\n                                            continue;\n                                        }\n                                    }\n                                    if (y > 1) {\n                                        blockSwipeGesture = true;\n                                        continue;\n                                    }\n                                }\n                            }\n                            else {\n                                for (var _c = 0, activeDraggableNodes_2 = activeDraggableNodes; _c < activeDraggableNodes_2.length; _c++) {\n                                    var node = activeDraggableNodes_2[_c];\n                                    if (!node.node.offset.current)\n                                        continue;\n                                    var y = node.node.offset.current.y;\n                                    // Swiping up\n                                    // 1. Scroll if the scroll container has not reached end\n                                    // 2. Don't scroll if sheet has not reached the top\n                                    if (\n                                    // Scroll has not reached end\n                                    y !== ScrollState.END) {\n                                        blockSwipeGesture = true;\n                                        continue;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    gestureEventCounter++;\n                    if (isFullOpen && (blockSwipeGesture || lockGesture)) {\n                        isScrollingGesture = true;\n                        scrollable(true);\n                        return;\n                    }\n                    var startY = event.nativeEvent.y - event.nativeEvent.translationY;\n                    if (!enableGesturesInScrollView && startY > 100) {\n                        return;\n                    }\n                    if (gestureEventCounter < 2) {\n                        return;\n                    }\n                    if (swipingDown || !isFullOpen) {\n                        if (Platform.OS === 'ios') {\n                            for (var i = 0; i < draggableNodes.current.length; i++) {\n                                var node = draggableNodes.current[i];\n                                var scrollRef = resolveScrollRef(node.ref);\n                                if (!offsets[i] || ((_a = node.offset.current) === null || _a === void 0 ? void 0 : _a.y) === 0) {\n                                    offsets[i] = ((_b = node.offset.current) === null || _b === void 0 ? void 0 : _b.y) || 0;\n                                }\n                                scrollRef.scrollTo({\n                                    x: 0,\n                                    y: offsets[i],\n                                    animated: false,\n                                });\n                            }\n                        }\n                    }\n                    if (!isFullOpen) {\n                        isScrollingGesture = false;\n                        blockSwipeGesture = false;\n                    }\n                    if (isScrollingGesture && !swipingDown) {\n                        return scrollable(true);\n                    }\n                    else {\n                        scrollable(false);\n                    }\n                    isScrollingGesture = false;\n                    if (!deltaYOnGestureStart) {\n                        deltaYOnGestureStart = deltaY;\n                    }\n                    deltaY = deltaY - deltaYOnGestureStart;\n                    var value = initialValue.current + deltaY;\n                    velocity = 1;\n                    var correctedValue = \n                    //@ts-ignore\n                    value <= minTranslateValue.current\n                        ? //@ts-ignore\n                            minTranslateValue.current - value\n                        : //@ts-ignore\n                            value;\n                    if (\n                    //@ts-ignore\n                    correctedValue / overdrawFactor >= overdrawSize &&\n                        deltaY <= 0) {\n                        return;\n                    }\n                    var minSnapPoint = getNextPosition(0);\n                    var translateYValue = value <= minTranslateValue.current\n                        ? overdrawEnabled\n                            ? minTranslateValue.current -\n                                correctedValue / overdrawFactor\n                            : minTranslateValue.current\n                        : value;\n                    if (!closable && disableDragBeyondMinimumSnapPoint) {\n                        animations.translateY.setValue(translateYValue >= minSnapPoint\n                            ? minSnapPoint\n                            : translateYValue);\n                    }\n                    else {\n                        animations.translateY.setValue(translateYValue);\n                    }\n                },\n                failOffsetX: [-20, 20],\n                activeOffsetY: [-5, 5],\n                onEnded: function () {\n                    deltaYOnGestureStart = 0;\n                    offsets = [];\n                    start = undefined;\n                    isScrollingGesture = false;\n                    gestureEventCounter = 0;\n                    lockGesture = false;\n                    var isMovingUp = getCurrentPosition() < initialValue.current;\n                    // When finger is lifted, we enable scrolling on all\n                    // scrollable nodes again\n                    scrollable(true);\n                    if ((!isMovingUp &&\n                        getCurrentPosition() < initialValue.current + springOffset) ||\n                        (isMovingUp &&\n                            getCurrentPosition() > initialValue.current - springOffset)) {\n                        returnAnimation(1);\n                        velocity = 0;\n                        return;\n                    }\n                    if (!isMovingUp) {\n                        snapBackward(velocity);\n                    }\n                    else {\n                        snapForward(velocity);\n                    }\n                    velocity = 0;\n                },\n                enabled: gestureEnabled,\n            };\n    }, [\n        animations.translateY,\n        closable,\n        currentContext,\n        disableDragBeyondMinimumSnapPoint,\n        enableGesturesInScrollView,\n        gestureEnabled,\n        getActiveDraggableNodes,\n        getCurrentPosition,\n        getNextPosition,\n        overdrawEnabled,\n        overdrawFactor,\n        overdrawSize,\n        returnAnimation,\n        sheetId,\n        snapBackward,\n        snapForward,\n        springOffset,\n    ]);\n    var handlers = React.useMemo(function () {\n        var prevDeltaY = 0;\n        var lockGesture = false;\n        var offsets = [];\n        var start;\n        var deltaYOnGestureStart = 0;\n        return !gestureEnabled || Platform.OS !== 'web'\n            ? { panHandlers: {} }\n            : PanResponder.create({\n                onMoveShouldSetPanResponder: function (_event, gesture) {\n                    if (sheetId && !isRenderedOnTop(sheetId, currentContext))\n                        return false;\n                    var vy = gesture.vy < 0 ? gesture.vy * -1 : gesture.vy;\n                    var vx = gesture.vx < 0 ? gesture.vx * -1 : gesture.vx;\n                    if (vy < 0.05 || vx > 0.05) {\n                        return false;\n                    }\n                    var activeDraggableNodes = getActiveDraggableNodes(_event.nativeEvent.pageX, _event.nativeEvent.pageY);\n                    for (var _i = 0, activeDraggableNodes_3 = activeDraggableNodes; _i < activeDraggableNodes_3.length; _i++) {\n                        var node = activeDraggableNodes_3[_i];\n                        var scrollRef = resolveScrollRef(node.node.ref);\n                        offsets.push(scrollRef.scrollTop);\n                    }\n                    return true;\n                },\n                onStartShouldSetPanResponder: function (_event, _gesture) {\n                    if (sheetId && !isRenderedOnTop(sheetId, currentContext))\n                        return false;\n                    var activeDraggableNodes = getActiveDraggableNodes(_event.nativeEvent.pageX, _event.nativeEvent.pageY);\n                    for (var _i = 0, activeDraggableNodes_4 = activeDraggableNodes; _i < activeDraggableNodes_4.length; _i++) {\n                        var node = activeDraggableNodes_4[_i];\n                        var scrollRef = resolveScrollRef(node.node.ref);\n                        offsets.push(scrollRef.scrollTop);\n                    }\n                    return true;\n                },\n                onPanResponderMove: function (_event, gesture) {\n                    var deltaY = gesture.dy;\n                    var swipingDown = prevDeltaY < deltaY;\n                    prevDeltaY = deltaY;\n                    var isFullOpen = getCurrentPosition() === 0;\n                    var blockSwipeGesture = false;\n                    if (!start) {\n                        start = {\n                            x: _event.nativeEvent.pageX,\n                            y: _event.nativeEvent.pageY,\n                        };\n                    }\n                    var activeDraggableNodes = getActiveDraggableNodes(start.x, start.y);\n                    if (activeDraggableNodes.length > 0) {\n                        if (isFullOpen) {\n                            if (swipingDown) {\n                                for (var i = 0; i < activeDraggableNodes.length; i++) {\n                                    var node = activeDraggableNodes[i];\n                                    if (!node.node.offset.current)\n                                        continue;\n                                    var y = node.node.offset.current.y;\n                                    if (y === ScrollState.END) {\n                                        blockSwipeGesture = true;\n                                        var scrollRef = resolveScrollRef(node.node.ref);\n                                        offsets[i] = scrollRef.scrollTop;\n                                        continue;\n                                    }\n                                    if (y === 0 &&\n                                        node.node.handlerConfig.hasRefreshControl) {\n                                        // Refresh Control will work in to 15% area of the DraggableNode.\n                                        var refreshControlBounds = node.rectWithBoundry.py +\n                                            node.rectWithBoundry.h *\n                                                node.node.handlerConfig.refreshControlBoundary;\n                                        if (!refreshControlBounds)\n                                            continue;\n                                        if (_event.nativeEvent.pageY < refreshControlBounds) {\n                                            lockGesture = true;\n                                            blockSwipeGesture = false;\n                                            continue;\n                                        }\n                                        else {\n                                            blockSwipeGesture = false;\n                                            continue;\n                                        }\n                                    }\n                                    if (y > 5) {\n                                        blockSwipeGesture = true;\n                                        var scrollRef = resolveScrollRef(node.node.ref);\n                                        offsets[i] = scrollRef.scrollTop;\n                                        continue;\n                                    }\n                                }\n                            }\n                            else {\n                                for (var i = 0; i < activeDraggableNodes.length; i++) {\n                                    var node = activeDraggableNodes[i];\n                                    if (!node.node.offset.current)\n                                        continue;\n                                    var y = node.node.offset.current.y;\n                                    if (y > -1) {\n                                        blockSwipeGesture = true;\n                                        continue;\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < activeDraggableNodes.length; i++) {\n                                var node = activeDraggableNodes[i];\n                                var scrollRef = resolveScrollRef(node.node.ref);\n                                scrollRef.scrollTop = offsets[i];\n                            }\n                        }\n                    }\n                    if (blockSwipeGesture || lockGesture) {\n                        return;\n                    }\n                    var startY = gesture.moveY - gesture.dy;\n                    if (!enableGesturesInScrollView && startY > 100) {\n                        return;\n                    }\n                    if (!deltaYOnGestureStart) {\n                        deltaYOnGestureStart = deltaY;\n                    }\n                    deltaY = deltaY - deltaYOnGestureStart;\n                    var value = initialValue.current + deltaY;\n                    var correctedValue = \n                    //@ts-ignore\n                    value <= minTranslateValue.current\n                        ? //@ts-ignore\n                            minTranslateValue.current - value\n                        : //@ts-ignore\n                            value;\n                    if (\n                    //@ts-ignore\n                    correctedValue / overdrawFactor >= overdrawSize &&\n                        gesture.dy <= 0) {\n                        return;\n                    }\n                    var minSnapPoint = getNextPosition(0);\n                    var translateYValue = value <= minTranslateValue.current\n                        ? overdrawEnabled\n                            ? minTranslateValue.current -\n                                correctedValue / overdrawFactor\n                            : minTranslateValue.current\n                        : value;\n                    if (!closable && disableDragBeyondMinimumSnapPoint) {\n                        animations.translateY.setValue(translateYValue >= minSnapPoint\n                            ? minSnapPoint\n                            : translateYValue);\n                    }\n                    else {\n                        animations.translateY.setValue(translateYValue);\n                    }\n                },\n                onPanResponderEnd: function (_event, gesture) {\n                    start = undefined;\n                    offsets = [];\n                    prevDeltaY = 0;\n                    deltaYOnGestureStart = 0;\n                    var isMovingUp = getCurrentPosition() < initialValue.current;\n                    if ((!isMovingUp &&\n                        getCurrentPosition() < initialValue.current + springOffset) ||\n                        (isMovingUp &&\n                            getCurrentPosition() > initialValue.current - springOffset)) {\n                        returnAnimation(gesture.vy);\n                        return;\n                    }\n                    if (!isMovingUp) {\n                        snapBackward(gesture.vy);\n                    }\n                    else {\n                        snapForward(gesture.vy);\n                    }\n                },\n            });\n    }, [\n        gestureEnabled,\n        sheetId,\n        currentContext,\n        getActiveDraggableNodes,\n        getCurrentPosition,\n        enableGesturesInScrollView,\n        overdrawFactor,\n        overdrawSize,\n        getNextPosition,\n        overdrawEnabled,\n        closable,\n        disableDragBeyondMinimumSnapPoint,\n        animations.translateY,\n        springOffset,\n        returnAnimation,\n        snapBackward,\n        snapForward,\n    ]);\n    var onTouch = function (event) {\n        onTouchBackdrop === null || onTouchBackdrop === void 0 ? void 0 : onTouchBackdrop(event);\n        if (enableRouterBackNavigation && router.canGoBack()) {\n            router.goBack();\n            return;\n        }\n        if (closeOnTouchBackdrop && closable) {\n            hideSheet();\n        }\n    };\n    var getRef = useCallback(function () { return ({\n        show: function (snapIndex) {\n            var _a;\n            if (typeof snapIndex === 'number') {\n                currentSnapIndex.current = snapIndex;\n            }\n            onBeforeShow === null || onBeforeShow === void 0 ? void 0 : onBeforeShow();\n            (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n            setVisible(true);\n        },\n        hide: function (data) {\n            hideSheet(undefined, data, true);\n        },\n        setModalVisible: function (_visible) {\n            if (_visible) {\n                setVisible(true);\n            }\n            else {\n                hideSheet();\n            }\n        },\n        snapToOffset: function (offset) {\n            initialValue.current =\n                actionSheetHeight.current +\n                    minTranslateValue.current -\n                    (actionSheetHeight.current * offset) / 100;\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n        },\n        snapToRelativeOffset: function (offset) {\n            if (offset === 0) {\n                getRef().snapToIndex(currentSnapIndex.current);\n                return;\n            }\n            var availableHeight = actionSheetHeight.current + minTranslateValue.current;\n            initialValue.current =\n                initialValue.current + initialValue.current * (offset / 100);\n            if (initialValue.current > availableHeight) {\n                getRef().snapToOffset(100);\n                return;\n            }\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n        },\n        snapToIndex: function (index) {\n            if (index > snapPoints.length || index < 0)\n                return;\n            currentSnapIndex.current = index;\n            initialValue.current = getNextPosition(index);\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n            notifySnapIndexChanged();\n        },\n        handleChildScrollEnd: function () {\n            console.warn('handleChildScrollEnd has been removed. Please use `useScrollHandlers` hook to enable scrolling in ActionSheet');\n        },\n        modifyGesturesForLayout: function (_id, layout, scrollOffset) {\n            //@ts-ignore\n            gestureBoundaries.current[_id] = __assign(__assign({}, layout), { scrollOffset: scrollOffset });\n        },\n        currentSnapIndex: function () { return currentSnapIndex.current; },\n        isGestureEnabled: function () { return gestureEnabled; },\n        isOpen: function () { return visible; },\n        keyboardHandler: function (enabled) {\n            keyboard.pauseKeyboardHandler.current = enabled;\n        },\n        ev: internalEventManager,\n    }); }, [\n        internalEventManager,\n        onBeforeShow,\n        setVisible,\n        hideSheet,\n        animations.translateY,\n        props.openAnimationConfig,\n        snapPoints.length,\n        getNextPosition,\n        notifySnapIndexChanged,\n        gestureEnabled,\n        visible,\n        keyboard.pauseKeyboardHandler,\n    ]);\n    useImperativeHandle(ref, getRef, [getRef]);\n    useEffect(function () {\n        if (sheetId) {\n            SheetManager.registerRef(sheetId, currentContext, {\n                current: getRef(),\n            });\n        }\n        sheetRef.current = getRef();\n    }, [currentContext, getRef, sheetId, sheetRef]);\n    var onRequestClose = React.useCallback(function () {\n        var _a, _b;\n        if (enableRouterBackNavigation && ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n            (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n            return;\n        }\n        if (visible && closeOnPressBack) {\n            hideSheet();\n        }\n    }, [hideSheet, enableRouterBackNavigation, closeOnPressBack, visible]);\n    var rootProps = React.useMemo(function () {\n        var _a, _b;\n        return isModal && !props.backgroundInteractionEnabled\n            ? {\n                visible: true,\n                animationType: 'none',\n                testID: ((_a = props.testIDs) === null || _a === void 0 ? void 0 : _a.modal) || props.testID,\n                supportedOrientations: SUPPORTED_ORIENTATIONS,\n                onShow: props.onOpen,\n                onRequestClose: onRequestClose,\n                transparent: true,\n                /**\n                 * Always true, it causes issue with keyboard handling.\n                 */\n                statusBarTranslucent: true,\n            }\n            : {\n                testID: ((_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.root) || props.testID,\n                onLayout: function () {\n                    var _a;\n                    hardwareBackPressEvent.current = BackHandler.addEventListener('hardwareBackPress', onHardwareBackPress);\n                    (_a = props === null || props === void 0 ? void 0 : props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props);\n                },\n                style: {\n                    position: 'absolute',\n                    zIndex: zIndex\n                        ? zIndex\n                        : sheetId\n                            ? getZIndexFromStack(sheetId, currentContext)\n                            : 999,\n                    width: '100%',\n                    height: '100%',\n                },\n                pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled)\n                    ? 'box-none'\n                    : 'auto',\n            };\n    }, [\n        currentContext,\n        isModal,\n        onHardwareBackPress,\n        onRequestClose,\n        props,\n        zIndex,\n        sheetId,\n    ]);\n    var renderRoute = useCallback(function (route) {\n        var _a;\n        var RouteComponent = route.component;\n        return (<Animated.View key={route.name} style={{\n                display: route.name !== ((_a = router.currentRoute) === null || _a === void 0 ? void 0 : _a.name) ? 'none' : 'flex',\n                opacity: animations.routeOpacity,\n            }}>\n            <RouterParamsContext.Provider value={route === null || route === void 0 ? void 0 : route.params}>\n              <RouteComponent router={router} params={route === null || route === void 0 ? void 0 : route.params} payload={sheetPayload}/>\n            </RouterParamsContext.Provider>\n          </Animated.View>);\n    }, [animations.routeOpacity, router, sheetPayload]);\n    var context = {\n        ref: panHandlerRef,\n        eventManager: internalEventManager,\n    };\n    return (<>\n        {Platform.OS === 'ios' && !safeAreaInsets ? (<SafeAreaView pointerEvents=\"none\" collapsable={false} onLayout={function (event) {\n                var height = event.nativeEvent.layout.height;\n                if (height !== undefined) {\n                    safeAreaPaddings.current.top = height;\n                    clearTimeout(rootViewLayoutEventValues.current.timer);\n                    rootViewLayoutEventValues.current.timer = setTimeout(function () {\n                        internalEventManager.publish(EVENTS_INTERNAL.safeAreaLayout);\n                    }, 0);\n                }\n            }} style={{\n                position: 'absolute',\n                width: 1,\n                height: 0,\n                top: 0,\n                left: 0,\n                backgroundColor: 'transparent',\n            }}>\n            <View />\n          </SafeAreaView>) : null}\n\n        {Platform.OS === 'ios' && !safeAreaInsets ? (<SafeAreaView pointerEvents=\"none\" collapsable={false} onLayout={function (event) {\n                var height = event.nativeEvent.layout.height;\n                if (height !== undefined) {\n                    safeAreaPaddings.current.bottom = height;\n                    clearTimeout(rootViewLayoutEventValues.current.timer);\n                    rootViewLayoutEventValues.current.timer = setTimeout(function () {\n                        internalEventManager.publish(EVENTS_INTERNAL.safeAreaLayout);\n                    }, 0);\n                }\n            }} style={{\n                position: 'absolute',\n                width: 1,\n                height: 1,\n                bottom: 0,\n                left: 0,\n                backgroundColor: 'transparent',\n            }}>\n            <View />\n          </SafeAreaView>) : null}\n\n        {visible ? (<Root {...rootProps}>\n            <GestureHandlerRoot isModal={isModal} style={styles.parentContainer}>\n              <PanGestureRefContext.Provider value={context}>\n                <DraggableNodesContext.Provider value={draggableNodesContext}>\n                  <Animated.View onLayout={onRootViewLayout} ref={rootViewContainerRef} pointerEvents={(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto'} style={[\n                styles.parentContainer,\n                {\n                    opacity: animations.opacity,\n                    width: '100%',\n                    justifyContent: 'flex-end',\n                    transform: [\n                        {\n                            translateY: animations.keyboardTranslate,\n                        },\n                    ],\n                },\n            ]}>\n                    {!(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? (<TouchableOpacity onPress={onTouch} activeOpacity={defaultOverlayOpacity} testID={(_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.backdrop} style={{\n                    height: dimensions.height +\n                        (safeAreaPaddings.current.top || 0) +\n                        100,\n                    width: '100%',\n                    position: 'absolute',\n                    backgroundColor: overlayColor,\n                    opacity: defaultOverlayOpacity,\n                }} {...(props.backdropProps ? props.backdropProps : {})}/>) : null}\n\n                    <Animated.View pointerEvents=\"box-none\" style={__assign(__assign({ borderTopRightRadius: ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.borderTopRightRadius) || 10, borderTopLeftRadius: ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.borderTopLeftRadius) || 10, backgroundColor: ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.backgroundColor) || 'white', borderBottomLeftRadius: ((_f = props.containerStyle) === null || _f === void 0 ? void 0 : _f.borderBottomLeftRadius) ||\n                    undefined, borderBottomRightRadius: ((_g = props.containerStyle) === null || _g === void 0 ? void 0 : _g.borderBottomRightRadius) ||\n                    undefined, borderRadius: ((_h = props.containerStyle) === null || _h === void 0 ? void 0 : _h.borderRadius) || undefined, width: ((_j = props.containerStyle) === null || _j === void 0 ? void 0 : _j.width) || '100%' }, getElevation(typeof elevation === 'number' ? elevation : 5)), { flex: undefined, height: dimensions.height, maxHeight: dimensions.height, paddingBottom: keyboard.keyboardShown\n                    ? keyboard.keyboardHeight || 0\n                    : safeAreaPaddings.current.bottom, \n                //zIndex: 10,\n                transform: [\n                    {\n                        translateY: animations.translateY,\n                    },\n                ] })}>\n                      {dimensions.height === 0 ? null : (<PanGestureHandler {...panHandlers} ref={panHandlerRef}>\n                          <Animated.View {...handlers.panHandlers} onLayout={onSheetLayout} ref={panViewRef} testID={(_k = props.testIDs) === null || _k === void 0 ? void 0 : _k.sheet} style={[\n                    styles.container,\n                    {\n                        borderTopRightRadius: 10,\n                        borderTopLeftRadius: 10,\n                    },\n                    props.containerStyle,\n                    {\n                        maxHeight: keyboard.keyboardShown\n                            ? dimensions.height - keyboard.keyboardHeight\n                            : dimensions.height,\n                        marginTop: keyboard.keyboardShown ? 0.5 : 0,\n                    },\n                ]}>\n                            {drawUnderStatusBar ? (<Animated.View style={{\n                        height: 100,\n                        position: 'absolute',\n                        top: -50,\n                        backgroundColor: ((_l = props.containerStyle) === null || _l === void 0 ? void 0 : _l.backgroundColor) ||\n                            'white',\n                        width: '100%',\n                        borderTopRightRadius: ((_m = props.containerStyle) === null || _m === void 0 ? void 0 : _m.borderRadius) || 10,\n                        borderTopLeftRadius: ((_o = props.containerStyle) === null || _o === void 0 ? void 0 : _o.borderRadius) || 10,\n                        transform: [\n                            {\n                                translateY: animations.underlayTranslateY,\n                            },\n                        ],\n                    }}/>) : null}\n                            {gestureEnabled || props.headerAlwaysVisible ? (props.CustomHeaderComponent ? (props.CustomHeaderComponent) : (<Animated.View style={[\n                        styles.indicator,\n                        props.indicatorStyle,\n                    ]}/>)) : null}\n\n                            <View style={{\n                    flexShrink: 1,\n                }}>\n                              {(router === null || router === void 0 ? void 0 : router.hasRoutes()) ? (<RouterContext.Provider value={router}>\n                                  {router === null || router === void 0 ? void 0 : router.stack.map(renderRoute)}\n                                </RouterContext.Provider>) : (props === null || props === void 0 ? void 0 : props.children)}\n                            </View>\n                          </Animated.View>\n                        </PanGestureHandler>)}\n\n                      {overdrawEnabled ? (<Animated.View style={{\n                    position: 'absolute',\n                    height: overdrawSize,\n                    bottom: -overdrawSize,\n                    backgroundColor: ((_p = props.containerStyle) === null || _p === void 0 ? void 0 : _p.backgroundColor) || 'white',\n                    width: ((_q = props.containerStyle) === null || _q === void 0 ? void 0 : _q.width) || dimensions.width,\n                }}/>) : null}\n                    </Animated.View>\n\n                    {ExtraOverlayComponent}\n                    {props.withNestedSheetProvider}\n                    {sheetId ? (<SheetProvider context={\"$$-auto-\".concat(sheetId, \"-\").concat(currentContext, \"-provider\")}/>) : null}\n                  </Animated.View>\n                </DraggableNodesContext.Provider>\n              </PanGestureRefContext.Provider>\n            </GestureHandlerRoot>\n          </Root>) : null}\n      </>);\n});\nvar GestureHandlerRoot = function (props) {\n    return props.isModal ? (<GestureHandlerRootView style={props.style}>\n      {props.children}\n    </GestureHandlerRootView>) : (<>{props.children}</>);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}