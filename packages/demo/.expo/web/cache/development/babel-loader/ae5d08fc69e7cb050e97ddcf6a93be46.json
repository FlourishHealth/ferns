{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { defineAnimation } from \"./util\";\nimport { initialCalculations, calcuateNewMassToMatchDuration, underDampedSpringCalculations, criticallyDampedSpringCalculations, isAnimationTerminatingCalculation } from \"./springUtils\";\nvar _worklet_3329358150165_init_data = {\n  code: \"function withSpring(toValue, userConfig, callback) {\\n  const {\\n    defineAnimation,\\n    underDampedSpringCalculations,\\n    criticallyDampedSpringCalculations,\\n    isAnimationTerminatingCalculation,\\n    calcuateNewMassToMatchDuration,\\n    initialCalculations\\n  } = this._closure;\\n  return defineAnimation(toValue, function () {\\n    'worklet';\\n\\n    const defaultConfig = {\\n      damping: 10,\\n      mass: 1,\\n      stiffness: 100,\\n      overshootClamping: false,\\n      restDisplacementThreshold: 0.01,\\n      restSpeedThreshold: 2,\\n      velocity: 0,\\n      duration: 2000,\\n      dampingRatio: 0.5\\n    };\\n    const config = {\\n      ...defaultConfig,\\n      ...userConfig,\\n      useDuration: !!(userConfig !== null && userConfig !== void 0 && userConfig.duration || userConfig !== null && userConfig !== void 0 && userConfig.dampingRatio),\\n      configIsInvalid: false\\n    };\\n    if ([config.stiffness, config.damping, config.duration, config.dampingRatio, config.restDisplacementThreshold, config.restSpeedThreshold].some(function (x) {\\n      return x <= 0;\\n    }) || config.mass === 0) {\\n      config.configIsInvalid = true;\\n      console.warn(\\\"You have provided invalid spring animation configuration! \\\\n Value of stiffness, damping, duration and damping ratio must be greater than zero, and mass can't equal zero.\\\");\\n    }\\n    function springOnFrame(animation, now) {\\n      const {\\n        toValue: toValue,\\n        startTimestamp: startTimestamp,\\n        current: current\\n      } = animation;\\n      const timeFromStart = now - startTimestamp;\\n      if (config.useDuration && timeFromStart >= config.duration) {\\n        animation.current = toValue;\\n        animation.lastTimestamp = 0;\\n        return true;\\n      }\\n      if (config.configIsInvalid) {\\n        if (config.useDuration) return false;else {\\n          animation.current = toValue;\\n          animation.lastTimestamp = 0;\\n          return true;\\n        }\\n      }\\n      const {\\n        lastTimestamp: lastTimestamp,\\n        velocity: velocity\\n      } = animation;\\n      const deltaTime = Math.min(now - lastTimestamp, 64);\\n      animation.lastTimestamp = now;\\n      const t = deltaTime / 1000;\\n      const v0 = -velocity;\\n      const x0 = toValue - current;\\n      const {\\n        zeta: zeta,\\n        omega0: omega0,\\n        omega1: omega1\\n      } = animation;\\n      const {\\n        position: newPosition,\\n        velocity: newVelocity\\n      } = zeta < 1 ? underDampedSpringCalculations(animation, {\\n        zeta: zeta,\\n        v0: v0,\\n        x0: x0,\\n        omega0: omega0,\\n        omega1: omega1,\\n        t: t\\n      }) : criticallyDampedSpringCalculations(animation, {\\n        v0: v0,\\n        x0: x0,\\n        omega0: omega0,\\n        t: t\\n      });\\n      animation.current = newPosition;\\n      animation.velocity = newVelocity;\\n      const {\\n        isOvershooting: isOvershooting,\\n        isVelocity: isVelocity,\\n        isDisplacement: isDisplacement\\n      } = isAnimationTerminatingCalculation(animation, config);\\n      const springIsNotInMove = isOvershooting || isVelocity && isDisplacement;\\n      if (!config.useDuration && springIsNotInMove) {\\n        animation.velocity = 0;\\n        animation.current = toValue;\\n        animation.lastTimestamp = 0;\\n        return true;\\n      }\\n      return false;\\n    }\\n    function isTriggeredTwice(previousAnimation, animation) {\\n      return (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startTimestamp) && (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.toValue) === animation.toValue && (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.duration) === animation.duration && (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.dampingRatio) === animation.dampingRatio;\\n    }\\n    function onStart(animation, value, now, previousAnimation) {\\n      animation.current = value;\\n      animation.startValue = value;\\n      let mass = config.mass;\\n      const triggeredTwice = isTriggeredTwice(previousAnimation, animation);\\n      const duration = config.duration;\\n      const x0 = triggeredTwice ? previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startValue : Number(animation.toValue) - value;\\n      if (previousAnimation) {\\n        animation.velocity = (triggeredTwice ? previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.velocity : (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.velocity) + config.velocity) || 0;\\n      } else {\\n        animation.velocity = config.velocity || 0;\\n      }\\n      if (triggeredTwice) {\\n        animation.zeta = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.zeta) || 0;\\n        animation.omega0 = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.omega0) || 0;\\n        animation.omega1 = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.omega1) || 0;\\n      } else {\\n        if (config.useDuration) {\\n          const acutalDuration = triggeredTwice ? duration - (((previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.lastTimestamp) || 0) - ((previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startTimestamp) || 0)) : duration;\\n          config.duration = acutalDuration;\\n          mass = calcuateNewMassToMatchDuration(x0, config, animation.velocity);\\n        }\\n        const {\\n          zeta: zeta,\\n          omega0: omega0,\\n          omega1: omega1\\n        } = initialCalculations(mass, config);\\n        animation.zeta = zeta;\\n        animation.omega0 = omega0;\\n        animation.omega1 = omega1;\\n      }\\n      animation.lastTimestamp = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.lastTimestamp) || now;\\n      animation.startTimestamp = triggeredTwice ? (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startTimestamp) || now : now;\\n    }\\n    return {\\n      onFrame: springOnFrame,\\n      onStart: onStart,\\n      toValue: toValue,\\n      velocity: config.velocity || 0,\\n      current: toValue,\\n      startValue: 0,\\n      callback: callback,\\n      lastTimestamp: 0,\\n      startTimestamp: 0,\\n      zeta: 0,\\n      omega0: 0,\\n      omega1: 0\\n    };\\n  });\\n}\",\n  location: \"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/spring.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"withSpring\\\",\\\"toValue\\\",\\\"userConfig\\\",\\\"callback\\\",\\\"defineAnimation\\\",\\\"underDampedSpringCalculations\\\",\\\"criticallyDampedSpringCalculations\\\",\\\"isAnimationTerminatingCalculation\\\",\\\"calcuateNewMassToMatchDuration\\\",\\\"initialCalculations\\\",\\\"_closure\\\",\\\"defaultConfig\\\",\\\"damping\\\",\\\"mass\\\",\\\"stiffness\\\",\\\"overshootClamping\\\",\\\"restDisplacementThreshold\\\",\\\"restSpeedThreshold\\\",\\\"velocity\\\",\\\"duration\\\",\\\"dampingRatio\\\",\\\"config\\\",\\\"useDuration\\\",\\\"configIsInvalid\\\",\\\"some\\\",\\\"x\\\",\\\"console\\\",\\\"warn\\\",\\\"springOnFrame\\\",\\\"animation\\\",\\\"now\\\",\\\"startTimestamp\\\",\\\"current\\\",\\\"timeFromStart\\\",\\\"lastTimestamp\\\",\\\"deltaTime\\\",\\\"Math\\\",\\\"min\\\",\\\"t\\\",\\\"v0\\\",\\\"x0\\\",\\\"zeta\\\",\\\"omega0\\\",\\\"omega1\\\",\\\"position\\\",\\\"newPosition\\\",\\\"newVelocity\\\",\\\"isOvershooting\\\",\\\"isVelocity\\\",\\\"isDisplacement\\\",\\\"springIsNotInMove\\\",\\\"isTriggeredTwice\\\",\\\"previousAnimation\\\",\\\"onStart\\\",\\\"value\\\",\\\"startValue\\\",\\\"triggeredTwice\\\",\\\"Number\\\",\\\"acutalDuration\\\",\\\"onFrame\\\"],\\\"sources\\\":[\\\"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/spring.js\\\"],\\\"mappings\\\":\\\"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\\\"}\"\n};\nvar _worklet_13647237086619_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    userConfig,\\n    underDampedSpringCalculations,\\n    criticallyDampedSpringCalculations,\\n    isAnimationTerminatingCalculation,\\n    calcuateNewMassToMatchDuration,\\n    initialCalculations,\\n    toValue,\\n    callback\\n  } = this._closure;\\n  const defaultConfig = {\\n    damping: 10,\\n    mass: 1,\\n    stiffness: 100,\\n    overshootClamping: false,\\n    restDisplacementThreshold: 0.01,\\n    restSpeedThreshold: 2,\\n    velocity: 0,\\n    duration: 2000,\\n    dampingRatio: 0.5\\n  };\\n  const config = {\\n    ...defaultConfig,\\n    ...userConfig,\\n    useDuration: !!(userConfig !== null && userConfig !== void 0 && userConfig.duration || userConfig !== null && userConfig !== void 0 && userConfig.dampingRatio),\\n    configIsInvalid: false\\n  };\\n  if ([config.stiffness, config.damping, config.duration, config.dampingRatio, config.restDisplacementThreshold, config.restSpeedThreshold].some(function (x) {\\n    return x <= 0;\\n  }) || config.mass === 0) {\\n    config.configIsInvalid = true;\\n    console.warn(\\\"You have provided invalid spring animation configuration! \\\\n Value of stiffness, damping, duration and damping ratio must be greater than zero, and mass can't equal zero.\\\");\\n  }\\n  function springOnFrame(animation, now) {\\n    const {\\n      toValue: toValue,\\n      startTimestamp: startTimestamp,\\n      current: current\\n    } = animation;\\n    const timeFromStart = now - startTimestamp;\\n    if (config.useDuration && timeFromStart >= config.duration) {\\n      animation.current = toValue;\\n      animation.lastTimestamp = 0;\\n      return true;\\n    }\\n    if (config.configIsInvalid) {\\n      if (config.useDuration) return false;else {\\n        animation.current = toValue;\\n        animation.lastTimestamp = 0;\\n        return true;\\n      }\\n    }\\n    const {\\n      lastTimestamp: lastTimestamp,\\n      velocity: velocity\\n    } = animation;\\n    const deltaTime = Math.min(now - lastTimestamp, 64);\\n    animation.lastTimestamp = now;\\n    const t = deltaTime / 1000;\\n    const v0 = -velocity;\\n    const x0 = toValue - current;\\n    const {\\n      zeta: zeta,\\n      omega0: omega0,\\n      omega1: omega1\\n    } = animation;\\n    const {\\n      position: newPosition,\\n      velocity: newVelocity\\n    } = zeta < 1 ? underDampedSpringCalculations(animation, {\\n      zeta: zeta,\\n      v0: v0,\\n      x0: x0,\\n      omega0: omega0,\\n      omega1: omega1,\\n      t: t\\n    }) : criticallyDampedSpringCalculations(animation, {\\n      v0: v0,\\n      x0: x0,\\n      omega0: omega0,\\n      t: t\\n    });\\n    animation.current = newPosition;\\n    animation.velocity = newVelocity;\\n    const {\\n      isOvershooting: isOvershooting,\\n      isVelocity: isVelocity,\\n      isDisplacement: isDisplacement\\n    } = isAnimationTerminatingCalculation(animation, config);\\n    const springIsNotInMove = isOvershooting || isVelocity && isDisplacement;\\n    if (!config.useDuration && springIsNotInMove) {\\n      animation.velocity = 0;\\n      animation.current = toValue;\\n      animation.lastTimestamp = 0;\\n      return true;\\n    }\\n    return false;\\n  }\\n  function isTriggeredTwice(previousAnimation, animation) {\\n    return (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startTimestamp) && (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.toValue) === animation.toValue && (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.duration) === animation.duration && (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.dampingRatio) === animation.dampingRatio;\\n  }\\n  function onStart(animation, value, now, previousAnimation) {\\n    animation.current = value;\\n    animation.startValue = value;\\n    let mass = config.mass;\\n    const triggeredTwice = isTriggeredTwice(previousAnimation, animation);\\n    const duration = config.duration;\\n    const x0 = triggeredTwice ? previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startValue : Number(animation.toValue) - value;\\n    if (previousAnimation) {\\n      animation.velocity = (triggeredTwice ? previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.velocity : (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.velocity) + config.velocity) || 0;\\n    } else {\\n      animation.velocity = config.velocity || 0;\\n    }\\n    if (triggeredTwice) {\\n      animation.zeta = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.zeta) || 0;\\n      animation.omega0 = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.omega0) || 0;\\n      animation.omega1 = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.omega1) || 0;\\n    } else {\\n      if (config.useDuration) {\\n        const acutalDuration = triggeredTwice ? duration - (((previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.lastTimestamp) || 0) - ((previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startTimestamp) || 0)) : duration;\\n        config.duration = acutalDuration;\\n        mass = calcuateNewMassToMatchDuration(x0, config, animation.velocity);\\n      }\\n      const {\\n        zeta: zeta,\\n        omega0: omega0,\\n        omega1: omega1\\n      } = initialCalculations(mass, config);\\n      animation.zeta = zeta;\\n      animation.omega0 = omega0;\\n      animation.omega1 = omega1;\\n    }\\n    animation.lastTimestamp = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.lastTimestamp) || now;\\n    animation.startTimestamp = triggeredTwice ? (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startTimestamp) || now : now;\\n  }\\n  return {\\n    onFrame: springOnFrame,\\n    onStart: onStart,\\n    toValue: toValue,\\n    velocity: config.velocity || 0,\\n    current: toValue,\\n    startValue: 0,\\n    callback: callback,\\n    lastTimestamp: 0,\\n    startTimestamp: 0,\\n    zeta: 0,\\n    omega0: 0,\\n    omega1: 0\\n  };\\n}\",\n  location: \"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/spring.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"userConfig\\\",\\\"underDampedSpringCalculations\\\",\\\"criticallyDampedSpringCalculations\\\",\\\"isAnimationTerminatingCalculation\\\",\\\"calcuateNewMassToMatchDuration\\\",\\\"initialCalculations\\\",\\\"toValue\\\",\\\"callback\\\",\\\"_closure\\\",\\\"defaultConfig\\\",\\\"damping\\\",\\\"mass\\\",\\\"stiffness\\\",\\\"overshootClamping\\\",\\\"restDisplacementThreshold\\\",\\\"restSpeedThreshold\\\",\\\"velocity\\\",\\\"duration\\\",\\\"dampingRatio\\\",\\\"config\\\",\\\"useDuration\\\",\\\"configIsInvalid\\\",\\\"some\\\",\\\"x\\\",\\\"console\\\",\\\"warn\\\",\\\"springOnFrame\\\",\\\"animation\\\",\\\"now\\\",\\\"startTimestamp\\\",\\\"current\\\",\\\"timeFromStart\\\",\\\"lastTimestamp\\\",\\\"deltaTime\\\",\\\"Math\\\",\\\"min\\\",\\\"t\\\",\\\"v0\\\",\\\"x0\\\",\\\"zeta\\\",\\\"omega0\\\",\\\"omega1\\\",\\\"position\\\",\\\"newPosition\\\",\\\"newVelocity\\\",\\\"isOvershooting\\\",\\\"isVelocity\\\",\\\"isDisplacement\\\",\\\"springIsNotInMove\\\",\\\"isTriggeredTwice\\\",\\\"previousAnimation\\\",\\\"onStart\\\",\\\"value\\\",\\\"startValue\\\",\\\"triggeredTwice\\\",\\\"Number\\\",\\\"acutalDuration\\\",\\\"onFrame\\\"],\\\"sources\\\":[\\\"/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/spring.js\\\"],\\\"mappings\\\":\\\"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\\\"}\"\n};\nexport var withSpring = function () {\n  var _e = [new global.Error(), -7, -27];\n  var _f = function _f(toValue, userConfig, callback) {\n    return defineAnimation(toValue, function () {\n      var _e = [new global.Error(), -9, -27];\n      var _f = function _f() {\n        var defaultConfig = {\n          damping: 10,\n          mass: 1,\n          stiffness: 100,\n          overshootClamping: false,\n          restDisplacementThreshold: 0.01,\n          restSpeedThreshold: 2,\n          velocity: 0,\n          duration: 2000,\n          dampingRatio: 0.5\n        };\n        var config = _objectSpread(_objectSpread(_objectSpread({}, defaultConfig), userConfig), {}, {\n          useDuration: !!(userConfig !== null && userConfig !== void 0 && userConfig.duration || userConfig !== null && userConfig !== void 0 && userConfig.dampingRatio),\n          configIsInvalid: false\n        });\n        if ([config.stiffness, config.damping, config.duration, config.dampingRatio, config.restDisplacementThreshold, config.restSpeedThreshold].some(function (x) {\n          return x <= 0;\n        }) || config.mass === 0) {\n          config.configIsInvalid = true;\n          console.warn(\"You have provided invalid spring animation configuration! \\n Value of stiffness, damping, duration and damping ratio must be greater than zero, and mass can't equal zero.\");\n        }\n        function springOnFrame(animation, now) {\n          var toValue = animation.toValue,\n            startTimestamp = animation.startTimestamp,\n            current = animation.current;\n          var timeFromStart = now - startTimestamp;\n          if (config.useDuration && timeFromStart >= config.duration) {\n            animation.current = toValue;\n            animation.lastTimestamp = 0;\n            return true;\n          }\n          if (config.configIsInvalid) {\n            if (config.useDuration) return false;else {\n              animation.current = toValue;\n              animation.lastTimestamp = 0;\n              return true;\n            }\n          }\n          var lastTimestamp = animation.lastTimestamp,\n            velocity = animation.velocity;\n          var deltaTime = Math.min(now - lastTimestamp, 64);\n          animation.lastTimestamp = now;\n          var t = deltaTime / 1000;\n          var v0 = -velocity;\n          var x0 = toValue - current;\n          var zeta = animation.zeta,\n            omega0 = animation.omega0,\n            omega1 = animation.omega1;\n          var _ref = zeta < 1 ? underDampedSpringCalculations(animation, {\n              zeta: zeta,\n              v0: v0,\n              x0: x0,\n              omega0: omega0,\n              omega1: omega1,\n              t: t\n            }) : criticallyDampedSpringCalculations(animation, {\n              v0: v0,\n              x0: x0,\n              omega0: omega0,\n              t: t\n            }),\n            newPosition = _ref.position,\n            newVelocity = _ref.velocity;\n          animation.current = newPosition;\n          animation.velocity = newVelocity;\n          var _isAnimationTerminati = isAnimationTerminatingCalculation(animation, config),\n            isOvershooting = _isAnimationTerminati.isOvershooting,\n            isVelocity = _isAnimationTerminati.isVelocity,\n            isDisplacement = _isAnimationTerminati.isDisplacement;\n          var springIsNotInMove = isOvershooting || isVelocity && isDisplacement;\n          if (!config.useDuration && springIsNotInMove) {\n            animation.velocity = 0;\n            animation.current = toValue;\n            animation.lastTimestamp = 0;\n            return true;\n          }\n          return false;\n        }\n        function isTriggeredTwice(previousAnimation, animation) {\n          return (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startTimestamp) && (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.toValue) === animation.toValue && (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.duration) === animation.duration && (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.dampingRatio) === animation.dampingRatio;\n        }\n        function onStart(animation, value, now, previousAnimation) {\n          animation.current = value;\n          animation.startValue = value;\n          var mass = config.mass;\n          var triggeredTwice = isTriggeredTwice(previousAnimation, animation);\n          var duration = config.duration;\n          var x0 = triggeredTwice ? previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startValue : Number(animation.toValue) - value;\n          if (previousAnimation) {\n            animation.velocity = (triggeredTwice ? previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.velocity : (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.velocity) + config.velocity) || 0;\n          } else {\n            animation.velocity = config.velocity || 0;\n          }\n          if (triggeredTwice) {\n            animation.zeta = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.zeta) || 0;\n            animation.omega0 = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.omega0) || 0;\n            animation.omega1 = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.omega1) || 0;\n          } else {\n            if (config.useDuration) {\n              var acutalDuration = triggeredTwice ? duration - (((previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.lastTimestamp) || 0) - ((previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startTimestamp) || 0)) : duration;\n              config.duration = acutalDuration;\n              mass = calcuateNewMassToMatchDuration(x0, config, animation.velocity);\n            }\n            var _initialCalculations = initialCalculations(mass, config),\n              zeta = _initialCalculations.zeta,\n              omega0 = _initialCalculations.omega0,\n              omega1 = _initialCalculations.omega1;\n            animation.zeta = zeta;\n            animation.omega0 = omega0;\n            animation.omega1 = omega1;\n          }\n          animation.lastTimestamp = (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.lastTimestamp) || now;\n          animation.startTimestamp = triggeredTwice ? (previousAnimation === null || previousAnimation === void 0 ? void 0 : previousAnimation.startTimestamp) || now : now;\n        }\n        return {\n          onFrame: springOnFrame,\n          onStart: onStart,\n          toValue: toValue,\n          velocity: config.velocity || 0,\n          current: toValue,\n          startValue: 0,\n          callback: callback,\n          lastTimestamp: 0,\n          startTimestamp: 0,\n          zeta: 0,\n          omega0: 0,\n          omega1: 0\n        };\n      };\n      _f._closure = {\n        userConfig: userConfig,\n        underDampedSpringCalculations: underDampedSpringCalculations,\n        criticallyDampedSpringCalculations: criticallyDampedSpringCalculations,\n        isAnimationTerminatingCalculation: isAnimationTerminatingCalculation,\n        calcuateNewMassToMatchDuration: calcuateNewMassToMatchDuration,\n        initialCalculations: initialCalculations,\n        toValue: toValue,\n        callback: callback\n      };\n      _f.__initData = _worklet_13647237086619_init_data;\n      _f.__workletHash = 13647237086619;\n      _f.__stackDetails = _e;\n      _f.__version = \"3.3.0\";\n      return _f;\n    }());\n  };\n  _f._closure = {\n    defineAnimation: defineAnimation,\n    underDampedSpringCalculations: underDampedSpringCalculations,\n    criticallyDampedSpringCalculations: criticallyDampedSpringCalculations,\n    isAnimationTerminatingCalculation: isAnimationTerminatingCalculation,\n    calcuateNewMassToMatchDuration: calcuateNewMassToMatchDuration,\n    initialCalculations: initialCalculations\n  };\n  _f.__initData = _worklet_3329358150165_init_data;\n  _f.__workletHash = 3329358150165;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();","map":{"version":3,"sources":["spring.ts"],"names":["defineAnimation","initialCalculations","calcuateNewMassToMatchDuration","underDampedSpringCalculations","criticallyDampedSpringCalculations","isAnimationTerminatingCalculation","withSpring","toValue","userConfig","callback","defaultConfig","damping","mass","stiffness","overshootClamping","restDisplacementThreshold","restSpeedThreshold","velocity","duration","dampingRatio","config","useDuration","configIsInvalid","some","x","console","warn","springOnFrame","animation","now","startTimestamp","current","timeFromStart","lastTimestamp","deltaTime","Math","min","t","v0","x0","zeta","omega0","omega1","position","newPosition","newVelocity","isOvershooting","isVelocity","isDisplacement","springIsNotInMove","isTriggeredTwice","previousAnimation","onStart","value","startValue","triggeredTwice","Number","acutalDuration","onFrame"],"mappings":"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","sourcesContent":["import { defineAnimation } from './util';\nimport {\n  Animation,\n  AnimationCallback,\n  AnimatableValue,\n  Timestamp,\n} from '../commonTypes';\nimport {\n  SpringConfig,\n  initialCalculations,\n  calcuateNewMassToMatchDuration,\n  SpringAnimation,\n  InnerSpringAnimation,\n  underDampedSpringCalculations,\n  criticallyDampedSpringCalculations,\n  isAnimationTerminatingCalculation,\n  SpringConfigInner,\n} from './springUtils';\n\nexport function withSpring(\n  toValue: AnimatableValue,\n  userConfig?: SpringConfig,\n  callback?: AnimationCallback\n): Animation<SpringAnimation> {\n  'worklet';\n\n  return defineAnimation<SpringAnimation>(toValue, () => {\n    'worklet';\n    const defaultConfig: Record<keyof SpringConfig, any> = {\n      damping: 10,\n      mass: 1,\n      stiffness: 100,\n      overshootClamping: false,\n      restDisplacementThreshold: 0.01,\n      restSpeedThreshold: 2,\n      velocity: 0,\n      duration: 2000,\n      dampingRatio: 0.5,\n    } as const;\n\n    const config: Record<keyof SpringConfig, any> & SpringConfigInner = {\n      ...defaultConfig,\n      ...userConfig,\n      useDuration: !!(userConfig?.duration || userConfig?.dampingRatio),\n      configIsInvalid: false,\n    };\n\n    if (\n      [\n        config.stiffness,\n        config.damping,\n        config.duration,\n        config.dampingRatio,\n        config.restDisplacementThreshold,\n        config.restSpeedThreshold,\n      ].some((x) => x <= 0) ||\n      config.mass === 0\n    ) {\n      config.configIsInvalid = true;\n      console.warn(\n        \"You have provided invalid spring animation configuration! \\n Value of stiffness, damping, duration and damping ratio must be greater than zero, and mass can't equal zero.\"\n      );\n    }\n\n    function springOnFrame(\n      animation: InnerSpringAnimation,\n      now: Timestamp\n    ): boolean {\n      const { toValue, startTimestamp, current } = animation;\n\n      const timeFromStart = now - startTimestamp;\n\n      if (config.useDuration && timeFromStart >= config.duration) {\n        animation.current = toValue;\n\n        // clear lastTimestamp to avoid using stale value by the next spring animation that starts after this one\n        animation.lastTimestamp = 0;\n        return true;\n      }\n\n      if (config.configIsInvalid) {\n        // We don't animate wrong config\n        if (config.useDuration) return false;\n        else {\n          animation.current = toValue;\n          animation.lastTimestamp = 0;\n          return true;\n        }\n      }\n      const { lastTimestamp, velocity } = animation;\n\n      const deltaTime = Math.min(now - lastTimestamp, 64);\n      animation.lastTimestamp = now;\n\n      const t = deltaTime / 1000;\n      const v0 = -velocity;\n      const x0 = toValue - current;\n\n      const { zeta, omega0, omega1 } = animation;\n\n      const { position: newPosition, velocity: newVelocity } =\n        zeta < 1\n          ? underDampedSpringCalculations(animation, {\n              zeta,\n              v0,\n              x0,\n              omega0,\n              omega1,\n              t,\n            })\n          : criticallyDampedSpringCalculations(animation, {\n              v0,\n              x0,\n              omega0,\n              t,\n            });\n\n      animation.current = newPosition;\n      animation.velocity = newVelocity;\n\n      const { isOvershooting, isVelocity, isDisplacement } =\n        isAnimationTerminatingCalculation(animation, config);\n\n      const springIsNotInMove =\n        isOvershooting || (isVelocity && isDisplacement);\n\n      if (!config.useDuration && springIsNotInMove) {\n        animation.velocity = 0;\n        animation.current = toValue;\n        // clear lastTimestamp to avoid using stale value by the next spring animation that starts after this one\n        animation.lastTimestamp = 0;\n        return true;\n      }\n\n      return false;\n    }\n\n    function isTriggeredTwice(\n      previousAnimation: SpringAnimation | undefined,\n      animation: SpringAnimation\n    ) {\n      return (\n        previousAnimation?.startTimestamp &&\n        previousAnimation?.toValue === animation.toValue &&\n        previousAnimation?.duration === animation.duration &&\n        previousAnimation?.dampingRatio === animation.dampingRatio\n      );\n    }\n\n    function onStart(\n      animation: SpringAnimation,\n      value: number,\n      now: Timestamp,\n      previousAnimation: SpringAnimation | undefined\n    ): void {\n      animation.current = value;\n      animation.startValue = value;\n\n      let mass = config.mass;\n      const triggeredTwice = isTriggeredTwice(previousAnimation, animation);\n\n      const duration = config.duration;\n\n      const x0 = triggeredTwice\n        ? // If animation is triggered twice we want to continue the previous animation\n          // form the previous starting point\n          (previousAnimation?.startValue as number)\n        : Number(animation.toValue) - value;\n\n      if (previousAnimation) {\n        animation.velocity =\n          (triggeredTwice\n            ? previousAnimation?.velocity\n            : previousAnimation?.velocity + config.velocity) || 0;\n      } else {\n        animation.velocity = config.velocity || 0;\n      }\n\n      if (triggeredTwice) {\n        animation.zeta = previousAnimation?.zeta || 0;\n        animation.omega0 = previousAnimation?.omega0 || 0;\n        animation.omega1 = previousAnimation?.omega1 || 0;\n      } else {\n        if (config.useDuration) {\n          const acutalDuration = triggeredTwice\n            ? // If animation is triggered twice we want to continue the previous animation\n              // so we need to include the time that already elapsed\n              duration -\n              ((previousAnimation?.lastTimestamp || 0) -\n                (previousAnimation?.startTimestamp || 0))\n            : duration;\n\n          config.duration = acutalDuration;\n          mass = calcuateNewMassToMatchDuration(x0, config, animation.velocity);\n        }\n\n        const { zeta, omega0, omega1 } = initialCalculations(mass, config);\n        animation.zeta = zeta;\n        animation.omega0 = omega0;\n        animation.omega1 = omega1;\n      }\n\n      animation.lastTimestamp = previousAnimation?.lastTimestamp || now;\n\n      animation.startTimestamp = triggeredTwice\n        ? previousAnimation?.startTimestamp || now\n        : now;\n    }\n\n    return {\n      onFrame: springOnFrame,\n      onStart,\n      toValue,\n      velocity: config.velocity || 0,\n      current: toValue,\n      startValue: 0,\n      callback,\n      lastTimestamp: 0,\n      startTimestamp: 0,\n      zeta: 0,\n      omega0: 0,\n      omega1: 0,\n    } as SpringAnimation;\n  });\n}\n"]},"metadata":{},"sourceType":"module"}