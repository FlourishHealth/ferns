{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport * as Clipboard from \"expo-clipboard\";\nimport * as Haptics from \"expo-haptics\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Vibration from \"react-native-web/dist/exports/Vibration\";\nimport { requestPermissions as _requestPermissions } from \"./Permissions\";\nexport function changeColorLuminance(hex, luminanceChange) {\n  hex = String(hex).replace(/[^0-9a-f]/gi, \"\");\n  if (hex.length === 3) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  } else if (hex.length !== 6) {\n    throw new Error(`Invalid color hex: ${hex}`);\n  }\n  var luminance;\n  switch (luminanceChange) {\n    case \"light\":\n      luminance = -0.2;\n      break;\n    case \"lighter\":\n      luminance = -0.33;\n      break;\n    case \"dark\":\n      luminance = 0.2;\n      break;\n    case \"darker\":\n      luminance = 0.33;\n      break;\n    default:\n      throw new Error(`Cannot change luminance to ${luminanceChange}`);\n  }\n  var rgb = \"#\";\n  for (var i = 0; i < 3; i++) {\n    var decimal = parseInt(hex.substr(i * 2, 2), 16);\n    var appliedLuminance = Math.round(Math.min(Math.max(0, decimal + decimal * luminance), 255)).toString(16);\n    rgb += `00${appliedLuminance}`.substr(appliedLuminance.length);\n  }\n  return rgb;\n}\nvar UnifierClass = function () {\n  function UnifierClass() {\n    _classCallCheck(this, UnifierClass);\n    this._web = false;\n    this._dev = false;\n    this.navigation = {\n      dismissOverlay: function dismissOverlay() {\n        console.warn(\"Dismiss overlay not supported.\");\n      }\n    };\n    this.utils = {\n      dismissKeyboard: function dismissKeyboard() {\n        Keyboard.dismiss();\n      },\n      dimensions: function dimensions() {\n        return {\n          width: Dimensions.get(\"window\").width,\n          height: Dimensions.get(\"window\").height\n        };\n      },\n      copyToClipboard: function copyToClipboard(text) {\n        Clipboard.setString(text);\n      },\n      orientationChange: function orientationChange(callback) {\n        Dimensions.addEventListener(\"change\", function () {\n          var screen = Dimensions.get(\"screen\");\n          var isPortrait = screen.width < screen.height;\n          callback(isPortrait ? \"portrait\" : \"landscape\");\n        });\n      },\n      requestPermissions: function () {\n        var _requestPermissions2 = _asyncToGenerator(function* (_perm) {\n          return _requestPermissions(_perm);\n        });\n        function requestPermissions(_x) {\n          return _requestPermissions2.apply(this, arguments);\n        }\n        return requestPermissions;\n      }(),\n      makePurchase: function makePurchase() {\n        console.warn(\"Make purchase not supported yet.\");\n      },\n      PaymentService: function PaymentService() {\n        console.warn(\"Make purchase not supported yet.\");\n      },\n      vibrate: function vibrate(pattern) {\n        Vibration.vibrate(pattern || [100], false);\n      },\n      haptic: function haptic() {\n        if (Platform.OS !== \"web\") {\n          return Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n        }\n        return;\n      },\n      openUrl: function () {\n        var _openUrl = _asyncToGenerator(function* (url) {\n          return Linking.openURL(url);\n        });\n        function openUrl(_x2) {\n          return _openUrl.apply(this, arguments);\n        }\n        return openUrl;\n      }()\n    };\n    this.storage = {\n      getItem: function () {\n        var _getItem = _asyncToGenerator(function* (key, defaultValue) {\n          try {\n            var jsonValue = yield AsyncStorage.getItem(key);\n            if (jsonValue) {\n              var value = JSON.parse(jsonValue);\n              if (value === null || value === undefined) {\n                return defaultValue;\n              } else {\n                return value;\n              }\n            } else if (defaultValue !== undefined) {\n              return defaultValue;\n            } else {\n              return null;\n            }\n          } catch (error) {\n            console.error(`[storage] Error reading ${key}`, error);\n            return defaultValue || null;\n          }\n        });\n        function getItem(_x3, _x4) {\n          return _getItem.apply(this, arguments);\n        }\n        return getItem;\n      }(),\n      setItem: function () {\n        var _setItem = _asyncToGenerator(function* (key, item) {\n          try {\n            var jsonValue = JSON.stringify(item);\n            yield AsyncStorage.setItem(key, jsonValue);\n          } catch (error) {\n            console.error(`[storage] Error storing ${key}`, item, error);\n            throw new Error(error);\n          }\n        });\n        function setItem(_x5, _x6) {\n          return _setItem.apply(this, arguments);\n        }\n        return setItem;\n      }()\n    };\n    this.tracking = {\n      log: function log(message) {\n        console.info(message);\n      }\n    };\n    this.initIcons = function () {\n      console.debug(\"[unifier] Initializing icons\");\n    };\n    console.debug(\"[unifier] Setting up Unifier\");\n  }\n  _createClass(UnifierClass, [{\n    key: \"web\",\n    get: function get() {\n      return this._web;\n    }\n  }, {\n    key: \"dev\",\n    get: function get() {\n      return this._dev;\n    }\n  }]);\n  return UnifierClass;\n}();\nexport var Unifier = new UnifierClass();","map":{"version":3,"sources":["../src/Unifier.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-empty-function */\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport * as Clipboard from \"expo-clipboard\";\nimport * as Haptics from \"expo-haptics\";\nimport { Dimensions, Keyboard, Linking, Platform, Vibration } from \"react-native\";\nimport { requestPermissions } from \"./Permissions\";\n// Changes a color luminance\nexport function changeColorLuminance(hex, luminanceChange) {\n    // Validate hex string, strip \"#\" if present.\n    hex = String(hex).replace(/[^0-9a-f]/gi, \"\");\n    if (hex.length === 3) {\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n    }\n    else if (hex.length !== 6) {\n        throw new Error(`Invalid color hex: ${hex}`);\n    }\n    let luminance;\n    switch (luminanceChange) {\n        case \"light\":\n            luminance = -0.2;\n            break;\n        case \"lighter\":\n            luminance = -0.33;\n            break;\n        case \"dark\":\n            luminance = 0.2;\n            break;\n        case \"darker\":\n            luminance = 0.33;\n            break;\n        default:\n            throw new Error(`Cannot change luminance to ${luminanceChange}`);\n    }\n    // Convert to decimal and change luminosity\n    let rgb = \"#\";\n    for (let i = 0; i < 3; i++) {\n        const decimal = parseInt(hex.substr(i * 2, 2), 16);\n        const appliedLuminance = Math.round(Math.min(Math.max(0, decimal + decimal * luminance), 255)).toString(16);\n        // 0 pad, if necessary.\n        rgb += `00${appliedLuminance}`.substr(appliedLuminance.length);\n    }\n    return rgb;\n}\nclass UnifierClass {\n    get web() {\n        return this._web;\n    }\n    get dev() {\n        return this._dev;\n    }\n    constructor() {\n        this._web = false;\n        this._dev = false;\n        this.navigation = {\n            dismissOverlay: () => {\n                console.warn(\"Dismiss overlay not supported.\");\n            },\n        };\n        // tracking: Tracking,\n        this.utils = {\n            dismissKeyboard: () => {\n                Keyboard.dismiss();\n            },\n            dimensions: () => ({\n                width: Dimensions.get(\"window\").width,\n                height: Dimensions.get(\"window\").height,\n            }),\n            copyToClipboard: (text) => {\n                Clipboard.setString(text);\n            },\n            orientationChange: (callback) => {\n                Dimensions.addEventListener(\"change\", () => {\n                    const screen = Dimensions.get(\"screen\");\n                    const isPortrait = screen.width < screen.height;\n                    callback(isPortrait ? \"portrait\" : \"landscape\");\n                });\n            },\n            requestPermissions: async (_perm) => {\n                return requestPermissions(_perm);\n                // return requestPermissions(perm);\n            },\n            makePurchase: () => {\n                console.warn(\"Make purchase not supported yet.\");\n            },\n            PaymentService: () => {\n                console.warn(\"Make purchase not supported yet.\");\n            },\n            vibrate: (pattern) => {\n                Vibration.vibrate(pattern || [100], false);\n            },\n            haptic: () => {\n                if (Platform.OS !== \"web\") {\n                    return Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                }\n                return;\n            },\n            openUrl: async (url) => {\n                return Linking.openURL(url);\n            },\n            // keepAwake: (activate: boolean) => {\n            //   if (activate) {\n            //     activateKeepAwake();\n            //   } else {\n            //     deactivateKeepAwake();\n            //   }\n            // },\n        };\n        this.storage = {\n            getItem: async (key, defaultValue) => {\n                try {\n                    const jsonValue = await AsyncStorage.getItem(key);\n                    if (jsonValue) {\n                        const value = JSON.parse(jsonValue);\n                        if (value === null || value === undefined) {\n                            return defaultValue;\n                        }\n                        else {\n                            return value;\n                        }\n                    }\n                    else if (defaultValue !== undefined) {\n                        return defaultValue;\n                    }\n                    else {\n                        return null;\n                    }\n                }\n                catch (error) {\n                    console.error(`[storage] Error reading ${key}`, error);\n                    return defaultValue || null;\n                }\n            },\n            setItem: async (key, item) => {\n                try {\n                    const jsonValue = JSON.stringify(item);\n                    await AsyncStorage.setItem(key, jsonValue);\n                }\n                catch (error) {\n                    console.error(`[storage] Error storing ${key}`, item, error);\n                    throw new Error(error);\n                }\n            },\n        };\n        this.tracking = {\n            log: (message) => {\n                console.info(message);\n            },\n        };\n        this.initIcons = () => {\n            console.debug(\"[unifier] Initializing icons\");\n        };\n        console.debug(\"[unifier] Setting up Unifier\");\n    }\n}\nexport const Unifier = new UnifierClass();\n//# sourceMappingURL=Unifier.js.map"]},"metadata":{},"sourceType":"module"}