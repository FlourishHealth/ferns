{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport EventManager, { actionSheetEventManager } from \"./eventmanager\";\nimport { RouterContext, RouterParamsContext, useRouter } from \"./hooks/use-router\";\nimport useSheetManager from \"./hooks/use-sheet-manager\";\nimport { useKeyboard } from \"./hooks/useKeyboard\";\nimport { SheetProvider, useProviderContext, useSheetIDContext } from \"./provider\";\nimport { getZIndexFromStack, isRenderedOnTop, SheetManager } from \"./sheetmanager\";\nimport { styles } from \"./styles\";\nimport { getElevation, SUPPORTED_ORIENTATIONS } from \"./utils\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default forwardRef(function ActionSheet(_a, ref) {\n  var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n  var _r = _a.animated,\n    animated = _r === void 0 ? true : _r,\n    _s = _a.closeOnPressBack,\n    closeOnPressBack = _s === void 0 ? true : _s,\n    _t = _a.springOffset,\n    springOffset = _t === void 0 ? 50 : _t,\n    _u = _a.elevation,\n    elevation = _u === void 0 ? 5 : _u,\n    _v = _a.defaultOverlayOpacity,\n    defaultOverlayOpacity = _v === void 0 ? 0.3 : _v,\n    _w = _a.overlayColor,\n    overlayColor = _w === void 0 ? 'black' : _w,\n    _x = _a.closable,\n    closable = _x === void 0 ? true : _x,\n    _y = _a.closeOnTouchBackdrop,\n    closeOnTouchBackdrop = _y === void 0 ? true : _y,\n    _z = _a.drawUnderStatusBar,\n    drawUnderStatusBar = _z === void 0 ? false : _z,\n    _0 = _a.gestureEnabled,\n    gestureEnabled = _0 === void 0 ? false : _0,\n    _1 = _a.isModal,\n    isModal = _1 === void 0 ? true : _1,\n    _2 = _a.snapPoints,\n    snapPoints = _2 === void 0 ? [100] : _2,\n    _3 = _a.initialSnapIndex,\n    initialSnapIndex = _3 === void 0 ? 0 : _3,\n    _4 = _a.overdrawEnabled,\n    overdrawEnabled = _4 === void 0 ? true : _4,\n    _5 = _a.overdrawFactor,\n    overdrawFactor = _5 === void 0 ? 15 : _5,\n    _6 = _a.overdrawSize,\n    overdrawSize = _6 === void 0 ? 100 : _6,\n    _7 = _a.zIndex,\n    zIndex = _7 === void 0 ? 999 : _7,\n    _8 = _a.keyboardHandlerEnabled,\n    keyboardHandlerEnabled = _8 === void 0 ? true : _8,\n    ExtraOverlayComponent = _a.ExtraOverlayComponent,\n    payload = _a.payload,\n    safeAreaInsets = _a.safeAreaInsets,\n    routes = _a.routes,\n    initialRoute = _a.initialRoute,\n    _onBeforeShow = _a.onBeforeShow,\n    enableRouterBackNavigation = _a.enableRouterBackNavigation,\n    onBeforeClose = _a.onBeforeClose,\n    props = __rest(_a, [\"animated\", \"closeOnPressBack\", \"springOffset\", \"elevation\", \"defaultOverlayOpacity\", \"overlayColor\", \"closable\", \"closeOnTouchBackdrop\", \"drawUnderStatusBar\", \"gestureEnabled\", \"isModal\", \"snapPoints\", \"initialSnapIndex\", \"overdrawEnabled\", \"overdrawFactor\", \"overdrawSize\", \"zIndex\", \"keyboardHandlerEnabled\", \"ExtraOverlayComponent\", \"payload\", \"safeAreaInsets\", \"routes\", \"initialRoute\", \"onBeforeShow\", \"enableRouterBackNavigation\", \"onBeforeClose\"]);\n  snapPoints = snapPoints[snapPoints.length - 1] !== 100 ? __spreadArray(__spreadArray([], snapPoints, true), [100], false) : snapPoints;\n  var initialValue = useRef(-1);\n  var actionSheetHeight = useRef(0);\n  var safeAreaPaddingTop = useRef((safeAreaInsets === null || safeAreaInsets === void 0 ? void 0 : safeAreaInsets.top) || 0);\n  var internalEventManager = React.useMemo(function () {\n    return new EventManager();\n  }, []);\n  var currentContext = useProviderContext();\n  var currentSnapIndex = useRef(initialSnapIndex);\n  var minTranslateValue = useRef(0);\n  var keyboardWasVisible = useRef(false);\n  var prevKeyboardHeight = useRef(0);\n  var id = useSheetIDContext();\n  var sheetId = props.id || id;\n  var lock = useRef(false);\n  var panViewRef = useRef();\n  var deviceContainerRef = useRef(null);\n  var isOrientationChanging = useRef(false);\n  var gestureBoundaries = useRef({});\n  var hiding = useRef(false);\n  var payloadRef = useRef(payload);\n  var initialWindowHeight = useRef(Dimensions.get('screen').height);\n  var _9 = useState({\n      width: Dimensions.get('window').width,\n      height: 0,\n      portrait: true,\n      paddingBottom: (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding) ? 25 : 0\n    }),\n    dimensions = _9[0],\n    setDimensions = _9[1];\n  var _10 = useSheetManager({\n      id: sheetId,\n      onHide: function onHide(data) {\n        hideSheet(undefined, data, true);\n      },\n      onBeforeShow: function onBeforeShow(data) {\n        var _a;\n        (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n        _onBeforeShow === null || _onBeforeShow === void 0 ? void 0 : _onBeforeShow(data);\n      },\n      onContextUpdate: function onContextUpdate() {\n        if (sheetId) {\n          SheetManager.add(sheetId, currentContext);\n          SheetManager.registerRef(sheetId, currentContext, {\n            current: _getRef()\n          });\n        }\n      }\n    }),\n    visible = _10.visible,\n    setVisible = _10.setVisible;\n  var animations = useState({\n    opacity: new Animated.Value(0),\n    translateY: new Animated.Value(0),\n    underlayTranslateY: new Animated.Value(100),\n    keyboardTranslate: new Animated.Value(0),\n    routeOpacity: new Animated.Value(0)\n  })[0];\n  var router = useRouter({\n    routes: routes,\n    getRef: function getRef() {\n      return _getRef();\n    },\n    initialRoute: initialRoute,\n    onNavigate: props.onNavigate,\n    onNavigateBack: props.onNavigateBack,\n    routeOpacity: animations.routeOpacity\n  });\n  var routerRef = useRef(router);\n  payloadRef.current = payload;\n  routerRef.current = router;\n  var keyboard = useKeyboard(keyboardHandlerEnabled && visible && dimensions.height !== 0, true, function () {\n    return null;\n  }, function () {\n    if (initialValue.current === -1) {\n      return;\n    }\n  });\n  var notifyOffsetChange = function notifyOffsetChange(value) {\n    internalEventManager.publish('onoffsetchange', value);\n  };\n  var returnAnimation = React.useCallback(function (velocity) {\n    if (!animated) {\n      animations.translateY.setValue(initialValue.current);\n      return;\n    }\n    var config = props.openAnimationConfig;\n    var correctedValue = initialValue.current > minTranslateValue.current ? initialValue.current : 0;\n    notifyOffsetChange(correctedValue);\n    Animated.spring(animations.translateY, __assign(__assign({\n      toValue: initialValue.current,\n      useNativeDriver: true\n    }, config), {\n      velocity: typeof velocity !== 'number' ? undefined : velocity\n    })).start();\n  }, [animated, props.openAnimationConfig]);\n  var keyboardAnimation = React.useCallback(function (shown) {\n    if (shown === void 0) {\n      shown = true;\n    }\n    Animated.spring(animations.keyboardTranslate, {\n      toValue: shown ? -keyboard.keyboardHeight : 0,\n      useNativeDriver: true\n    }).start();\n  }, [animated, props.openAnimationConfig, keyboard]);\n  var opacityAnimation = React.useCallback(function (opacity) {\n    Animated.timing(animations.opacity, {\n      duration: 150,\n      easing: Easing[\"in\"](Easing.ease),\n      toValue: opacity,\n      useNativeDriver: true\n    }).start();\n  }, []);\n  var hideAnimation = React.useCallback(function (vy, callback) {\n    if (!animated) {\n      callback === null || callback === void 0 ? void 0 : callback({\n        finished: true\n      });\n      return;\n    }\n    var config = props.closeAnimationConfig;\n    opacityAnimation(0);\n    var animation = Animated.spring(animations.translateY, __assign({\n      velocity: typeof vy !== 'number' ? 3.0 : vy + 1,\n      toValue: dimensions.height * 1.3,\n      useNativeDriver: true\n    }, config));\n    animation.start();\n    setTimeout(function () {\n      animation.stop();\n      callback === null || callback === void 0 ? void 0 : callback({\n        finished: true\n      });\n    }, 150);\n  }, [animated, dimensions.height, opacityAnimation, props.closeAnimationConfig]);\n  var getCurrentPosition = React.useCallback(function () {\n    return animations.translateY._value <= minTranslateValue.current + 5 ? 0 : animations.translateY._value;\n  }, []);\n  var getNextPosition = React.useCallback(function (snapIndex) {\n    return actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * snapPoints[snapIndex] / 100;\n  }, [snapPoints]);\n  var hardwareBackPressEvent = useRef();\n  var Root = isModal && !(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? Modal : Animated.View;\n  useEffect(function () {\n    var listener = animations.translateY.addListener(function (value) {\n      var _a;\n      var correctedValue = value.value > minTranslateValue.current ? value.value : 0;\n      (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, correctedValue, actionSheetHeight.current);\n      if (drawUnderStatusBar) {\n        if (lock.current) return;\n        var correctedHeight = keyboard.keyboardShown ? dimensions.height - keyboard.keyboardHeight : dimensions.height;\n        var correctedOffset = keyboard.keyboardShown ? value.value - keyboard.keyboardHeight : value.value;\n        if (actionSheetHeight.current > correctedHeight - 1) {\n          if (correctedOffset < 100) {\n            animations.underlayTranslateY.setValue(Math.max(correctedOffset, 0));\n          } else {\n            if (animations.underlayTranslateY._value < 100) {\n              animations.underlayTranslateY.setValue(100);\n            }\n          }\n        }\n      }\n    });\n    return function () {\n      listener && animations.translateY.removeListener(listener);\n    };\n  }, [props === null || props === void 0 ? void 0 : props.id, dimensions.height, keyboard.keyboardShown, keyboard.keyboardHeight]);\n  var onDeviceLayoutReset = useRef({});\n  var onDeviceLayout = React.useCallback(function (event) {\n    var _a;\n    var windowDimensions = Dimensions.get('window');\n    var isPortraitMode = windowDimensions.height > windowDimensions.width;\n    if (isOrientationChanging.current) return;\n    if (keyboard.keyboardShown && !isModal) {\n      return;\n    }\n    var deviceHeight = isModal ? windowDimensions.height : event.nativeEvent.layout.height;\n    var deviceWidth = isModal ? windowDimensions.width : event.nativeEvent.layout.width;\n    (_a = onDeviceLayoutReset.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    onDeviceLayoutReset.current.sub = internalEventManager.subscribe('safeAreaLayout', function () {\n      var _a, _b;\n      (_a = onDeviceLayoutReset.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n      var safeMarginFromTop = Platform.OS === 'ios' ? safeAreaPaddingTop.current || 0 : StatusBar.currentHeight || 0;\n      var height = deviceHeight - safeMarginFromTop;\n      var width = deviceWidth;\n      if ((height === null || height === void 0 ? void 0 : height.toFixed(0)) === ((_b = dimensions.height) === null || _b === void 0 ? void 0 : _b.toFixed(0)) && (width === null || width === void 0 ? void 0 : width.toFixed(0)) === dimensions.width.toFixed(0) && dimensions.portrait === isPortraitMode) {\n        return;\n      }\n      setDimensions({\n        width: isPortraitMode ? width : height,\n        height: isPortraitMode ? height : width,\n        portrait: isPortraitMode\n      });\n    });\n    clearTimeout(onDeviceLayoutReset.current.timer);\n    if (safeAreaPaddingTop.current !== undefined || Platform.OS !== 'ios') {\n      internalEventManager.publish('safeAreaLayout');\n    }\n  }, [keyboard.keyboardShown, isModal, internalEventManager, dimensions.width, dimensions.portrait, dimensions.height]);\n  var hideSheet = React.useCallback(function (vy, data, isSheetManagerOrRef) {\n    if (hiding.current) return;\n    if (!closable && !isSheetManagerOrRef) {\n      returnAnimation(vy);\n      return;\n    }\n    hiding.current = true;\n    onBeforeClose === null || onBeforeClose === void 0 ? void 0 : onBeforeClose(data || payloadRef.current || data);\n    setTimeout(function () {\n      hideAnimation(vy, function (_a) {\n        var _b, _c;\n        var finished = _a.finished;\n        if (finished) {\n          if (closable) {\n            setVisible(false);\n            if (props.onClose) {\n              (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props, data || payloadRef.current || data);\n              hiding.current = false;\n            }\n            (_c = hardwareBackPressEvent.current) === null || _c === void 0 ? void 0 : _c.remove();\n            if (sheetId) {\n              SheetManager.remove(sheetId, currentContext);\n              hiding.current = false;\n              actionSheetEventManager.publish(\"onclose_\".concat(sheetId), data || payloadRef.current || data, currentContext);\n            } else {\n              hiding.current = false;\n            }\n            currentSnapIndex.current = initialSnapIndex;\n          } else {\n            returnAnimation();\n          }\n        }\n      });\n    }, 1);\n    if (Platform.OS === 'web') {\n      document.body.style.overflowY = 'auto';\n      document.documentElement.style.overflowY = 'auto';\n    }\n  }, [closable, hideAnimation, props.onClose, returnAnimation, setVisible]);\n  var onHardwareBackPress = React.useCallback(function () {\n    var _a, _b;\n    if (visible && enableRouterBackNavigation && ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n      (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n      return true;\n    }\n    if (visible && closable && closeOnPressBack) {\n      hideSheet();\n      return true;\n    }\n    return false;\n  }, [closable, closeOnPressBack, hideSheet, enableRouterBackNavigation, visible]);\n  var snapForward = React.useCallback(function (vy) {\n    if (currentSnapIndex.current === snapPoints.length - 1) {\n      initialValue.current = getNextPosition(currentSnapIndex.current);\n      returnAnimation(vy);\n      return;\n    }\n    var nextSnapPoint = 0;\n    var nextSnapIndex = 0;\n    if (getCurrentPosition() === 0) {\n      nextSnapPoint = snapPoints[nextSnapIndex = snapPoints.length - 1];\n    } else {\n      for (var i = currentSnapIndex.current; i < snapPoints.length; i++) {\n        if (getNextPosition(i) < getCurrentPosition()) {\n          nextSnapPoint = snapPoints[nextSnapIndex = i];\n          break;\n        }\n      }\n    }\n    if (nextSnapPoint > 100) {\n      console.warn('Snap points should range between 0 to 100.');\n      returnAnimation(vy);\n      return;\n    }\n    currentSnapIndex.current = nextSnapIndex;\n    initialValue.current = getNextPosition(currentSnapIndex.current);\n    returnAnimation(vy);\n  }, [getCurrentPosition, getNextPosition, returnAnimation, snapPoints]);\n  var snapBackward = React.useCallback(function (vy) {\n    if (currentSnapIndex.current === 0) {\n      if (closable) {\n        initialValue.current = dimensions.height * 1.3;\n        hideSheet(vy);\n      } else {\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n      }\n      return;\n    }\n    var nextSnapPoint = 0;\n    var nextSnapIndex = 0;\n    for (var i = currentSnapIndex.current; i > -1; i--) {\n      if (getNextPosition(i) > getCurrentPosition()) {\n        nextSnapPoint = snapPoints[nextSnapIndex = i];\n        break;\n      }\n    }\n    if (nextSnapPoint < 0) {\n      console.warn('Snap points should range between 0 to 100.');\n      returnAnimation(vy);\n      return;\n    }\n    currentSnapIndex.current = nextSnapIndex;\n    initialValue.current = getNextPosition(currentSnapIndex.current);\n    returnAnimation(vy);\n  }, [closable, dimensions.height, getCurrentPosition, getNextPosition, hideSheet, returnAnimation, snapPoints]);\n  var handlers = React.useMemo(function () {\n    return !gestureEnabled ? {\n      panHandlers: {}\n    } : PanResponder.create({\n      onMoveShouldSetPanResponder: function onMoveShouldSetPanResponder(event, gesture) {\n        if (sheetId && !isRenderedOnTop(sheetId, currentContext)) return false;\n        var vy = gesture.vy < 0 ? gesture.vy * -1 : gesture.vy;\n        var vx = gesture.vx < 0 ? gesture.vx * -1 : gesture.vx;\n        if (vy < 0.05 || vx > 0.05) {\n          return false;\n        }\n        var gestures = true;\n        for (var _id in gestureBoundaries.current) {\n          var gestureBoundary = gestureBoundaries.current[_id];\n          if (getCurrentPosition() > 3 || !gestureBoundary) {\n            gestures = true;\n            break;\n          }\n          var scrollOffset = (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.scrollOffset) || 0;\n          if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y) || gesture.vy > 0 && scrollOffset <= 0 || getCurrentPosition() !== 0) {\n            if (!props.enableGesturesInScrollView && Platform.OS !== 'web' && event.nativeEvent.pageY > (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y)) {\n              return false;\n            } else {\n              gestures = true;\n            }\n          } else {\n            gestures = false;\n            break;\n          }\n        }\n        if (Platform.OS === 'web') {\n          if (!gestures) {\n            panViewRef.current.style.touchAction = 'none';\n          } else {\n            panViewRef.current.style.touchAction = 'auto';\n          }\n        }\n        return gestures;\n      },\n      onStartShouldSetPanResponder: function onStartShouldSetPanResponder(event, _gesture) {\n        if (sheetId && !isRenderedOnTop(sheetId, currentContext)) return false;\n        var gestures = true;\n        for (var _id in gestureBoundaries.current) {\n          var gestureBoundary = gestureBoundaries.current[_id];\n          if (getCurrentPosition() > 3 || !gestureBoundary) {\n            gestures = true;\n          }\n          var scrollOffset = (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.scrollOffset) || 0;\n          if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y) || scrollOffset <= 0 && getCurrentPosition() !== 0) {\n            if (Platform.OS !== 'web') {\n              if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y)) {\n                return true;\n              } else {\n                return false;\n              }\n            } else {\n              gestures = true;\n            }\n          } else {\n            gestures = false;\n          }\n        }\n        return gestures;\n      },\n      onPanResponderMove: function onPanResponderMove(_event, gesture) {\n        var value = initialValue.current + gesture.dy;\n        var correctedValue = value <= minTranslateValue.current ? minTranslateValue.current - value : value;\n        if (correctedValue / overdrawFactor >= overdrawSize && gesture.dy <= 0) {\n          return;\n        }\n        animations.translateY.setValue(value <= minTranslateValue.current ? overdrawEnabled ? minTranslateValue.current - correctedValue / overdrawFactor : minTranslateValue.current : value);\n      },\n      onPanResponderEnd: function onPanResponderEnd(_event, gesture) {\n        var isMovingUp = getCurrentPosition() < initialValue.current;\n        if (!isMovingUp && getCurrentPosition() < initialValue.current + springOffset || isMovingUp && getCurrentPosition() > initialValue.current - springOffset) {\n          returnAnimation(gesture.vy);\n          return;\n        }\n        if (!isMovingUp) {\n          snapBackward(gesture.vy);\n        } else {\n          snapForward(gesture.vy);\n        }\n      }\n    });\n  }, [gestureEnabled, sheetId, currentContext, getCurrentPosition, props.enableGesturesInScrollView, overdrawFactor, overdrawSize, animations.translateY, overdrawEnabled, springOffset, returnAnimation, snapBackward, snapForward]);\n  var onTouch = function onTouch() {\n    if (enableRouterBackNavigation && router.canGoBack()) {\n      router.goBack();\n      return;\n    }\n    if (closeOnTouchBackdrop && closable) {\n      hideSheet();\n    }\n  };\n  var onSheetLayout = React.useCallback(function (event) {\n    var _a;\n    if (isOrientationChanging.current) return;\n    var safeMarginFromTop = Platform.OS === 'ios' ? safeAreaPaddingTop.current || 0 : StatusBar.currentHeight || 0;\n    var windowDimensions = Dimensions.get('window');\n    var height = windowDimensions.height - safeMarginFromTop;\n    var orientationChanged = dimensions.portrait !== windowDimensions.width < windowDimensions.height;\n    if (orientationChanged) isOrientationChanging.current = true;\n    (_a = deviceContainerRef.current) === null || _a === void 0 ? void 0 : _a.setNativeProps({\n      style: {\n        height: Dimensions.get('screen').height - safeMarginFromTop\n      }\n    });\n    setDimensions(function (dim) {\n      return __assign(__assign({}, dim), {\n        height: height,\n        portrait: windowDimensions.width < windowDimensions.height\n      });\n    });\n    actionSheetHeight.current = event.nativeEvent.layout.height > height ? height : event.nativeEvent.layout.height;\n    minTranslateValue.current = height - actionSheetHeight.current;\n    if (initialValue.current < 0) {\n      animations.translateY.setValue(height * 1.1);\n    }\n    var nextInitialValue = actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * snapPoints[currentSnapIndex.current] / 100;\n    initialValue.current = (keyboard.keyboardShown || keyboardWasVisible.current) && initialValue.current <= nextInitialValue && initialValue.current >= minTranslateValue.current ? initialValue.current : nextInitialValue;\n    var wasVisible = keyboardWasVisible.current;\n    if (keyboard.keyboardShown) {\n      keyboardAnimation();\n      keyboardWasVisible.current = true;\n      prevKeyboardHeight.current = keyboard.keyboardHeight;\n    } else {\n      keyboardWasVisible.current = false;\n    }\n    opacityAnimation(1);\n    if (!wasVisible || keyboard.keyboardShown) {\n      returnAnimation();\n    } else {\n      keyboardAnimation(false);\n      returnAnimation();\n    }\n    if (isOrientationChanging.current) {\n      setTimeout(function () {\n        isOrientationChanging.current = false;\n      }, 300);\n    }\n    if (initialValue.current > 100) {\n      if (lock.current) return;\n      animations.underlayTranslateY.setValue(100);\n    }\n    if (Platform.OS === 'web') {\n      document.body.style.overflowY = 'hidden';\n      document.documentElement.style.overflowY = 'hidden';\n    }\n  }, [snapPoints, keyboard.keyboardShown, keyboard.keyboardHeight, opacityAnimation, returnAnimation, keyboardAnimation, animations.translateY, animations.underlayTranslateY, dimensions.portrait]);\n  var _getRef = useCallback(function () {\n    return {\n      show: function show() {\n        var _a;\n        _onBeforeShow === null || _onBeforeShow === void 0 ? void 0 : _onBeforeShow();\n        (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n        setVisible(true);\n      },\n      hide: function hide(data) {\n        hideSheet(undefined, data, true);\n      },\n      setModalVisible: function setModalVisible(_visible) {\n        if (_visible) {\n          setVisible(true);\n        } else {\n          hideSheet();\n        }\n      },\n      snapToOffset: function snapToOffset(offset) {\n        initialValue.current = actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * offset / 100;\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n      },\n      snapToRelativeOffset: function snapToRelativeOffset(offset) {\n        if (offset === 0) {\n          _getRef().snapToIndex(currentSnapIndex.current);\n          return;\n        }\n        var availableHeight = actionSheetHeight.current + minTranslateValue.current;\n        initialValue.current = initialValue.current + initialValue.current * (offset / 100);\n        if (initialValue.current > availableHeight) {\n          _getRef().snapToOffset(100);\n          return;\n        }\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n      },\n      snapToIndex: function snapToIndex(index) {\n        if (index > snapPoints.length || index < 0) return;\n        currentSnapIndex.current = index;\n        initialValue.current = getNextPosition(index);\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n      },\n      handleChildScrollEnd: function handleChildScrollEnd() {\n        console.warn('handleChildScrollEnd has been removed. Please use `useScrollHandlers` hook to enable scrolling in ActionSheet');\n      },\n      modifyGesturesForLayout: function modifyGesturesForLayout(_id, layout, scrollOffset) {\n        gestureBoundaries.current[_id] = __assign(__assign({}, layout), {\n          scrollOffset: scrollOffset\n        });\n      },\n      isGestureEnabled: function isGestureEnabled() {\n        return gestureEnabled;\n      },\n      isOpen: function isOpen() {\n        return visible;\n      },\n      ev: internalEventManager\n    };\n  }, [internalEventManager, setVisible, hideSheet, animations.translateY, props.openAnimationConfig, snapPoints.length, getNextPosition, gestureEnabled, visible, _onBeforeShow]);\n  useImperativeHandle(ref, _getRef, [_getRef]);\n  useEffect(function () {\n    if (sheetId) {\n      SheetManager.registerRef(sheetId, currentContext, {\n        current: _getRef()\n      });\n    }\n  }, [currentContext, _getRef, sheetId]);\n  var onRequestClose = React.useCallback(function () {\n    var _a, _b;\n    if (enableRouterBackNavigation && ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n      (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n      return;\n    }\n    hideSheet();\n  }, [hideSheet, enableRouterBackNavigation]);\n  var rootProps = React.useMemo(function () {\n    var _a, _b;\n    return isModal && !props.backgroundInteractionEnabled ? {\n      visible: true,\n      animationType: 'none',\n      testID: ((_a = props.testIDs) === null || _a === void 0 ? void 0 : _a.modal) || props.testID,\n      supportedOrientations: SUPPORTED_ORIENTATIONS,\n      onShow: props.onOpen,\n      onRequestClose: onRequestClose,\n      transparent: true,\n      statusBarTranslucent: true\n    } : {\n      testID: ((_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.root) || props.testID,\n      onLayout: function onLayout() {\n        var _a;\n        hardwareBackPressEvent.current = BackHandler.addEventListener('hardwareBackPress', onHardwareBackPress);\n        (_a = props === null || props === void 0 ? void 0 : props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props);\n      },\n      style: {\n        position: 'absolute',\n        zIndex: zIndex ? zIndex : sheetId ? getZIndexFromStack(sheetId, currentContext) : 999,\n        width: '100%',\n        height: initialWindowHeight.current\n      },\n      pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto'\n    };\n  }, [currentContext, isModal, onHardwareBackPress, onRequestClose, props, zIndex, sheetId]);\n  var renderRoute = useCallback(function (route) {\n    var _a;\n    var RouteComponent = route.component;\n    return _jsx(Animated.View, {\n      style: {\n        display: route.name !== ((_a = router.currentRoute) === null || _a === void 0 ? void 0 : _a.name) ? 'none' : 'flex',\n        opacity: animations.routeOpacity\n      },\n      children: _jsx(RouterParamsContext.Provider, {\n        value: route === null || route === void 0 ? void 0 : route.params,\n        children: _jsx(RouteComponent, {\n          router: router,\n          params: route === null || route === void 0 ? void 0 : route.params,\n          payload: payloadRef.current\n        })\n      })\n    }, route.name);\n  }, [animations.routeOpacity, router]);\n  var getPaddingBottom = function getPaddingBottom() {\n    var _a, _b, _c, _d, _e;\n    if (!props.useBottomSafeAreaPadding && !props.containerStyle) return 0;\n    var topPadding = !props.useBottomSafeAreaPadding ? 0 : Platform.OS === 'android' ? StatusBar.currentHeight && StatusBar.currentHeight > 35 ? 35 : StatusBar.currentHeight : (safeAreaPaddingTop.current || 0) > 30 ? 30 : safeAreaPaddingTop.current;\n    if (!props.useBottomSafeAreaPadding && props.containerStyle) {\n      return ((_a = props.containerStyle) === null || _a === void 0 ? void 0 : _a.paddingBottom) || props.containerStyle.padding || 0;\n    }\n    if (!props.containerStyle && (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding)) {\n      return topPadding;\n    }\n    if (typeof ((_b = props.containerStyle) === null || _b === void 0 ? void 0 : _b.paddingBottom) === 'string') return props.containerStyle.paddingBottom;\n    if (typeof ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.padding) === 'string') return props.containerStyle.padding;\n    if ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.paddingBottom) {\n      return topPadding + props.containerStyle.paddingBottom;\n    }\n    if ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.padding) {\n      return topPadding + props.containerStyle.padding;\n    }\n    return topPadding;\n  };\n  var paddingBottom = getPaddingBottom() || 0;\n  return _jsxs(_Fragment, {\n    children: [Platform.OS === 'ios' && !safeAreaInsets ? _jsx(SafeAreaView, {\n      pointerEvents: \"none\",\n      collapsable: false,\n      onLayout: function onLayout(event) {\n        var height = event.nativeEvent.layout.height;\n        if (height !== undefined) {\n          safeAreaPaddingTop.current = height;\n          clearTimeout(onDeviceLayoutReset.current.timer);\n          onDeviceLayoutReset.current.timer = setTimeout(function () {\n            internalEventManager.publish('safeAreaLayout');\n          }, 64);\n        }\n      },\n      style: {\n        position: 'absolute',\n        width: 1,\n        left: 0,\n        top: 0,\n        backgroundColor: 'transparent'\n      },\n      children: _jsx(View, {})\n    }) : null, visible ? _jsx(Root, _objectSpread(_objectSpread({}, rootProps), {}, {\n      children: _jsxs(Animated.View, {\n        onLayout: onDeviceLayout,\n        ref: deviceContainerRef,\n        pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto',\n        style: [styles.parentContainer, {\n          opacity: animations.opacity,\n          width: '100%',\n          justifyContent: 'flex-end',\n          transform: [{\n            translateY: animations.keyboardTranslate\n          }]\n        }],\n        children: [!(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? _jsx(TouchableOpacity, _objectSpread({\n          onPress: onTouch,\n          activeOpacity: defaultOverlayOpacity,\n          testID: (_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.backdrop,\n          style: {\n            height: dimensions.height + (safeAreaPaddingTop.current || 0) + 100,\n            width: '100%',\n            position: 'absolute',\n            backgroundColor: overlayColor,\n            opacity: defaultOverlayOpacity\n          }\n        }, props.backdropProps ? props.backdropProps : {})) : null, _jsxs(Animated.View, {\n          pointerEvents: \"box-none\",\n          style: __assign(__assign({\n            borderTopRightRadius: ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.borderTopRightRadius) || 10,\n            borderTopLeftRadius: ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.borderTopLeftRadius) || 10,\n            backgroundColor: ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.backgroundColor) || 'white',\n            borderBottomLeftRadius: ((_f = props.containerStyle) === null || _f === void 0 ? void 0 : _f.borderBottomLeftRadius) || undefined,\n            borderBottomRightRadius: ((_g = props.containerStyle) === null || _g === void 0 ? void 0 : _g.borderBottomRightRadius) || undefined,\n            borderRadius: ((_h = props.containerStyle) === null || _h === void 0 ? void 0 : _h.borderRadius) || undefined,\n            width: ((_j = props.containerStyle) === null || _j === void 0 ? void 0 : _j.width) || '100%'\n          }, getElevation(typeof elevation === 'number' ? elevation : 5)), {\n            flex: undefined,\n            height: dimensions.height,\n            maxHeight: dimensions.height,\n            paddingBottom: keyboard.keyboardShown ? keyboard.keyboardHeight || 0 : 0,\n            transform: [{\n              translateY: animations.translateY\n            }]\n          }),\n          children: [dimensions.height === 0 ? null : _jsxs(Animated.View, _objectSpread(_objectSpread({}, handlers.panHandlers), {}, {\n            onLayout: onSheetLayout,\n            ref: panViewRef,\n            testID: (_k = props.testIDs) === null || _k === void 0 ? void 0 : _k.sheet,\n            style: [styles.container, {\n              borderTopRightRadius: 10,\n              borderTopLeftRadius: 10\n            }, props.containerStyle, {\n              paddingBottom: keyboard.keyboardShown && typeof paddingBottom !== 'string' ? paddingBottom + 2 : paddingBottom,\n              maxHeight: keyboard.keyboardShown ? dimensions.height - keyboard.keyboardHeight : dimensions.height\n            }, {\n              overflow: 'hidden'\n            }],\n            children: [drawUnderStatusBar ? _jsx(Animated.View, {\n              style: {\n                height: 100,\n                position: 'absolute',\n                top: -50,\n                backgroundColor: ((_l = props.containerStyle) === null || _l === void 0 ? void 0 : _l.backgroundColor) || 'white',\n                width: '100%',\n                borderTopRightRadius: ((_m = props.containerStyle) === null || _m === void 0 ? void 0 : _m.borderRadius) || 10,\n                borderTopLeftRadius: ((_o = props.containerStyle) === null || _o === void 0 ? void 0 : _o.borderRadius) || 10,\n                transform: [{\n                  translateY: animations.underlayTranslateY\n                }]\n              }\n            }) : null, gestureEnabled || props.headerAlwaysVisible ? props.CustomHeaderComponent ? props.CustomHeaderComponent : _jsx(Animated.View, {\n              style: [styles.indicator, props.indicatorStyle]\n            }) : null, (router === null || router === void 0 ? void 0 : router.hasRoutes()) ? _jsx(RouterContext.Provider, {\n              value: router,\n              children: router === null || router === void 0 ? void 0 : router.stack.map(renderRoute)\n            }) : props === null || props === void 0 ? void 0 : props.children]\n          })), overdrawEnabled ? _jsx(Animated.View, {\n            style: {\n              position: 'absolute',\n              height: overdrawSize,\n              bottom: -overdrawSize,\n              backgroundColor: ((_p = props.containerStyle) === null || _p === void 0 ? void 0 : _p.backgroundColor) || 'white',\n              width: ((_q = props.containerStyle) === null || _q === void 0 ? void 0 : _q.width) || dimensions.width\n            }\n          }) : null]\n        }), ExtraOverlayComponent, props.withNestedSheetProvider, sheetId ? _jsx(SheetProvider, {\n          context: \"$$-auto-\".concat(sheetId, \"-\").concat(currentContext, \"-provider\")\n        }) : null]\n      })\n    })) : null]\n  });\n});","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","l","ar","Array","slice","concat","React","forwardRef","useCallback","useEffect","useImperativeHandle","useRef","useState","Animated","BackHandler","Dimensions","Easing","Modal","PanResponder","Platform","SafeAreaView","StatusBar","TouchableOpacity","View","EventManager","actionSheetEventManager","RouterContext","RouterParamsContext","useRouter","useSheetManager","useKeyboard","SheetProvider","useProviderContext","useSheetIDContext","getZIndexFromStack","isRenderedOnTop","SheetManager","styles","getElevation","SUPPORTED_ORIENTATIONS","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ActionSheet","_a","ref","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","animated","_s","closeOnPressBack","_t","springOffset","_u","elevation","_v","defaultOverlayOpacity","_w","overlayColor","_x","closable","_y","closeOnTouchBackdrop","_z","drawUnderStatusBar","_0","gestureEnabled","_1","isModal","_2","snapPoints","_3","initialSnapIndex","_4","overdrawEnabled","_5","overdrawFactor","_6","overdrawSize","_7","zIndex","_8","keyboardHandlerEnabled","ExtraOverlayComponent","payload","safeAreaInsets","routes","initialRoute","onBeforeShow","enableRouterBackNavigation","onBeforeClose","props","initialValue","actionSheetHeight","safeAreaPaddingTop","top","internalEventManager","useMemo","currentContext","currentSnapIndex","minTranslateValue","keyboardWasVisible","prevKeyboardHeight","id","sheetId","lock","panViewRef","deviceContainerRef","isOrientationChanging","gestureBoundaries","hiding","payloadRef","initialWindowHeight","get","height","_9","width","portrait","paddingBottom","useBottomSafeAreaPadding","dimensions","setDimensions","_10","onHide","data","hideSheet","undefined","routerRef","current","initialNavigation","onContextUpdate","add","registerRef","getRef","visible","setVisible","animations","opacity","Value","translateY","underlayTranslateY","keyboardTranslate","routeOpacity","router","onNavigate","onNavigateBack","keyboard","notifyOffsetChange","value","publish","returnAnimation","velocity","setValue","config","openAnimationConfig","correctedValue","spring","toValue","useNativeDriver","start","keyboardAnimation","shown","keyboardHeight","opacityAnimation","timing","duration","easing","ease","hideAnimation","vy","callback","finished","closeAnimationConfig","animation","setTimeout","stop","getCurrentPosition","_value","getNextPosition","snapIndex","hardwareBackPressEvent","Root","backgroundInteractionEnabled","listener","addListener","onChange","correctedHeight","keyboardShown","correctedOffset","Math","max","removeListener","onDeviceLayoutReset","onDeviceLayout","event","windowDimensions","isPortraitMode","deviceHeight","nativeEvent","layout","deviceWidth","sub","unsubscribe","subscribe","safeMarginFromTop","OS","currentHeight","toFixed","clearTimeout","timer","isSheetManagerOrRef","onClose","remove","document","body","style","overflowY","documentElement","onHardwareBackPress","canGoBack","goBack","snapForward","nextSnapPoint","nextSnapIndex","console","warn","snapBackward","handlers","panHandlers","create","onMoveShouldSetPanResponder","gesture","vx","gestures","_id","gestureBoundary","scrollOffset","pageY","y","enableGesturesInScrollView","touchAction","onStartShouldSetPanResponder","_gesture","onPanResponderMove","_event","dy","onPanResponderEnd","isMovingUp","onTouch","onSheetLayout","orientationChanged","setNativeProps","dim","nextInitialValue","wasVisible","show","hide","setModalVisible","_visible","snapToOffset","offset","snapToRelativeOffset","snapToIndex","availableHeight","index","handleChildScrollEnd","modifyGesturesForLayout","isGestureEnabled","isOpen","ev","onRequestClose","rootProps","animationType","testID","testIDs","modal","supportedOrientations","onShow","onOpen","transparent","statusBarTranslucent","root","onLayout","addEventListener","position","pointerEvents","renderRoute","route","RouteComponent","component","display","name","currentRoute","children","Provider","params","getPaddingBottom","containerStyle","topPadding","padding","collapsable","left","backgroundColor","_objectSpread","parentContainer","justifyContent","transform","onPress","activeOpacity","backdrop","backdropProps","borderTopRightRadius","borderTopLeftRadius","borderBottomLeftRadius","borderBottomRightRadius","borderRadius","flex","maxHeight","sheet","container","overflow","headerAlwaysVisible","CustomHeaderComponent","indicator","indicatorStyle","hasRoutes","stack","map","bottom","withNestedSheetProvider","context"],"sources":["/Users/josh/src/ui/node_modules/react-native-actions-sheet/dist/src/index.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n/* eslint-disable curly */\nimport React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState, } from 'react';\nimport { Animated, BackHandler, Dimensions, Easing, Modal, PanResponder, Platform, SafeAreaView, StatusBar, TouchableOpacity, View, } from 'react-native';\nimport EventManager, { actionSheetEventManager } from './eventmanager';\nimport { RouterContext, RouterParamsContext, useRouter, } from './hooks/use-router';\nimport useSheetManager from './hooks/use-sheet-manager';\nimport { useKeyboard } from './hooks/useKeyboard';\nimport { SheetProvider, useProviderContext, useSheetIDContext } from './provider';\nimport { getZIndexFromStack, isRenderedOnTop, SheetManager, } from './sheetmanager';\nimport { styles } from './styles';\nimport { getElevation, SUPPORTED_ORIENTATIONS } from './utils';\nexport default forwardRef(function ActionSheet(_a, ref) {\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n    var _r = _a.animated, animated = _r === void 0 ? true : _r, _s = _a.closeOnPressBack, closeOnPressBack = _s === void 0 ? true : _s, _t = _a.springOffset, springOffset = _t === void 0 ? 50 : _t, _u = _a.elevation, elevation = _u === void 0 ? 5 : _u, _v = _a.defaultOverlayOpacity, defaultOverlayOpacity = _v === void 0 ? 0.3 : _v, _w = _a.overlayColor, overlayColor = _w === void 0 ? 'black' : _w, _x = _a.closable, closable = _x === void 0 ? true : _x, _y = _a.closeOnTouchBackdrop, closeOnTouchBackdrop = _y === void 0 ? true : _y, _z = _a.drawUnderStatusBar, drawUnderStatusBar = _z === void 0 ? false : _z, _0 = _a.gestureEnabled, gestureEnabled = _0 === void 0 ? false : _0, _1 = _a.isModal, isModal = _1 === void 0 ? true : _1, _2 = _a.snapPoints, snapPoints = _2 === void 0 ? [100] : _2, _3 = _a.initialSnapIndex, initialSnapIndex = _3 === void 0 ? 0 : _3, _4 = _a.overdrawEnabled, overdrawEnabled = _4 === void 0 ? true : _4, _5 = _a.overdrawFactor, overdrawFactor = _5 === void 0 ? 15 : _5, _6 = _a.overdrawSize, overdrawSize = _6 === void 0 ? 100 : _6, _7 = _a.zIndex, zIndex = _7 === void 0 ? 999 : _7, _8 = _a.keyboardHandlerEnabled, keyboardHandlerEnabled = _8 === void 0 ? true : _8, ExtraOverlayComponent = _a.ExtraOverlayComponent, payload = _a.payload, safeAreaInsets = _a.safeAreaInsets, routes = _a.routes, initialRoute = _a.initialRoute, onBeforeShow = _a.onBeforeShow, enableRouterBackNavigation = _a.enableRouterBackNavigation, onBeforeClose = _a.onBeforeClose, props = __rest(_a, [\"animated\", \"closeOnPressBack\", \"springOffset\", \"elevation\", \"defaultOverlayOpacity\", \"overlayColor\", \"closable\", \"closeOnTouchBackdrop\", \"drawUnderStatusBar\", \"gestureEnabled\", \"isModal\", \"snapPoints\", \"initialSnapIndex\", \"overdrawEnabled\", \"overdrawFactor\", \"overdrawSize\", \"zIndex\", \"keyboardHandlerEnabled\", \"ExtraOverlayComponent\", \"payload\", \"safeAreaInsets\", \"routes\", \"initialRoute\", \"onBeforeShow\", \"enableRouterBackNavigation\", \"onBeforeClose\"]);\n    snapPoints =\n        snapPoints[snapPoints.length - 1] !== 100\n            ? __spreadArray(__spreadArray([], snapPoints, true), [100], false) : snapPoints;\n    var initialValue = useRef(-1);\n    var actionSheetHeight = useRef(0);\n    var safeAreaPaddingTop = useRef((safeAreaInsets === null || safeAreaInsets === void 0 ? void 0 : safeAreaInsets.top) || 0);\n    var internalEventManager = React.useMemo(function () { return new EventManager(); }, []);\n    var currentContext = useProviderContext();\n    var currentSnapIndex = useRef(initialSnapIndex);\n    var minTranslateValue = useRef(0);\n    var keyboardWasVisible = useRef(false);\n    var prevKeyboardHeight = useRef(0);\n    var id = useSheetIDContext();\n    var sheetId = props.id || id;\n    var lock = useRef(false);\n    var panViewRef = useRef();\n    var deviceContainerRef = useRef(null);\n    var isOrientationChanging = useRef(false);\n    var gestureBoundaries = useRef({});\n    var hiding = useRef(false);\n    var payloadRef = useRef(payload);\n    var initialWindowHeight = useRef(Dimensions.get('screen').height);\n    var _9 = useState({\n        width: Dimensions.get('window').width,\n        height: 0,\n        portrait: true,\n        paddingBottom: (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding) ? 25 : 0\n    }), dimensions = _9[0], setDimensions = _9[1];\n    var _10 = useSheetManager({\n        id: sheetId,\n        onHide: function (data) {\n            hideSheet(undefined, data, true);\n        },\n        onBeforeShow: function (data) {\n            var _a;\n            (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n            onBeforeShow === null || onBeforeShow === void 0 ? void 0 : onBeforeShow(data);\n        },\n        onContextUpdate: function () {\n            if (sheetId) {\n                SheetManager.add(sheetId, currentContext);\n                SheetManager.registerRef(sheetId, currentContext, {\n                    current: getRef()\n                });\n            }\n        }\n    }), visible = _10.visible, setVisible = _10.setVisible;\n    var animations = useState({\n        opacity: new Animated.Value(0),\n        translateY: new Animated.Value(0),\n        underlayTranslateY: new Animated.Value(100),\n        keyboardTranslate: new Animated.Value(0),\n        routeOpacity: new Animated.Value(0)\n    })[0];\n    var router = useRouter({\n        routes: routes,\n        getRef: function () { return getRef(); },\n        initialRoute: initialRoute,\n        onNavigate: props.onNavigate,\n        onNavigateBack: props.onNavigateBack,\n        routeOpacity: animations.routeOpacity\n    });\n    var routerRef = useRef(router);\n    payloadRef.current = payload;\n    routerRef.current = router;\n    var keyboard = useKeyboard(keyboardHandlerEnabled && visible && dimensions.height !== 0, true, function () { return null; }, function () {\n        // Don't run `hideKeyboard` callback if the `showKeyboard` hasn't ran yet.\n        // Fix a race condition when you open a action sheet while you have the keyboard opened.\n        if (initialValue.current === -1) {\n            return;\n        }\n    });\n    var notifyOffsetChange = function (value) {\n        internalEventManager.publish('onoffsetchange', value);\n    };\n    var returnAnimation = React.useCallback(function (velocity) {\n        if (!animated) {\n            animations.translateY.setValue(initialValue.current);\n            return;\n        }\n        var config = props.openAnimationConfig;\n        var correctedValue = initialValue.current > minTranslateValue.current\n            ? initialValue.current\n            : 0;\n        notifyOffsetChange(correctedValue);\n        Animated.spring(animations.translateY, __assign(__assign({ toValue: initialValue.current, useNativeDriver: true }, config), { velocity: typeof velocity !== 'number' ? undefined : velocity })).start();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [animated, props.openAnimationConfig]);\n    var keyboardAnimation = React.useCallback(function (shown) {\n        if (shown === void 0) { shown = true; }\n        Animated.spring(animations.keyboardTranslate, {\n            toValue: shown ? -keyboard.keyboardHeight : 0,\n            useNativeDriver: true\n        }).start();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [animated, props.openAnimationConfig, keyboard]);\n    var opacityAnimation = React.useCallback(function (opacity) {\n        Animated.timing(animations.opacity, {\n            duration: 150,\n            easing: Easing[\"in\"](Easing.ease),\n            toValue: opacity,\n            useNativeDriver: true\n        }).start();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []);\n    var hideAnimation = React.useCallback(function (vy, callback) {\n        if (!animated) {\n            callback === null || callback === void 0 ? void 0 : callback({ finished: true });\n            return;\n        }\n        var config = props.closeAnimationConfig;\n        opacityAnimation(0);\n        var animation = Animated.spring(animations.translateY, __assign({ velocity: typeof vy !== 'number' ? 3.0 : vy + 1, toValue: dimensions.height * 1.3, useNativeDriver: true }, config));\n        animation.start();\n        setTimeout(function () {\n            animation.stop();\n            callback === null || callback === void 0 ? void 0 : callback({ finished: true });\n        }, 150);\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n        animated,\n        dimensions.height,\n        opacityAnimation,\n        props.closeAnimationConfig,\n    ]);\n    var getCurrentPosition = React.useCallback(function () {\n        //@ts-ignore\n        return animations.translateY._value <= minTranslateValue.current + 5\n            ? 0\n            : //@ts-ignore\n                animations.translateY._value;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    var getNextPosition = React.useCallback(function (snapIndex) {\n        return (actionSheetHeight.current +\n            minTranslateValue.current -\n            (actionSheetHeight.current * snapPoints[snapIndex]) / 100);\n    }, [snapPoints]);\n    var hardwareBackPressEvent = useRef();\n    var Root = isModal && !(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? Modal : Animated.View;\n    useEffect(function () {\n        var listener = animations.translateY.addListener(function (value) {\n            var _a;\n            var correctedValue = value.value > minTranslateValue.current ? value.value : 0;\n            (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, correctedValue, actionSheetHeight.current);\n            if (drawUnderStatusBar) {\n                if (lock.current)\n                    return;\n                var correctedHeight = keyboard.keyboardShown\n                    ? dimensions.height - keyboard.keyboardHeight\n                    : dimensions.height;\n                var correctedOffset = keyboard.keyboardShown\n                    ? value.value - keyboard.keyboardHeight\n                    : value.value;\n                if (actionSheetHeight.current > correctedHeight - 1) {\n                    if (correctedOffset < 100) {\n                        animations.underlayTranslateY.setValue(Math.max(correctedOffset, 0));\n                    }\n                    else {\n                        //@ts-ignore\n                        if (animations.underlayTranslateY._value < 100) {\n                            animations.underlayTranslateY.setValue(100);\n                        }\n                    }\n                }\n            }\n        });\n        return function () {\n            listener && animations.translateY.removeListener(listener);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        props === null || props === void 0 ? void 0 : props.id,\n        dimensions.height,\n        keyboard.keyboardShown,\n        keyboard.keyboardHeight,\n    ]);\n    var onDeviceLayoutReset = useRef({});\n    var onDeviceLayout = React.useCallback(function (event) {\n        var _a;\n        var windowDimensions = Dimensions.get('window');\n        var isPortraitMode = windowDimensions.height > windowDimensions.width;\n        if (isOrientationChanging.current)\n            return;\n        if (keyboard.keyboardShown && !isModal) {\n            return;\n        }\n        // If this is a modal, simply use window dimensions\n        // for a more accurate height value for the action sheet.\n        var deviceHeight = isModal\n            ? windowDimensions.height\n            : event.nativeEvent.layout.height;\n        var deviceWidth = isModal\n            ? windowDimensions.width\n            : event.nativeEvent.layout.width;\n        (_a = onDeviceLayoutReset.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n        onDeviceLayoutReset.current.sub = internalEventManager.subscribe('safeAreaLayout', function () {\n            var _a, _b;\n            (_a = onDeviceLayoutReset.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n            var safeMarginFromTop = Platform.OS === 'ios'\n                ? safeAreaPaddingTop.current || 0\n                : StatusBar.currentHeight || 0;\n            var height = deviceHeight - safeMarginFromTop;\n            var width = deviceWidth;\n            if ((height === null || height === void 0 ? void 0 : height.toFixed(0)) === ((_b = dimensions.height) === null || _b === void 0 ? void 0 : _b.toFixed(0)) &&\n                (width === null || width === void 0 ? void 0 : width.toFixed(0)) === dimensions.width.toFixed(0) &&\n                dimensions.portrait === isPortraitMode) {\n                return;\n            }\n            setDimensions({\n                width: isPortraitMode ? width : height,\n                height: isPortraitMode ? height : width,\n                portrait: isPortraitMode\n            });\n        });\n        clearTimeout(onDeviceLayoutReset.current.timer);\n        if (safeAreaPaddingTop.current !== undefined || Platform.OS !== 'ios') {\n            internalEventManager.publish('safeAreaLayout');\n        }\n    }, [\n        keyboard.keyboardShown,\n        isModal,\n        internalEventManager,\n        dimensions.width,\n        dimensions.portrait,\n        dimensions.height,\n    ]);\n    var hideSheet = React.useCallback(function (vy, data, isSheetManagerOrRef) {\n        if (hiding.current)\n            return;\n        if (!closable && !isSheetManagerOrRef) {\n            returnAnimation(vy);\n            return;\n        }\n        hiding.current = true;\n        onBeforeClose === null || onBeforeClose === void 0 ? void 0 : onBeforeClose(data || payloadRef.current || data);\n        setTimeout(function () {\n            hideAnimation(vy, function (_a) {\n                var _b, _c;\n                var finished = _a.finished;\n                if (finished) {\n                    if (closable) {\n                        setVisible(false);\n                        if (props.onClose) {\n                            (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props, data || payloadRef.current || data);\n                            hiding.current = false;\n                        }\n                        (_c = hardwareBackPressEvent.current) === null || _c === void 0 ? void 0 : _c.remove();\n                        if (sheetId) {\n                            SheetManager.remove(sheetId, currentContext);\n                            hiding.current = false;\n                            actionSheetEventManager.publish(\"onclose_\".concat(sheetId), data || payloadRef.current || data, currentContext);\n                        }\n                        else {\n                            hiding.current = false;\n                        }\n                        currentSnapIndex.current = initialSnapIndex;\n                    }\n                    else {\n                        returnAnimation();\n                    }\n                }\n            });\n        }, 1);\n        if (Platform.OS === 'web') {\n            document.body.style.overflowY = 'auto';\n            document.documentElement.style.overflowY = 'auto';\n        }\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [closable, hideAnimation, props.onClose, returnAnimation, setVisible]);\n    var onHardwareBackPress = React.useCallback(function () {\n        var _a, _b;\n        if (visible &&\n            enableRouterBackNavigation &&\n            ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n            (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n            return true;\n        }\n        if (visible && closable && closeOnPressBack) {\n            hideSheet();\n            return true;\n        }\n        return false;\n    }, [\n        closable,\n        closeOnPressBack,\n        hideSheet,\n        enableRouterBackNavigation,\n        visible,\n    ]);\n    /**\n     * Snap towards the top\n     */\n    var snapForward = React.useCallback(function (vy) {\n        if (currentSnapIndex.current === snapPoints.length - 1) {\n            initialValue.current = getNextPosition(currentSnapIndex.current);\n            returnAnimation(vy);\n            return;\n        }\n        var nextSnapPoint = 0;\n        var nextSnapIndex = 0;\n        if (getCurrentPosition() === 0) {\n            nextSnapPoint = snapPoints[(nextSnapIndex = snapPoints.length - 1)];\n        }\n        else {\n            for (var i = currentSnapIndex.current; i < snapPoints.length; i++) {\n                if (getNextPosition(i) < getCurrentPosition()) {\n                    nextSnapPoint = snapPoints[(nextSnapIndex = i)];\n                    break;\n                }\n            }\n        }\n        if (nextSnapPoint > 100) {\n            console.warn('Snap points should range between 0 to 100.');\n            returnAnimation(vy);\n            return;\n        }\n        currentSnapIndex.current = nextSnapIndex;\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n    }, [getCurrentPosition, getNextPosition, returnAnimation, snapPoints]);\n    /**\n     * Snap towards the bottom\n     */\n    var snapBackward = React.useCallback(function (vy) {\n        if (currentSnapIndex.current === 0) {\n            if (closable) {\n                initialValue.current = dimensions.height * 1.3;\n                hideSheet(vy);\n            }\n            else {\n                initialValue.current = getNextPosition(currentSnapIndex.current);\n                returnAnimation(vy);\n            }\n            return;\n        }\n        var nextSnapPoint = 0;\n        var nextSnapIndex = 0;\n        for (var i = currentSnapIndex.current; i > -1; i--) {\n            if (getNextPosition(i) > getCurrentPosition()) {\n                nextSnapPoint = snapPoints[(nextSnapIndex = i)];\n                break;\n            }\n        }\n        if (nextSnapPoint < 0) {\n            console.warn('Snap points should range between 0 to 100.');\n            returnAnimation(vy);\n            return;\n        }\n        currentSnapIndex.current = nextSnapIndex;\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n    }, [\n        closable,\n        dimensions.height,\n        getCurrentPosition,\n        getNextPosition,\n        hideSheet,\n        returnAnimation,\n        snapPoints,\n    ]);\n    var handlers = React.useMemo(function () {\n        return !gestureEnabled\n            ? { panHandlers: {} }\n            : PanResponder.create({\n                onMoveShouldSetPanResponder: function (event, gesture) {\n                    if (sheetId && !isRenderedOnTop(sheetId, currentContext))\n                        return false;\n                    var vy = gesture.vy < 0 ? gesture.vy * -1 : gesture.vy;\n                    var vx = gesture.vx < 0 ? gesture.vx * -1 : gesture.vx;\n                    if (vy < 0.05 || vx > 0.05) {\n                        return false;\n                    }\n                    var gestures = true;\n                    for (var _id in gestureBoundaries.current) {\n                        var gestureBoundary = gestureBoundaries.current[_id];\n                        if (getCurrentPosition() > 3 || !gestureBoundary) {\n                            gestures = true;\n                            break;\n                        }\n                        var scrollOffset = (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.scrollOffset) || 0;\n                        if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y) ||\n                            (gesture.vy > 0 && scrollOffset <= 0) ||\n                            getCurrentPosition() !== 0) {\n                            if (!props.enableGesturesInScrollView &&\n                                Platform.OS !== 'web' &&\n                                event.nativeEvent.pageY > (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y)) {\n                                return false;\n                            }\n                            else {\n                                gestures = true;\n                            }\n                        }\n                        else {\n                            gestures = false;\n                            break;\n                        }\n                    }\n                    if (Platform.OS === 'web') {\n                        if (!gestures) {\n                            //@ts-ignore\n                            panViewRef.current.style.touchAction = 'none';\n                        }\n                        else {\n                            //@ts-ignore\n                            panViewRef.current.style.touchAction = 'auto';\n                        }\n                    }\n                    return gestures;\n                },\n                onStartShouldSetPanResponder: function (event, _gesture) {\n                    if (sheetId && !isRenderedOnTop(sheetId, currentContext))\n                        return false;\n                    var gestures = true;\n                    for (var _id in gestureBoundaries.current) {\n                        var gestureBoundary = gestureBoundaries.current[_id];\n                        if (getCurrentPosition() > 3 || !gestureBoundary) {\n                            gestures = true;\n                        }\n                        var scrollOffset = (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.scrollOffset) || 0;\n                        if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y) ||\n                            (scrollOffset <= 0 && getCurrentPosition() !== 0)) {\n                            if (Platform.OS !== 'web') {\n                                if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y)) {\n                                    return true;\n                                }\n                                else {\n                                    return false;\n                                }\n                            }\n                            else {\n                                gestures = true;\n                            }\n                        }\n                        else {\n                            gestures = false;\n                        }\n                    }\n                    return gestures;\n                },\n                onPanResponderMove: function (_event, gesture) {\n                    var value = initialValue.current + gesture.dy;\n                    var correctedValue = \n                    //@ts-ignore\n                    value <= minTranslateValue.current\n                        ? //@ts-ignore\n                            minTranslateValue.current - value\n                        : //@ts-ignore\n                            value;\n                    if (\n                    //@ts-ignore\n                    correctedValue / overdrawFactor >= overdrawSize &&\n                        gesture.dy <= 0) {\n                        return;\n                    }\n                    animations.translateY.setValue(value <= minTranslateValue.current\n                        ? overdrawEnabled\n                            ? minTranslateValue.current -\n                                correctedValue / overdrawFactor\n                            : minTranslateValue.current\n                        : value);\n                },\n                onPanResponderEnd: function (_event, gesture) {\n                    var isMovingUp = getCurrentPosition() < initialValue.current;\n                    if ((!isMovingUp &&\n                        getCurrentPosition() <\n                            initialValue.current + springOffset) ||\n                        (isMovingUp &&\n                            getCurrentPosition() > initialValue.current - springOffset)) {\n                        returnAnimation(gesture.vy);\n                        return;\n                    }\n                    if (!isMovingUp) {\n                        snapBackward(gesture.vy);\n                    }\n                    else {\n                        snapForward(gesture.vy);\n                    }\n                }\n            });\n    }, [\n        gestureEnabled,\n        sheetId,\n        currentContext,\n        getCurrentPosition,\n        props.enableGesturesInScrollView,\n        overdrawFactor,\n        overdrawSize,\n        animations.translateY,\n        overdrawEnabled,\n        springOffset,\n        returnAnimation,\n        snapBackward,\n        snapForward,\n    ]);\n    var onTouch = function () {\n        if (enableRouterBackNavigation && router.canGoBack()) {\n            router.goBack();\n            return;\n        }\n        if (closeOnTouchBackdrop && closable) {\n            hideSheet();\n        }\n    };\n    var onSheetLayout = React.useCallback(function (event) {\n        var _a;\n        if (isOrientationChanging.current)\n            return;\n        var safeMarginFromTop = Platform.OS === 'ios'\n            ? safeAreaPaddingTop.current || 0\n            : StatusBar.currentHeight || 0;\n        var windowDimensions = Dimensions.get('window');\n        var height = windowDimensions.height - safeMarginFromTop;\n        var orientationChanged = dimensions.portrait !==\n            windowDimensions.width < windowDimensions.height;\n        if (orientationChanged)\n            isOrientationChanging.current = true;\n        (_a = deviceContainerRef.current) === null || _a === void 0 ? void 0 : _a.setNativeProps({\n            style: {\n                height: Dimensions.get('screen').height - safeMarginFromTop\n            }\n        });\n        setDimensions(function (dim) {\n            return __assign(__assign({}, dim), { height: height, portrait: windowDimensions.width < windowDimensions.height });\n        });\n        actionSheetHeight.current =\n            event.nativeEvent.layout.height > height\n                ? height\n                : event.nativeEvent.layout.height;\n        minTranslateValue.current = height - actionSheetHeight.current;\n        if (initialValue.current < 0) {\n            animations.translateY.setValue(height * 1.1);\n        }\n        var nextInitialValue = actionSheetHeight.current +\n            minTranslateValue.current -\n            (actionSheetHeight.current * snapPoints[currentSnapIndex.current]) /\n                100;\n        initialValue.current =\n            (keyboard.keyboardShown || keyboardWasVisible.current) &&\n                initialValue.current <= nextInitialValue &&\n                initialValue.current >= minTranslateValue.current\n                ? initialValue.current\n                : nextInitialValue;\n        var wasVisible = keyboardWasVisible.current;\n        if (keyboard.keyboardShown) {\n            keyboardAnimation();\n            keyboardWasVisible.current = true;\n            prevKeyboardHeight.current = keyboard.keyboardHeight;\n        }\n        else {\n            keyboardWasVisible.current = false;\n        }\n        opacityAnimation(1);\n        if (!wasVisible || keyboard.keyboardShown) {\n            returnAnimation();\n        }\n        else {\n            keyboardAnimation(false);\n            returnAnimation();\n        }\n        if (isOrientationChanging.current) {\n            setTimeout(function () {\n                isOrientationChanging.current = false;\n            }, 300);\n        }\n        if (initialValue.current > 100) {\n            if (lock.current)\n                return;\n            animations.underlayTranslateY.setValue(100);\n        }\n        if (Platform.OS === 'web') {\n            document.body.style.overflowY = 'hidden';\n            document.documentElement.style.overflowY = 'hidden';\n        }\n    }, [\n        snapPoints,\n        keyboard.keyboardShown,\n        keyboard.keyboardHeight,\n        opacityAnimation,\n        returnAnimation,\n        keyboardAnimation,\n        animations.translateY,\n        animations.underlayTranslateY,\n        dimensions.portrait,\n    ]);\n    var getRef = useCallback(function () { return ({\n        show: function () {\n            var _a;\n            onBeforeShow === null || onBeforeShow === void 0 ? void 0 : onBeforeShow();\n            (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n            setVisible(true);\n        },\n        hide: function (data) {\n            hideSheet(undefined, data, true);\n        },\n        setModalVisible: function (_visible) {\n            if (_visible) {\n                setVisible(true);\n            }\n            else {\n                hideSheet();\n            }\n        },\n        snapToOffset: function (offset) {\n            initialValue.current =\n                actionSheetHeight.current +\n                    minTranslateValue.current -\n                    (actionSheetHeight.current * offset) / 100;\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n        },\n        snapToRelativeOffset: function (offset) {\n            if (offset === 0) {\n                getRef().snapToIndex(currentSnapIndex.current);\n                return;\n            }\n            var availableHeight = actionSheetHeight.current + minTranslateValue.current;\n            initialValue.current =\n                initialValue.current + initialValue.current * (offset / 100);\n            if (initialValue.current > availableHeight) {\n                getRef().snapToOffset(100);\n                return;\n            }\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n        },\n        snapToIndex: function (index) {\n            if (index > snapPoints.length || index < 0)\n                return;\n            currentSnapIndex.current = index;\n            initialValue.current = getNextPosition(index);\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n        },\n        handleChildScrollEnd: function () {\n            console.warn('handleChildScrollEnd has been removed. Please use `useScrollHandlers` hook to enable scrolling in ActionSheet');\n        },\n        modifyGesturesForLayout: function (_id, layout, scrollOffset) {\n            //@ts-ignore\n            gestureBoundaries.current[_id] = __assign(__assign({}, layout), { scrollOffset: scrollOffset });\n        },\n        isGestureEnabled: function () { return gestureEnabled; },\n        isOpen: function () { return visible; },\n        ev: internalEventManager\n    }); }, [\n        internalEventManager,\n        setVisible,\n        hideSheet,\n        animations.translateY,\n        props.openAnimationConfig,\n        snapPoints.length,\n        getNextPosition,\n        gestureEnabled,\n        visible,\n        onBeforeShow,\n    ]);\n    useImperativeHandle(ref, getRef, [getRef]);\n    useEffect(function () {\n        if (sheetId) {\n            SheetManager.registerRef(sheetId, currentContext, {\n                current: getRef()\n            });\n        }\n    }, [currentContext, getRef, sheetId]);\n    var onRequestClose = React.useCallback(function () {\n        var _a, _b;\n        if (enableRouterBackNavigation && ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n            (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n            return;\n        }\n        hideSheet();\n    }, [hideSheet, enableRouterBackNavigation]);\n    var rootProps = React.useMemo(function () {\n        var _a, _b;\n        return isModal && !props.backgroundInteractionEnabled\n            ? {\n                visible: true,\n                animationType: 'none',\n                testID: ((_a = props.testIDs) === null || _a === void 0 ? void 0 : _a.modal) || props.testID,\n                supportedOrientations: SUPPORTED_ORIENTATIONS,\n                onShow: props.onOpen,\n                onRequestClose: onRequestClose,\n                transparent: true,\n                /**\n                 * Always true, it causes issue with keyboard handling.\n                 */\n                statusBarTranslucent: true\n            }\n            : {\n                testID: ((_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.root) || props.testID,\n                onLayout: function () {\n                    var _a;\n                    hardwareBackPressEvent.current = BackHandler.addEventListener('hardwareBackPress', onHardwareBackPress);\n                    (_a = props === null || props === void 0 ? void 0 : props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props);\n                },\n                style: {\n                    position: 'absolute',\n                    zIndex: zIndex\n                        ? zIndex\n                        : sheetId\n                            ? getZIndexFromStack(sheetId, currentContext)\n                            : 999,\n                    width: '100%',\n                    height: initialWindowHeight.current\n                },\n                pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled)\n                    ? 'box-none'\n                    : 'auto'\n            };\n    }, [\n        currentContext,\n        isModal,\n        onHardwareBackPress,\n        onRequestClose,\n        props,\n        zIndex,\n        sheetId,\n    ]);\n    var renderRoute = useCallback(function (route) {\n        var _a;\n        var RouteComponent = route.component;\n        return (<Animated.View key={route.name} style={{\n                display: route.name !== ((_a = router.currentRoute) === null || _a === void 0 ? void 0 : _a.name) ? 'none' : 'flex',\n                opacity: animations.routeOpacity\n            }}>\n            <RouterParamsContext.Provider value={route === null || route === void 0 ? void 0 : route.params}>\n              <RouteComponent router={router} params={route === null || route === void 0 ? void 0 : route.params} payload={payloadRef.current}/>\n            </RouterParamsContext.Provider>\n          </Animated.View>);\n    }, [animations.routeOpacity, router]);\n    var getPaddingBottom = function () {\n        var _a, _b, _c, _d, _e;\n        if (!props.useBottomSafeAreaPadding && !props.containerStyle)\n            return 0;\n        var topPadding = !props.useBottomSafeAreaPadding\n            ? 0\n            : Platform.OS === 'android'\n                ? StatusBar.currentHeight && StatusBar.currentHeight > 35\n                    ? 35\n                    : StatusBar.currentHeight\n                : (safeAreaPaddingTop.current || 0) > 30\n                    ? 30\n                    : safeAreaPaddingTop.current;\n        if (!props.useBottomSafeAreaPadding && props.containerStyle) {\n            return (((_a = props.containerStyle) === null || _a === void 0 ? void 0 : _a.paddingBottom) ||\n                props.containerStyle.padding ||\n                0);\n        }\n        if (!props.containerStyle && (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding)) {\n            return topPadding;\n        }\n        if (typeof ((_b = props.containerStyle) === null || _b === void 0 ? void 0 : _b.paddingBottom) === 'string')\n            return props.containerStyle.paddingBottom;\n        if (typeof ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.padding) === 'string')\n            return props.containerStyle.padding;\n        if ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.paddingBottom) {\n            //@ts-ignore\n            return topPadding + props.containerStyle.paddingBottom;\n        }\n        if ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.padding) {\n            //@ts-ignore\n            return topPadding + props.containerStyle.padding;\n        }\n        return topPadding;\n    };\n    var paddingBottom = getPaddingBottom() || 0;\n    return (<>\n        {Platform.OS === 'ios' && !safeAreaInsets ? (<SafeAreaView pointerEvents=\"none\" collapsable={false} onLayout={function (event) {\n                var height = event.nativeEvent.layout.height;\n                if (height !== undefined) {\n                    safeAreaPaddingTop.current = height;\n                    clearTimeout(onDeviceLayoutReset.current.timer);\n                    onDeviceLayoutReset.current.timer = setTimeout(function () {\n                        internalEventManager.publish('safeAreaLayout');\n                    }, 64);\n                }\n            }} style={{\n                position: 'absolute',\n                width: 1,\n                left: 0,\n                top: 0,\n                backgroundColor: 'transparent'\n            }}>\n            <View />\n          </SafeAreaView>) : null}\n        {visible ? (<Root {...rootProps}>\n            <Animated.View onLayout={onDeviceLayout} ref={deviceContainerRef} pointerEvents={(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto'} style={[\n                styles.parentContainer,\n                {\n                    opacity: animations.opacity,\n                    width: '100%',\n                    justifyContent: 'flex-end',\n                    transform: [\n                        {\n                            translateY: animations.keyboardTranslate\n                        },\n                    ]\n                },\n            ]}>\n              {!(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? (<TouchableOpacity onPress={onTouch} activeOpacity={defaultOverlayOpacity} testID={(_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.backdrop} style={{\n                    height: dimensions.height +\n                        (safeAreaPaddingTop.current || 0) +\n                        100,\n                    width: '100%',\n                    position: 'absolute',\n                    backgroundColor: overlayColor,\n                    opacity: defaultOverlayOpacity\n                }} {...(props.backdropProps ? props.backdropProps : {})}/>) : null}\n\n              <Animated.View pointerEvents=\"box-none\" style={__assign(__assign({ borderTopRightRadius: ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.borderTopRightRadius) || 10, borderTopLeftRadius: ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.borderTopLeftRadius) || 10, backgroundColor: ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.backgroundColor) || 'white', borderBottomLeftRadius: ((_f = props.containerStyle) === null || _f === void 0 ? void 0 : _f.borderBottomLeftRadius) || undefined, borderBottomRightRadius: ((_g = props.containerStyle) === null || _g === void 0 ? void 0 : _g.borderBottomRightRadius) || undefined, borderRadius: ((_h = props.containerStyle) === null || _h === void 0 ? void 0 : _h.borderRadius) || undefined, width: ((_j = props.containerStyle) === null || _j === void 0 ? void 0 : _j.width) || '100%' }, getElevation(typeof elevation === 'number' ? elevation : 5)), { flex: undefined, height: dimensions.height, maxHeight: dimensions.height, paddingBottom: keyboard.keyboardShown\n                    ? keyboard.keyboardHeight || 0\n                    : 0, \n                //zIndex: 10,\n                transform: [\n                    {\n                        translateY: animations.translateY\n                    },\n                ] })}>\n                {dimensions.height === 0 ? null : (<Animated.View {...handlers.panHandlers} onLayout={onSheetLayout} ref={panViewRef} testID={(_k = props.testIDs) === null || _k === void 0 ? void 0 : _k.sheet} style={[\n                    styles.container,\n                    {\n                        borderTopRightRadius: 10,\n                        borderTopLeftRadius: 10\n                    },\n                    props.containerStyle,\n                    {\n                        paddingBottom: keyboard.keyboardShown &&\n                            typeof paddingBottom !== 'string'\n                            ? paddingBottom + 2\n                            : paddingBottom,\n                        maxHeight: keyboard.keyboardShown\n                            ? dimensions.height - keyboard.keyboardHeight\n                            : dimensions.height\n                    },\n                    {\n                        overflow: 'hidden'\n                    },\n                ]}>\n                    {drawUnderStatusBar ? (<Animated.View style={{\n                        height: 100,\n                        position: 'absolute',\n                        top: -50,\n                        backgroundColor: ((_l = props.containerStyle) === null || _l === void 0 ? void 0 : _l.backgroundColor) || 'white',\n                        width: '100%',\n                        borderTopRightRadius: ((_m = props.containerStyle) === null || _m === void 0 ? void 0 : _m.borderRadius) || 10,\n                        borderTopLeftRadius: ((_o = props.containerStyle) === null || _o === void 0 ? void 0 : _o.borderRadius) || 10,\n                        transform: [\n                            {\n                                translateY: animations.underlayTranslateY\n                            },\n                        ]\n                    }}/>) : null}\n                    {gestureEnabled || props.headerAlwaysVisible ? (props.CustomHeaderComponent ? (props.CustomHeaderComponent) : (<Animated.View style={[styles.indicator, props.indicatorStyle]}/>)) : null}\n\n                    {(router === null || router === void 0 ? void 0 : router.hasRoutes()) ? (<RouterContext.Provider value={router}>\n                        {router === null || router === void 0 ? void 0 : router.stack.map(renderRoute)}\n                      </RouterContext.Provider>) : (props === null || props === void 0 ? void 0 : props.children)}\n                  </Animated.View>)}\n                {overdrawEnabled ? (<Animated.View style={{\n                    position: 'absolute',\n                    height: overdrawSize,\n                    bottom: -overdrawSize,\n                    backgroundColor: ((_p = props.containerStyle) === null || _p === void 0 ? void 0 : _p.backgroundColor) || 'white',\n                    width: ((_q = props.containerStyle) === null || _q === void 0 ? void 0 : _q.width) || dimensions.width\n                }}/>) : null}\n              </Animated.View>\n              {ExtraOverlayComponent}\n              {props.withNestedSheetProvider}\n              {sheetId ? (<SheetProvider context={\"$$-auto-\".concat(sheetId, \"-\").concat(currentContext, \"-provider\")}/>) : null}\n            </Animated.View>\n          </Root>) : null}\n      </>);\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}