{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __exportStar = this && this.__exportStar || function (m, exports) {\n  for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Modalize = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar react_native_gesture_handler_1 = require(\"react-native-gesture-handler\");\nvar use_dimensions_1 = require(\"./utils/use-dimensions\");\nvar get_spring_config_1 = require(\"./utils/get-spring-config\");\nvar devices_1 = require(\"./utils/devices\");\nvar libraries_1 = require(\"./utils/libraries\");\nvar invariant_1 = require(\"./utils/invariant\");\nvar compose_refs_1 = require(\"./utils/compose-refs\");\nvar styles_1 = __importDefault(require(\"./styles\"));\nvar AnimatedKeyboardAvoidingView = react_native_1.Animated.createAnimatedComponent(react_native_1.KeyboardAvoidingView);\nvar SCROLL_THRESHOLD = -4;\nvar USE_NATIVE_DRIVER = true;\nvar ACTIVATED = 20;\nvar PAN_DURATION = 150;\nvar ModalizeBase = function ModalizeBase(_ref, ref) {\n  var contentRef = _ref.contentRef,\n    children = _ref.children,\n    scrollViewProps = _ref.scrollViewProps,\n    flatListProps = _ref.flatListProps,\n    sectionListProps = _ref.sectionListProps,\n    customRenderer = _ref.customRenderer,\n    rootStyle = _ref.rootStyle,\n    modalStyle = _ref.modalStyle,\n    handleStyle = _ref.handleStyle,\n    overlayStyle = _ref.overlayStyle,\n    childrenStyle = _ref.childrenStyle,\n    snapPoint = _ref.snapPoint,\n    modalHeight = _ref.modalHeight,\n    _ref$modalTopOffset = _ref.modalTopOffset,\n    modalTopOffset = _ref$modalTopOffset === void 0 ? react_native_1.Platform.select({\n      ios: 0,\n      android: react_native_1.StatusBar.currentHeight || 0,\n      default: 0\n    }) : _ref$modalTopOffset,\n    alwaysOpen = _ref.alwaysOpen,\n    _ref$adjustToContentH = _ref.adjustToContentHeight,\n    adjustToContentHeight = _ref$adjustToContentH === void 0 ? false : _ref$adjustToContentH,\n    _ref$handlePosition = _ref.handlePosition,\n    handlePosition = _ref$handlePosition === void 0 ? 'outside' : _ref$handlePosition,\n    _ref$disableScrollIfP = _ref.disableScrollIfPossible,\n    disableScrollIfPossible = _ref$disableScrollIfP === void 0 ? true : _ref$disableScrollIfP,\n    _ref$avoidKeyboardLik = _ref.avoidKeyboardLikeIOS,\n    avoidKeyboardLikeIOS = _ref$avoidKeyboardLik === void 0 ? react_native_1.Platform.select({\n      ios: true,\n      android: false,\n      default: true\n    }) : _ref$avoidKeyboardLik,\n    _ref$keyboardAvoiding = _ref.keyboardAvoidingBehavior,\n    keyboardAvoidingBehavior = _ref$keyboardAvoiding === void 0 ? 'padding' : _ref$keyboardAvoiding,\n    keyboardAvoidingOffset = _ref.keyboardAvoidingOffset,\n    _ref$panGestureEnable = _ref.panGestureEnabled,\n    panGestureEnabled = _ref$panGestureEnable === void 0 ? true : _ref$panGestureEnable,\n    _ref$panGestureCompon = _ref.panGestureComponentEnabled,\n    panGestureComponentEnabled = _ref$panGestureCompon === void 0 ? false : _ref$panGestureCompon,\n    _ref$tapGestureEnable = _ref.tapGestureEnabled,\n    tapGestureEnabled = _ref$tapGestureEnable === void 0 ? true : _ref$tapGestureEnable,\n    _ref$closeOnOverlayTa = _ref.closeOnOverlayTap,\n    closeOnOverlayTap = _ref$closeOnOverlayTa === void 0 ? true : _ref$closeOnOverlayTa,\n    _ref$closeSnapPointSt = _ref.closeSnapPointStraightEnabled,\n    closeSnapPointStraightEnabled = _ref$closeSnapPointSt === void 0 ? true : _ref$closeSnapPointSt,\n    _ref$openAnimationCon = _ref.openAnimationConfig,\n    openAnimationConfig = _ref$openAnimationCon === void 0 ? {\n      timing: {\n        duration: 240,\n        easing: react_native_1.Easing.ease\n      },\n      spring: {\n        speed: 14,\n        bounciness: 4\n      }\n    } : _ref$openAnimationCon,\n    _ref$closeAnimationCo = _ref.closeAnimationConfig,\n    closeAnimationConfig = _ref$closeAnimationCo === void 0 ? {\n      timing: {\n        duration: 240,\n        easing: react_native_1.Easing.ease\n      }\n    } : _ref$closeAnimationCo,\n    _ref$dragToss = _ref.dragToss,\n    dragToss = _ref$dragToss === void 0 ? 0.18 : _ref$dragToss,\n    _ref$threshold = _ref.threshold,\n    threshold = _ref$threshold === void 0 ? 120 : _ref$threshold,\n    _ref$velocity = _ref.velocity,\n    velocity = _ref$velocity === void 0 ? 2800 : _ref$velocity,\n    panGestureAnimatedValue = _ref.panGestureAnimatedValue,\n    _ref$useNativeDriver = _ref.useNativeDriver,\n    useNativeDriver = _ref$useNativeDriver === void 0 ? true : _ref$useNativeDriver,\n    _ref$withReactModal = _ref.withReactModal,\n    withReactModal = _ref$withReactModal === void 0 ? false : _ref$withReactModal,\n    reactModalProps = _ref.reactModalProps,\n    _ref$withHandle = _ref.withHandle,\n    withHandle = _ref$withHandle === void 0 ? true : _ref$withHandle,\n    _ref$withOverlay = _ref.withOverlay,\n    withOverlay = _ref$withOverlay === void 0 ? true : _ref$withOverlay,\n    HeaderComponent = _ref.HeaderComponent,\n    FooterComponent = _ref.FooterComponent,\n    FloatingComponent = _ref.FloatingComponent,\n    onOpen = _ref.onOpen,\n    onOpened = _ref.onOpened,\n    onClose = _ref.onClose,\n    onClosed = _ref.onClosed,\n    onBackButtonPress = _ref.onBackButtonPress,\n    onPositionChange = _ref.onPositionChange,\n    onOverlayPress = _ref.onOverlayPress,\n    onLayout = _ref.onLayout;\n  var _use_dimensions_1$use = use_dimensions_1.useDimensions(),\n    screenHeight = _use_dimensions_1$use.height;\n  var isHandleOutside = handlePosition === 'outside';\n  var handleHeight = withHandle ? 20 : isHandleOutside ? 35 : 20;\n  var fullHeight = screenHeight - modalTopOffset;\n  var computedHeight = fullHeight - handleHeight - (devices_1.isIphoneX ? 34 : 0);\n  var endHeight = modalHeight || computedHeight;\n  var adjustValue = adjustToContentHeight ? undefined : endHeight;\n  var snaps = snapPoint ? [0, endHeight - snapPoint, endHeight] : [0, endHeight];\n  var _React$useState = React.useState(adjustValue),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    modalHeightValue = _React$useState2[0],\n    setModalHeightValue = _React$useState2[1];\n  var _React$useState3 = React.useState(snapPoint ? endHeight - snapPoint : 0),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    lastSnap = _React$useState4[0],\n    setLastSnap = _React$useState4[1];\n  var _React$useState5 = React.useState(false),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    isVisible = _React$useState6[0],\n    setIsVisible = _React$useState6[1];\n  var _React$useState7 = React.useState(true),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    showContent = _React$useState8[0],\n    setShowContent = _React$useState8[1];\n  var _React$useState9 = React.useState(true),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    enableBounces = _React$useState10[0],\n    setEnableBounces = _React$useState10[1];\n  var _React$useState11 = React.useState(false),\n    _React$useState12 = _slicedToArray(_React$useState11, 2),\n    keyboardToggle = _React$useState12[0],\n    setKeyboardToggle = _React$useState12[1];\n  var _React$useState13 = React.useState(0),\n    _React$useState14 = _slicedToArray(_React$useState13, 2),\n    keyboardHeight = _React$useState14[0],\n    setKeyboardHeight = _React$useState14[1];\n  var _React$useState15 = React.useState(alwaysOpen || snapPoint ? true : undefined),\n    _React$useState16 = _slicedToArray(_React$useState15, 2),\n    disableScroll = _React$useState16[0],\n    setDisableScroll = _React$useState16[1];\n  var _React$useState17 = React.useState(0),\n    _React$useState18 = _slicedToArray(_React$useState17, 2),\n    beginScrollYValue = _React$useState18[0],\n    setBeginScrollYValue = _React$useState18[1];\n  var _React$useState19 = React.useState('initial'),\n    _React$useState20 = _slicedToArray(_React$useState19, 2),\n    modalPosition = _React$useState20[0],\n    setModalPosition = _React$useState20[1];\n  var _React$useState21 = React.useState(false),\n    _React$useState22 = _slicedToArray(_React$useState21, 2),\n    cancelClose = _React$useState22[0],\n    setCancelClose = _React$useState22[1];\n  var _React$useState23 = React.useState(new Map()),\n    _React$useState24 = _slicedToArray(_React$useState23, 2),\n    layouts = _React$useState24[0],\n    setLayouts = _React$useState24[1];\n  var cancelTranslateY = React.useRef(new react_native_1.Animated.Value(1)).current;\n  var componentTranslateY = React.useRef(new react_native_1.Animated.Value(0)).current;\n  var overlay = React.useRef(new react_native_1.Animated.Value(0)).current;\n  var beginScrollY = React.useRef(new react_native_1.Animated.Value(0)).current;\n  var dragY = React.useRef(new react_native_1.Animated.Value(0)).current;\n  var translateY = React.useRef(new react_native_1.Animated.Value(screenHeight)).current;\n  var reverseBeginScrollY = React.useRef(react_native_1.Animated.multiply(new react_native_1.Animated.Value(-1), beginScrollY)).current;\n  var tapGestureModalizeRef = React.useRef(null);\n  var panGestureChildrenRef = React.useRef(null);\n  var nativeViewChildrenRef = React.useRef(null);\n  var contentViewRef = React.useRef(null);\n  var tapGestureOverlayRef = React.useRef(null);\n  var backButtonListenerRef = React.useRef(null);\n  var diffClamp = react_native_1.Animated.diffClamp(reverseBeginScrollY, -screenHeight, 0);\n  var componentDragEnabled = componentTranslateY._value === 1;\n  var dragValue = react_native_1.Animated.add(react_native_1.Animated.multiply(dragY, componentDragEnabled ? 1 : cancelTranslateY), diffClamp);\n  var value = react_native_1.Animated.add(react_native_1.Animated.multiply(translateY, componentDragEnabled ? 1 : cancelTranslateY), dragValue);\n  var willCloseModalize = false;\n  var handleBackPress = function handleBackPress() {\n    if (alwaysOpen) {\n      return false;\n    }\n    if (onBackButtonPress) {\n      return onBackButtonPress();\n    } else {\n      handleClose();\n    }\n    return true;\n  };\n  var handleKeyboardShow = function handleKeyboardShow(event) {\n    var height = event.endCoordinates.height;\n    setKeyboardToggle(true);\n    setKeyboardHeight(height);\n  };\n  var handleKeyboardHide = function handleKeyboardHide() {\n    setKeyboardToggle(false);\n    setKeyboardHeight(0);\n  };\n  var handleAnimateOpen = function handleAnimateOpen(alwaysOpenValue) {\n    var dest = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';\n    var timing = openAnimationConfig.timing,\n      spring = openAnimationConfig.spring;\n    backButtonListenerRef.current = react_native_1.BackHandler.addEventListener('hardwareBackPress', handleBackPress);\n    var toValue = 0;\n    var toPanValue = 0;\n    var newPosition;\n    if (dest === 'top') {\n      toValue = 0;\n    } else if (alwaysOpenValue) {\n      toValue = (modalHeightValue || 0) - alwaysOpenValue;\n    } else if (snapPoint) {\n      toValue = (modalHeightValue || 0) - snapPoint;\n    }\n    if (panGestureAnimatedValue && (alwaysOpenValue || snapPoint)) {\n      toPanValue = 0;\n    } else if (panGestureAnimatedValue && !alwaysOpenValue && (dest === 'top' || dest === 'default')) {\n      toPanValue = 1;\n    }\n    setIsVisible(true);\n    setShowContent(true);\n    if (alwaysOpenValue && dest !== 'top' || snapPoint && dest === 'default') {\n      newPosition = 'initial';\n    } else {\n      newPosition = 'top';\n    }\n    react_native_1.Animated.parallel([react_native_1.Animated.timing(overlay, {\n      toValue: alwaysOpenValue && dest === 'default' ? 0 : 1,\n      duration: timing.duration,\n      easing: react_native_1.Easing.ease,\n      useNativeDriver: USE_NATIVE_DRIVER\n    }), panGestureAnimatedValue ? react_native_1.Animated.timing(panGestureAnimatedValue, {\n      toValue: toPanValue,\n      duration: PAN_DURATION,\n      easing: react_native_1.Easing.ease,\n      useNativeDriver: useNativeDriver\n    }) : react_native_1.Animated.delay(0), spring ? react_native_1.Animated.spring(translateY, Object.assign(Object.assign({}, get_spring_config_1.getSpringConfig(spring)), {\n      toValue: toValue,\n      useNativeDriver: USE_NATIVE_DRIVER\n    })) : react_native_1.Animated.timing(translateY, {\n      toValue: toValue,\n      duration: timing.duration,\n      easing: timing.easing,\n      useNativeDriver: USE_NATIVE_DRIVER\n    })]).start(function () {\n      if (onOpened) {\n        onOpened();\n      }\n      setModalPosition(newPosition);\n      if (onPositionChange) {\n        onPositionChange(newPosition);\n      }\n    });\n  };\n  var handleAnimateClose = function handleAnimateClose() {\n    var dest = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n    var _a;\n    var timing = closeAnimationConfig.timing,\n      spring = closeAnimationConfig.spring;\n    var lastSnapValue = snapPoint ? snaps[1] : 80;\n    var toInitialAlwaysOpen = dest === 'alwaysOpen' && Boolean(alwaysOpen);\n    var toValue = toInitialAlwaysOpen && alwaysOpen ? (modalHeightValue || 0) - alwaysOpen : screenHeight;\n    (_a = backButtonListenerRef.current) === null || _a === void 0 ? void 0 : _a.remove();\n    cancelTranslateY.setValue(1);\n    setBeginScrollYValue(0);\n    beginScrollY.setValue(0);\n    react_native_1.Animated.parallel([react_native_1.Animated.timing(overlay, {\n      toValue: 0,\n      duration: timing.duration,\n      easing: react_native_1.Easing.ease,\n      useNativeDriver: USE_NATIVE_DRIVER\n    }), panGestureAnimatedValue ? react_native_1.Animated.timing(panGestureAnimatedValue, {\n      toValue: 0,\n      duration: PAN_DURATION,\n      easing: react_native_1.Easing.ease,\n      useNativeDriver: useNativeDriver\n    }) : react_native_1.Animated.delay(0), spring ? react_native_1.Animated.spring(translateY, Object.assign(Object.assign({}, get_spring_config_1.getSpringConfig(spring)), {\n      toValue: toValue,\n      useNativeDriver: USE_NATIVE_DRIVER\n    })) : react_native_1.Animated.timing(translateY, {\n      duration: timing.duration,\n      easing: react_native_1.Easing.out(react_native_1.Easing.ease),\n      toValue: toValue,\n      useNativeDriver: USE_NATIVE_DRIVER\n    })]).start(function () {\n      if (onClosed) {\n        onClosed();\n      }\n      if (callback) {\n        callback();\n      }\n      if (alwaysOpen && dest === 'alwaysOpen' && onPositionChange) {\n        onPositionChange('initial');\n      }\n      if (alwaysOpen && dest === 'alwaysOpen') {\n        setModalPosition('initial');\n      }\n      setShowContent(toInitialAlwaysOpen);\n      translateY.setValue(toValue);\n      dragY.setValue(0);\n      willCloseModalize = false;\n      setLastSnap(lastSnapValue);\n      setIsVisible(toInitialAlwaysOpen);\n    });\n  };\n  var handleModalizeContentLayout = function handleModalizeContentLayout(_ref2) {\n    var layout = _ref2.nativeEvent.layout;\n    var value = Math.min(layout.height + (!adjustToContentHeight || keyboardHeight ? layout.y : 0), endHeight - react_native_1.Platform.select({\n      ios: 0,\n      android: keyboardHeight,\n      default: 0\n    }));\n    setModalHeightValue(value);\n  };\n  var handleBaseLayout = function handleBaseLayout(component, height) {\n    setLayouts(new Map(layouts.set(component, height)));\n    var max = Array.from(layouts).reduce(function (acc, cur) {\n      return acc + (cur === null || cur === void 0 ? void 0 : cur[1]);\n    }, 0);\n    var maxFixed = +max.toFixed(3);\n    var endHeightFixed = +endHeight.toFixed(3);\n    var shorterHeight = maxFixed < endHeightFixed;\n    setDisableScroll(shorterHeight && disableScrollIfPossible);\n  };\n  var handleContentLayout = function handleContentLayout(_ref3) {\n    var nativeEvent = _ref3.nativeEvent;\n    if (onLayout) {\n      onLayout(nativeEvent);\n    }\n    if (alwaysOpen && adjustToContentHeight) {\n      var height = nativeEvent.layout.height;\n      return setModalHeightValue(height);\n    }\n    if (!adjustToContentHeight) {\n      return;\n    }\n    handleBaseLayout('content', nativeEvent.layout.height);\n  };\n  var handleComponentLayout = function handleComponentLayout(_ref4, name, absolute) {\n    var nativeEvent = _ref4.nativeEvent;\n    if (!adjustToContentHeight || absolute) {\n      return;\n    }\n    handleBaseLayout(name, nativeEvent.layout.height);\n  };\n  var handleClose = function handleClose(dest, callback) {\n    if (onClose) {\n      onClose();\n    }\n    handleAnimateClose(dest, callback);\n  };\n  var handleChildren = function handleChildren(_ref5, type) {\n    var nativeEvent = _ref5.nativeEvent;\n    var timing = closeAnimationConfig.timing;\n    var velocityY = nativeEvent.velocityY,\n      translationY = nativeEvent.translationY;\n    var negativeReverseScroll = modalPosition === 'top' && beginScrollYValue >= (snapPoint ? 0 : SCROLL_THRESHOLD) && translationY < 0;\n    var thresholdProps = translationY > threshold && beginScrollYValue === 0;\n    var closeThreshold = velocity ? beginScrollYValue <= 20 && velocityY >= velocity || thresholdProps : thresholdProps;\n    var enableBouncesValue = true;\n    if (type !== 'component' && cancelTranslateY._value === 0) {\n      componentTranslateY.setValue(0);\n    }\n    if (nativeEvent.oldState === react_native_gesture_handler_1.State.BEGAN) {\n      setCancelClose(false);\n      if (!closeSnapPointStraightEnabled && snapPoint ? beginScrollYValue > 0 : beginScrollYValue > 0 || negativeReverseScroll) {\n        setCancelClose(true);\n        translateY.setValue(0);\n        dragY.setValue(0);\n        cancelTranslateY.setValue(0);\n        enableBouncesValue = true;\n      } else {\n        cancelTranslateY.setValue(1);\n        enableBouncesValue = false;\n        if (!tapGestureEnabled) {\n          setDisableScroll((Boolean(snapPoint) || Boolean(alwaysOpen)) && modalPosition === 'initial');\n        }\n      }\n    }\n    setEnableBounces(devices_1.isAndroid ? false : alwaysOpen ? beginScrollYValue > 0 || translationY < 0 : enableBouncesValue);\n    if (nativeEvent.oldState === react_native_gesture_handler_1.State.ACTIVE) {\n      var toValue = translationY - beginScrollYValue;\n      var destSnapPoint = 0;\n      if (snapPoint || alwaysOpen) {\n        var endOffsetY = lastSnap + toValue + dragToss * velocityY;\n        snaps.forEach(function (snap) {\n          var distFromSnap = Math.abs(snap - endOffsetY);\n          var diffPoint = Math.abs(destSnapPoint - endOffsetY);\n          if (distFromSnap < diffPoint && !alwaysOpen) {\n            if (closeSnapPointStraightEnabled) {\n              if (modalPosition === 'initial' && negativeReverseScroll) {\n                destSnapPoint = snap;\n                willCloseModalize = false;\n              }\n              if (snap === endHeight) {\n                destSnapPoint = snap;\n                willCloseModalize = true;\n                handleClose();\n              }\n            } else {\n              destSnapPoint = snap;\n              willCloseModalize = false;\n              if (snap === endHeight) {\n                willCloseModalize = true;\n                handleClose();\n              }\n            }\n          }\n          if (distFromSnap < diffPoint && alwaysOpen && beginScrollYValue <= 0) {\n            destSnapPoint = (modalHeightValue || 0) - alwaysOpen;\n            willCloseModalize = false;\n          }\n        });\n      } else if (closeThreshold && !alwaysOpen && !cancelClose) {\n        willCloseModalize = true;\n        handleClose();\n      }\n      if (willCloseModalize) {\n        return;\n      }\n      setLastSnap(destSnapPoint);\n      translateY.extractOffset();\n      translateY.setValue(toValue);\n      translateY.flattenOffset();\n      dragY.setValue(0);\n      if (alwaysOpen) {\n        react_native_1.Animated.timing(overlay, {\n          toValue: Number(destSnapPoint <= 0),\n          duration: timing.duration,\n          easing: react_native_1.Easing.ease,\n          useNativeDriver: USE_NATIVE_DRIVER\n        }).start();\n      }\n      react_native_1.Animated.spring(translateY, {\n        tension: 50,\n        friction: 12,\n        velocity: velocityY,\n        toValue: destSnapPoint,\n        useNativeDriver: USE_NATIVE_DRIVER\n      }).start();\n      if (beginScrollYValue <= 0) {\n        var modalPositionValue = destSnapPoint <= 0 ? 'top' : 'initial';\n        if (panGestureAnimatedValue) {\n          react_native_1.Animated.timing(panGestureAnimatedValue, {\n            toValue: Number(modalPositionValue === 'top'),\n            duration: PAN_DURATION,\n            easing: react_native_1.Easing.ease,\n            useNativeDriver: useNativeDriver\n          }).start();\n        }\n        if (!adjustToContentHeight && modalPositionValue === 'top') {\n          setDisableScroll(false);\n        }\n        if (onPositionChange && modalPosition !== modalPositionValue) {\n          onPositionChange(modalPositionValue);\n        }\n        if (modalPosition !== modalPositionValue) {\n          setModalPosition(modalPositionValue);\n        }\n      }\n    }\n  };\n  var handleComponent = function handleComponent(_ref6) {\n    var nativeEvent = _ref6.nativeEvent;\n    if (nativeEvent.oldState === react_native_gesture_handler_1.State.BEGAN) {\n      componentTranslateY.setValue(1);\n      beginScrollY.setValue(0);\n    }\n    handleChildren({\n      nativeEvent: nativeEvent\n    }, 'component');\n  };\n  var handleOverlay = function handleOverlay(_ref7) {\n    var nativeEvent = _ref7.nativeEvent;\n    if (nativeEvent.oldState === react_native_gesture_handler_1.State.ACTIVE && !willCloseModalize) {\n      if (onOverlayPress) {\n        onOverlayPress();\n      }\n      var dest = !!alwaysOpen ? 'alwaysOpen' : 'default';\n      handleClose(dest);\n    }\n  };\n  var handleGestureEvent = react_native_1.Animated.event([{\n    nativeEvent: {\n      translationY: dragY\n    }\n  }], {\n    useNativeDriver: USE_NATIVE_DRIVER,\n    listener: function listener(_ref8) {\n      var translationY = _ref8.nativeEvent.translationY;\n      var _a;\n      if (panGestureAnimatedValue) {\n        var offset = (_a = alwaysOpen !== null && alwaysOpen !== void 0 ? alwaysOpen : snapPoint) !== null && _a !== void 0 ? _a : 0;\n        var diff = Math.abs(translationY / (endHeight - offset));\n        var y = translationY <= 0 ? diff : 1 - diff;\n        var _value;\n        if (modalPosition === 'initial' && translationY > 0) {\n          _value = 0;\n        } else if (modalPosition === 'top' && translationY <= 0) {\n          _value = 1;\n        } else {\n          _value = y;\n        }\n        panGestureAnimatedValue.setValue(_value);\n      }\n    }\n  });\n  var renderHandle = function renderHandle() {\n    var handleStyles = [styles_1.default.handle];\n    var shapeStyles = [styles_1.default.handle__shape, handleStyle];\n    if (!withHandle) {\n      return null;\n    }\n    if (!isHandleOutside) {\n      handleStyles.push(styles_1.default.handleBottom);\n      shapeStyles.push(styles_1.default.handle__shapeBottom, handleStyle);\n    }\n    return React.createElement(react_native_gesture_handler_1.PanGestureHandler, {\n      enabled: panGestureEnabled,\n      simultaneousHandlers: tapGestureModalizeRef,\n      shouldCancelWhenOutside: false,\n      onGestureEvent: handleGestureEvent,\n      onHandlerStateChange: handleComponent\n    }, React.createElement(react_native_1.Animated.View, {\n      style: handleStyles\n    }, React.createElement(react_native_1.View, {\n      style: shapeStyles\n    })));\n  };\n  var renderElement = function renderElement(Element) {\n    return typeof Element === 'function' ? Element() : Element;\n  };\n  var renderComponent = function renderComponent(component, name) {\n    var _a;\n    if (!component) {\n      return null;\n    }\n    var tag = renderElement(component);\n    if (devices_1.isAndroid && !panGestureComponentEnabled) {\n      return tag;\n    }\n    var obj = react_native_1.StyleSheet.flatten((_a = tag === null || tag === void 0 ? void 0 : tag.props) === null || _a === void 0 ? void 0 : _a.style);\n    var absolute = (obj === null || obj === void 0 ? void 0 : obj.position) === 'absolute';\n    var zIndex = obj === null || obj === void 0 ? void 0 : obj.zIndex;\n    return React.createElement(react_native_gesture_handler_1.PanGestureHandler, {\n      enabled: panGestureEnabled,\n      shouldCancelWhenOutside: false,\n      onGestureEvent: handleGestureEvent,\n      onHandlerStateChange: handleComponent\n    }, React.createElement(react_native_1.Animated.View, {\n      style: {\n        zIndex: zIndex\n      },\n      onLayout: function onLayout(e) {\n        return handleComponentLayout(e, name, absolute);\n      }\n    }, tag));\n  };\n  var renderContent = function renderContent() {\n    var _a;\n    var keyboardDismissMode = devices_1.isIos ? 'interactive' : 'on-drag';\n    var passedOnProps = (_a = flatListProps !== null && flatListProps !== void 0 ? flatListProps : sectionListProps) !== null && _a !== void 0 ? _a : scrollViewProps;\n    var bounces = (passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.bounces) !== undefined && !(passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.bounces) ? passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.bounces : enableBounces;\n    var scrollEnabled = (passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.scrollEnabled) !== undefined && !(passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.scrollEnabled) ? passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.scrollEnabled : keyboardToggle || !disableScroll;\n    var scrollEventThrottle = (passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.scrollEventThrottle) || 16;\n    var onScrollBeginDrag = passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.onScrollBeginDrag;\n    var opts = {\n      ref: compose_refs_1.composeRefs(contentViewRef, contentRef),\n      bounces: bounces,\n      onScrollBeginDrag: react_native_1.Animated.event([{\n        nativeEvent: {\n          contentOffset: {\n            y: beginScrollY\n          }\n        }\n      }], {\n        useNativeDriver: USE_NATIVE_DRIVER,\n        listener: onScrollBeginDrag\n      }),\n      scrollEventThrottle: scrollEventThrottle,\n      onLayout: handleContentLayout,\n      scrollEnabled: scrollEnabled,\n      keyboardDismissMode: keyboardDismissMode\n    };\n    if (flatListProps) {\n      return React.createElement(react_native_1.Animated.FlatList, Object.assign({}, flatListProps, opts));\n    }\n    if (sectionListProps) {\n      return React.createElement(react_native_1.Animated.SectionList, Object.assign({}, sectionListProps, opts));\n    }\n    if (customRenderer) {\n      var tag = renderElement(customRenderer);\n      return React.cloneElement(tag, Object.assign({}, opts));\n    }\n    return React.createElement(react_native_1.Animated.ScrollView, Object.assign({}, scrollViewProps, opts), children);\n  };\n  var renderChildren = function renderChildren() {\n    var style = adjustToContentHeight ? styles_1.default.content__adjustHeight : styles_1.default.content__container;\n    var minDist = libraries_1.isRNGH2() ? undefined : ACTIVATED;\n    return React.createElement(react_native_gesture_handler_1.PanGestureHandler, {\n      ref: panGestureChildrenRef,\n      enabled: panGestureEnabled,\n      simultaneousHandlers: [nativeViewChildrenRef, tapGestureModalizeRef],\n      shouldCancelWhenOutside: false,\n      onGestureEvent: handleGestureEvent,\n      minDist: minDist,\n      activeOffsetY: ACTIVATED,\n      activeOffsetX: ACTIVATED,\n      onHandlerStateChange: handleChildren\n    }, React.createElement(react_native_1.Animated.View, {\n      style: [style, childrenStyle]\n    }, React.createElement(react_native_gesture_handler_1.NativeViewGestureHandler, {\n      ref: nativeViewChildrenRef,\n      waitFor: tapGestureModalizeRef,\n      simultaneousHandlers: panGestureChildrenRef\n    }, renderContent())));\n  };\n  var renderOverlay = function renderOverlay() {\n    var pointerEvents = alwaysOpen && (modalPosition === 'initial' || !modalPosition) ? 'box-none' : 'auto';\n    return React.createElement(react_native_gesture_handler_1.PanGestureHandler, {\n      enabled: panGestureEnabled,\n      simultaneousHandlers: tapGestureModalizeRef,\n      shouldCancelWhenOutside: false,\n      onGestureEvent: handleGestureEvent,\n      onHandlerStateChange: handleChildren\n    }, React.createElement(react_native_1.Animated.View, {\n      style: styles_1.default.overlay,\n      pointerEvents: pointerEvents\n    }, showContent && React.createElement(react_native_gesture_handler_1.TapGestureHandler, {\n      ref: tapGestureOverlayRef,\n      enabled: closeOnOverlayTap !== undefined ? closeOnOverlayTap : panGestureEnabled,\n      onHandlerStateChange: handleOverlay\n    }, React.createElement(react_native_1.Animated.View, {\n      style: [styles_1.default.overlay__background, overlayStyle, {\n        opacity: overlay.interpolate({\n          inputRange: [0, 1],\n          outputRange: [0, 1]\n        })\n      }],\n      pointerEvents: pointerEvents\n    }))));\n  };\n  React.useImperativeHandle(ref, function () {\n    return {\n      open: function open(dest) {\n        if (onOpen) {\n          onOpen();\n        }\n        handleAnimateOpen(alwaysOpen, dest);\n      },\n      close: function close(dest, callback) {\n        handleClose(dest, callback);\n      }\n    };\n  });\n  React.useEffect(function () {\n    if (alwaysOpen && (modalHeightValue || adjustToContentHeight)) {\n      handleAnimateOpen(alwaysOpen);\n    }\n  }, [alwaysOpen, modalHeightValue]);\n  React.useEffect(function () {\n    invariant_1.invariant(modalHeight && adjustToContentHeight, `You can't use both 'modalHeight' and 'adjustToContentHeight' props at the same time. Only choose one of the two.`);\n    invariant_1.invariant((scrollViewProps || children) && flatListProps, `You have defined 'flatListProps' along with 'scrollViewProps' or 'children' props. Remove 'scrollViewProps' or 'children' or 'flatListProps' to fix the error.`);\n    invariant_1.invariant((scrollViewProps || children) && sectionListProps, `You have defined 'sectionListProps'  along with 'scrollViewProps' or 'children' props. Remove 'scrollViewProps' or 'children' or 'sectionListProps' to fix the error.`);\n  }, [modalHeight, adjustToContentHeight, scrollViewProps, children, flatListProps, sectionListProps]);\n  React.useEffect(function () {\n    setModalHeightValue(adjustValue);\n  }, [adjustToContentHeight, modalHeight, screenHeight]);\n  React.useEffect(function () {\n    var keyboardShowListener = null;\n    var keyboardHideListener = null;\n    var beginScrollYListener = beginScrollY.addListener(function (_ref9) {\n      var value = _ref9.value;\n      return setBeginScrollYValue(value);\n    });\n    if (libraries_1.isBelowRN65) {\n      react_native_1.Keyboard.addListener('keyboardDidShow', handleKeyboardShow);\n      react_native_1.Keyboard.addListener('keyboardDidHide', handleKeyboardHide);\n    } else {\n      keyboardShowListener = react_native_1.Keyboard.addListener('keyboardDidShow', handleKeyboardShow);\n      keyboardHideListener = react_native_1.Keyboard.addListener('keyboardDidHide', handleKeyboardHide);\n    }\n    return function () {\n      var _a;\n      (_a = backButtonListenerRef.current) === null || _a === void 0 ? void 0 : _a.remove();\n      beginScrollY.removeListener(beginScrollYListener);\n      if (libraries_1.isBelowRN65) {\n        react_native_1.Keyboard.removeListener('keyboardDidShow', handleKeyboardShow);\n        react_native_1.Keyboard.removeListener('keyboardDidHide', handleKeyboardHide);\n      } else {\n        keyboardShowListener === null || keyboardShowListener === void 0 ? void 0 : keyboardShowListener.remove();\n        keyboardHideListener === null || keyboardHideListener === void 0 ? void 0 : keyboardHideListener.remove();\n      }\n    };\n  }, []);\n  var keyboardAvoidingViewProps = {\n    keyboardVerticalOffset: keyboardAvoidingOffset,\n    behavior: keyboardAvoidingBehavior,\n    enabled: avoidKeyboardLikeIOS,\n    style: [styles_1.default.modalize__content, modalStyle, {\n      height: modalHeightValue,\n      maxHeight: endHeight,\n      transform: [{\n        translateY: value.interpolate({\n          inputRange: [-40, 0, endHeight],\n          outputRange: [0, 0, endHeight],\n          extrapolate: 'clamp'\n        })\n      }]\n    }]\n  };\n  if (!avoidKeyboardLikeIOS && !adjustToContentHeight) {\n    keyboardAvoidingViewProps.onLayout = handleModalizeContentLayout;\n  }\n  var renderModalize = React.createElement(react_native_1.View, {\n    style: [styles_1.default.modalize, rootStyle],\n    pointerEvents: alwaysOpen || !withOverlay ? 'box-none' : 'auto'\n  }, React.createElement(react_native_gesture_handler_1.TapGestureHandler, {\n    ref: tapGestureModalizeRef,\n    maxDurationMs: tapGestureEnabled ? 100000 : 50,\n    maxDeltaY: lastSnap,\n    enabled: panGestureEnabled\n  }, React.createElement(react_native_1.View, {\n    style: styles_1.default.modalize__wrapper,\n    pointerEvents: \"box-none\"\n  }, showContent && React.createElement(AnimatedKeyboardAvoidingView, Object.assign({}, keyboardAvoidingViewProps), renderHandle(), renderComponent(HeaderComponent, 'header'), renderChildren(), renderComponent(FooterComponent, 'footer')), withOverlay && renderOverlay())), renderComponent(FloatingComponent, 'floating'));\n  var renderReactModal = function renderReactModal(child) {\n    return React.createElement(react_native_1.Modal, Object.assign({}, reactModalProps, {\n      supportedOrientations: ['landscape', 'portrait', 'portrait-upside-down'],\n      onRequestClose: handleBackPress,\n      hardwareAccelerated: USE_NATIVE_DRIVER,\n      visible: isVisible,\n      transparent: true\n    }), child);\n  };\n  if (!isVisible) {\n    return null;\n  }\n  if (withReactModal) {\n    return renderReactModal(renderModalize);\n  }\n  return renderModalize;\n};\nexports.Modalize = React.forwardRef(ModalizeBase);\n__exportStar(require(\"./utils/use-modalize\"), exports);","map":{"version":3,"names":["_slicedToArray","require","__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","hasOwnProperty","call","__exportStar","exports","p","__importDefault","Modalize","React","react_native_1","react_native_gesture_handler_1","use_dimensions_1","get_spring_config_1","devices_1","libraries_1","invariant_1","compose_refs_1","styles_1","AnimatedKeyboardAvoidingView","Animated","createAnimatedComponent","KeyboardAvoidingView","SCROLL_THRESHOLD","USE_NATIVE_DRIVER","ACTIVATED","PAN_DURATION","ModalizeBase","_ref","ref","contentRef","children","scrollViewProps","flatListProps","sectionListProps","customRenderer","rootStyle","modalStyle","handleStyle","overlayStyle","childrenStyle","snapPoint","modalHeight","_ref$modalTopOffset","modalTopOffset","Platform","select","ios","android","StatusBar","currentHeight","default","alwaysOpen","_ref$adjustToContentH","adjustToContentHeight","_ref$handlePosition","handlePosition","_ref$disableScrollIfP","disableScrollIfPossible","_ref$avoidKeyboardLik","avoidKeyboardLikeIOS","_ref$keyboardAvoiding","keyboardAvoidingBehavior","keyboardAvoidingOffset","_ref$panGestureEnable","panGestureEnabled","_ref$panGestureCompon","panGestureComponentEnabled","_ref$tapGestureEnable","tapGestureEnabled","_ref$closeOnOverlayTa","closeOnOverlayTap","_ref$closeSnapPointSt","closeSnapPointStraightEnabled","_ref$openAnimationCon","openAnimationConfig","timing","duration","easing","Easing","ease","spring","speed","bounciness","_ref$closeAnimationCo","closeAnimationConfig","_ref$dragToss","dragToss","_ref$threshold","threshold","_ref$velocity","velocity","panGestureAnimatedValue","_ref$useNativeDriver","useNativeDriver","_ref$withReactModal","withReactModal","reactModalProps","_ref$withHandle","withHandle","_ref$withOverlay","withOverlay","HeaderComponent","FooterComponent","FloatingComponent","onOpen","onOpened","onClose","onClosed","onBackButtonPress","onPositionChange","onOverlayPress","onLayout","_use_dimensions_1$use","useDimensions","screenHeight","height","isHandleOutside","handleHeight","fullHeight","computedHeight","isIphoneX","endHeight","adjustValue","snaps","_React$useState","useState","_React$useState2","modalHeightValue","setModalHeightValue","_React$useState3","_React$useState4","lastSnap","setLastSnap","_React$useState5","_React$useState6","isVisible","setIsVisible","_React$useState7","_React$useState8","showContent","setShowContent","_React$useState9","_React$useState10","enableBounces","setEnableBounces","_React$useState11","_React$useState12","keyboardToggle","setKeyboardToggle","_React$useState13","_React$useState14","keyboardHeight","setKeyboardHeight","_React$useState15","_React$useState16","disableScroll","setDisableScroll","_React$useState17","_React$useState18","beginScrollYValue","setBeginScrollYValue","_React$useState19","_React$useState20","modalPosition","setModalPosition","_React$useState21","_React$useState22","cancelClose","setCancelClose","_React$useState23","Map","_React$useState24","layouts","setLayouts","cancelTranslateY","useRef","Value","current","componentTranslateY","overlay","beginScrollY","dragY","translateY","reverseBeginScrollY","multiply","tapGestureModalizeRef","panGestureChildrenRef","nativeViewChildrenRef","contentViewRef","tapGestureOverlayRef","backButtonListenerRef","diffClamp","componentDragEnabled","_value","dragValue","add","willCloseModalize","handleBackPress","handleClose","handleKeyboardShow","event","endCoordinates","handleKeyboardHide","handleAnimateOpen","alwaysOpenValue","dest","arguments","length","BackHandler","addEventListener","toValue","toPanValue","newPosition","parallel","delay","assign","getSpringConfig","start","handleAnimateClose","callback","_a","lastSnapValue","toInitialAlwaysOpen","Boolean","remove","setValue","out","handleModalizeContentLayout","_ref2","layout","nativeEvent","Math","min","y","handleBaseLayout","component","set","max","Array","from","reduce","acc","cur","maxFixed","toFixed","endHeightFixed","shorterHeight","handleContentLayout","_ref3","handleComponentLayout","_ref4","name","absolute","handleChildren","_ref5","type","velocityY","translationY","negativeReverseScroll","thresholdProps","closeThreshold","enableBouncesValue","oldState","State","BEGAN","isAndroid","ACTIVE","destSnapPoint","endOffsetY","forEach","snap","distFromSnap","abs","diffPoint","extractOffset","flattenOffset","Number","tension","friction","modalPositionValue","handleComponent","_ref6","handleOverlay","_ref7","handleGestureEvent","listener","_ref8","offset","diff","renderHandle","handleStyles","handle","shapeStyles","handle__shape","push","handleBottom","handle__shapeBottom","createElement","PanGestureHandler","enabled","simultaneousHandlers","shouldCancelWhenOutside","onGestureEvent","onHandlerStateChange","View","style","renderElement","Element","renderComponent","tag","obj","StyleSheet","flatten","props","position","zIndex","e","renderContent","keyboardDismissMode","isIos","passedOnProps","bounces","scrollEnabled","scrollEventThrottle","onScrollBeginDrag","opts","composeRefs","contentOffset","FlatList","SectionList","cloneElement","ScrollView","renderChildren","content__adjustHeight","content__container","minDist","isRNGH2","activeOffsetY","activeOffsetX","NativeViewGestureHandler","waitFor","renderOverlay","pointerEvents","TapGestureHandler","overlay__background","opacity","interpolate","inputRange","outputRange","useImperativeHandle","open","close","useEffect","invariant","keyboardShowListener","keyboardHideListener","beginScrollYListener","addListener","_ref9","isBelowRN65","Keyboard","removeListener","keyboardAvoidingViewProps","keyboardVerticalOffset","behavior","modalize__content","maxHeight","transform","extrapolate","renderModalize","modalize","maxDurationMs","maxDeltaY","modalize__wrapper","renderReactModal","child","Modal","supportedOrientations","onRequestClose","hardwareAccelerated","visible","transparent","forwardRef"],"sources":["/Users/josh/src/ui/node_modules/react-native-modalize/lib/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Modalize = void 0;\n/**\n * esModuleInterop: true looks to work everywhere except\n * on snack.expo for some reason. Will revisit this later.\n */\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst react_native_gesture_handler_1 = require(\"react-native-gesture-handler\");\nconst use_dimensions_1 = require(\"./utils/use-dimensions\");\nconst get_spring_config_1 = require(\"./utils/get-spring-config\");\nconst devices_1 = require(\"./utils/devices\");\nconst libraries_1 = require(\"./utils/libraries\");\nconst invariant_1 = require(\"./utils/invariant\");\nconst compose_refs_1 = require(\"./utils/compose-refs\");\nconst styles_1 = __importDefault(require(\"./styles\"));\nconst AnimatedKeyboardAvoidingView = react_native_1.Animated.createAnimatedComponent(react_native_1.KeyboardAvoidingView);\n/**\n * When scrolling, it happens than beginScrollYValue is not always equal to 0 (top of the ScrollView).\n * Since we use this to trigger the swipe down gesture animation, we allow a small threshold to\n * not dismiss Modalize when we are using the ScrollView and we don't want to dismiss.\n */\nconst SCROLL_THRESHOLD = -4;\nconst USE_NATIVE_DRIVER = true;\nconst ACTIVATED = 20;\nconst PAN_DURATION = 150;\nconst ModalizeBase = ({ \n// Refs\ncontentRef, \n// Renderers\nchildren, scrollViewProps, flatListProps, sectionListProps, customRenderer, \n// Styles\nrootStyle, modalStyle, handleStyle, overlayStyle, childrenStyle, \n// Layout\nsnapPoint, modalHeight, modalTopOffset = react_native_1.Platform.select({\n    ios: 0,\n    android: react_native_1.StatusBar.currentHeight || 0,\n    default: 0,\n}), alwaysOpen, adjustToContentHeight = false, \n// Options\nhandlePosition = 'outside', disableScrollIfPossible = true, avoidKeyboardLikeIOS = react_native_1.Platform.select({\n    ios: true,\n    android: false,\n    default: true,\n}), keyboardAvoidingBehavior = 'padding', keyboardAvoidingOffset, panGestureEnabled = true, panGestureComponentEnabled = false, tapGestureEnabled = true, closeOnOverlayTap = true, closeSnapPointStraightEnabled = true, \n// Animations\nopenAnimationConfig = {\n    timing: { duration: 240, easing: react_native_1.Easing.ease },\n    spring: { speed: 14, bounciness: 4 },\n}, closeAnimationConfig = {\n    timing: { duration: 240, easing: react_native_1.Easing.ease },\n}, dragToss = 0.18, threshold = 120, velocity = 2800, panGestureAnimatedValue, useNativeDriver = true, \n// Elements visibilities\nwithReactModal = false, reactModalProps, withHandle = true, withOverlay = true, \n// Additional components\nHeaderComponent, FooterComponent, FloatingComponent, \n// Callbacks\nonOpen, onOpened, onClose, onClosed, onBackButtonPress, onPositionChange, onOverlayPress, onLayout, }, ref) => {\n    const { height: screenHeight } = use_dimensions_1.useDimensions();\n    const isHandleOutside = handlePosition === 'outside';\n    const handleHeight = withHandle ? 20 : isHandleOutside ? 35 : 20;\n    const fullHeight = screenHeight - modalTopOffset;\n    const computedHeight = fullHeight - handleHeight - (devices_1.isIphoneX ? 34 : 0);\n    const endHeight = modalHeight || computedHeight;\n    const adjustValue = adjustToContentHeight ? undefined : endHeight;\n    const snaps = snapPoint ? [0, endHeight - snapPoint, endHeight] : [0, endHeight];\n    const [modalHeightValue, setModalHeightValue] = React.useState(adjustValue);\n    const [lastSnap, setLastSnap] = React.useState(snapPoint ? endHeight - snapPoint : 0);\n    const [isVisible, setIsVisible] = React.useState(false);\n    const [showContent, setShowContent] = React.useState(true);\n    const [enableBounces, setEnableBounces] = React.useState(true);\n    const [keyboardToggle, setKeyboardToggle] = React.useState(false);\n    const [keyboardHeight, setKeyboardHeight] = React.useState(0);\n    const [disableScroll, setDisableScroll] = React.useState(alwaysOpen || snapPoint ? true : undefined);\n    const [beginScrollYValue, setBeginScrollYValue] = React.useState(0);\n    const [modalPosition, setModalPosition] = React.useState('initial');\n    const [cancelClose, setCancelClose] = React.useState(false);\n    const [layouts, setLayouts] = React.useState(new Map());\n    const cancelTranslateY = React.useRef(new react_native_1.Animated.Value(1)).current; // 1 by default to have the translateY animation running\n    const componentTranslateY = React.useRef(new react_native_1.Animated.Value(0)).current;\n    const overlay = React.useRef(new react_native_1.Animated.Value(0)).current;\n    const beginScrollY = React.useRef(new react_native_1.Animated.Value(0)).current;\n    const dragY = React.useRef(new react_native_1.Animated.Value(0)).current;\n    const translateY = React.useRef(new react_native_1.Animated.Value(screenHeight)).current;\n    const reverseBeginScrollY = React.useRef(react_native_1.Animated.multiply(new react_native_1.Animated.Value(-1), beginScrollY))\n        .current;\n    const tapGestureModalizeRef = React.useRef(null);\n    const panGestureChildrenRef = React.useRef(null);\n    const nativeViewChildrenRef = React.useRef(null);\n    const contentViewRef = React.useRef(null);\n    const tapGestureOverlayRef = React.useRef(null);\n    const backButtonListenerRef = React.useRef(null);\n    // We diff and get the negative value only. It sometimes go above 0\n    // (e.g. 1.5) and creates the flickering on Modalize for a ms\n    const diffClamp = react_native_1.Animated.diffClamp(reverseBeginScrollY, -screenHeight, 0);\n    const componentDragEnabled = componentTranslateY._value === 1;\n    // When we have a scrolling happening in the ScrollView, we don't want to translate\n    // the modal down. We either multiply by 0 to cancel the animation, or 1 to proceed.\n    const dragValue = react_native_1.Animated.add(react_native_1.Animated.multiply(dragY, componentDragEnabled ? 1 : cancelTranslateY), diffClamp);\n    const value = react_native_1.Animated.add(react_native_1.Animated.multiply(translateY, componentDragEnabled ? 1 : cancelTranslateY), dragValue);\n    let willCloseModalize = false;\n    const handleBackPress = () => {\n        if (alwaysOpen) {\n            return false;\n        }\n        if (onBackButtonPress) {\n            return onBackButtonPress();\n        }\n        else {\n            handleClose();\n        }\n        return true;\n    };\n    const handleKeyboardShow = (event) => {\n        const { height } = event.endCoordinates;\n        setKeyboardToggle(true);\n        setKeyboardHeight(height);\n    };\n    const handleKeyboardHide = () => {\n        setKeyboardToggle(false);\n        setKeyboardHeight(0);\n    };\n    const handleAnimateOpen = (alwaysOpenValue, dest = 'default') => {\n        const { timing, spring } = openAnimationConfig;\n        backButtonListenerRef.current = react_native_1.BackHandler.addEventListener('hardwareBackPress', handleBackPress);\n        let toValue = 0;\n        let toPanValue = 0;\n        let newPosition;\n        if (dest === 'top') {\n            toValue = 0;\n        }\n        else if (alwaysOpenValue) {\n            toValue = (modalHeightValue || 0) - alwaysOpenValue;\n        }\n        else if (snapPoint) {\n            toValue = (modalHeightValue || 0) - snapPoint;\n        }\n        if (panGestureAnimatedValue && (alwaysOpenValue || snapPoint)) {\n            toPanValue = 0;\n        }\n        else if (panGestureAnimatedValue &&\n            !alwaysOpenValue &&\n            (dest === 'top' || dest === 'default')) {\n            toPanValue = 1;\n        }\n        setIsVisible(true);\n        setShowContent(true);\n        if ((alwaysOpenValue && dest !== 'top') || (snapPoint && dest === 'default')) {\n            newPosition = 'initial';\n        }\n        else {\n            newPosition = 'top';\n        }\n        react_native_1.Animated.parallel([\n            react_native_1.Animated.timing(overlay, {\n                toValue: alwaysOpenValue && dest === 'default' ? 0 : 1,\n                duration: timing.duration,\n                easing: react_native_1.Easing.ease,\n                useNativeDriver: USE_NATIVE_DRIVER,\n            }),\n            panGestureAnimatedValue\n                ? react_native_1.Animated.timing(panGestureAnimatedValue, {\n                    toValue: toPanValue,\n                    duration: PAN_DURATION,\n                    easing: react_native_1.Easing.ease,\n                    useNativeDriver,\n                })\n                : react_native_1.Animated.delay(0),\n            spring\n                ? react_native_1.Animated.spring(translateY, Object.assign(Object.assign({}, get_spring_config_1.getSpringConfig(spring)), { toValue, useNativeDriver: USE_NATIVE_DRIVER }))\n                : react_native_1.Animated.timing(translateY, {\n                    toValue,\n                    duration: timing.duration,\n                    easing: timing.easing,\n                    useNativeDriver: USE_NATIVE_DRIVER,\n                }),\n        ]).start(() => {\n            if (onOpened) {\n                onOpened();\n            }\n            setModalPosition(newPosition);\n            if (onPositionChange) {\n                onPositionChange(newPosition);\n            }\n        });\n    };\n    const handleAnimateClose = (dest = 'default', callback) => {\n        var _a;\n        const { timing, spring } = closeAnimationConfig;\n        const lastSnapValue = snapPoint ? snaps[1] : 80;\n        const toInitialAlwaysOpen = dest === 'alwaysOpen' && Boolean(alwaysOpen);\n        const toValue = toInitialAlwaysOpen && alwaysOpen ? (modalHeightValue || 0) - alwaysOpen : screenHeight;\n        (_a = backButtonListenerRef.current) === null || _a === void 0 ? void 0 : _a.remove();\n        cancelTranslateY.setValue(1);\n        setBeginScrollYValue(0);\n        beginScrollY.setValue(0);\n        react_native_1.Animated.parallel([\n            react_native_1.Animated.timing(overlay, {\n                toValue: 0,\n                duration: timing.duration,\n                easing: react_native_1.Easing.ease,\n                useNativeDriver: USE_NATIVE_DRIVER,\n            }),\n            panGestureAnimatedValue\n                ? react_native_1.Animated.timing(panGestureAnimatedValue, {\n                    toValue: 0,\n                    duration: PAN_DURATION,\n                    easing: react_native_1.Easing.ease,\n                    useNativeDriver,\n                })\n                : react_native_1.Animated.delay(0),\n            spring\n                ? react_native_1.Animated.spring(translateY, Object.assign(Object.assign({}, get_spring_config_1.getSpringConfig(spring)), { toValue, useNativeDriver: USE_NATIVE_DRIVER }))\n                : react_native_1.Animated.timing(translateY, {\n                    duration: timing.duration,\n                    easing: react_native_1.Easing.out(react_native_1.Easing.ease),\n                    toValue,\n                    useNativeDriver: USE_NATIVE_DRIVER,\n                }),\n        ]).start(() => {\n            if (onClosed) {\n                onClosed();\n            }\n            if (callback) {\n                callback();\n            }\n            if (alwaysOpen && dest === 'alwaysOpen' && onPositionChange) {\n                onPositionChange('initial');\n            }\n            if (alwaysOpen && dest === 'alwaysOpen') {\n                setModalPosition('initial');\n            }\n            setShowContent(toInitialAlwaysOpen);\n            translateY.setValue(toValue);\n            dragY.setValue(0);\n            willCloseModalize = false;\n            setLastSnap(lastSnapValue);\n            setIsVisible(toInitialAlwaysOpen);\n        });\n    };\n    const handleModalizeContentLayout = ({ nativeEvent: { layout } }) => {\n        const value = Math.min(layout.height + (!adjustToContentHeight || keyboardHeight ? layout.y : 0), endHeight -\n            react_native_1.Platform.select({\n                ios: 0,\n                android: keyboardHeight,\n                default: 0,\n            }));\n        setModalHeightValue(value);\n    };\n    const handleBaseLayout = (component, height) => {\n        setLayouts(new Map(layouts.set(component, height)));\n        const max = Array.from(layouts).reduce((acc, cur) => acc + (cur === null || cur === void 0 ? void 0 : cur[1]), 0);\n        const maxFixed = +max.toFixed(3);\n        const endHeightFixed = +endHeight.toFixed(3);\n        const shorterHeight = maxFixed < endHeightFixed;\n        setDisableScroll(shorterHeight && disableScrollIfPossible);\n    };\n    const handleContentLayout = ({ nativeEvent }) => {\n        if (onLayout) {\n            onLayout(nativeEvent);\n        }\n        if (alwaysOpen && adjustToContentHeight) {\n            const { height } = nativeEvent.layout;\n            return setModalHeightValue(height);\n        }\n        // We don't want to disable the scroll if we are not using adjustToContentHeight props\n        if (!adjustToContentHeight) {\n            return;\n        }\n        handleBaseLayout('content', nativeEvent.layout.height);\n    };\n    const handleComponentLayout = ({ nativeEvent }, name, absolute) => {\n        /**\n         * We don't want to disable the scroll if we are not using adjustToContentHeight props.\n         * Also, if the component is in absolute positioning we don't want to take in\n         * account its dimensions, so we just skip.\n         */\n        if (!adjustToContentHeight || absolute) {\n            return;\n        }\n        handleBaseLayout(name, nativeEvent.layout.height);\n    };\n    const handleClose = (dest, callback) => {\n        if (onClose) {\n            onClose();\n        }\n        handleAnimateClose(dest, callback);\n    };\n    const handleChildren = ({ nativeEvent }, type) => {\n        const { timing } = closeAnimationConfig;\n        const { velocityY, translationY } = nativeEvent;\n        const negativeReverseScroll = modalPosition === 'top' &&\n            beginScrollYValue >= (snapPoint ? 0 : SCROLL_THRESHOLD) &&\n            translationY < 0;\n        const thresholdProps = translationY > threshold && beginScrollYValue === 0;\n        const closeThreshold = velocity\n            ? (beginScrollYValue <= 20 && velocityY >= velocity) || thresholdProps\n            : thresholdProps;\n        let enableBouncesValue = true;\n        // We make sure to reset the value if we are dragging from the children\n        if (type !== 'component' && cancelTranslateY._value === 0) {\n            componentTranslateY.setValue(0);\n        }\n        /*\n         * When the pan gesture began we check the position of the ScrollView \"cursor\".\n         * We cancel the translation animation if the ScrollView is not scrolled to the top\n         */\n        if (nativeEvent.oldState === react_native_gesture_handler_1.State.BEGAN) {\n            setCancelClose(false);\n            if (!closeSnapPointStraightEnabled && snapPoint\n                ? beginScrollYValue > 0\n                : beginScrollYValue > 0 || negativeReverseScroll) {\n                setCancelClose(true);\n                translateY.setValue(0);\n                dragY.setValue(0);\n                cancelTranslateY.setValue(0);\n                enableBouncesValue = true;\n            }\n            else {\n                cancelTranslateY.setValue(1);\n                enableBouncesValue = false;\n                if (!tapGestureEnabled) {\n                    setDisableScroll((Boolean(snapPoint) || Boolean(alwaysOpen)) && modalPosition === 'initial');\n                }\n            }\n        }\n        setEnableBounces(devices_1.isAndroid\n            ? false\n            : alwaysOpen\n                ? beginScrollYValue > 0 || translationY < 0\n                : enableBouncesValue);\n        if (nativeEvent.oldState === react_native_gesture_handler_1.State.ACTIVE) {\n            const toValue = translationY - beginScrollYValue;\n            let destSnapPoint = 0;\n            if (snapPoint || alwaysOpen) {\n                const endOffsetY = lastSnap + toValue + dragToss * velocityY;\n                /**\n                 * snapPoint and alwaysOpen use both an array of points to define the first open state and the final state.\n                 */\n                snaps.forEach((snap) => {\n                    const distFromSnap = Math.abs(snap - endOffsetY);\n                    const diffPoint = Math.abs(destSnapPoint - endOffsetY);\n                    // For snapPoint\n                    if (distFromSnap < diffPoint && !alwaysOpen) {\n                        if (closeSnapPointStraightEnabled) {\n                            if (modalPosition === 'initial' && negativeReverseScroll) {\n                                destSnapPoint = snap;\n                                willCloseModalize = false;\n                            }\n                            if (snap === endHeight) {\n                                destSnapPoint = snap;\n                                willCloseModalize = true;\n                                handleClose();\n                            }\n                        }\n                        else {\n                            destSnapPoint = snap;\n                            willCloseModalize = false;\n                            if (snap === endHeight) {\n                                willCloseModalize = true;\n                                handleClose();\n                            }\n                        }\n                    }\n                    // For alwaysOpen props\n                    if (distFromSnap < diffPoint && alwaysOpen && beginScrollYValue <= 0) {\n                        destSnapPoint = (modalHeightValue || 0) - alwaysOpen;\n                        willCloseModalize = false;\n                    }\n                });\n            }\n            else if (closeThreshold && !alwaysOpen && !cancelClose) {\n                willCloseModalize = true;\n                handleClose();\n            }\n            if (willCloseModalize) {\n                return;\n            }\n            setLastSnap(destSnapPoint);\n            translateY.extractOffset();\n            translateY.setValue(toValue);\n            translateY.flattenOffset();\n            dragY.setValue(0);\n            if (alwaysOpen) {\n                react_native_1.Animated.timing(overlay, {\n                    toValue: Number(destSnapPoint <= 0),\n                    duration: timing.duration,\n                    easing: react_native_1.Easing.ease,\n                    useNativeDriver: USE_NATIVE_DRIVER,\n                }).start();\n            }\n            react_native_1.Animated.spring(translateY, {\n                tension: 50,\n                friction: 12,\n                velocity: velocityY,\n                toValue: destSnapPoint,\n                useNativeDriver: USE_NATIVE_DRIVER,\n            }).start();\n            if (beginScrollYValue <= 0) {\n                const modalPositionValue = destSnapPoint <= 0 ? 'top' : 'initial';\n                if (panGestureAnimatedValue) {\n                    react_native_1.Animated.timing(panGestureAnimatedValue, {\n                        toValue: Number(modalPositionValue === 'top'),\n                        duration: PAN_DURATION,\n                        easing: react_native_1.Easing.ease,\n                        useNativeDriver,\n                    }).start();\n                }\n                if (!adjustToContentHeight && modalPositionValue === 'top') {\n                    setDisableScroll(false);\n                }\n                if (onPositionChange && modalPosition !== modalPositionValue) {\n                    onPositionChange(modalPositionValue);\n                }\n                if (modalPosition !== modalPositionValue) {\n                    setModalPosition(modalPositionValue);\n                }\n            }\n        }\n    };\n    const handleComponent = ({ nativeEvent }) => {\n        // If we drag from the HeaderComponent/FooterComponent/FloatingComponent we allow the translation animation\n        if (nativeEvent.oldState === react_native_gesture_handler_1.State.BEGAN) {\n            componentTranslateY.setValue(1);\n            beginScrollY.setValue(0);\n        }\n        handleChildren({ nativeEvent }, 'component');\n    };\n    const handleOverlay = ({ nativeEvent }) => {\n        if (nativeEvent.oldState === react_native_gesture_handler_1.State.ACTIVE && !willCloseModalize) {\n            if (onOverlayPress) {\n                onOverlayPress();\n            }\n            const dest = !!alwaysOpen ? 'alwaysOpen' : 'default';\n            handleClose(dest);\n        }\n    };\n    const handleGestureEvent = react_native_1.Animated.event([{ nativeEvent: { translationY: dragY } }], {\n        useNativeDriver: USE_NATIVE_DRIVER,\n        listener: ({ nativeEvent: { translationY } }) => {\n            var _a;\n            if (panGestureAnimatedValue) {\n                const offset = (_a = alwaysOpen !== null && alwaysOpen !== void 0 ? alwaysOpen : snapPoint) !== null && _a !== void 0 ? _a : 0;\n                const diff = Math.abs(translationY / (endHeight - offset));\n                const y = translationY <= 0 ? diff : 1 - diff;\n                let value;\n                if (modalPosition === 'initial' && translationY > 0) {\n                    value = 0;\n                }\n                else if (modalPosition === 'top' && translationY <= 0) {\n                    value = 1;\n                }\n                else {\n                    value = y;\n                }\n                panGestureAnimatedValue.setValue(value);\n            }\n        },\n    });\n    const renderHandle = () => {\n        const handleStyles = [styles_1.default.handle];\n        const shapeStyles = [styles_1.default.handle__shape, handleStyle];\n        if (!withHandle) {\n            return null;\n        }\n        if (!isHandleOutside) {\n            handleStyles.push(styles_1.default.handleBottom);\n            shapeStyles.push(styles_1.default.handle__shapeBottom, handleStyle);\n        }\n        return (React.createElement(react_native_gesture_handler_1.PanGestureHandler, { enabled: panGestureEnabled, simultaneousHandlers: tapGestureModalizeRef, shouldCancelWhenOutside: false, onGestureEvent: handleGestureEvent, onHandlerStateChange: handleComponent },\n            React.createElement(react_native_1.Animated.View, { style: handleStyles },\n                React.createElement(react_native_1.View, { style: shapeStyles }))));\n    };\n    const renderElement = (Element) => typeof Element === 'function' ? Element() : Element;\n    const renderComponent = (component, name) => {\n        var _a;\n        if (!component) {\n            return null;\n        }\n        const tag = renderElement(component);\n        /**\n         * Nesting Touchable/ScrollView components with RNGH PanGestureHandler cancels the inner events.\n         * Until a better solution lands in RNGH, I will disable the PanGestureHandler for Android only,\n         * so inner touchable/gestures are working from the custom components you can pass in.\n         */\n        if (devices_1.isAndroid && !panGestureComponentEnabled) {\n            return tag;\n        }\n        const obj = react_native_1.StyleSheet.flatten((_a = tag === null || tag === void 0 ? void 0 : tag.props) === null || _a === void 0 ? void 0 : _a.style);\n        const absolute = (obj === null || obj === void 0 ? void 0 : obj.position) === 'absolute';\n        const zIndex = obj === null || obj === void 0 ? void 0 : obj.zIndex;\n        return (React.createElement(react_native_gesture_handler_1.PanGestureHandler, { enabled: panGestureEnabled, shouldCancelWhenOutside: false, onGestureEvent: handleGestureEvent, onHandlerStateChange: handleComponent },\n            React.createElement(react_native_1.Animated.View, { style: { zIndex }, onLayout: (e) => handleComponentLayout(e, name, absolute) }, tag)));\n    };\n    const renderContent = () => {\n        var _a;\n        const keyboardDismissMode = devices_1.isIos ? 'interactive' : 'on-drag';\n        const passedOnProps = (_a = flatListProps !== null && flatListProps !== void 0 ? flatListProps : sectionListProps) !== null && _a !== void 0 ? _a : scrollViewProps;\n        // We allow overwrites when the props (bounces, scrollEnabled) are set to false, when true we use Modalize's core behavior\n        const bounces = (passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.bounces) !== undefined && !(passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.bounces)\n            ? passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.bounces : enableBounces;\n        const scrollEnabled = (passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.scrollEnabled) !== undefined && !(passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.scrollEnabled)\n            ? passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.scrollEnabled : keyboardToggle || !disableScroll;\n        const scrollEventThrottle = (passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.scrollEventThrottle) || 16;\n        const onScrollBeginDrag = passedOnProps === null || passedOnProps === void 0 ? void 0 : passedOnProps.onScrollBeginDrag;\n        const opts = {\n            ref: compose_refs_1.composeRefs(contentViewRef, contentRef),\n            bounces,\n            onScrollBeginDrag: react_native_1.Animated.event([{ nativeEvent: { contentOffset: { y: beginScrollY } } }], {\n                useNativeDriver: USE_NATIVE_DRIVER,\n                listener: onScrollBeginDrag,\n            }),\n            scrollEventThrottle,\n            onLayout: handleContentLayout,\n            scrollEnabled,\n            keyboardDismissMode,\n        };\n        if (flatListProps) {\n            return React.createElement(react_native_1.Animated.FlatList, Object.assign({}, flatListProps, opts));\n        }\n        if (sectionListProps) {\n            return React.createElement(react_native_1.Animated.SectionList, Object.assign({}, sectionListProps, opts));\n        }\n        if (customRenderer) {\n            const tag = renderElement(customRenderer);\n            return React.cloneElement(tag, Object.assign({}, opts));\n        }\n        return (React.createElement(react_native_1.Animated.ScrollView, Object.assign({}, scrollViewProps, opts), children));\n    };\n    const renderChildren = () => {\n        const style = adjustToContentHeight ? styles_1.default.content__adjustHeight : styles_1.default.content__container;\n        const minDist = libraries_1.isRNGH2() ? undefined : ACTIVATED;\n        return (React.createElement(react_native_gesture_handler_1.PanGestureHandler, { ref: panGestureChildrenRef, enabled: panGestureEnabled, simultaneousHandlers: [nativeViewChildrenRef, tapGestureModalizeRef], shouldCancelWhenOutside: false, onGestureEvent: handleGestureEvent, minDist: minDist, activeOffsetY: ACTIVATED, activeOffsetX: ACTIVATED, onHandlerStateChange: handleChildren },\n            React.createElement(react_native_1.Animated.View, { style: [style, childrenStyle] },\n                React.createElement(react_native_gesture_handler_1.NativeViewGestureHandler, { ref: nativeViewChildrenRef, waitFor: tapGestureModalizeRef, simultaneousHandlers: panGestureChildrenRef }, renderContent()))));\n    };\n    const renderOverlay = () => {\n        const pointerEvents = alwaysOpen && (modalPosition === 'initial' || !modalPosition) ? 'box-none' : 'auto';\n        return (React.createElement(react_native_gesture_handler_1.PanGestureHandler, { enabled: panGestureEnabled, simultaneousHandlers: tapGestureModalizeRef, shouldCancelWhenOutside: false, onGestureEvent: handleGestureEvent, onHandlerStateChange: handleChildren },\n            React.createElement(react_native_1.Animated.View, { style: styles_1.default.overlay, pointerEvents: pointerEvents }, showContent && (React.createElement(react_native_gesture_handler_1.TapGestureHandler, { ref: tapGestureOverlayRef, enabled: closeOnOverlayTap !== undefined ? closeOnOverlayTap : panGestureEnabled, onHandlerStateChange: handleOverlay },\n                React.createElement(react_native_1.Animated.View, { style: [\n                        styles_1.default.overlay__background,\n                        overlayStyle,\n                        {\n                            opacity: overlay.interpolate({\n                                inputRange: [0, 1],\n                                outputRange: [0, 1],\n                            }),\n                        },\n                    ], pointerEvents: pointerEvents }))))));\n    };\n    React.useImperativeHandle(ref, () => ({\n        open(dest) {\n            if (onOpen) {\n                onOpen();\n            }\n            handleAnimateOpen(alwaysOpen, dest);\n        },\n        close(dest, callback) {\n            handleClose(dest, callback);\n        },\n    }));\n    React.useEffect(() => {\n        if (alwaysOpen && (modalHeightValue || adjustToContentHeight)) {\n            handleAnimateOpen(alwaysOpen);\n        }\n    }, [alwaysOpen, modalHeightValue]);\n    React.useEffect(() => {\n        invariant_1.invariant(modalHeight && adjustToContentHeight, `You can't use both 'modalHeight' and 'adjustToContentHeight' props at the same time. Only choose one of the two.`);\n        invariant_1.invariant((scrollViewProps || children) && flatListProps, `You have defined 'flatListProps' along with 'scrollViewProps' or 'children' props. Remove 'scrollViewProps' or 'children' or 'flatListProps' to fix the error.`);\n        invariant_1.invariant((scrollViewProps || children) && sectionListProps, `You have defined 'sectionListProps'  along with 'scrollViewProps' or 'children' props. Remove 'scrollViewProps' or 'children' or 'sectionListProps' to fix the error.`);\n    }, [\n        modalHeight,\n        adjustToContentHeight,\n        scrollViewProps,\n        children,\n        flatListProps,\n        sectionListProps,\n    ]);\n    React.useEffect(() => {\n        setModalHeightValue(adjustValue);\n    }, [adjustToContentHeight, modalHeight, screenHeight]);\n    React.useEffect(() => {\n        let keyboardShowListener = null;\n        let keyboardHideListener = null;\n        const beginScrollYListener = beginScrollY.addListener(({ value }) => setBeginScrollYValue(value));\n        if (libraries_1.isBelowRN65) {\n            react_native_1.Keyboard.addListener('keyboardDidShow', handleKeyboardShow);\n            react_native_1.Keyboard.addListener('keyboardDidHide', handleKeyboardHide);\n        }\n        else {\n            keyboardShowListener = react_native_1.Keyboard.addListener('keyboardDidShow', handleKeyboardShow);\n            keyboardHideListener = react_native_1.Keyboard.addListener('keyboardDidHide', handleKeyboardHide);\n        }\n        return () => {\n            var _a;\n            (_a = backButtonListenerRef.current) === null || _a === void 0 ? void 0 : _a.remove();\n            beginScrollY.removeListener(beginScrollYListener);\n            if (libraries_1.isBelowRN65) {\n                react_native_1.Keyboard.removeListener('keyboardDidShow', handleKeyboardShow);\n                react_native_1.Keyboard.removeListener('keyboardDidHide', handleKeyboardHide);\n            }\n            else {\n                keyboardShowListener === null || keyboardShowListener === void 0 ? void 0 : keyboardShowListener.remove();\n                keyboardHideListener === null || keyboardHideListener === void 0 ? void 0 : keyboardHideListener.remove();\n            }\n        };\n    }, []);\n    const keyboardAvoidingViewProps = {\n        keyboardVerticalOffset: keyboardAvoidingOffset,\n        behavior: keyboardAvoidingBehavior,\n        enabled: avoidKeyboardLikeIOS,\n        style: [\n            styles_1.default.modalize__content,\n            modalStyle,\n            {\n                height: modalHeightValue,\n                maxHeight: endHeight,\n                transform: [\n                    {\n                        translateY: value.interpolate({\n                            inputRange: [-40, 0, endHeight],\n                            outputRange: [0, 0, endHeight],\n                            extrapolate: 'clamp',\n                        }),\n                    },\n                ],\n            },\n        ],\n    };\n    if (!avoidKeyboardLikeIOS && !adjustToContentHeight) {\n        keyboardAvoidingViewProps.onLayout = handleModalizeContentLayout;\n    }\n    const renderModalize = (React.createElement(react_native_1.View, { style: [styles_1.default.modalize, rootStyle], pointerEvents: alwaysOpen || !withOverlay ? 'box-none' : 'auto' },\n        React.createElement(react_native_gesture_handler_1.TapGestureHandler, { ref: tapGestureModalizeRef, maxDurationMs: tapGestureEnabled ? 100000 : 50, maxDeltaY: lastSnap, enabled: panGestureEnabled },\n            React.createElement(react_native_1.View, { style: styles_1.default.modalize__wrapper, pointerEvents: \"box-none\" },\n                showContent && (React.createElement(AnimatedKeyboardAvoidingView, Object.assign({}, keyboardAvoidingViewProps),\n                    renderHandle(),\n                    renderComponent(HeaderComponent, 'header'),\n                    renderChildren(),\n                    renderComponent(FooterComponent, 'footer'))),\n                withOverlay && renderOverlay())),\n        renderComponent(FloatingComponent, 'floating')));\n    const renderReactModal = (child) => (React.createElement(react_native_1.Modal, Object.assign({}, reactModalProps, { supportedOrientations: ['landscape', 'portrait', 'portrait-upside-down'], onRequestClose: handleBackPress, hardwareAccelerated: USE_NATIVE_DRIVER, visible: isVisible, transparent: true }), child));\n    if (!isVisible) {\n        return null;\n    }\n    if (withReactModal) {\n        return renderReactModal(renderModalize);\n    }\n    return renderModalize;\n};\nexports.Modalize = React.forwardRef(ModalizeBase);\n__exportStar(require(\"./utils/use-modalize\"), exports);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}