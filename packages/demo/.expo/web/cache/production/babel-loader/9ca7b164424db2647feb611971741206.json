{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import XDate from'xdate';import React,{useRef,useState,useCallback,useMemo}from'react';import View from\"react-native-web/dist/exports/View\";import{sameMonth}from'../../dateutils';import{xdateToData}from'../../interface';import{useDidUpdate}from'../../hooks';import{UpdateSources}from'../commons';import styleConstructor from'../style';import CalendarContext from'./index';import TodayButton from'./todayButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CalendarProvider=function CalendarProvider(props){var theme=props.theme,date=props.date,onDateChanged=props.onDateChanged,onMonthChange=props.onMonthChange,_props$showTodayButto=props.showTodayButton,showTodayButton=_props$showTodayButto===void 0?false:_props$showTodayButto,disabledOpacity=props.disabledOpacity,todayBottomMargin=props.todayBottomMargin,todayButtonStyle=props.todayButtonStyle,propsStyle=props.style,numberOfDays=props.numberOfDays,_props$timelineLeftIn=props.timelineLeftInset,timelineLeftInset=_props$timelineLeftIn===void 0?72:_props$timelineLeftIn,children=props.children;var style=useRef(styleConstructor(theme));var todayButton=useRef();var prevDate=useRef(date);var currDate=useRef(date);var _useState=useState(date),_useState2=_slicedToArray(_useState,2),currentDate=_useState2[0],setCurrentDate=_useState2[1];var _useState3=useState(UpdateSources.CALENDAR_INIT),_useState4=_slicedToArray(_useState3,2),updateSource=_useState4[0],setUpdateSource=_useState4[1];var wrapperStyle=useMemo(function(){return[style.current.contextWrapper,propsStyle];},[style,propsStyle]);useDidUpdate(function(){if(date&&date!==currentDate){_setDate(date,UpdateSources.PROP_UPDATE);}},[date]);var _setDate=useCallback(function(date,updateSource){prevDate.current=currDate.current;currDate.current=date;setCurrentDate(date);setUpdateSource(updateSource);onDateChanged==null?void 0:onDateChanged(date,updateSource);if(!sameMonth(new XDate(date),new XDate(prevDate.current))){onMonthChange==null?void 0:onMonthChange(xdateToData(new XDate(date)),updateSource);}},[onDateChanged,onMonthChange]);var _setDisabled=useCallback(function(disabled){if(showTodayButton){var _todayButton$current;(_todayButton$current=todayButton.current)==null?void 0:_todayButton$current.disable(disabled);}},[showTodayButton]);var contextValue=useMemo(function(){return{date:currentDate,prevDate:prevDate.current,updateSource:updateSource,setDate:_setDate,setDisabled:_setDisabled,numberOfDays:numberOfDays,timelineLeftInset:timelineLeftInset};},[currentDate,updateSource,numberOfDays,_setDisabled]);var renderTodayButton=function renderTodayButton(){return _jsx(TodayButton,{ref:todayButton,disabledOpacity:disabledOpacity,margin:todayBottomMargin,style:todayButtonStyle,theme:theme});};return _jsxs(CalendarContext.Provider,{value:contextValue,children:[_jsx(View,{style:wrapperStyle,children:children},numberOfDays),showTodayButton&&renderTodayButton()]});};export default CalendarProvider;CalendarProvider.displayName='CalendarProvider';","map":{"version":3,"names":["XDate","React","useRef","useState","useCallback","useMemo","View","sameMonth","xdateToData","useDidUpdate","UpdateSources","styleConstructor","CalendarContext","TodayButton","jsx","_jsx","jsxs","_jsxs","CalendarProvider","props","theme","date","onDateChanged","onMonthChange","_props$showTodayButto","showTodayButton","disabledOpacity","todayBottomMargin","todayButtonStyle","propsStyle","style","numberOfDays","_props$timelineLeftIn","timelineLeftInset","children","todayButton","prevDate","currDate","_useState","_useState2","_slicedToArray","currentDate","setCurrentDate","_useState3","CALENDAR_INIT","_useState4","updateSource","setUpdateSource","wrapperStyle","current","contextWrapper","_setDate","PROP_UPDATE","_setDisabled","disabled","_todayButton$current","disable","contextValue","setDate","setDisabled","renderTodayButton","ref","margin","Provider","value","displayName"],"sources":["/Users/josh/src/ui/node_modules/react-native-calendars/src/expandableCalendar/Context/Provider.js"],"sourcesContent":["import XDate from 'xdate';\nimport React, { useRef, useState, useCallback, useMemo } from 'react';\nimport { View } from 'react-native';\nimport { sameMonth } from '../../dateutils';\nimport { xdateToData } from '../../interface';\nimport { useDidUpdate } from '../../hooks';\nimport { UpdateSources } from '../commons';\nimport styleConstructor from '../style';\nimport CalendarContext from './index';\nimport TodayButton from './todayButton';\n/**\n * @description: Calendar context provider component\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst CalendarProvider = (props) => {\n    const { theme, date, onDateChanged, onMonthChange, showTodayButton = false, disabledOpacity, todayBottomMargin, todayButtonStyle, style: propsStyle, numberOfDays, timelineLeftInset = 72, children } = props;\n    const style = useRef(styleConstructor(theme));\n    const todayButton = useRef();\n    const prevDate = useRef(date);\n    const currDate = useRef(date); // for setDate only to keep prevDate up to date\n    const [currentDate, setCurrentDate] = useState(date);\n    const [updateSource, setUpdateSource] = useState(UpdateSources.CALENDAR_INIT);\n    const wrapperStyle = useMemo(() => {\n        return [style.current.contextWrapper, propsStyle];\n    }, [style, propsStyle]);\n    useDidUpdate(() => {\n        if (date && date !== currentDate) {\n            _setDate(date, UpdateSources.PROP_UPDATE);\n        }\n    }, [date]);\n    const _setDate = useCallback((date, updateSource) => {\n        prevDate.current = currDate.current;\n        currDate.current = date;\n        setCurrentDate(date);\n        setUpdateSource(updateSource);\n        onDateChanged?.(date, updateSource);\n        if (!sameMonth(new XDate(date), new XDate(prevDate.current))) {\n            onMonthChange?.(xdateToData(new XDate(date)), updateSource);\n        }\n    }, [onDateChanged, onMonthChange]);\n    const _setDisabled = useCallback((disabled) => {\n        if (showTodayButton) {\n            todayButton.current?.disable(disabled);\n        }\n    }, [showTodayButton]);\n    const contextValue = useMemo(() => {\n        return {\n            date: currentDate,\n            prevDate: prevDate.current,\n            updateSource: updateSource,\n            setDate: _setDate,\n            setDisabled: _setDisabled,\n            numberOfDays,\n            timelineLeftInset\n        };\n    }, [currentDate, updateSource, numberOfDays, _setDisabled]);\n    const renderTodayButton = () => {\n        return (<TodayButton ref={todayButton} disabledOpacity={disabledOpacity} margin={todayBottomMargin} style={todayButtonStyle} theme={theme}/>);\n    };\n    return (<CalendarContext.Provider value={contextValue}>\n      <View style={wrapperStyle} key={numberOfDays}>{children}</View>\n      {showTodayButton && renderTodayButton()}\n    </CalendarContext.Provider>);\n};\nexport default CalendarProvider;\nCalendarProvider.displayName = 'CalendarProvider';\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}