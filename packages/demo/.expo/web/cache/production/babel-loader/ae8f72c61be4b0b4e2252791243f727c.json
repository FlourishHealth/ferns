{"ast":null,"code":"'use strict';import _defineProperty2 from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty2(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,\"string\");return typeof key===\"symbol\"?key:String(key);}function _toPrimitive(input,hint){if(typeof input!==\"object\"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||\"default\");if(typeof res!==\"object\")return res;throw new TypeError(\"@@toPrimitive must return a primitive value.\");}return(hint===\"string\"?String:Number)(input);}import React from'react';import findNodeHandle from\"react-native-web/dist/exports/findNodeHandle\";import Platform from\"react-native-web/dist/exports/Platform\";import WorkletEventHandler from'../reanimated2/WorkletEventHandler';import'../reanimated2/layoutReanimation/animationsManager';import invariant from'invariant';import{adaptViewConfig}from'../ConfigHelper';import{RNRenderer}from'../reanimated2/platform-specific/RNRenderer';import{configureLayoutAnimations,enableLayoutAnimations}from'../reanimated2/core';import{SharedTransition,LayoutAnimationType}from'../reanimated2/layoutReanimation';import{getShadowNodeWrapperFromRef}from'../reanimated2/fabricUtils';import{removeFromPropsRegistry}from'../reanimated2/PropsRegistry';import{getReduceMotionFromConfig}from'../reanimated2/animation/util';import{maybeBuild}from'../animationBuilder';import{SkipEnteringContext}from'../reanimated2/component/LayoutAnimationConfig';import JSPropsUpdater from'./JSPropsUpdater';import{has,flattenArray}from'./utils';import setAndForwardRef from'./setAndForwardRef';import{isFabric,isJest,isWeb,shouldBeUseWeb}from'../reanimated2/PlatformChecker';import{InlinePropManager}from'./InlinePropManager';import{PropsFilter}from'./PropsFilter';import{startWebLayoutAnimation,tryActivateLayoutTransition,configureWebLayoutAnimations,getReducedMotionFromConfig}from'../reanimated2/layoutReanimation/web';var IS_WEB=isWeb();var IS_FABRIC=isFabric();function onlyAnimatedStyles(styles){return styles.filter(function(style){return style===null||style===void 0?void 0:style.viewDescriptors;});}function isSameAnimatedStyle(style1,style2){return(style1===null||style1===void 0?void 0:style1.viewsRef)===(style2===null||style2===void 0?void 0:style2.viewsRef);}var isSameAnimatedProps=isSameAnimatedStyle;export function createAnimatedComponent(Component,options){invariant(typeof Component!=='function'||Component.prototype&&Component.prototype.isReactComponent,`Looks like you're passing a function component \\`${Component.name}\\` to \\`createAnimatedComponent\\` function which supports only class components. Please wrap your function component with \\`React.forwardRef()\\` or use a class component instead.`);var AnimatedComponent=function(_React$Component){_inherits(AnimatedComponent,_React$Component);var _super=_createSuper(AnimatedComponent);function AnimatedComponent(props){var _this;_classCallCheck(this,AnimatedComponent);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),\"_styles\",null);_defineProperty(_assertThisInitialized(_this),\"_animatedProps\",void 0);_defineProperty(_assertThisInitialized(_this),\"_viewTag\",-1);_defineProperty(_assertThisInitialized(_this),\"_isFirstRender\",true);_defineProperty(_assertThisInitialized(_this),\"animatedStyle\",{value:{}});_defineProperty(_assertThisInitialized(_this),\"_component\",null);_defineProperty(_assertThisInitialized(_this),\"_sharedElementTransition\",null);_defineProperty(_assertThisInitialized(_this),\"_jsPropsUpdater\",new JSPropsUpdater());_defineProperty(_assertThisInitialized(_this),\"_InlinePropManager\",new InlinePropManager());_defineProperty(_assertThisInitialized(_this),\"_PropsFilter\",new PropsFilter());_defineProperty(_assertThisInitialized(_this),\"_viewInfo\",void 0);_defineProperty(_assertThisInitialized(_this),\"context\",void 0);_defineProperty(_assertThisInitialized(_this),\"_setComponentRef\",setAndForwardRef({getForwardedRef:function getForwardedRef(){return _this.props.forwardedRef;},setLocalRef:function setLocalRef(ref){var tag=IS_WEB?ref:findNodeHandle(ref);var _this$props3=_this.props,layout=_this$props3.layout,entering=_this$props3.entering,exiting=_this$props3.exiting,sharedTransitionTag=_this$props3.sharedTransitionTag;if((layout||entering||exiting||sharedTransitionTag)&&tag!=null){var _this$context;if(!shouldBeUseWeb()){enableLayoutAnimations(true,false);}if(layout){configureLayoutAnimations(tag,LayoutAnimationType.LAYOUT,maybeBuild(layout,undefined,AnimatedComponent.displayName));}var skipEntering=(_this$context=_this.context)===null||_this$context===void 0?void 0:_this$context.current;if(entering&&!skipEntering){var _this$props;configureLayoutAnimations(tag,LayoutAnimationType.ENTERING,maybeBuild(entering,(_this$props=_this.props)===null||_this$props===void 0?void 0:_this$props.style,AnimatedComponent.displayName));}if(exiting){var reduceMotionInExiting='getReduceMotion'in exiting&&typeof exiting.getReduceMotion==='function'?getReduceMotionFromConfig(exiting.getReduceMotion()):getReduceMotionFromConfig();if(!reduceMotionInExiting){var _this$props2;configureLayoutAnimations(tag,LayoutAnimationType.EXITING,maybeBuild(exiting,(_this$props2=_this.props)===null||_this$props2===void 0?void 0:_this$props2.style,AnimatedComponent.displayName));}}if(sharedTransitionTag&&!IS_WEB){var _this$props$sharedTra;var sharedElementTransition=(_this$props$sharedTra=_this.props.sharedTransitionStyle)!=null?_this$props$sharedTra:new SharedTransition();var reduceMotionInTransition=getReduceMotionFromConfig(sharedElementTransition.getReduceMotion());if(!reduceMotionInTransition){sharedElementTransition.registerTransition(tag,sharedTransitionTag);_this._sharedElementTransition=sharedElementTransition;}}}if(ref!==_this._component){_this._component=ref;}}}));if(isJest()){_this.animatedStyle={value:{}};}return _this;}_createClass(AnimatedComponent,[{key:\"componentDidMount\",value:function componentDidMount(){this._attachNativeEvents();this._jsPropsUpdater.addOnJSPropsChangeListener(this);this._attachAnimatedStyles();this._InlinePropManager.attachInlineProps(this,this._getViewInfo());if(IS_WEB){configureWebLayoutAnimations();if(!this.props.entering){this._isFirstRender=false;return;}if(getReducedMotionFromConfig(this.props.entering)){this._isFirstRender=false;return;}startWebLayoutAnimation(this.props,this._component,LayoutAnimationType.ENTERING);}this._isFirstRender=false;}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var _this$_sharedElementT;this._detachNativeEvents();this._jsPropsUpdater.removeOnJSPropsChangeListener(this);this._detachStyles();this._InlinePropManager.detachInlineProps();(_this$_sharedElementT=this._sharedElementTransition)===null||_this$_sharedElementT===void 0?void 0:_this$_sharedElementT.unregisterTransition(this._viewTag);if(IS_WEB&&this.props.exiting&&!getReducedMotionFromConfig(this.props.exiting)){startWebLayoutAnimation(this.props,this._component,LayoutAnimationType.EXITING);}}},{key:\"_getEventViewRef\",value:function _getEventViewRef(){var _this$_component,_getScrollableNode,_ref;return(_this$_component=this._component)!==null&&_this$_component!==void 0&&_this$_component.getScrollableNode?(_getScrollableNode=(_ref=this._component).getScrollableNode)===null||_getScrollableNode===void 0?void 0:_getScrollableNode.call(_ref):this._component;}},{key:\"_attachNativeEvents\",value:function _attachNativeEvents(){var node=this._getEventViewRef();var viewTag=null;for(var key in this.props){var prop=this.props[key];if(has('current',prop)&&prop.current instanceof WorkletEventHandler){if(viewTag===null){viewTag=findNodeHandle(options!==null&&options!==void 0&&options.setNativeProps?this:node);}prop.current.registerForEvents(viewTag,key);}}}},{key:\"_detachNativeEvents\",value:function _detachNativeEvents(){for(var key in this.props){var prop=this.props[key];if(has('current',prop)&&prop.current instanceof WorkletEventHandler){prop.current.unregisterFromEvents();}}}},{key:\"_detachStyles\",value:function _detachStyles(){if(IS_WEB&&this._styles!==null){for(var style of this._styles){if(style!==null&&style!==void 0&&style.viewsRef){style.viewsRef.remove(this);}}}else if(this._viewTag!==-1&&this._styles!==null){var _this$props$animatedP;for(var _style of this._styles){_style.viewDescriptors.remove(this._viewTag);}if((_this$props$animatedP=this.props.animatedProps)!==null&&_this$props$animatedP!==void 0&&_this$props$animatedP.viewDescriptors){this.props.animatedProps.viewDescriptors.remove(this._viewTag);}if(IS_FABRIC){removeFromPropsRegistry(this._viewTag);}}}},{key:\"_reattachNativeEvents\",value:function _reattachNativeEvents(prevProps){for(var key in prevProps){var prop=this.props[key];if(has('current',prop)&&prop.current instanceof WorkletEventHandler&&prop.current.reattachNeeded){prop.current.unregisterFromEvents();}}var viewTag=null;for(var _key in this.props){var _prop=this.props[_key];if(has('current',_prop)&&_prop.current instanceof WorkletEventHandler&&_prop.current.reattachNeeded){if(viewTag===null){var node=this._getEventViewRef();viewTag=findNodeHandle(options!==null&&options!==void 0&&options.setNativeProps?this:node);}_prop.current.registerForEvents(viewTag,_key);_prop.current.reattachNeeded=false;}}}},{key:\"_updateFromNative\",value:function _updateFromNative(props){if(options!==null&&options!==void 0&&options.setNativeProps){options.setNativeProps(this._component,props);}else{var _this$_component2,_this$_component2$set;(_this$_component2=this._component)===null||_this$_component2===void 0?void 0:(_this$_component2$set=_this$_component2.setNativeProps)===null||_this$_component2$set===void 0?void 0:_this$_component2$set.call(_this$_component2,props);}}},{key:\"_getViewInfo\",value:function _getViewInfo(){var _this$_component3,_getAnimatableRef,_ref2;if(this._viewInfo!==undefined){return this._viewInfo;}var viewTag;var viewName;var shadowNodeWrapper=null;var viewConfig;var component=(_this$_component3=this._component)!==null&&_this$_component3!==void 0&&_this$_component3.getAnimatableRef?(_getAnimatableRef=(_ref2=this._component).getAnimatableRef)===null||_getAnimatableRef===void 0?void 0:_getAnimatableRef.call(_ref2):this;if(IS_WEB){viewTag=this._component;viewName=null;shadowNodeWrapper=null;viewConfig=null;}else{var _hostInstance$viewCon;var hostInstance=RNRenderer.findHostInstance_DEPRECATED(component);if(!hostInstance){throw new Error('[Reanimated] Cannot find host instance for this component. Maybe it renders nothing?');}viewTag=hostInstance===null||hostInstance===void 0?void 0:hostInstance._nativeTag;viewName=hostInstance===null||hostInstance===void 0?void 0:(_hostInstance$viewCon=hostInstance.viewConfig)===null||_hostInstance$viewCon===void 0?void 0:_hostInstance$viewCon.uiViewClassName;viewConfig=hostInstance===null||hostInstance===void 0?void 0:hostInstance.viewConfig;if(IS_FABRIC){shadowNodeWrapper=getShadowNodeWrapperFromRef(this);}}this._viewInfo={viewTag:viewTag,viewName:viewName,shadowNodeWrapper:shadowNodeWrapper,viewConfig:viewConfig};return this._viewInfo;}},{key:\"_attachAnimatedStyles\",value:function _attachAnimatedStyles(){var _this2=this;var _this$props$animatedP2,_this$props$animatedP3;var styles=this.props.style?onlyAnimatedStyles(flattenArray(this.props.style)):[];var prevStyles=this._styles;this._styles=styles;var prevAnimatedProps=this._animatedProps;this._animatedProps=this.props.animatedProps;var _this$_getViewInfo=this._getViewInfo(),viewTag=_this$_getViewInfo.viewTag,viewName=_this$_getViewInfo.viewName,shadowNodeWrapper=_this$_getViewInfo.shadowNodeWrapper,viewConfig=_this$_getViewInfo.viewConfig;var hasReanimated2Props=((_this$props$animatedP2=this.props.animatedProps)===null||_this$props$animatedP2===void 0?void 0:_this$props$animatedP2.viewDescriptors)||styles.length;if(hasReanimated2Props&&viewConfig){adaptViewConfig(viewConfig);}this._viewTag=viewTag;if(prevStyles){var hasOneSameStyle=styles.length===1&&prevStyles.length===1&&isSameAnimatedStyle(styles[0],prevStyles[0]);if(!hasOneSameStyle){var _loop=function _loop(prevStyle){var isPresent=styles.some(function(style){return isSameAnimatedStyle(style,prevStyle);});if(!isPresent){prevStyle.viewDescriptors.remove(viewTag);}};for(var prevStyle of prevStyles){_loop(prevStyle);}}}styles.forEach(function(style){style.viewDescriptors.add({tag:viewTag,name:viewName,shadowNodeWrapper:shadowNodeWrapper});if(isJest()){_this2.animatedStyle.value=_objectSpread(_objectSpread({},_this2.animatedStyle.value),style.initial.value);style.animatedStyle.current=_this2.animatedStyle;}});if(prevAnimatedProps&&!isSameAnimatedProps(prevAnimatedProps,this.props.animatedProps)){prevAnimatedProps.viewDescriptors.remove(viewTag);}if((_this$props$animatedP3=this.props.animatedProps)!==null&&_this$props$animatedP3!==void 0&&_this$props$animatedP3.viewDescriptors){this.props.animatedProps.viewDescriptors.add({tag:viewTag,name:viewName,shadowNodeWrapper:shadowNodeWrapper});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,_prevState,snapshot){this._reattachNativeEvents(prevProps);this._attachAnimatedStyles();this._InlinePropManager.attachInlineProps(this,this._getViewInfo());if(IS_WEB&&snapshot!==null&&this.props.layout&&!getReducedMotionFromConfig(this.props.layout)){tryActivateLayoutTransition(this.props,this._component,snapshot);}}},{key:\"getSnapshotBeforeUpdate\",value:function getSnapshotBeforeUpdate(){if(this._component.getBoundingClientRect!==undefined){return this._component.getBoundingClientRect();}return null;}},{key:\"render\",value:function render(){var props=this._PropsFilter.filterNonAnimatedProps(this);if(isJest()){props.animatedStyle=this.animatedStyle;}if(this._isFirstRender&&IS_WEB&&props.entering&&!getReducedMotionFromConfig(props.entering)){var _props$style;props.style=_objectSpread(_objectSpread({},(_props$style=props.style)!=null?_props$style:{}),{},{visibility:'hidden'});}var platformProps={};return React.createElement(Component,_extends({},props,{ref:this._setComponentRef},platformProps));}}]);return AnimatedComponent;}(React.Component);_defineProperty(AnimatedComponent,\"displayName\",void 0);_defineProperty(AnimatedComponent,\"contextType\",SkipEnteringContext);AnimatedComponent.displayName=`AnimatedComponent(${Component.displayName||Component.name||'Component'})`;return React.forwardRef(function(props,ref){return React.createElement(AnimatedComponent,_extends({},props,ref===null?null:{forwardedRef:ref}));});}","map":{"version":3,"sources":["createAnimatedComponent.tsx"],"names":["React","WorkletEventHandler","invariant","adaptViewConfig","RNRenderer","configureLayoutAnimations","enableLayoutAnimations","SharedTransition","LayoutAnimationType","getShadowNodeWrapperFromRef","removeFromPropsRegistry","getReduceMotionFromConfig","maybeBuild","SkipEnteringContext","JSPropsUpdater","has","flattenArray","setAndForwardRef","isFabric","isJest","isWeb","shouldBeUseWeb","InlinePropManager","PropsFilter","startWebLayoutAnimation","tryActivateLayoutTransition","configureWebLayoutAnimations","getReducedMotionFromConfig","IS_WEB","IS_FABRIC","onlyAnimatedStyles","styles","filter","style","viewDescriptors","isSameAnimatedStyle","style1","style2","viewsRef","isSameAnimatedProps","createAnimatedComponent","Component","options","prototype","isReactComponent","name","AnimatedComponent","_defineProperty","value","constructor","props","animatedStyle","componentDidMount","_attachNativeEvents","_jsPropsUpdater","addOnJSPropsChangeListener","_attachAnimatedStyles","_InlinePropManager","attachInlineProps","_getViewInfo","entering","_isFirstRender","_component","ENTERING","componentWillUnmount","_detachNativeEvents","removeOnJSPropsChangeListener","_detachStyles","detachInlineProps","_sharedElementTransition","unregisterTransition","_viewTag","exiting","EXITING","_getEventViewRef","getScrollableNode","node","viewTag","key","prop","current","findNodeHandle","setNativeProps","registerForEvents","unregisterFromEvents","_styles","remove","animatedProps","_reattachNativeEvents","prevProps","reattachNeeded","_updateFromNative","_viewInfo","undefined","viewName","shadowNodeWrapper","viewConfig","component","getAnimatableRef","hostInstance","findHostInstance_DEPRECATED","Error","_nativeTag","uiViewClassName","prevStyles","prevAnimatedProps","_animatedProps","hasReanimated2Props","length","hasOneSameStyle","prevStyle","isPresent","some","forEach","add","tag","initial","componentDidUpdate","_prevState","snapshot","layout","getForwardedRef","forwardedRef","setLocalRef","ref","sharedTransitionTag","LAYOUT","displayName","skipEntering","context","reduceMotionInExiting","getReduceMotion","sharedElementTransition","sharedTransitionStyle","reduceMotionInTransition","registerTransition","getSnapshotBeforeUpdate","getBoundingClientRect","render","_PropsFilter","filterNonAnimatedProps","visibility","platformProps","_setComponentRef","forwardRef"],"mappings":"AAAA,YAAY,CAAA,OAAA,gBAAA,oDAAA,eAAA,oDAAA,YAAA,iDAAA,sBAAA,2DAAA,SAAA,8CAAA,0BAAA,+DAAA,eAAA,sDAAA,QAAA,CAAA,CAAA,CAAA,MAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA,KAAA,MAAA,CAAA,qBAAA,MAAA,CAAA,CAAA,MAAA,CAAA,qBAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA,MAAA,UAAA,CAAA,SAAA,MAAA,CAAA,wBAAA,CAAA,CAAA,CAAA,CAAA,EAAA,UAAA,KAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA,CAAA,UAAA,CAAA,WAAA,cAAA,CAAA,UAAA,CAAA,GAAA,CAAA,CAAA,SAAA,CAAA,MAAA,CAAA,CAAA,QAAA,CAAA,OAAA,SAAA,CAAA,CAAA,EAAA,SAAA,CAAA,CAAA,KAAA,CAAA,GAAA,OAAA,CAAA,MAAA,CAAA,CAAA,MAAA,OAAA,UAAA,CAAA,EAAA,gBAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,MAAA,CAAA,yBAAA,CAAA,MAAA,CAAA,gBAAA,CAAA,CAAA,CAAA,MAAA,CAAA,yBAAA,CAAA,CAAA,GAAA,OAAA,CAAA,MAAA,CAAA,CAAA,GAAA,OAAA,UAAA,CAAA,EAAA,MAAA,CAAA,cAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAA,wBAAA,CAAA,CAAA,CAAA,CAAA,cAAA,CAAA,WAAA,aAAA,OAAA,MAAA,yBAAA,CAAA,yBAAA,mBAAA,qBAAA,MAAA,KAAA,CAAA,eAAA,CAAA,OAAA,EAAA,MAAA,IAAA,yBAAA,MAAA,SAAA,CAAA,eAAA,OAAA,WAAA,CAAA,MAAA,CAAA,OAAA,CAAA,SAAA,CAAA,KAAA,CAAA,SAAA,CAAA,SAAA,QAAA,MAAA,CAAA,KAAA,CAAA,KAAA,MAAA,SAAA,UAAA,0BAAA,MAAA,MAAA,cAAA,0BAAA,YAAA,OAAA,iBAAA,OAAA,CAAA,SAAA,iBAAA,OAAA,CAAA,SAAA,CAAA,IAAA,wBAAA,KAAA,8BAAA,OAAA,CAAA,SAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA,CAAA,SAAA,CAAA,OAAA,sCAAA,CAAA,iBAAC,QAAA,CAAA,QAAA,CAAA,CAAA,CAAA,QAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA,CAAA,SAAA,MAAA,CAAA,CAAA,IAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,SAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA,CAAA,GAAA,CAAA,MAAA,CAAA,SAAA,CAAA,CAAA,CAAA,CAAA,IAAA,GAAA,CAAA,GAAA,GAAA,CAAA,MAAA,CAAA,CAAA,GAAA,MAAA,CAAA,SAAA,CAAA,cAAA,CAAA,IAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,CAAA,CAAA,QAAA,CAAA,eAAA,CAAA,GAAA,CAAA,GAAA,CAAA,KAAA,CAAA,CAAA,GAAA,CAAA,cAAA,CAAA,GAAA,CAAA,CAAA,GAAA,GAAA,GAAA,CAAA,GAAA,CAAA,CAAA,MAAA,CAAA,cAAA,CAAA,GAAA,CAAA,GAAA,CAAA,CAAA,KAAA,CAAA,KAAA,CAAA,UAAA,CAAA,IAAA,CAAA,YAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA,GAAA,CAAA,CAAA,KAAA,CAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,QAAA,CAAA,cAAA,CAAA,GAAA,CAAA,CAAA,GAAA,CAAA,GAAA,CAAA,YAAA,CAAA,GAAA,CAAA,QAAA,CAAA,CAAA,MAAA,OAAA,CAAA,GAAA,GAAA,QAAA,CAAA,GAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CAAA,GAAA,MAAA,CAAA,KAAA,GAAA,QAAA,EAAA,KAAA,GAAA,IAAA,CAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,WAAA,CAAA,CAAA,GAAA,IAAA,GAAA,SAAA,CAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,CAAA,GAAA,MAAA,CAAA,GAAA,GAAA,QAAA,CAAA,MAAA,CAAA,GAAA,CAAA,KAAA,IAAA,CAAA,SAAA,CAAA,8CAAA,CAAA,CAAA,CAAA,MAAA,CAAA,IAAA,GAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,CAAA,CAAA,CAQb,MAAOA,CAAAA,KAAK,KAAM,OAAO,CAAA,OAAA,cAAA,2DAAA,QAAA,8CAEzB,MAAOC,CAAAA,mBAAmB,KAAM,oCAAoC,CACpE,MAAO,oDAAoD,CAC3D,MAAOC,CAAAA,SAAS,KAAM,WAAW,CACjC,OAASC,eAAe,KAAQ,iBAAiB,CACjD,OAASC,UAAU,KAAQ,6CAA6C,CACxE,OACEC,yBAAyB,CACzBC,sBAAsB,KACjB,qBAAqB,CAC5B,OACEC,gBAAgB,CAChBC,mBAAmB,KACd,kCAAkC,CAEzC,OAASC,2BAA2B,KAAQ,4BAA4B,CACxE,OAASC,uBAAuB,KAAQ,8BAA8B,CACtE,OAASC,yBAAyB,KAAQ,+BAA+B,CACzE,OAASC,UAAU,KAAQ,qBAAqB,CAChD,OAASC,mBAAmB,KAAQ,gDAAgD,CAEpF,MAAOC,CAAAA,cAAc,KAAM,kBAAkB,CAS7C,OAASC,GAAG,CAAEC,YAAY,KAAQ,SAAS,CAC3C,MAAOC,CAAAA,gBAAgB,KAAM,oBAAoB,CACjD,OACEC,QAAQ,CACRC,MAAM,CACNC,KAAK,CACLC,cAAc,KACT,gCAAgC,CACvC,OAASC,iBAAiB,KAAQ,qBAAqB,CACvD,OAASC,WAAW,KAAQ,eAAe,CAC3C,OACEC,uBAAuB,CACvBC,2BAA2B,CAC3BC,4BAA4B,CAC5BC,0BAA0B,KACrB,sCAAsC,CAI7C,GAAMC,CAAAA,MAAM,CAAGR,KAAK,CAAA,CAAE,CACtB,GAAMS,CAAAA,SAAS,CAAGX,QAAQ,CAAA,CAAE,CAE5B,QAASY,CAAAA,kBAAkBA,CAACC,MAAoB,CAAgB,CAC9D,MAAOA,CAAAA,MAAM,CAACC,MAAM,CAAEC,SAAAA,KAAK,QAAKA,CAAAA,KAAK,GAAA,IAAA,EAALA,KAAK,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAALA,KAAK,CAAEC,eAAe,GAAC,CACzD,CAEA,QAASC,CAAAA,mBAAmBA,CAC1BC,MAAmB,CACnBC,MAAmB,CACV,CAGT,MAAO,CAAA,MAAM,GAAA,IAAA,EAAN,MAAM,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAN,MAAM,CAAEC,QAAQ,KAAKD,MAAM,GAAA,IAAA,EAANA,MAAM,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAANA,MAAM,CAAEC,QAAQ,CAAA,CAC9C,CAEA,GAAMC,CAAAA,mBAAmB,CAAGJ,mBAAmB,CAiC/C,MAAO,SAASK,CAAAA,uBAAuBA,CACrCC,SAA+C,CAC/CC,OAAwC,CACnC,CACLxC,SAAS,CACP,MAAOuC,CAAAA,SAAS,GAAK,UAAU,EAC5BA,SAAS,CAACE,SAAS,EAAIF,SAAS,CAACE,SAAS,CAACC,gBAAiB,CAC9D,oDAAmDH,SAAS,CAACI,IAAK,oLAAmL,CACvP,CAAA,GAEKC,CAAAA,iBAAiBC,UAAAA,gBAAAA,EAAAA,SAAAA,CAAAA,iBAAAA,CAAAA,gBAAAA,MAAAA,MAAAA,CAAAA,YAAAA,CAAAA,iBAAAA,EAmBrBE,SAAAA,kBAAYC,KAAoD,CAAE,KAAA,KAAA,CAAA,eAAA,MAAA,iBAAA,EAChE,KAAA,CAAA,MAAA,CAAA,IAAA,MAAMA,KAAK,EAAEH,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,SAAAA,CAhBgB,IAAIA,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,gBAAAA,CAAAA,IAAAA,EAAAA,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,UAAAA,CAExB,CAAC,CAACA,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,gBAAAA,CACI,IAAIA,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,eAAAA,CACkB,CAAEC,KAAK,CAAE,CAAC,CAAE,CAACD,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,YAAAA,CACI,IAAIA,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,0BAAAA,CACR,IAAIA,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,iBAAAA,CACtC,GAAIjC,CAAAA,cAAc,CAAA,CAAEiC,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,oBAAAA,CACjB,GAAIzB,CAAAA,iBAAiB,CAAA,CAAEyB,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,cAAAA,CAC7B,GAAIxB,CAAAA,WAAW,CAAA,CAAEwB,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,WAAAA,CAAAA,IAAAA,EAAAA,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,SAAAA,CAAAA,IAAAA,EAAAA,CAAAA,CAAAA,eAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,EAAAA,kBAAAA,CAmUb9B,gBAAgB,CAA0B,CAC3DwG,eAAe,CAAEA,SAAAA,gBAAAA,QACf,CAAA,KAAA,CAAKvE,KAAK,CAACwE,YAEV,GACHC,WAAW,CAAGC,SAAAA,YAAAA,GAAG,CAAK,CAGpB,GAAMT,CAAAA,GAAG,CAAGvF,MAAM,CACbgG,GAAG,CACJ3C,cAAc,CAAC2C,GAAG,CAAc,CAEpC,IAAA,YAAA,CAA2D,KAAA,CAAK1E,KAAK,CAA7DsE,MAAM,CAAA,YAAA,CAANA,MAAM,CAAE5D,QAAQ,CAAA,YAAA,CAARA,QAAQ,CAAEY,OAAO,CAAA,YAAA,CAAPA,OAAO,CAAEqD,mBAAAA,CAAAA,YAAAA,CAAAA,mBAAAA,CACnC,GACE,CAACL,MAAM,EAAI5D,QAAQ,EAAIY,OAAO,EAAIqD,mBAAmB,GACrDV,GAAG,EAAI,IAAI,CACX,CAAA,GAAA,CAAA,aAAA,CACA,GAAI,CAAC9F,cAAc,CAAA,CAAE,CAAE,CACrBf,sBAAsB,CAAC,IAAI,CAAE,KAAK,CAAC,CACrC,CACA,GAAIkH,MAAM,CAAE,CACVnH,yBAAyB,CACvB8G,GAAG,CACH3G,mBAAmB,CAACsH,MAAM,CAC1BlH,UAAU,CACR4G,MAAM,CACN3B,SAAS,CACT/C,iBAAiB,CAACiF,WAAW,CAC9B,CACF,CACH,CACA,GAAMC,CAAAA,YAAY,CAAA,CAAA,aAAA,CAAG,KAAA,CAAKC,OAAO,IAAA,IAAA,EAAA,aAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAZ,aAAA,CAAcjD,OAAO,CAC1C,GAAIpB,QAAQ,EAAI,CAACoE,YAAY,CAAE,CAAA,GAAA,CAAA,WAAA,CAC7B3H,yBAAyB,CACvB8G,GAAG,CACH3G,mBAAmB,CAACuD,QAAQ,CAC5BnD,UAAU,CACRgD,QAAQ,CAAA,CAAA,WAAA,CACR,KAAA,CAAKV,KAAK,IAAA,IAAA,EAAA,WAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAV,WAAA,CAAYjB,KAAK,CACjBa,iBAAiB,CAACiF,WAAW,CAC9B,CACF,CACH,CACA,GAAIvD,OAAO,CAAE,CACX,GAAM0D,CAAAA,qBAAqB,CACzB,iBAAiB,EAAI1D,CAAAA,OAAO,EAC5B,MAAOA,CAAAA,OAAO,CAAC2D,eAAe,GAAK,UAAU,CACzCxH,yBAAyB,CAAC6D,OAAO,CAAC2D,eAAe,CAAA,CAAE,CAAC,CACpDxH,yBAAyB,CAAA,CAAE,CACjC,GAAI,CAACuH,qBAAqB,CAAE,CAAA,GAAA,CAAA,YAAA,CAC1B7H,yBAAyB,CACvB8G,GAAG,CACH3G,mBAAmB,CAACiE,OAAO,CAC3B7D,UAAU,CACR4D,OAAO,CAAA,CAAA,YAAA,CACP,KAAA,CAAKtB,KAAK,IAAA,IAAA,EAAA,YAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAV,YAAA,CAAYjB,KAAK,CACjBa,iBAAiB,CAACiF,WAAW,CAC9B,CACF,CACH,CACF,CACA,GAAIF,mBAAmB,EAAI,CAACjG,MAAM,CAAE,KAAA,qBAAA,CAClC,GAAMwG,CAAAA,uBAAuB,EAAA,qBAAA,CAC3B,KAAA,CAAKlF,KAAK,CAACmF,qBAAqB,QAAA,qBAAA,CAAI,GAAI9H,CAAAA,gBAAgB,CAAA,CAAE,CAC5D,GAAM+H,CAAAA,wBAAwB,CAAG3H,yBAAyB,CACxDyH,uBAAuB,CAACD,eAAe,CAAA,CAAE,CAC1C,CACD,GAAI,CAACG,wBAAwB,CAAE,CAC7BF,uBAAuB,CAACG,kBAAkB,CACxCpB,GAAG,CACHU,mBAAmB,CACpB,CACD,KAAA,CAAKxD,wBAAwB,CAAG+D,uBAAuB,CACzD,CACF,CACF,CAEA,GAAIR,GAAG,GAAK,KAAA,CAAK9D,UAAU,CAAE,CAC3B,KAAA,CAAKA,UAAU,CAAG8D,GAAG,CACvB,CACF,CACF,CAAC,CAAC,CAAA,CA5YA,GAAIzG,MAAM,CAAA,CAAE,CAAE,CACZ,KAAA,CAAKgC,aAAa,CAAG,CAAEH,KAAK,CAAE,CAAC,CAAE,CAAC,CACpC,CAAA,OAAA,KAAA,CACF,CAAA,YAAA,CAAA,iBAAA,GAAA,GAAA,qBAAA,KAAA,CAEAI,SAAAA,kBAAAA,CAAoB,CAClB,IAAI,CAACC,mBAAmB,CAAA,CAAE,CAC1B,IAAI,CAACC,eAAe,CAACC,0BAA0B,CAAC,IAAI,CAAC,CACrD,IAAI,CAACC,qBAAqB,CAAA,CAAE,CAC5B,IAAI,CAACC,kBAAkB,CAACC,iBAAiB,CAAC,IAAI,CAAE,IAAI,CAACC,YAAY,CAAA,CAAE,CAAC,CAEpE,GAAI/B,MAAM,CAAE,CACVF,4BAA4B,CAAA,CAAE,CAE9B,GAAI,CAAC,IAAI,CAACwB,KAAK,CAACU,QAAQ,CAAE,CACxB,IAAI,CAACC,cAAc,CAAG,KAAK,CAC3B,OACF,CAEA,GAAIlC,0BAA0B,CAAC,IAAI,CAACuB,KAAK,CAACU,QAAQ,CAAiB,CAAE,CACnE,IAAI,CAACC,cAAc,CAAG,KAAK,CAC3B,OACF,CAEArC,uBAAuB,CACrB,IAAI,CAAC0B,KAAK,CACV,IAAI,CAACY,UAAU,CACftD,mBAAmB,CAACuD,QAAQ,CAC7B,CACH,CAEA,IAAI,CAACF,cAAc,CAAG,KAAK,CAC7B,CAAA,GAAA,GAAA,wBAAA,KAAA,CAEAG,SAAAA,qBAAAA,CAAuB,CAAA,GAAA,CAAA,qBAAA,CACrB,IAAI,CAACC,mBAAmB,CAAA,CAAE,CAC1B,IAAI,CAACX,eAAe,CAACY,6BAA6B,CAAC,IAAI,CAAC,CACxD,IAAI,CAACC,aAAa,CAAA,CAAE,CACpB,IAAI,CAACV,kBAAkB,CAACW,iBAAiB,CAAA,CAAE,CAC3C,CAAA,qBAAA,CAAA,IAAI,CAACC,wBAAwB,IAAA,IAAA,EAAA,qBAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAA7B,qBAAA,CAA+BC,oBAAoB,CAAC,IAAI,CAACC,QAAQ,CAAC,CAElE,GACE3C,MAAM,EACN,IAAI,CAACsB,KAAK,CAACsB,OAAO,EAClB,CAAC7C,0BAA0B,CAAC,IAAI,CAACuB,KAAK,CAACsB,OAAO,CAAiB,CAC/D,CACAhD,uBAAuB,CACrB,IAAI,CAAC0B,KAAK,CACV,IAAI,CAACY,UAAU,CACftD,mBAAmB,CAACiE,OAAO,CAC5B,CACH,CACF,CAAA,GAAA,GAAA,oBAAA,KAAA,CAEAC,SAAAA,iBAAAA,CAAmB,CAAA,GAAA,CAAA,gBAAA,CAAA,kBAAA,CAAA,IAAA,CAGjB,MAAO,CAAA,gBAAA,CAAC,IAAI,CAACZ,UAAU,IAAA,IAAA,EAAA,gBAAA,GAAA,IAAA,EAAA,EAAhB,gBAAA,CAA2Ca,iBAAiB,CAAA,CAAA,kBAAA,CAC/D,CAAA,IAAA,CAAC,IAAI,CAACb,UAAU,EAA0Ba,iBAAiB,IAAA,IAAA,EAAA,kBAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAA3D,kBAAA,CAAA,IAAA,CAAA,IAAA,CAA+D,CAC/D,IAAI,CAACb,UAAU,CACrB,CAAA,GAAA,GAAA,uBAAA,KAAA,CAEAT,SAAAA,oBAAAA,CAAsB,CACpB,GAAMuB,CAAAA,IAAI,CAAG,IAAI,CAACF,gBAAgB,CAAA,CAA0B,CAC5D,GAAIG,CAAAA,OAAO,CAAG,IAAI,CAElB,IAAK,GAAMC,CAAAA,GAAG,GAAI,KAAI,CAAC5B,KAAK,CAAE,CAC5B,GAAM6B,CAAAA,IAAI,CAAG,IAAI,CAAC7B,KAAK,CAAC4B,GAAG,CAAC,CAC5B,GACE/D,GAAG,CAAC,SAAS,CAAEgE,IAAI,CAAC,EACpBA,IAAI,CAACC,OAAO,WAAY/E,CAAAA,mBAAmB,CAC3C,CACA,GAAI4E,OAAO,GAAK,IAAI,CAAE,CACpBA,OAAO,CAAGI,cAAc,CAACvC,OAAO,GAAA,IAAA,EAAPA,OAAO,GAAA,IAAA,EAAA,EAAPA,OAAO,CAAEwC,cAAc,CAAG,IAAI,CAAGN,IAAI,CAAC,CACjE,CACAG,IAAI,CAACC,OAAO,CAACG,iBAAiB,CAACN,OAAO,CAAYC,GAAG,CAAC,CACxD,CACF,CACF,CAAA,GAAA,GAAA,uBAAA,KAAA,CAEAb,SAAAA,oBAAAA,CAAsB,CACpB,IAAK,GAAMa,CAAAA,GAAG,GAAI,KAAI,CAAC5B,KAAK,CAAE,CAC5B,GAAM6B,CAAAA,IAAI,CAAG,IAAI,CAAC7B,KAAK,CAAC4B,GAAG,CAAC,CAC5B,GACE/D,GAAG,CAAC,SAAS,CAAEgE,IAAI,CAAC,EACpBA,IAAI,CAACC,OAAO,WAAY/E,CAAAA,mBAAmB,CAC3C,CACA8E,IAAI,CAACC,OAAO,CAACI,oBAAoB,CAAA,CAAE,CACrC,CACF,CACF,CAAA,GAAA,GAAA,iBAAA,KAAA,CAEAjB,SAAAA,cAAAA,CAAgB,CACd,GAAIvC,MAAM,EAAI,IAAI,CAACyD,OAAO,GAAK,IAAI,CAAE,CACnC,IAAK,GAAMpD,CAAAA,KAAK,GAAI,KAAI,CAACoD,OAAO,CAAE,CAChC,GAAIpD,KAAK,GAAA,IAAA,EAALA,KAAK,GAAA,IAAA,EAAA,EAALA,KAAK,CAAEK,QAAQ,CAAE,CACnBL,KAAK,CAACK,QAAQ,CAACgD,MAAM,CAAC,IAAI,CAAC,CAC7B,CACF,CACF,CAAC,IAAM,IAAI,IAAI,CAACf,QAAQ,GAAK,CAAC,CAAC,EAAI,IAAI,CAACc,OAAO,GAAK,IAAI,CAAE,CAAA,GAAA,CAAA,qBAAA,CACxD,IAAK,GAAMpD,CAAAA,MAAK,GAAI,KAAI,CAACoD,OAAO,CAAE,CAChCpD,MAAK,CAACC,eAAe,CAACoD,MAAM,CAAC,IAAI,CAACf,QAAQ,CAAC,CAC7C,CACA,GAAA,CAAA,qBAAA,CAAI,IAAI,CAACrB,KAAK,CAACqC,aAAa,IAAA,IAAA,EAAA,qBAAA,GAAA,IAAA,EAAA,EAAxB,qBAAA,CAA0BrD,eAAe,CAAE,CAC7C,IAAI,CAACgB,KAAK,CAACqC,aAAa,CAACrD,eAAe,CAACoD,MAAM,CAAC,IAAI,CAACf,QAAQ,CAAC,CAChE,CACA,GAAI1C,SAAS,CAAE,CACbnB,uBAAuB,CAAC,IAAI,CAAC6D,QAAQ,CAAC,CACxC,CACF,CACF,CAAA,GAAA,GAAA,yBAAA,KAAA,CAEAiB,SAAAA,sBACEC,SAAwD,CACxD,CACA,IAAK,GAAMX,CAAAA,GAAG,GAAIW,CAAAA,SAAS,CAAE,CAC3B,GAAMV,CAAAA,IAAI,CAAG,IAAI,CAAC7B,KAAK,CAAC4B,GAAG,CAAC,CAC5B,GACE/D,GAAG,CAAC,SAAS,CAAEgE,IAAI,CAAC,EACpBA,IAAI,CAACC,OAAO,WAAY/E,CAAAA,mBAAmB,EAC3C8E,IAAI,CAACC,OAAO,CAACU,cAAc,CAC3B,CACAX,IAAI,CAACC,OAAO,CAACI,oBAAoB,CAAA,CAAE,CACrC,CACF,CAEA,GAAIP,CAAAA,OAAO,CAAG,IAAI,CAElB,IAAK,GAAMC,CAAAA,IAAG,GAAI,KAAI,CAAC5B,KAAK,CAAE,CAC5B,GAAM6B,CAAAA,KAAI,CAAG,IAAI,CAAC7B,KAAK,CAAC4B,IAAG,CAAC,CAC5B,GACE/D,GAAG,CAAC,SAAS,CAAEgE,KAAI,CAAC,EACpBA,KAAI,CAACC,OAAO,WAAY/E,CAAAA,mBAAmB,EAC3C8E,KAAI,CAACC,OAAO,CAACU,cAAc,CAC3B,CACA,GAAIb,OAAO,GAAK,IAAI,CAAE,CACpB,GAAMD,CAAAA,IAAI,CAAG,IAAI,CAACF,gBAAgB,CAAA,CAA0B,CAC5DG,OAAO,CAAGI,cAAc,CAACvC,OAAO,GAAA,IAAA,EAAPA,OAAO,GAAA,IAAA,EAAA,EAAPA,OAAO,CAAEwC,cAAc,CAAG,IAAI,CAAGN,IAAI,CAAC,CACjE,CACAG,KAAI,CAACC,OAAO,CAACG,iBAAiB,CAACN,OAAO,CAAYC,IAAG,CAAC,CACtDC,KAAI,CAACC,OAAO,CAACU,cAAc,CAAG,KAAK,CACrC,CACF,CACF,CAAA,GAAA,GAAA,qBAAA,KAAA,CAEAC,SAAAA,kBAAkBzC,KAAiB,CAAE,CACnC,GAAIR,OAAO,GAAA,IAAA,EAAPA,OAAO,GAAA,IAAA,EAAA,EAAPA,OAAO,CAAEwC,cAAc,CAAE,CAE3BxC,OAAO,CAACwC,cAAc,CAAC,IAAI,CAACpB,UAAU,CAA0BZ,KAAK,CAAC,CACxE,CAAC,IAAM,CAAA,GAAA,CAAA,iBAAA,CAAA,qBAAA,CAEL,CAAA,iBAAA,CAAC,IAAI,CAACY,UAAU,IAAA,IAAA,EAAA,iBAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAA,CAAA,qBAAA,CAAhB,iBAAA,CAA2CoB,cAAc,IAAA,IAAA,EAAA,qBAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAzD,qBAAA,CAAA,IAAA,CAAA,iBAAA,CAA4DhC,KAAK,CAAC,CACpE,CACF,CAAA,GAAA,GAAA,gBAAA,KAAA,CAEAS,SAAAA,aAAAA,CAAyB,CAAA,GAAA,CAAA,iBAAA,CAAA,iBAAA,CAAA,KAAA,CACvB,GAAI,IAAI,CAACiC,SAAS,GAAKC,SAAS,CAAE,CAChC,MAAO,KAAI,CAACD,SAAS,CACvB,CAEA,GAAIf,CAAAA,OAAoC,CACxC,GAAIiB,CAAAA,QAAuB,CAC3B,GAAIC,CAAAA,iBAA2C,CAAG,IAAI,CACtD,GAAIC,CAAAA,UAAU,CAGd,GAAMC,CAAAA,SAAS,CAAG,CAAA,iBAAA,CAAC,IAAI,CAACnC,UAAU,IAAA,IAAA,EAAA,iBAAA,GAAA,IAAA,EAAA,EAAhB,iBAAA,CACdoC,gBAAgB,CAAA,CAAA,iBAAA,CAChB,CAAA,KAAA,CAAC,IAAI,CAACpC,UAAU,EAA0BoC,gBAAgB,IAAA,IAAA,EAAA,iBAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAA1D,iBAAA,CAAA,IAAA,CAAA,KAAA,CAA8D,CAC9D,IAAI,CAER,GAAItE,MAAM,CAAE,CAGViD,OAAO,CAAG,IAAI,CAACf,UAAyB,CACxCgC,QAAQ,CAAG,IAAI,CACfC,iBAAiB,CAAG,IAAI,CACxBC,UAAU,CAAG,IAAI,CACnB,CAAC,IAAM,CAAA,GAAA,CAAA,qBAAA,CAEL,GAAMG,CAAAA,YAAY,CAAG/F,UAAU,CAACgG,2BAA2B,CAACH,SAAS,CAAC,CACtE,GAAI,CAACE,YAAY,CAAE,CACjB,KAAM,IAAIE,CAAAA,KAAK,CACb,sFAAsF,CACvF,CACH,CAEAxB,OAAO,CAAGsB,YAAY,GAAA,IAAA,EAAZA,YAAY,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAZA,YAAY,CAAEG,UAAU,CAKlCR,QAAQ,CAAGK,YAAY,GAAA,IAAA,EAAZA,YAAY,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAA,CAAA,qBAAA,CAAZA,YAAY,CAAEH,UAAU,IAAA,IAAA,EAAA,qBAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAxBG,qBAAAA,CAA0BI,eAAe,CAEpDP,UAAU,CAAGG,YAAY,GAAA,IAAA,EAAZA,YAAY,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAZA,YAAY,CAAEH,UAAU,CAErC,GAAInE,SAAS,CAAE,CACbkE,iBAAiB,CAAGtF,2BAA2B,CAAC,IAAI,CAAC,CACvD,CACF,CACA,IAAI,CAACmF,SAAS,CAAG,CAAEf,OAAO,CAAPA,OAAO,CAAEiB,QAAQ,CAARA,QAAQ,CAAEC,iBAAiB,CAAjBA,iBAAiB,CAAEC,UAAAA,CAAAA,UAAW,CAAC,CACrE,MAAO,KAAI,CAACJ,SAAS,CACvB,CAAA,GAAA,GAAA,yBAAA,KAAA,CAEApC,SAAAA,sBAAAA,CAAwB,KAAA,MAAA,MAAA,GAAA,CAAA,sBAAA,CAAA,sBAAA,CACtB,GAAMzB,CAAAA,MAAM,CAAG,IAAI,CAACmB,KAAK,CAACjB,KAAK,CAC3BH,kBAAkB,CAACd,YAAY,CAAa,IAAI,CAACkC,KAAK,CAACjB,KAAK,CAAC,CAAC,CAC9D,EAAE,CACN,GAAMuE,CAAAA,UAAU,CAAG,IAAI,CAACnB,OAAO,CAC/B,IAAI,CAACA,OAAO,CAAGtD,MAAM,CAErB,GAAM0E,CAAAA,iBAAiB,CAAG,IAAI,CAACC,cAAc,CAC7C,IAAI,CAACA,cAAc,CAAG,IAAI,CAACxD,KAAK,CAACqC,aAAa,CAE9C,IAAA,kBAAA,CACE,IAAI,CAAC5B,YAAY,CAAA,CAAE,CADbkB,OAAO,CAAA,kBAAA,CAAPA,OAAO,CAAEiB,QAAQ,CAAA,kBAAA,CAARA,QAAQ,CAAEC,iBAAiB,CAAA,kBAAA,CAAjBA,iBAAiB,CAAEC,UAAAA,CAAAA,kBAAAA,CAAAA,UAAAA,CAI9C,GAAMW,CAAAA,mBAAmB,CACvB,CAAA,CAAA,sBAAA,CAAA,IAAI,CAACzD,KAAK,CAACqC,aAAa,IAAA,IAAA,EAAA,sBAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAxB,sBAAA,CAA0BrD,eAAe,GAAIH,MAAM,CAAC6E,MAAM,CAC5D,GAAID,mBAAmB,EAAIX,UAAU,CAAE,CACrC7F,eAAe,CAAC6F,UAAU,CAAC,CAC7B,CAEA,IAAI,CAACzB,QAAQ,CAAGM,OAAiB,CAGjC,GAAI2B,UAAU,CAAE,CAEd,GAAMK,CAAAA,eAAe,CACnB9E,MAAM,CAAC6E,MAAM,GAAK,CAAC,EACnBJ,UAAU,CAACI,MAAM,GAAK,CAAC,EACvBzE,mBAAmB,CAACJ,MAAM,CAAC,CAAC,CAAC,CAAEyE,UAAU,CAAC,CAAC,CAAC,CAAC,CAE/C,GAAI,CAACK,eAAe,CAAE,KAAA,KAAA,UAAA,MAAA,SAAA,CAEgB,CAClC,GAAME,CAAAA,SAAS,CAAGhF,MAAM,CAACiF,IAAI,CAAE/E,SAAAA,KAAK,QAClCE,CAAAA,mBAAmB,CAACF,KAAK,CAAE6E,SAAS,CAAC,GACtC,CACD,GAAI,CAACC,SAAS,CAAE,CACdD,SAAS,CAAC5E,eAAe,CAACoD,MAAM,CAACT,OAAO,CAAC,CAC3C,CACF,CAAA,CAPA,IAAK,GAAMiC,CAAAA,SAAS,GAAIN,CAAAA,UAAU,EAAA,KAAA,CAAA,SAAA,GAQpC,CACF,CAEAzE,MAAM,CAACkF,OAAO,CAAEhF,SAAAA,KAAK,CAAK,CACxBA,KAAK,CAACC,eAAe,CAACgF,GAAG,CAAC,CACxBC,GAAG,CAAEtC,OAAO,CACZhC,IAAI,CAAEiD,QAAQ,CACdC,iBAAAA,CAAAA,iBACF,CAAC,CAAC,CACF,GAAI5E,MAAM,CAAA,CAAE,CAAE,CAOZ,MAAI,CAACgC,aAAa,CAACH,KAAK,CAAA,aAAA,CAAA,aAAA,IACnB,MAAI,CAACG,aAAa,CAACH,KAAK,EACxBf,KAAK,CAACmF,OAAO,CAACpE,KAAAA,CAClB,CACDf,KAAK,CAACkB,aAAa,CAAC6B,OAAO,CAAG,MAAI,CAAC7B,aAAa,CAClD,CACF,CAAC,CAAC,CAGF,GACEsD,iBAAiB,EACjB,CAAClE,mBAAmB,CAACkE,iBAAiB,CAAE,IAAI,CAACvD,KAAK,CAACqC,aAAa,CAAC,CACjE,CACAkB,iBAAiB,CAACvE,eAAe,CAAEoD,MAAM,CAACT,OAAO,CAAW,CAC9D,CAGA,GAAA,CAAA,sBAAA,CAAI,IAAI,CAAC3B,KAAK,CAACqC,aAAa,IAAA,IAAA,EAAA,sBAAA,GAAA,IAAA,EAAA,EAAxB,sBAAA,CAA0BrD,eAAe,CAAE,CAC7C,IAAI,CAACgB,KAAK,CAACqC,aAAa,CAACrD,eAAe,CAACgF,GAAG,CAAC,CAE3CC,GAAG,CAAEtC,OAAiB,CAEtBhC,IAAI,CAAEiD,QAAS,CAEfC,iBAAiB,CAAEA,iBACrB,CAAC,CAAC,CACJ,CACF,CAAA,GAAA,GAAA,sBAAA,KAAA,CAEAsB,SAAAA,mBACE5B,SAAwD,CACxD6B,UAA6B,CAG7BC,QAAwB,CACxB,CACA,IAAI,CAAC/B,qBAAqB,CAACC,SAAS,CAAC,CACrC,IAAI,CAACjC,qBAAqB,CAAA,CAAE,CAC5B,IAAI,CAACC,kBAAkB,CAACC,iBAAiB,CAAC,IAAI,CAAE,IAAI,CAACC,YAAY,CAAA,CAAE,CAAC,CAGpE,GACE/B,MAAM,EACN2F,QAAQ,GAAK,IAAI,EACjB,IAAI,CAACrE,KAAK,CAACsE,MAAM,EACjB,CAAC7F,0BAA0B,CAAC,IAAI,CAACuB,KAAK,CAACsE,MAAM,CAAiB,CAC9D,CACA/F,2BAA2B,CACzB,IAAI,CAACyB,KAAK,CACV,IAAI,CAACY,UAAU,CACfyD,QAAQ,CACT,CACH,CACF,CAAA,GAAA,GAAA,2BAAA,KAAA,CAwFAiB,SAAAA,wBAAAA,CAA0B,CACxB,GACG,IAAI,CAAC1E,UAAU,CAAiB2E,qBAAqB,GAAK5C,SAAS,CACpE,CACA,MAAQ,KAAI,CAAC/B,UAAU,CAAiB2E,qBAAqB,CAAA,CAAE,CACjE,CAEA,MAAO,KAAI,CACb,CAAA,GAAA,GAAA,UAAA,KAAA,CAEAC,SAAAA,OAAAA,CAAS,CACP,GAAMxF,CAAAA,KAAK,CAAG,IAAI,CAACyF,YAAY,CAACC,sBAAsB,CAAC,IAAI,CAAC,CAE5D,GAAIzH,MAAM,CAAA,CAAE,CAAE,CACZ+B,KAAK,CAACC,aAAa,CAAG,IAAI,CAACA,aAAa,CAC1C,CAMA,GACE,IAAI,CAACU,cAAc,EACnBjC,MAAM,EACNsB,KAAK,CAACU,QAAQ,EACd,CAACjC,0BAA0B,CAACuB,KAAK,CAACU,QAAQ,CAAiB,CAC3D,KAAA,YAAA,CACAV,KAAK,CAACjB,KAAK,CAAA,aAAA,CAAA,aAAA,KAAA,YAAA,CACLiB,KAAK,CAACjB,KAAK,QAAA,YAAA,CAAI,CAAC,CAAC,MACrB4G,UAAU,CAAE,QAAQ,EACrB,CACH,CAEA,GAAMC,CAAAA,aAAa,CACZ,CAAC,CAEN,CAEF,MACE9I,CAAAA,KAAAA,CAAAA,aAAAA,CAACyC,SAAS,CAAA,QAAA,CAAA,CAAA,CAAA,CACJS,KAAK,CAAA,CAGT0E,GAAG,CAAE,IAAI,CAACmB,gBAA6C,CAAA,CACnDD,aAAa,CAAA,CACjB,CAEN,CAAA,WAAA,iBAAA,GApdQ9I,KAAK,CAACyC,SAAS,EAqdxBM,eAAAA,CAtdKD,iBAAiBC,CAAAA,aAAAA,CAAAA,IAAAA,EAAAA,CAAAA,CAAAA,eAAAA,CAAjBD,iBAAiBC,CAAAA,aAAAA,CAgBAlC,mBAAmB,CAAA,CAwc1CiC,iBAAiB,CAACiF,WAAW,CAAI,qBAC/BtF,SAAS,CAACsF,WAAW,EAAItF,SAAS,CAACI,IAAI,EAAI,WAC5C,GAAE,CAEH,MAAO7C,CAAAA,KAAK,CAACgJ,UAAU,CAAY,SAAC9F,KAAK,CAAE0E,GAAG,CAAK,CACjD,MACE5H,CAAAA,KAAAA,CAAAA,aAAAA,CAAC8C,iBAAiB,CAAA,QAAA,CAAA,CAAA,CAAA,CACZI,KAAK,CACJ0E,GAAG,GAAK,IAAI,CAAG,IAAI,CAAG,CAAEF,YAAY,CAAEE,GAAI,CAAC,CAAA,CAChD,CAEN,CAAC,CAAC,CACJ","sourcesContent":["'use strict';\nimport type {\n  Component,\n  ComponentClass,\n  ComponentType,\n  FunctionComponent,\n  MutableRefObject,\n} from 'react';\nimport React from 'react';\nimport { findNodeHandle, Platform } from 'react-native';\nimport WorkletEventHandler from '../reanimated2/WorkletEventHandler';\nimport '../reanimated2/layoutReanimation/animationsManager';\nimport invariant from 'invariant';\nimport { adaptViewConfig } from '../ConfigHelper';\nimport { RNRenderer } from '../reanimated2/platform-specific/RNRenderer';\nimport {\n  configureLayoutAnimations,\n  enableLayoutAnimations,\n} from '../reanimated2/core';\nimport {\n  SharedTransition,\n  LayoutAnimationType,\n} from '../reanimated2/layoutReanimation';\nimport type { StyleProps, ShadowNodeWrapper } from '../reanimated2/commonTypes';\nimport { getShadowNodeWrapperFromRef } from '../reanimated2/fabricUtils';\nimport { removeFromPropsRegistry } from '../reanimated2/PropsRegistry';\nimport { getReduceMotionFromConfig } from '../reanimated2/animation/util';\nimport { maybeBuild } from '../animationBuilder';\nimport { SkipEnteringContext } from '../reanimated2/component/LayoutAnimationConfig';\nimport type { AnimateProps } from '../reanimated2';\nimport JSPropsUpdater from './JSPropsUpdater';\nimport type {\n  AnimatedComponentProps,\n  AnimatedProps,\n  InitialComponentProps,\n  AnimatedComponentRef,\n  IAnimatedComponentInternal,\n  ViewInfo,\n} from './commonTypes';\nimport { has, flattenArray } from './utils';\nimport setAndForwardRef from './setAndForwardRef';\nimport {\n  isFabric,\n  isJest,\n  isWeb,\n  shouldBeUseWeb,\n} from '../reanimated2/PlatformChecker';\nimport { InlinePropManager } from './InlinePropManager';\nimport { PropsFilter } from './PropsFilter';\nimport {\n  startWebLayoutAnimation,\n  tryActivateLayoutTransition,\n  configureWebLayoutAnimations,\n  getReducedMotionFromConfig,\n} from '../reanimated2/layoutReanimation/web';\nimport type { CustomConfig } from '../reanimated2/layoutReanimation/web/config';\nimport type { FlatList, FlatListProps } from 'react-native';\n\nconst IS_WEB = isWeb();\nconst IS_FABRIC = isFabric();\n\nfunction onlyAnimatedStyles(styles: StyleProps[]): StyleProps[] {\n  return styles.filter((style) => style?.viewDescriptors);\n}\n\nfunction isSameAnimatedStyle(\n  style1?: StyleProps,\n  style2?: StyleProps\n): boolean {\n  // We cannot use equality check to compare useAnimatedStyle outputs directly.\n  // Instead, we can compare its viewsRefs.\n  return style1?.viewsRef === style2?.viewsRef;\n}\n\nconst isSameAnimatedProps = isSameAnimatedStyle;\n\ntype Options<P> = {\n  setNativeProps: (ref: AnimatedComponentRef, props: P) => void;\n};\n\n/**\n * Lets you create an Animated version of any React Native component.\n *\n * @param component - The component you want to make animatable.\n * @returns A component that Reanimated is capable of animating.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/createAnimatedComponent\n */\n\n/**\n * @deprecated Please use `Animated.FlatList` component instead of calling `Animated.createAnimatedComponent(FlatList)` manually.\n */\n// @ts-ignore This is required to create this overload, since type of createAnimatedComponent is incorrect and doesn't include typeof FlatList\nexport function createAnimatedComponent(\n  component: typeof FlatList<unknown>,\n  options?: Options<any>\n): ComponentClass<AnimateProps<FlatListProps<unknown>>>;\n\nexport function createAnimatedComponent<P extends object>(\n  component: FunctionComponent<P>,\n  options?: Options<P>\n): FunctionComponent<AnimateProps<P>>;\n\nexport function createAnimatedComponent<P extends object>(\n  component: ComponentClass<P>,\n  options?: Options<P>\n): ComponentClass<AnimateProps<P>>;\n\nexport function createAnimatedComponent(\n  Component: ComponentType<InitialComponentProps>,\n  options?: Options<InitialComponentProps>\n): any {\n  invariant(\n    typeof Component !== 'function' ||\n      (Component.prototype && Component.prototype.isReactComponent),\n    `Looks like you're passing a function component \\`${Component.name}\\` to \\`createAnimatedComponent\\` function which supports only class components. Please wrap your function component with \\`React.forwardRef()\\` or use a class component instead.`\n  );\n\n  class AnimatedComponent\n    extends React.Component<AnimatedComponentProps<InitialComponentProps>>\n    implements IAnimatedComponentInternal\n  {\n    _styles: StyleProps[] | null = null;\n    _animatedProps?: Partial<AnimatedComponentProps<AnimatedProps>>;\n    _viewTag = -1;\n    _isFirstRender = true;\n    animatedStyle: { value: StyleProps } = { value: {} };\n    _component: AnimatedComponentRef | HTMLElement | null = null;\n    _sharedElementTransition: SharedTransition | null = null;\n    _jsPropsUpdater = new JSPropsUpdater();\n    _InlinePropManager = new InlinePropManager();\n    _PropsFilter = new PropsFilter();\n    _viewInfo?: ViewInfo;\n    static displayName: string;\n    static contextType = SkipEnteringContext;\n    context!: React.ContextType<typeof SkipEnteringContext>;\n\n    constructor(props: AnimatedComponentProps<InitialComponentProps>) {\n      super(props);\n      if (isJest()) {\n        this.animatedStyle = { value: {} };\n      }\n    }\n\n    componentDidMount() {\n      this._attachNativeEvents();\n      this._jsPropsUpdater.addOnJSPropsChangeListener(this);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n\n      if (IS_WEB) {\n        configureWebLayoutAnimations();\n\n        if (!this.props.entering) {\n          this._isFirstRender = false;\n          return;\n        }\n\n        if (getReducedMotionFromConfig(this.props.entering as CustomConfig)) {\n          this._isFirstRender = false;\n          return;\n        }\n\n        startWebLayoutAnimation(\n          this.props,\n          this._component as HTMLElement,\n          LayoutAnimationType.ENTERING\n        );\n      }\n\n      this._isFirstRender = false;\n    }\n\n    componentWillUnmount() {\n      this._detachNativeEvents();\n      this._jsPropsUpdater.removeOnJSPropsChangeListener(this);\n      this._detachStyles();\n      this._InlinePropManager.detachInlineProps();\n      this._sharedElementTransition?.unregisterTransition(this._viewTag);\n\n      if (\n        IS_WEB &&\n        this.props.exiting &&\n        !getReducedMotionFromConfig(this.props.exiting as CustomConfig)\n      ) {\n        startWebLayoutAnimation(\n          this.props,\n          this._component as HTMLElement,\n          LayoutAnimationType.EXITING\n        );\n      }\n    }\n\n    _getEventViewRef() {\n      // Make sure to get the scrollable node for components that implement\n      // `ScrollResponder.Mixin`.\n      return (this._component as AnimatedComponentRef)?.getScrollableNode\n        ? (this._component as AnimatedComponentRef).getScrollableNode?.()\n        : this._component;\n    }\n\n    _attachNativeEvents() {\n      const node = this._getEventViewRef() as AnimatedComponentRef;\n      let viewTag = null; // We set it only if needed\n\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (\n          has('current', prop) &&\n          prop.current instanceof WorkletEventHandler\n        ) {\n          if (viewTag === null) {\n            viewTag = findNodeHandle(options?.setNativeProps ? this : node);\n          }\n          prop.current.registerForEvents(viewTag as number, key);\n        }\n      }\n    }\n\n    _detachNativeEvents() {\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (\n          has('current', prop) &&\n          prop.current instanceof WorkletEventHandler\n        ) {\n          prop.current.unregisterFromEvents();\n        }\n      }\n    }\n\n    _detachStyles() {\n      if (IS_WEB && this._styles !== null) {\n        for (const style of this._styles) {\n          if (style?.viewsRef) {\n            style.viewsRef.remove(this);\n          }\n        }\n      } else if (this._viewTag !== -1 && this._styles !== null) {\n        for (const style of this._styles) {\n          style.viewDescriptors.remove(this._viewTag);\n        }\n        if (this.props.animatedProps?.viewDescriptors) {\n          this.props.animatedProps.viewDescriptors.remove(this._viewTag);\n        }\n        if (IS_FABRIC) {\n          removeFromPropsRegistry(this._viewTag);\n        }\n      }\n    }\n\n    _reattachNativeEvents(\n      prevProps: AnimatedComponentProps<InitialComponentProps>\n    ) {\n      for (const key in prevProps) {\n        const prop = this.props[key];\n        if (\n          has('current', prop) &&\n          prop.current instanceof WorkletEventHandler &&\n          prop.current.reattachNeeded\n        ) {\n          prop.current.unregisterFromEvents();\n        }\n      }\n\n      let viewTag = null;\n\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (\n          has('current', prop) &&\n          prop.current instanceof WorkletEventHandler &&\n          prop.current.reattachNeeded\n        ) {\n          if (viewTag === null) {\n            const node = this._getEventViewRef() as AnimatedComponentRef;\n            viewTag = findNodeHandle(options?.setNativeProps ? this : node);\n          }\n          prop.current.registerForEvents(viewTag as number, key);\n          prop.current.reattachNeeded = false;\n        }\n      }\n    }\n\n    _updateFromNative(props: StyleProps) {\n      if (options?.setNativeProps) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        options.setNativeProps(this._component as AnimatedComponentRef, props);\n      } else {\n        // eslint-disable-next-line no-unused-expressions\n        (this._component as AnimatedComponentRef)?.setNativeProps?.(props);\n      }\n    }\n\n    _getViewInfo(): ViewInfo {\n      if (this._viewInfo !== undefined) {\n        return this._viewInfo;\n      }\n\n      let viewTag: number | HTMLElement | null;\n      let viewName: string | null;\n      let shadowNodeWrapper: ShadowNodeWrapper | null = null;\n      let viewConfig;\n      // Component can specify ref which should be animated when animated version of the component is created.\n      // Otherwise, we animate the component itself.\n      const component = (this._component as AnimatedComponentRef)\n        ?.getAnimatableRef\n        ? (this._component as AnimatedComponentRef).getAnimatableRef?.()\n        : this;\n\n      if (IS_WEB) {\n        // At this point I assume that `_setComponentRef` was already called and `_component` is set.\n        // `this._component` on web represents HTMLElement of our component, that's why we use casting\n        viewTag = this._component as HTMLElement;\n        viewName = null;\n        shadowNodeWrapper = null;\n        viewConfig = null;\n      } else {\n        // hostInstance can be null for a component that doesn't render anything (render function returns null). Example: svg Stop: https://github.com/react-native-svg/react-native-svg/blob/develop/src/elements/Stop.tsx\n        const hostInstance = RNRenderer.findHostInstance_DEPRECATED(component);\n        if (!hostInstance) {\n          throw new Error(\n            '[Reanimated] Cannot find host instance for this component. Maybe it renders nothing?'\n          );\n        }\n        // we can access view tag in the same way it's accessed here https://github.com/facebook/react/blob/e3f4eb7272d4ca0ee49f27577156b57eeb07cf73/packages/react-native-renderer/src/ReactFabric.js#L146\n        viewTag = hostInstance?._nativeTag;\n        /**\n         * RN uses viewConfig for components for storing different properties of the component(example: https://github.com/facebook/react-native/blob/main/packages/react-native/Libraries/Components/ScrollView/ScrollViewNativeComponent.js#L24).\n         * The name we're looking for is in the field named uiViewClassName.\n         */\n        viewName = hostInstance?.viewConfig?.uiViewClassName;\n\n        viewConfig = hostInstance?.viewConfig;\n\n        if (IS_FABRIC) {\n          shadowNodeWrapper = getShadowNodeWrapperFromRef(this);\n        }\n      }\n      this._viewInfo = { viewTag, viewName, shadowNodeWrapper, viewConfig };\n      return this._viewInfo;\n    }\n\n    _attachAnimatedStyles() {\n      const styles = this.props.style\n        ? onlyAnimatedStyles(flattenArray<StyleProps>(this.props.style))\n        : [];\n      const prevStyles = this._styles;\n      this._styles = styles;\n\n      const prevAnimatedProps = this._animatedProps;\n      this._animatedProps = this.props.animatedProps;\n\n      const { viewTag, viewName, shadowNodeWrapper, viewConfig } =\n        this._getViewInfo();\n\n      // update UI props whitelist for this view\n      const hasReanimated2Props =\n        this.props.animatedProps?.viewDescriptors || styles.length;\n      if (hasReanimated2Props && viewConfig) {\n        adaptViewConfig(viewConfig);\n      }\n\n      this._viewTag = viewTag as number;\n\n      // remove old styles\n      if (prevStyles) {\n        // in most of the cases, views have only a single animated style and it remains unchanged\n        const hasOneSameStyle =\n          styles.length === 1 &&\n          prevStyles.length === 1 &&\n          isSameAnimatedStyle(styles[0], prevStyles[0]);\n\n        if (!hasOneSameStyle) {\n          // otherwise, remove each style that is not present in new styles\n          for (const prevStyle of prevStyles) {\n            const isPresent = styles.some((style) =>\n              isSameAnimatedStyle(style, prevStyle)\n            );\n            if (!isPresent) {\n              prevStyle.viewDescriptors.remove(viewTag);\n            }\n          }\n        }\n      }\n\n      styles.forEach((style) => {\n        style.viewDescriptors.add({\n          tag: viewTag,\n          name: viewName,\n          shadowNodeWrapper,\n        });\n        if (isJest()) {\n          /**\n           * We need to connect Jest's TestObject instance whose contains just props object\n           * with the updateProps() function where we update the properties of the component.\n           * We can't update props object directly because TestObject contains a copy of props - look at render function:\n           * const props = this._filterNonAnimatedProps(this.props);\n           */\n          this.animatedStyle.value = {\n            ...this.animatedStyle.value,\n            ...style.initial.value,\n          };\n          style.animatedStyle.current = this.animatedStyle;\n        }\n      });\n\n      // detach old animatedProps\n      if (\n        prevAnimatedProps &&\n        !isSameAnimatedProps(prevAnimatedProps, this.props.animatedProps)\n      ) {\n        prevAnimatedProps.viewDescriptors!.remove(viewTag as number);\n      }\n\n      // attach animatedProps property\n      if (this.props.animatedProps?.viewDescriptors) {\n        this.props.animatedProps.viewDescriptors.add({\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          tag: viewTag as number,\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          name: viewName!,\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          shadowNodeWrapper: shadowNodeWrapper!,\n        });\n      }\n    }\n\n    componentDidUpdate(\n      prevProps: AnimatedComponentProps<InitialComponentProps>,\n      _prevState: Readonly<unknown>,\n      // This type comes straight from React\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      snapshot: DOMRect | null\n    ) {\n      this._reattachNativeEvents(prevProps);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n\n      // Snapshot won't be undefined because it comes from getSnapshotBeforeUpdate method\n      if (\n        IS_WEB &&\n        snapshot !== null &&\n        this.props.layout &&\n        !getReducedMotionFromConfig(this.props.layout as CustomConfig)\n      ) {\n        tryActivateLayoutTransition(\n          this.props,\n          this._component as HTMLElement,\n          snapshot\n        );\n      }\n    }\n\n    _setComponentRef = setAndForwardRef<Component | HTMLElement>({\n      getForwardedRef: () =>\n        this.props.forwardedRef as MutableRefObject<\n          Component<Record<string, unknown>, Record<string, unknown>, unknown>\n        >,\n      setLocalRef: (ref) => {\n        // TODO update config\n\n        const tag = IS_WEB\n          ? (ref as HTMLElement)\n          : findNodeHandle(ref as Component);\n\n        const { layout, entering, exiting, sharedTransitionTag } = this.props;\n        if (\n          (layout || entering || exiting || sharedTransitionTag) &&\n          tag != null\n        ) {\n          if (!shouldBeUseWeb()) {\n            enableLayoutAnimations(true, false);\n          }\n          if (layout) {\n            configureLayoutAnimations(\n              tag,\n              LayoutAnimationType.LAYOUT,\n              maybeBuild(\n                layout,\n                undefined /* We don't have to warn user if style has common properties with animation for LAYOUT */,\n                AnimatedComponent.displayName\n              )\n            );\n          }\n          const skipEntering = this.context?.current;\n          if (entering && !skipEntering) {\n            configureLayoutAnimations(\n              tag,\n              LayoutAnimationType.ENTERING,\n              maybeBuild(\n                entering,\n                this.props?.style,\n                AnimatedComponent.displayName\n              )\n            );\n          }\n          if (exiting) {\n            const reduceMotionInExiting =\n              'getReduceMotion' in exiting &&\n              typeof exiting.getReduceMotion === 'function'\n                ? getReduceMotionFromConfig(exiting.getReduceMotion())\n                : getReduceMotionFromConfig();\n            if (!reduceMotionInExiting) {\n              configureLayoutAnimations(\n                tag,\n                LayoutAnimationType.EXITING,\n                maybeBuild(\n                  exiting,\n                  this.props?.style,\n                  AnimatedComponent.displayName\n                )\n              );\n            }\n          }\n          if (sharedTransitionTag && !IS_WEB) {\n            const sharedElementTransition =\n              this.props.sharedTransitionStyle ?? new SharedTransition();\n            const reduceMotionInTransition = getReduceMotionFromConfig(\n              sharedElementTransition.getReduceMotion()\n            );\n            if (!reduceMotionInTransition) {\n              sharedElementTransition.registerTransition(\n                tag as number,\n                sharedTransitionTag\n              );\n              this._sharedElementTransition = sharedElementTransition;\n            }\n          }\n        }\n\n        if (ref !== this._component) {\n          this._component = ref;\n        }\n      },\n    });\n\n    // This is a component lifecycle method from React, therefore we are not calling it directly.\n    // It is called before the component gets rerendered. This way we can access components' position before it changed\n    // and later on, in componentDidUpdate, calculate translation for layout transition.\n    getSnapshotBeforeUpdate() {\n      if (\n        (this._component as HTMLElement).getBoundingClientRect !== undefined\n      ) {\n        return (this._component as HTMLElement).getBoundingClientRect();\n      }\n\n      return null;\n    }\n\n    render() {\n      const props = this._PropsFilter.filterNonAnimatedProps(this);\n\n      if (isJest()) {\n        props.animatedStyle = this.animatedStyle;\n      }\n\n      // Layout animations on web are set inside `componentDidMount` method, which is called after first render.\n      // Because of that we can encounter a situation in which component is visible for a short amount of time, and later on animation triggers.\n      // I've tested that on various browsers and devices and it did not happen to me. To be sure that it won't happen to someone else,\n      // I've decided to hide component at first render. Its visibility is reset in `componentDidMount`.\n      if (\n        this._isFirstRender &&\n        IS_WEB &&\n        props.entering &&\n        !getReducedMotionFromConfig(props.entering as CustomConfig)\n      ) {\n        props.style = {\n          ...(props.style ?? {}),\n          visibility: 'hidden', // Hide component until `componentDidMount` triggers\n        };\n      }\n\n      const platformProps = Platform.select({\n        web: {},\n        default: { collapsable: false },\n      });\n\n      return (\n        <Component\n          {...props}\n          // Casting is used here, because ref can be null - in that case it cannot be assigned to HTMLElement.\n          // After spending some time trying to figure out what to do with this problem, we decided to leave it this way\n          ref={this._setComponentRef as (ref: Component) => void}\n          {...platformProps}\n        />\n      );\n    }\n  }\n\n  AnimatedComponent.displayName = `AnimatedComponent(${\n    Component.displayName || Component.name || 'Component'\n  })`;\n\n  return React.forwardRef<Component>((props, ref) => {\n    return (\n      <AnimatedComponent\n        {...props}\n        {...(ref === null ? null : { forwardedRef: ref })}\n      />\n    );\n  });\n}\n"]},"metadata":{},"sourceType":"module"}