{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import AsyncStorage from\"@react-native-async-storage/async-storage\";import*as Clipboard from\"expo-clipboard\";import*as Haptics from\"expo-haptics\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import Keyboard from\"react-native-web/dist/exports/Keyboard\";import Linking from\"react-native-web/dist/exports/Linking\";import Platform from\"react-native-web/dist/exports/Platform\";import Vibration from\"react-native-web/dist/exports/Vibration\";import{requestPermissions as _requestPermissions}from\"./Permissions\";export function changeColorLuminance(hex,luminanceChange){hex=String(hex).replace(/[^0-9a-f]/gi,\"\");if(hex.length===3){hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];}else if(hex.length!==6){throw new Error(`Invalid color hex: ${hex}`);}var luminance;switch(luminanceChange){case\"light\":luminance=-0.2;break;case\"lighter\":luminance=-0.33;break;case\"dark\":luminance=0.2;break;case\"darker\":luminance=0.33;break;default:throw new Error(`Cannot change luminance to ${luminanceChange}`);}var rgb=\"#\";for(var i=0;i<3;i++){var decimal=parseInt(hex.substr(i*2,2),16);var appliedLuminance=Math.round(Math.min(Math.max(0,decimal+decimal*luminance),255)).toString(16);rgb+=`00${appliedLuminance}`.substr(appliedLuminance.length);}return rgb;}var UnifierClass=function(){function UnifierClass(){_classCallCheck(this,UnifierClass);this._web=false;this._dev=false;this.navigation={dismissOverlay:function dismissOverlay(){console.warn(\"Dismiss overlay not supported.\");}};this.utils={dismissKeyboard:function dismissKeyboard(){Keyboard.dismiss();},dimensions:function dimensions(){return{width:Dimensions.get(\"window\").width,height:Dimensions.get(\"window\").height};},copyToClipboard:function copyToClipboard(text){Clipboard.setString(text);},orientationChange:function orientationChange(callback){Dimensions.addEventListener(\"change\",function(){var screen=Dimensions.get(\"screen\");var isPortrait=screen.width<screen.height;callback(isPortrait?\"portrait\":\"landscape\");});},requestPermissions:function(){var _requestPermissions2=_asyncToGenerator(function*(_perm){return _requestPermissions(_perm);});function requestPermissions(_x){return _requestPermissions2.apply(this,arguments);}return requestPermissions;}(),makePurchase:function makePurchase(){console.warn(\"Make purchase not supported yet.\");},PaymentService:function PaymentService(){console.warn(\"Make purchase not supported yet.\");},vibrate:function vibrate(pattern){Vibration.vibrate(pattern||[100],false);},haptic:function haptic(){if(\"web\"!==\"web\"){return Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);}return;},openUrl:function(){var _openUrl=_asyncToGenerator(function*(url){return Linking.openURL(url);});function openUrl(_x2){return _openUrl.apply(this,arguments);}return openUrl;}()};this.storage={getItem:function(){var _getItem=_asyncToGenerator(function*(key,defaultValue){try{var jsonValue=yield AsyncStorage.getItem(key);if(jsonValue){var value=JSON.parse(jsonValue);if(value===null||value===undefined){return defaultValue;}else{return value;}}else if(defaultValue!==undefined){return defaultValue;}else{return null;}}catch(error){console.error(`[storage] Error reading ${key}`,error);return defaultValue||null;}});function getItem(_x3,_x4){return _getItem.apply(this,arguments);}return getItem;}(),setItem:function(){var _setItem=_asyncToGenerator(function*(key,item){try{var jsonValue=JSON.stringify(item);yield AsyncStorage.setItem(key,jsonValue);}catch(error){console.error(`[storage] Error storing ${key}`,item,error);throw new Error(error);}});function setItem(_x5,_x6){return _setItem.apply(this,arguments);}return setItem;}()};this.tracking={log:function log(message){console.info(message);}};this.initIcons=function(){console.debug(\"[unifier] Initializing icons\");};console.debug(\"[unifier] Setting up Unifier\");}_createClass(UnifierClass,[{key:\"web\",get:function get(){return this._web;}},{key:\"dev\",get:function get(){return this._dev;}}]);return UnifierClass;}();export var Unifier=new UnifierClass();","map":{"version":3,"sources":["../src/Unifier.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-empty-function */\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport * as Clipboard from \"expo-clipboard\";\nimport * as Haptics from \"expo-haptics\";\nimport { Dimensions, Keyboard, Linking, Platform, Vibration } from \"react-native\";\nimport { requestPermissions } from \"./Permissions\";\n// Changes a color luminance\nexport function changeColorLuminance(hex, luminanceChange) {\n    // Validate hex string, strip \"#\" if present.\n    hex = String(hex).replace(/[^0-9a-f]/gi, \"\");\n    if (hex.length === 3) {\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n    }\n    else if (hex.length !== 6) {\n        throw new Error(`Invalid color hex: ${hex}`);\n    }\n    let luminance;\n    switch (luminanceChange) {\n        case \"light\":\n            luminance = -0.2;\n            break;\n        case \"lighter\":\n            luminance = -0.33;\n            break;\n        case \"dark\":\n            luminance = 0.2;\n            break;\n        case \"darker\":\n            luminance = 0.33;\n            break;\n        default:\n            throw new Error(`Cannot change luminance to ${luminanceChange}`);\n    }\n    // Convert to decimal and change luminosity\n    let rgb = \"#\";\n    for (let i = 0; i < 3; i++) {\n        const decimal = parseInt(hex.substr(i * 2, 2), 16);\n        const appliedLuminance = Math.round(Math.min(Math.max(0, decimal + decimal * luminance), 255)).toString(16);\n        // 0 pad, if necessary.\n        rgb += `00${appliedLuminance}`.substr(appliedLuminance.length);\n    }\n    return rgb;\n}\nclass UnifierClass {\n    get web() {\n        return this._web;\n    }\n    get dev() {\n        return this._dev;\n    }\n    constructor() {\n        this._web = false;\n        this._dev = false;\n        this.navigation = {\n            dismissOverlay: () => {\n                console.warn(\"Dismiss overlay not supported.\");\n            },\n        };\n        // tracking: Tracking,\n        this.utils = {\n            dismissKeyboard: () => {\n                Keyboard.dismiss();\n            },\n            dimensions: () => ({\n                width: Dimensions.get(\"window\").width,\n                height: Dimensions.get(\"window\").height,\n            }),\n            copyToClipboard: (text) => {\n                Clipboard.setString(text);\n            },\n            orientationChange: (callback) => {\n                Dimensions.addEventListener(\"change\", () => {\n                    const screen = Dimensions.get(\"screen\");\n                    const isPortrait = screen.width < screen.height;\n                    callback(isPortrait ? \"portrait\" : \"landscape\");\n                });\n            },\n            requestPermissions: async (_perm) => {\n                return requestPermissions(_perm);\n                // return requestPermissions(perm);\n            },\n            makePurchase: () => {\n                console.warn(\"Make purchase not supported yet.\");\n            },\n            PaymentService: () => {\n                console.warn(\"Make purchase not supported yet.\");\n            },\n            vibrate: (pattern) => {\n                Vibration.vibrate(pattern || [100], false);\n            },\n            haptic: () => {\n                if (Platform.OS !== \"web\") {\n                    return Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n                }\n                return;\n            },\n            openUrl: async (url) => {\n                return Linking.openURL(url);\n            },\n            // keepAwake: (activate: boolean) => {\n            //   if (activate) {\n            //     activateKeepAwake();\n            //   } else {\n            //     deactivateKeepAwake();\n            //   }\n            // },\n        };\n        this.storage = {\n            getItem: async (key, defaultValue) => {\n                try {\n                    const jsonValue = await AsyncStorage.getItem(key);\n                    if (jsonValue) {\n                        const value = JSON.parse(jsonValue);\n                        if (value === null || value === undefined) {\n                            return defaultValue;\n                        }\n                        else {\n                            return value;\n                        }\n                    }\n                    else if (defaultValue !== undefined) {\n                        return defaultValue;\n                    }\n                    else {\n                        return null;\n                    }\n                }\n                catch (error) {\n                    console.error(`[storage] Error reading ${key}`, error);\n                    return defaultValue || null;\n                }\n            },\n            setItem: async (key, item) => {\n                try {\n                    const jsonValue = JSON.stringify(item);\n                    await AsyncStorage.setItem(key, jsonValue);\n                }\n                catch (error) {\n                    console.error(`[storage] Error storing ${key}`, item, error);\n                    throw new Error(error);\n                }\n            },\n        };\n        this.tracking = {\n            log: (message) => {\n                console.info(message);\n            },\n        };\n        this.initIcons = () => {\n            console.debug(\"[unifier] Initializing icons\");\n        };\n        console.debug(\"[unifier] Setting up Unifier\");\n    }\n}\nexport const Unifier = new UnifierClass();\n//# sourceMappingURL=Unifier.js.map"]},"metadata":{},"sourceType":"module"}