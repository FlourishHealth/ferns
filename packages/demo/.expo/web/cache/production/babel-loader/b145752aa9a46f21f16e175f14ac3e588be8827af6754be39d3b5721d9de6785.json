{"ast":null,"code":"'use strict';import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{reportFatalErrorOnJS}from'./errors';import{isChromeDebugger,isJest,shouldBeUseWeb}from'./PlatformChecker';import{runOnJS,setupMicrotasks,callMicrotasks,runOnUIImmediately}from'./threads';import{mockedRequestAnimationFrame}from'./mockedRequestAnimationFrame';var IS_JEST=isJest();var SHOULD_BE_USE_WEB=shouldBeUseWeb();var IS_CHROME_DEBUGGER=isChromeDebugger();var _worklet_14810700639596_init_data={code:\"function callGuardDEV(fn){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}try{fn(...args);}catch(e){if(global.__ErrorUtils){global.__ErrorUtils.reportFatalError(e);}else{throw e;}}}\"};export var callGuardDEV=function(){var callGuardDEV=function callGuardDEV(fn){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}try{fn.apply(void 0,args);}catch(e){if(global.__ErrorUtils){global.__ErrorUtils.reportFatalError(e);}else{throw e;}}};callGuardDEV.__closure={};callGuardDEV.__workletHash=14810700639596;callGuardDEV.__initData=_worklet_14810700639596_init_data;return callGuardDEV;}();var _worklet_5000844547961_init_data={code:\"function setupCallGuard(){const{callGuardDEV,runOnJS,reportFatalErrorOnJS}=this.__closure;global.__callGuardDEV=callGuardDEV;global.__ErrorUtils={reportFatalError:function(error){runOnJS(reportFatalErrorOnJS)({message:error.message,stack:error.stack});}};}\"};export var setupCallGuard=function(){var setupCallGuard=function setupCallGuard(){global.__callGuardDEV=callGuardDEV;global.__ErrorUtils={reportFatalError:function reportFatalError(error){runOnJS(reportFatalErrorOnJS)({message:error.message,stack:error.stack});}};};setupCallGuard.__closure={callGuardDEV:callGuardDEV,runOnJS:runOnJS,reportFatalErrorOnJS:reportFatalErrorOnJS};setupCallGuard.__workletHash=5000844547961;setupCallGuard.__initData=_worklet_5000844547961_init_data;return setupCallGuard;}();var capturableConsole=_objectSpread({},console);var _worklet_3852058212244_init_data={code:\"function setupConsole(){const{IS_CHROME_DEBUGGER,runOnJS,capturableConsole}=this.__closure;if(!IS_CHROME_DEBUGGER){global.console={assert:runOnJS(capturableConsole.assert),debug:runOnJS(capturableConsole.debug),log:runOnJS(capturableConsole.log),warn:runOnJS(capturableConsole.warn),error:runOnJS(capturableConsole.error),info:runOnJS(capturableConsole.info)};}}\"};export var setupConsole=function(){var setupConsole=function setupConsole(){if(!IS_CHROME_DEBUGGER){global.console={assert:runOnJS(capturableConsole.assert),debug:runOnJS(capturableConsole.debug),log:runOnJS(capturableConsole.log),warn:runOnJS(capturableConsole.warn),error:runOnJS(capturableConsole.error),info:runOnJS(capturableConsole.info)};}};setupConsole.__closure={IS_CHROME_DEBUGGER:IS_CHROME_DEBUGGER,runOnJS:runOnJS,capturableConsole:capturableConsole};setupConsole.__workletHash=3852058212244;setupConsole.__initData=_worklet_3852058212244_init_data;return setupConsole;}();var _worklet_7781445156117_init_data={code:\"function setupRequestAnimationFrame(){const{callMicrotasks}=this.__closure;const nativeRequestAnimationFrame=global.requestAnimationFrame;let animationFrameCallbacks=[];let lastNativeAnimationFrameTimestamp=-1;global.__flushAnimationFrame=function(frameTimestamp){const currentCallbacks=animationFrameCallbacks;animationFrameCallbacks=[];currentCallbacks.forEach(function(f){return f(frameTimestamp);});callMicrotasks();};global.requestAnimationFrame=function(callback){animationFrameCallbacks.push(callback);if(animationFrameCallbacks.length===1){nativeRequestAnimationFrame(function(timestamp){if(lastNativeAnimationFrameTimestamp>=timestamp){return;}lastNativeAnimationFrameTimestamp=timestamp;global.__frameTimestamp=timestamp;global.__flushAnimationFrame(timestamp);global.__frameTimestamp=undefined;});}return-1;};}\"};var setupRequestAnimationFrame=function(){var setupRequestAnimationFrame=function setupRequestAnimationFrame(){var nativeRequestAnimationFrame=global.requestAnimationFrame;var animationFrameCallbacks=[];var lastNativeAnimationFrameTimestamp=-1;global.__flushAnimationFrame=function(frameTimestamp){var currentCallbacks=animationFrameCallbacks;animationFrameCallbacks=[];currentCallbacks.forEach(function(f){return f(frameTimestamp);});callMicrotasks();};global.requestAnimationFrame=function(callback){animationFrameCallbacks.push(callback);if(animationFrameCallbacks.length===1){nativeRequestAnimationFrame(function(timestamp){if(lastNativeAnimationFrameTimestamp>=timestamp){return;}lastNativeAnimationFrameTimestamp=timestamp;global.__frameTimestamp=timestamp;global.__flushAnimationFrame(timestamp);global.__frameTimestamp=undefined;});}return-1;};};setupRequestAnimationFrame.__closure={callMicrotasks:callMicrotasks};setupRequestAnimationFrame.__workletHash=7781445156117;setupRequestAnimationFrame.__initData=_worklet_7781445156117_init_data;return setupRequestAnimationFrame;}();var _worklet_8852908519716_init_data={code:\"function anonymous(){const{setupCallGuard,setupConsole,SHOULD_BE_USE_WEB,setupMicrotasks,setupRequestAnimationFrame}=this.__closure;setupCallGuard();setupConsole();if(!SHOULD_BE_USE_WEB){setupMicrotasks();setupRequestAnimationFrame();}}\"};export function initializeUIRuntime(){if(IS_JEST){globalThis.requestAnimationFrame=mockedRequestAnimationFrame;}runOnUIImmediately(function(){var anonymous=function anonymous(){setupCallGuard();setupConsole();if(!SHOULD_BE_USE_WEB){setupMicrotasks();setupRequestAnimationFrame();}};anonymous.__closure={setupCallGuard:setupCallGuard,setupConsole:setupConsole,SHOULD_BE_USE_WEB:SHOULD_BE_USE_WEB,setupMicrotasks:setupMicrotasks,setupRequestAnimationFrame:setupRequestAnimationFrame};anonymous.__workletHash=8852908519716;anonymous.__initData=_worklet_8852908519716_init_data;return anonymous;}())();}","map":{"version":3,"names":["_defineProperty","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","reportFatalErrorOnJS","isChromeDebugger","isJest","shouldBeUseWeb","runOnJS","setupMicrotasks","callMicrotasks","runOnUIImmediately","mockedRequestAnimationFrame","IS_JEST","SHOULD_BE_USE_WEB","IS_CHROME_DEBUGGER","_worklet_14810700639596_init_data","code","callGuardDEV","fn","_len","args","Array","_key","global","__ErrorUtils","reportFatalError","__closure","__workletHash","__initData","_worklet_5000844547961_init_data","setupCallGuard","__callGuardDEV","error","message","stack","capturableConsole","console","_worklet_3852058212244_init_data","setupConsole","assert","debug","log","warn","info","_worklet_7781445156117_init_data","setupRequestAnimationFrame","nativeRequestAnimationFrame","requestAnimationFrame","animationFrameCallbacks","lastNativeAnimationFrameTimestamp","__flushAnimationFrame","frameTimestamp","currentCallbacks","f","callback","timestamp","__frameTimestamp","undefined","_worklet_8852908519716_init_data","initializeUIRuntime","globalThis","anonymous"],"sources":["/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/initializers.ts"],"sourcesContent":["'use strict';\nimport { reportFatalErrorOnJS } from './errors';\nimport { isChromeDebugger, isJest, shouldBeUseWeb } from './PlatformChecker';\nimport {\n  runOnJS,\n  setupMicrotasks,\n  callMicrotasks,\n  runOnUIImmediately,\n} from './threads';\nimport { mockedRequestAnimationFrame } from './mockedRequestAnimationFrame';\n\nconst IS_JEST = isJest();\nconst SHOULD_BE_USE_WEB = shouldBeUseWeb();\nconst IS_CHROME_DEBUGGER = isChromeDebugger();\n\n// callGuard is only used with debug builds\nexport function callGuardDEV<T extends Array<unknown>, U>(\n  fn: (...args: T) => U,\n  ...args: T\n): void {\n  'worklet';\n  try {\n    fn(...args);\n  } catch (e) {\n    if (global.__ErrorUtils) {\n      global.__ErrorUtils.reportFatalError(e as Error);\n    } else {\n      throw e;\n    }\n  }\n}\n\nexport function setupCallGuard() {\n  'worklet';\n  global.__callGuardDEV = callGuardDEV;\n  global.__ErrorUtils = {\n    reportFatalError: (error: Error) => {\n      runOnJS(reportFatalErrorOnJS)({\n        message: error.message,\n        stack: error.stack,\n      });\n    },\n  };\n}\n\n// We really have to create a copy of console here. Function runOnJS we use on elements inside\n// this object makes it not configurable\nconst capturableConsole = { ...console };\n\nexport function setupConsole() {\n  'worklet';\n  if (!IS_CHROME_DEBUGGER) {\n    // @ts-ignore TypeScript doesn't like that there are missing methods in console object, but we don't provide all the methods for the UI runtime console version\n    global.console = {\n      assert: runOnJS(capturableConsole.assert),\n      debug: runOnJS(capturableConsole.debug),\n      log: runOnJS(capturableConsole.log),\n      warn: runOnJS(capturableConsole.warn),\n      error: runOnJS(capturableConsole.error),\n      info: runOnJS(capturableConsole.info),\n    };\n  }\n}\n\nfunction setupRequestAnimationFrame() {\n  'worklet';\n\n  // Jest mocks requestAnimationFrame API and it does not like if that mock gets overridden\n  // so we avoid doing requestAnimationFrame batching in Jest environment.\n  const nativeRequestAnimationFrame = global.requestAnimationFrame;\n\n  let animationFrameCallbacks: Array<(timestamp: number) => void> = [];\n  let lastNativeAnimationFrameTimestamp = -1;\n\n  global.__flushAnimationFrame = (frameTimestamp: number) => {\n    const currentCallbacks = animationFrameCallbacks;\n    animationFrameCallbacks = [];\n    currentCallbacks.forEach((f) => f(frameTimestamp));\n    callMicrotasks();\n  };\n\n  global.requestAnimationFrame = (\n    callback: (timestamp: number) => void\n  ): number => {\n    animationFrameCallbacks.push(callback);\n    if (animationFrameCallbacks.length === 1) {\n      // We schedule native requestAnimationFrame only when the first callback\n      // is added and then use it to execute all the enqueued callbacks. Once\n      // the callbacks are run, we clear the array.\n      nativeRequestAnimationFrame((timestamp) => {\n        if (lastNativeAnimationFrameTimestamp >= timestamp) {\n          // Make sure we only execute the callbacks once for a given frame\n          return;\n        }\n        lastNativeAnimationFrameTimestamp = timestamp;\n        global.__frameTimestamp = timestamp;\n        global.__flushAnimationFrame(timestamp);\n        global.__frameTimestamp = undefined;\n      });\n    }\n    // Reanimated currently does not support cancelling callbacks requested with\n    // requestAnimationFrame. We return -1 as identifier which isn't in line\n    // with the spec but it should give users better clue in case they actually\n    // attempt to store the value returned from rAF and use it for cancelling.\n    return -1;\n  };\n}\n\nexport function initializeUIRuntime() {\n  if (IS_JEST) {\n    // requestAnimationFrame react-native jest's setup is incorrect as it polyfills\n    // the method directly using setTimeout, therefore the callback doesn't get the\n    // expected timestamp as the only argument: https://github.com/facebook/react-native/blob/main/packages/react-native/jest/setup.js#L28\n    // We override this setup here to make sure that callbacks get the proper timestamps\n    // when executed. For non-jest environments we define requestAnimationFrame in setupRequestAnimationFrame\n    // @ts-ignore TypeScript uses Node definition for rAF, setTimeout, etc which returns a Timeout object rather than a number\n    globalThis.requestAnimationFrame = mockedRequestAnimationFrame;\n  }\n\n  runOnUIImmediately(() => {\n    'worklet';\n    setupCallGuard();\n    setupConsole();\n    if (!SHOULD_BE_USE_WEB) {\n      setupMicrotasks();\n      setupRequestAnimationFrame();\n    }\n  })();\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}