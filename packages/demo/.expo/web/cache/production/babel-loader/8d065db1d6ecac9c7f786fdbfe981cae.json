{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"initialPosition\",\"onCalendarToggled\",\"disablePan\",\"hideKnob\",\"leftArrowImageSource\",\"rightArrowImageSource\",\"allowShadow\",\"disableWeekScroll\",\"openThreshold\",\"closeThreshold\",\"closeOnDayPress\",\"horizontal\",\"calendarStyle\",\"theme\",\"style\",\"firstDay\",\"onDayPress\",\"hideArrows\",\"onPressArrowLeft\",\"onPressArrowRight\",\"renderArrow\",\"testID\"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import first from'lodash/first';import isFunction from'lodash/isFunction';import isNumber from'lodash/isNumber';import throttle from'lodash/throttle';import XDate from'xdate';import React,{useContext,useRef,useState,useEffect,useCallback,useMemo}from'react';import AccessibilityInfo from\"react-native-web/dist/exports/AccessibilityInfo\";import PanResponder from\"react-native-web/dist/exports/PanResponder\";import Animated from\"react-native-web/dist/exports/Animated\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{page}from'../dateutils';import{parseDate,toMarkingFormat}from'../interface';import styleConstructor,{HEADER_HEIGHT,KNOB_CONTAINER_HEIGHT}from'./style';import WeekDaysNames from'../commons/WeekDaysNames';import Calendar from'../calendar';import CalendarList from'../calendar-list';import Week from'./week';import WeekCalendar from'./WeekCalendar';import Context from'./Context';import constants from'../commons/constants';import{UpdateSources}from'./commons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Positions;(function(Positions){Positions[\"CLOSED\"]=\"closed\";Positions[\"OPEN\"]=\"open\";})(Positions||(Positions={}));var SPEED=20;var BOUNCINESS=6;var CLOSED_HEIGHT=120;var WEEK_HEIGHT=46;var DAY_NAMES_PADDING=24;var PAN_GESTURE_THRESHOLD=30;var LEFT_ARROW=require('../calendar/img/previous.png');var RIGHT_ARROW=require('../calendar/img/next.png');var knobHitSlop={left:10,right:10,top:10,bottom:10};var headerStyleOverride={stylesheet:{calendar:{header:{week:{marginTop:7,marginBottom:-4,flexDirection:'row',justifyContent:'space-around'}}}}};var ExpandableCalendar=function ExpandableCalendar(props){var _useContext=useContext(Context),date=_useContext.date,setDate=_useContext.setDate,numberOfDays=_useContext.numberOfDays,timelineLeftInset=_useContext.timelineLeftInset;var _props$initialPositio=props.initialPosition,initialPosition=_props$initialPositio===void 0?Positions.CLOSED:_props$initialPositio,onCalendarToggled=props.onCalendarToggled,disablePan=props.disablePan,_props$hideKnob=props.hideKnob,hideKnob=_props$hideKnob===void 0?numberOfDays&&numberOfDays>1:_props$hideKnob,_props$leftArrowImage=props.leftArrowImageSource,leftArrowImageSource=_props$leftArrowImage===void 0?LEFT_ARROW:_props$leftArrowImage,_props$rightArrowImag=props.rightArrowImageSource,rightArrowImageSource=_props$rightArrowImag===void 0?RIGHT_ARROW:_props$rightArrowImag,_props$allowShadow=props.allowShadow,allowShadow=_props$allowShadow===void 0?true:_props$allowShadow,disableWeekScroll=props.disableWeekScroll,_props$openThreshold=props.openThreshold,openThreshold=_props$openThreshold===void 0?PAN_GESTURE_THRESHOLD:_props$openThreshold,_props$closeThreshold=props.closeThreshold,closeThreshold=_props$closeThreshold===void 0?PAN_GESTURE_THRESHOLD:_props$closeThreshold,_props$closeOnDayPres=props.closeOnDayPress,closeOnDayPress=_props$closeOnDayPres===void 0?true:_props$closeOnDayPres,_props$horizontal=props.horizontal,horizontal=_props$horizontal===void 0?true:_props$horizontal,calendarStyle=props.calendarStyle,theme=props.theme,propsStyle=props.style,_props$firstDay=props.firstDay,firstDay=_props$firstDay===void 0?0:_props$firstDay,onDayPress=props.onDayPress,hideArrows=props.hideArrows,onPressArrowLeft=props.onPressArrowLeft,onPressArrowRight=props.onPressArrowRight,renderArrow=props.renderArrow,testID=props.testID,others=_objectWithoutProperties(props,_excluded);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),screenReaderEnabled=_useState2[0],setScreenReaderEnabled=_useState2[1];var getYear=function getYear(date){var d=new XDate(date);return d.getFullYear();};var getMonth=function getMonth(date){var d=new XDate(date);return d.getMonth()+1;};var visibleMonth=useRef(getMonth(date));var visibleYear=useRef(getYear(date));var isLaterDate=function isLaterDate(date1,date2){if(date1&&date2){if(date1.year>getYear(date2)){return true;}if(date1.year===getYear(date2)){if(date1.month>getMonth(date2)){return true;}}}return false;};useEffect(function(){scrollToDate(date);},[date]);var getNumberOfWeeksInMonth=function getNumberOfWeeksInMonth(month){var days=page(new XDate(month),firstDay);return days.length/7;};var numberOfWeeks=useRef(getNumberOfWeeksInMonth(date));var _useState3=useState(numberOfDays?Positions.CLOSED:initialPosition),_useState4=_slicedToArray(_useState3,2),position=_useState4[0],setPosition=_useState4[1];var isOpen=position===Positions.OPEN;var getOpenHeight=function getOpenHeight(){if(!horizontal){return Math.max(constants.screenHeight,constants.screenWidth);}return CLOSED_HEIGHT+WEEK_HEIGHT*(numberOfWeeks.current-1)+(hideKnob?12:KNOB_CONTAINER_HEIGHT)+(constants.isAndroid?3:0);};var openHeight=useRef(getOpenHeight());var closedHeight=useMemo(function(){return CLOSED_HEIGHT+(hideKnob||Number(numberOfDays)>1?0:KNOB_CONTAINER_HEIGHT);},[numberOfDays,hideKnob]);var startHeight=useMemo(function(){return isOpen?openHeight.current:closedHeight;},[closedHeight,isOpen]);var _height=useRef(startHeight);var deltaY=useMemo(function(){return new Animated.Value(startHeight);},[startHeight]);var headerDeltaY=useRef(new Animated.Value(isOpen?-HEADER_HEIGHT:0));useEffect(function(){_height.current=startHeight;deltaY.setValue(startHeight);},[startHeight]);useEffect(function(){if(numberOfDays){setPosition(Positions.CLOSED);}},[numberOfDays]);var wrapper=useRef();var calendarList=useRef();var header=useRef();var weekCalendarWrapper=useRef();var style=useRef(styleConstructor(theme));var themeObject=Object.assign(headerStyleOverride,theme);var _wrapperStyles=useRef({style:{height:startHeight}});var _headerStyles={style:{top:isOpen?-HEADER_HEIGHT:0}};var _weekCalendarStyles={style:{opacity:isOpen?0:1}};var shouldHideArrows=!horizontal?true:hideArrows||false;var updateNativeStyles=function updateNativeStyles(){var _wrapper$current;wrapper==null?void 0:(_wrapper$current=wrapper.current)==null?void 0:_wrapper$current.setNativeProps(_wrapperStyles.current);if(!horizontal){var _header$current;header==null?void 0:(_header$current=header.current)==null?void 0:_header$current.setNativeProps(_headerStyles);}else{var _weekCalendarWrapper$;weekCalendarWrapper==null?void 0:(_weekCalendarWrapper$=weekCalendarWrapper.current)==null?void 0:_weekCalendarWrapper$.setNativeProps(_weekCalendarStyles);}};var weekDaysStyle=useMemo(function(){var leftPaddings=calendarStyle==null?void 0:calendarStyle.paddingLeft;var rightPaddings=calendarStyle==null?void 0:calendarStyle.paddingRight;return[style.current.weekDayNames,{paddingLeft:isNumber(leftPaddings)?leftPaddings+6:DAY_NAMES_PADDING,paddingRight:isNumber(rightPaddings)?rightPaddings+6:DAY_NAMES_PADDING}];},[calendarStyle]);var animatedHeaderStyle=useMemo(function(){return[style.current.header,{height:HEADER_HEIGHT+10,top:headerDeltaY.current}];},[headerDeltaY.current]);var weekCalendarStyle=useMemo(function(){return[style.current.weekContainer,isOpen?style.current.hidden:style.current.visible];},[isOpen]);var containerStyle=useMemo(function(){return[allowShadow&&style.current.containerShadow,propsStyle];},[allowShadow,propsStyle]);var wrapperStyle=useMemo(function(){return{height:deltaY};},[deltaY]);var numberOfDaysHeaderStyle=useMemo(function(){if(numberOfDays&&numberOfDays>1){return{paddingHorizontal:0};}},[numberOfDays]);var _headerStyle=useMemo(function(){return[numberOfDaysHeaderStyle,props.headerStyle];},[props.headerStyle,numberOfDaysHeaderStyle]);useEffect(function(){if(AccessibilityInfo){if(AccessibilityInfo.isScreenReaderEnabled){AccessibilityInfo.isScreenReaderEnabled().then(handleScreenReaderStatus);}else if(AccessibilityInfo.fetch){AccessibilityInfo.fetch().then(handleScreenReaderStatus);}}},[]);var handleScreenReaderStatus=function handleScreenReaderStatus(screenReaderEnabled){setScreenReaderEnabled(screenReaderEnabled);};var scrollToDate=function scrollToDate(date){if(!horizontal){var _calendarList$current;calendarList==null?void 0:(_calendarList$current=calendarList.current)==null?void 0:_calendarList$current.scrollToDay(date,0,true);}else if(getYear(date)!==visibleYear.current||getMonth(date)!==visibleMonth.current){var _calendarList$current2;calendarList==null?void 0:(_calendarList$current2=calendarList.current)==null?void 0:_calendarList$current2.scrollToMonth(date);}};var scrollPage=useCallback(function(next){if(horizontal){var d=parseDate(date);if(isOpen){d.setDate(1);d.addMonths(next?1:-1);}else{var dayOfTheWeek=d.getDay();if(dayOfTheWeek<firstDay&&firstDay>0){dayOfTheWeek=7+dayOfTheWeek;}if(numberOfDays){var daysToAdd=numberOfDays<=1?7:numberOfDays;d.addDays(next?daysToAdd:-daysToAdd);}else{var firstDayOfWeek=(next?7:-7)-dayOfTheWeek+firstDay;d.addDays(firstDayOfWeek);}}setDate==null?void 0:setDate(toMarkingFormat(d),UpdateSources.PAGE_SCROLL);}},[horizontal,isOpen,firstDay,numberOfDays,setDate,date]);var handleMoveShouldSetPanResponder=function handleMoveShouldSetPanResponder(_,gestureState){if(disablePan){return false;}if(!horizontal&&isOpen){return false;}if(!isOpen&&gestureState.dy<0){return false;}return gestureState.dy>5||gestureState.dy<-5;};var handlePanResponderMove=function handlePanResponderMove(_,gestureState){_wrapperStyles.current.style.height=Math.min(Math.max(closedHeight,_height.current+gestureState.dy),openHeight.current);if(!horizontal){_headerStyles.style.top=Math.min(Math.max(-gestureState.dy,-HEADER_HEIGHT),0);}else{if(!isOpen){_weekCalendarStyles.style.opacity=Math.min(1,Math.max(1-gestureState.dy/100,0));}else if(gestureState.dy<0){_weekCalendarStyles.style.opacity=Math.max(0,Math.min(Math.abs(gestureState.dy/200),1));}}updateNativeStyles();};var handlePanResponderEnd=function handlePanResponderEnd(){_height.current=Number(_wrapperStyles.current.style.height);bounceToPosition();};var numberOfDaysCondition=useMemo(function(){return!numberOfDays||numberOfDays&&numberOfDays<=1;},[numberOfDays]);var panResponder=useMemo(function(){return numberOfDaysCondition?PanResponder.create({onMoveShouldSetPanResponder:handleMoveShouldSetPanResponder,onPanResponderMove:handlePanResponderMove,onPanResponderRelease:handlePanResponderEnd,onPanResponderTerminate:handlePanResponderEnd}):PanResponder.create({});},[numberOfDays,position]);var bounceToPosition=function bounceToPosition(){var toValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(!disablePan){var threshold=isOpen?openHeight.current-closeThreshold:closedHeight+openThreshold;var _isOpen=_height.current>=threshold;var newValue=_isOpen?openHeight.current:closedHeight;deltaY.setValue(_height.current);_height.current=toValue||newValue;_isOpen=_height.current>=threshold;Animated.spring(deltaY,{toValue:_height.current,speed:SPEED,bounciness:BOUNCINESS,useNativeDriver:false}).start();onCalendarToggled==null?void 0:onCalendarToggled(_isOpen);setPosition(function(){return _height.current===closedHeight?Positions.CLOSED:Positions.OPEN;});closeHeader(_isOpen);resetWeekCalendarOpacity(_isOpen);}};var resetWeekCalendarOpacity=function resetWeekCalendarOpacity(isOpen){_weekCalendarStyles.style.opacity=isOpen?0:1;updateNativeStyles();};var closeHeader=function closeHeader(isOpen){headerDeltaY.current.setValue(Number(_headerStyles.style.top));if(!horizontal&&!isOpen){Animated.spring(headerDeltaY.current,{toValue:0,speed:SPEED/10,bounciness:1,useNativeDriver:false}).start();}};var closeCalendar=useCallback(function(){setTimeout(function(){if(isOpen){bounceToPosition(closedHeight);}},0);},[isOpen,closedHeight]);var toggleCalendarPosition=useCallback(function(){bounceToPosition(isOpen?closedHeight:openHeight.current);},[isOpen,bounceToPosition,closedHeight]);var _onPressArrowLeft=useCallback(function(method,month){onPressArrowLeft==null?void 0:onPressArrowLeft(method,month);scrollPage(false);},[onPressArrowLeft,scrollPage]);var _onPressArrowRight=useCallback(function(method,month){onPressArrowRight==null?void 0:onPressArrowRight(method,month);scrollPage(true);},[onPressArrowRight,scrollPage]);var _onDayPress=useCallback(function(value){if(numberOfDaysCondition){setDate==null?void 0:setDate(value.dateString,UpdateSources.DAY_PRESS);}if(closeOnDayPress){closeCalendar();}onDayPress==null?void 0:onDayPress(value);},[onDayPress,closeOnDayPress,closeCalendar,numberOfDaysCondition]);var onVisibleMonthsChange=useCallback(throttle(function(value){var newDate=first(value);if(newDate){var month=newDate.month;if(month&&visibleMonth.current!==month){visibleMonth.current=month;var year=newDate.year;if(year){visibleYear.current=year;}if(visibleMonth.current!==getMonth(date)){var next=isLaterDate(newDate,date);scrollPage(next);}setTimeout(function(){var _numberOfWeeks=getNumberOfWeeksInMonth(newDate.dateString);if(_numberOfWeeks!==numberOfWeeks.current){numberOfWeeks.current=_numberOfWeeks;openHeight.current=getOpenHeight();if(isOpen){bounceToPosition(openHeight.current);}}},0);}}},100,{trailing:true,leading:false}),[date,scrollPage]);var _renderArrow=useCallback(function(direction){if(isFunction(renderArrow)){return renderArrow(direction);}return _jsx(Image,{source:direction==='right'?rightArrowImageSource:leftArrowImageSource,style:style.current.arrowImage,testID:`${testID}.${direction}Arrow`});},[renderArrow,rightArrowImageSource,leftArrowImageSource,testID]);var renderWeekDaysNames=function renderWeekDaysNames(){return _jsx(View,{style:weekDaysStyle,children:_jsx(WeekDaysNames,{firstDay:firstDay,style:style.current.dayHeader})});};var renderAnimatedHeader=function renderAnimatedHeader(){var _XDate;var monthYear=(_XDate=new XDate(date))==null?void 0:_XDate.toString('MMMM yyyy');return _jsxs(Animated.View,{ref:header,style:animatedHeaderStyle,pointerEvents:'none',children:[_jsx(Text,{allowFontScaling:false,style:style.current.headerTitle,children:monthYear}),renderWeekDaysNames()]});};var renderKnob=function renderKnob(){return _jsx(View,{style:style.current.knobContainer,pointerEvents:'box-none',children:_jsx(TouchableOpacity,{style:style.current.knob,testID:`${testID}.knob`,onPress:toggleCalendarPosition,hitSlop:knobHitSlop})});};var renderWeekCalendar=function renderWeekCalendar(){var WeekComponent=disableWeekScroll?Week:WeekCalendar;return _jsx(Animated.View,{ref:weekCalendarWrapper,style:weekCalendarStyle,pointerEvents:isOpen?'none':'auto',children:_jsx(WeekComponent,_objectSpread(_objectSpread({testID:`${testID}.weekCalendar`,firstDay:firstDay},others),{},{allowShadow:disableWeekScroll?undefined:false,current:disableWeekScroll?date:undefined,theme:themeObject,style:calendarStyle,hideDayNames:true,onDayPress:_onDayPress,accessibilityElementsHidden:true,importantForAccessibility:'no-hide-descendants'}))});};var renderCalendarList=function renderCalendarList(){return _jsx(CalendarList,_objectSpread(_objectSpread({testID:`${testID}.calendarList`,horizontal:horizontal,firstDay:firstDay,calendarStyle:calendarStyle},others),{},{current:date,theme:themeObject,ref:calendarList,onDayPress:_onDayPress,onVisibleMonthsChange:onVisibleMonthsChange,pagingEnabled:true,scrollEnabled:isOpen,hideArrows:shouldHideArrows,onPressArrowLeft:_onPressArrowLeft,onPressArrowRight:_onPressArrowRight,hideExtraDays:!horizontal&&isOpen,renderArrow:_renderArrow,staticHeader:true,numberOfDays:numberOfDays,headerStyle:_headerStyle,timelineLeftInset:timelineLeftInset,context:useContext(Context)}));};return _jsx(View,{testID:testID,style:containerStyle,children:screenReaderEnabled?_jsx(Calendar,_objectSpread(_objectSpread({testID:`${testID}.calendarAccessible`},others),{},{theme:themeObject,onDayPress:_onDayPress,hideExtraDays:true,renderArrow:_renderArrow})):_jsxs(Animated.View,_objectSpread(_objectSpread({testID:`${testID}.expandableContainer`,ref:wrapper,style:wrapperStyle},panResponder.panHandlers),{},{children:[renderCalendarList(),renderWeekCalendar(),!hideKnob&&renderKnob(),!horizontal&&renderAnimatedHeader()]}))});};export default ExpandableCalendar;ExpandableCalendar.displayName='ExpandableCalendar';ExpandableCalendar.defaultProps={horizontal:true,initialPosition:Positions.CLOSED,firstDay:0,leftArrowImageSource:LEFT_ARROW,rightArrowImageSource:RIGHT_ARROW,allowShadow:true,openThreshold:PAN_GESTURE_THRESHOLD,closeThreshold:PAN_GESTURE_THRESHOLD,closeOnDayPress:true};ExpandableCalendar.positions=Positions;","map":{"version":3,"names":["first","isFunction","isNumber","throttle","XDate","React","useContext","useRef","useState","useEffect","useCallback","useMemo","AccessibilityInfo","PanResponder","Animated","View","Text","Image","TouchableOpacity","page","parseDate","toMarkingFormat","styleConstructor","HEADER_HEIGHT","KNOB_CONTAINER_HEIGHT","WeekDaysNames","Calendar","CalendarList","Week","WeekCalendar","Context","constants","UpdateSources","jsx","_jsx","jsxs","_jsxs","Positions","SPEED","BOUNCINESS","CLOSED_HEIGHT","WEEK_HEIGHT","DAY_NAMES_PADDING","PAN_GESTURE_THRESHOLD","LEFT_ARROW","require","RIGHT_ARROW","knobHitSlop","left","right","top","bottom","headerStyleOverride","stylesheet","calendar","header","week","marginTop","marginBottom","flexDirection","justifyContent","ExpandableCalendar","props","_useContext","date","setDate","numberOfDays","timelineLeftInset","_props$initialPositio","initialPosition","CLOSED","onCalendarToggled","disablePan","_props$hideKnob","hideKnob","_props$leftArrowImage","leftArrowImageSource","_props$rightArrowImag","rightArrowImageSource","_props$allowShadow","allowShadow","disableWeekScroll","_props$openThreshold","openThreshold","_props$closeThreshold","closeThreshold","_props$closeOnDayPres","closeOnDayPress","_props$horizontal","horizontal","calendarStyle","theme","propsStyle","style","_props$firstDay","firstDay","onDayPress","hideArrows","onPressArrowLeft","onPressArrowRight","renderArrow","testID","others","_objectWithoutProperties","_excluded","_useState","_useState2","_slicedToArray","screenReaderEnabled","setScreenReaderEnabled","getYear","d","getFullYear","getMonth","visibleMonth","visibleYear","isLaterDate","date1","date2","year","month","scrollToDate","getNumberOfWeeksInMonth","days","length","numberOfWeeks","_useState3","_useState4","position","setPosition","isOpen","OPEN","getOpenHeight","Math","max","screenHeight","screenWidth","current","isAndroid","openHeight","closedHeight","Number","startHeight","_height","deltaY","Value","headerDeltaY","setValue","wrapper","calendarList","weekCalendarWrapper","themeObject","Object","assign","_wrapperStyles","height","_headerStyles","_weekCalendarStyles","opacity","shouldHideArrows","updateNativeStyles","_wrapper$current","setNativeProps","_header$current","_weekCalendarWrapper$","weekDaysStyle","leftPaddings","paddingLeft","rightPaddings","paddingRight","weekDayNames","animatedHeaderStyle","weekCalendarStyle","weekContainer","hidden","visible","containerStyle","containerShadow","wrapperStyle","numberOfDaysHeaderStyle","paddingHorizontal","_headerStyle","headerStyle","isScreenReaderEnabled","then","handleScreenReaderStatus","fetch","_calendarList$current","scrollToDay","_calendarList$current2","scrollToMonth","scrollPage","next","addMonths","dayOfTheWeek","getDay","daysToAdd","addDays","firstDayOfWeek","PAGE_SCROLL","handleMoveShouldSetPanResponder","_","gestureState","dy","handlePanResponderMove","min","abs","handlePanResponderEnd","bounceToPosition","numberOfDaysCondition","panResponder","create","onMoveShouldSetPanResponder","onPanResponderMove","onPanResponderRelease","onPanResponderTerminate","toValue","arguments","undefined","threshold","_isOpen","newValue","spring","speed","bounciness","useNativeDriver","start","closeHeader","resetWeekCalendarOpacity","closeCalendar","setTimeout","toggleCalendarPosition","_onPressArrowLeft","method","_onPressArrowRight","_onDayPress","value","dateString","DAY_PRESS","onVisibleMonthsChange","newDate","_numberOfWeeks","trailing","leading","_renderArrow","direction","source","arrowImage","renderWeekDaysNames","children","dayHeader","renderAnimatedHeader","_XDate","monthYear","toString","ref","pointerEvents","allowFontScaling","headerTitle","renderKnob","knobContainer","knob","onPress","hitSlop","renderWeekCalendar","WeekComponent","_objectSpread","hideDayNames","accessibilityElementsHidden","importantForAccessibility","renderCalendarList","pagingEnabled","scrollEnabled","hideExtraDays","staticHeader","context","panHandlers","displayName","defaultProps","positions"],"sources":["/Users/josh/src/ui/node_modules/react-native-calendars/src/expandableCalendar/index.js"],"sourcesContent":["import first from 'lodash/first';\nimport isFunction from 'lodash/isFunction';\nimport isNumber from 'lodash/isNumber';\nimport throttle from 'lodash/throttle';\nimport XDate from 'xdate';\nimport React, { useContext, useRef, useState, useEffect, useCallback, useMemo } from 'react';\nimport { AccessibilityInfo, PanResponder, Animated, View, Text, Image, TouchableOpacity } from 'react-native';\nimport { page } from '../dateutils';\nimport { parseDate, toMarkingFormat } from '../interface';\nimport styleConstructor, { HEADER_HEIGHT, KNOB_CONTAINER_HEIGHT } from './style';\nimport WeekDaysNames from '../commons/WeekDaysNames';\nimport Calendar from '../calendar';\nimport CalendarList from '../calendar-list';\nimport Week from './week';\nimport WeekCalendar from './WeekCalendar';\nimport Context from './Context';\nimport constants from '../commons/constants';\nimport { UpdateSources } from './commons';\nexport var Positions;\n(function (Positions) {\n    Positions[\"CLOSED\"] = \"closed\";\n    Positions[\"OPEN\"] = \"open\";\n})(Positions || (Positions = {}));\nconst SPEED = 20;\nconst BOUNCINESS = 6;\nconst CLOSED_HEIGHT = 120; // header + 1 week\nconst WEEK_HEIGHT = 46;\nconst DAY_NAMES_PADDING = 24;\nconst PAN_GESTURE_THRESHOLD = 30;\nconst LEFT_ARROW = require('../calendar/img/previous.png');\nconst RIGHT_ARROW = require('../calendar/img/next.png');\nconst knobHitSlop = { left: 10, right: 10, top: 10, bottom: 10 };\nconst headerStyleOverride = {\n    stylesheet: {\n        calendar: {\n            header: {\n                week: {\n                    marginTop: 7,\n                    marginBottom: -4,\n                    flexDirection: 'row',\n                    justifyContent: 'space-around'\n                }\n            }\n        }\n    }\n};\n/**\n * @description: Expandable calendar component\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: CalendarList\n * @extendslink: docs/CalendarList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst ExpandableCalendar = (props) => {\n    const { date, setDate, numberOfDays, timelineLeftInset } = useContext(Context);\n    const { \n    /** ExpandableCalendar props */\n    initialPosition = Positions.CLOSED, onCalendarToggled, disablePan, hideKnob = numberOfDays && numberOfDays > 1, leftArrowImageSource = LEFT_ARROW, rightArrowImageSource = RIGHT_ARROW, allowShadow = true, disableWeekScroll, openThreshold = PAN_GESTURE_THRESHOLD, closeThreshold = PAN_GESTURE_THRESHOLD, closeOnDayPress = true, \n    /** CalendarList props */\n    horizontal = true, calendarStyle, theme, style: propsStyle, firstDay = 0, onDayPress, hideArrows, onPressArrowLeft, onPressArrowRight, renderArrow, testID, ...others } = props;\n    const [screenReaderEnabled, setScreenReaderEnabled] = useState(false);\n    /** Date */\n    const getYear = (date) => {\n        const d = new XDate(date);\n        return d.getFullYear();\n    };\n    const getMonth = (date) => {\n        const d = new XDate(date);\n        return d.getMonth() + 1; // getMonth() returns month's index' (0-11)\n    };\n    const visibleMonth = useRef(getMonth(date));\n    const visibleYear = useRef(getYear(date));\n    const isLaterDate = (date1, date2) => {\n        if (date1 && date2) {\n            if (date1.year > getYear(date2)) {\n                return true;\n            }\n            if (date1.year === getYear(date2)) {\n                if (date1.month > getMonth(date2)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    useEffect(() => {\n        // date was changed from AgendaList, arrows or scroll\n        scrollToDate(date);\n    }, [date]);\n    /** Number of weeks */\n    const getNumberOfWeeksInMonth = (month) => {\n        const days = page(new XDate(month), firstDay);\n        return days.length / 7;\n    };\n    const numberOfWeeks = useRef(getNumberOfWeeksInMonth(date));\n    /** Position */\n    const [position, setPosition] = useState(numberOfDays ? Positions.CLOSED : initialPosition);\n    const isOpen = position === Positions.OPEN;\n    const getOpenHeight = () => {\n        if (!horizontal) {\n            return Math.max(constants.screenHeight, constants.screenWidth);\n        }\n        return CLOSED_HEIGHT + (WEEK_HEIGHT * (numberOfWeeks.current - 1)) + (hideKnob ? 12 : KNOB_CONTAINER_HEIGHT) + (constants.isAndroid ? 3 : 0);\n    };\n    const openHeight = useRef(getOpenHeight());\n    const closedHeight = useMemo(() => CLOSED_HEIGHT + (hideKnob || Number(numberOfDays) > 1 ? 0 : KNOB_CONTAINER_HEIGHT), [numberOfDays, hideKnob]);\n    const startHeight = useMemo(() => isOpen ? openHeight.current : closedHeight, [closedHeight, isOpen]);\n    const _height = useRef(startHeight);\n    const deltaY = useMemo(() => new Animated.Value(startHeight), [startHeight]);\n    const headerDeltaY = useRef(new Animated.Value(isOpen ? -HEADER_HEIGHT : 0));\n    useEffect(() => {\n        _height.current = startHeight;\n        deltaY.setValue(startHeight);\n    }, [startHeight]);\n    useEffect(() => {\n        if (numberOfDays) {\n            setPosition(Positions.CLOSED);\n        }\n    }, [numberOfDays]);\n    /** Components' refs */\n    const wrapper = useRef();\n    const calendarList = useRef();\n    const header = useRef();\n    const weekCalendarWrapper = useRef();\n    /** Styles */\n    const style = useRef(styleConstructor(theme));\n    const themeObject = Object.assign(headerStyleOverride, theme);\n    const _wrapperStyles = useRef({ style: { height: startHeight } });\n    const _headerStyles = { style: { top: isOpen ? -HEADER_HEIGHT : 0 } };\n    const _weekCalendarStyles = { style: { opacity: isOpen ? 0 : 1 } };\n    const shouldHideArrows = !horizontal ? true : hideArrows || false;\n    const updateNativeStyles = () => {\n        wrapper?.current?.setNativeProps(_wrapperStyles.current);\n        if (!horizontal) {\n            header?.current?.setNativeProps(_headerStyles);\n        }\n        else {\n            weekCalendarWrapper?.current?.setNativeProps(_weekCalendarStyles);\n        }\n    };\n    const weekDaysStyle = useMemo(() => {\n        const leftPaddings = calendarStyle?.paddingLeft;\n        const rightPaddings = calendarStyle?.paddingRight;\n        return [\n            style.current.weekDayNames,\n            {\n                paddingLeft: isNumber(leftPaddings) ? leftPaddings + 6 : DAY_NAMES_PADDING,\n                paddingRight: isNumber(rightPaddings) ? rightPaddings + 6 : DAY_NAMES_PADDING\n            }\n        ];\n    }, [calendarStyle]);\n    const animatedHeaderStyle = useMemo(() => {\n        return [style.current.header, { height: HEADER_HEIGHT + 10, top: headerDeltaY.current }];\n    }, [headerDeltaY.current]);\n    const weekCalendarStyle = useMemo(() => {\n        return [style.current.weekContainer, isOpen ? style.current.hidden : style.current.visible];\n    }, [isOpen]);\n    const containerStyle = useMemo(() => {\n        return [allowShadow && style.current.containerShadow, propsStyle];\n    }, [allowShadow, propsStyle]);\n    const wrapperStyle = useMemo(() => {\n        return { height: deltaY };\n    }, [deltaY]);\n    const numberOfDaysHeaderStyle = useMemo(() => {\n        if (numberOfDays && numberOfDays > 1) {\n            return { paddingHorizontal: 0 };\n        }\n    }, [numberOfDays]);\n    const _headerStyle = useMemo(() => {\n        return [numberOfDaysHeaderStyle, props.headerStyle];\n    }, [props.headerStyle, numberOfDaysHeaderStyle]);\n    /** AccessibilityInfo */\n    useEffect(() => {\n        if (AccessibilityInfo) {\n            if (AccessibilityInfo.isScreenReaderEnabled) {\n                AccessibilityInfo.isScreenReaderEnabled().then(handleScreenReaderStatus);\n                //@ts-expect-error\n            }\n            else if (AccessibilityInfo.fetch) {\n                // Support for older RN versions\n                //@ts-expect-error\n                AccessibilityInfo.fetch().then(handleScreenReaderStatus);\n            }\n        }\n    }, []);\n    const handleScreenReaderStatus = (screenReaderEnabled) => {\n        setScreenReaderEnabled(screenReaderEnabled);\n    };\n    /** Scroll */\n    const scrollToDate = (date) => {\n        if (!horizontal) {\n            calendarList?.current?.scrollToDay(date, 0, true);\n        }\n        else if (getYear(date) !== visibleYear.current || getMonth(date) !== visibleMonth.current) {\n            // don't scroll if the month is already visible\n            calendarList?.current?.scrollToMonth(date);\n        }\n    };\n    const scrollPage = useCallback((next) => {\n        if (horizontal) {\n            const d = parseDate(date);\n            if (isOpen) {\n                d.setDate(1);\n                d.addMonths(next ? 1 : -1);\n            }\n            else {\n                let dayOfTheWeek = d.getDay();\n                if (dayOfTheWeek < firstDay && firstDay > 0) {\n                    dayOfTheWeek = 7 + dayOfTheWeek;\n                }\n                if (numberOfDays) {\n                    const daysToAdd = numberOfDays <= 1 ? 7 : numberOfDays;\n                    d.addDays(next ? daysToAdd : -daysToAdd);\n                }\n                else {\n                    const firstDayOfWeek = (next ? 7 : -7) - dayOfTheWeek + firstDay;\n                    d.addDays(firstDayOfWeek);\n                }\n            }\n            setDate?.(toMarkingFormat(d), UpdateSources.PAGE_SCROLL);\n        }\n    }, [horizontal, isOpen, firstDay, numberOfDays, setDate, date]);\n    /** Pan Gesture */\n    const handleMoveShouldSetPanResponder = (_, gestureState) => {\n        if (disablePan) {\n            return false;\n        }\n        if (!horizontal && isOpen) {\n            // disable pan detection when vertical calendar is open to allow calendar scroll\n            return false;\n        }\n        if (!isOpen && gestureState.dy < 0) {\n            // disable pan detection to limit to closed height\n            return false;\n        }\n        return gestureState.dy > 5 || gestureState.dy < -5;\n    };\n    const handlePanResponderMove = (_, gestureState) => {\n        // limit min height to closed height and max to open height\n        _wrapperStyles.current.style.height = Math.min(Math.max(closedHeight, _height.current + gestureState.dy), openHeight.current);\n        if (!horizontal) {\n            // vertical CalenderList header\n            _headerStyles.style.top = Math.min(Math.max(-gestureState.dy, -HEADER_HEIGHT), 0);\n        }\n        else {\n            // horizontal Week view\n            if (!isOpen) {\n                _weekCalendarStyles.style.opacity = Math.min(1, Math.max(1 - gestureState.dy / 100, 0));\n            }\n            else if (gestureState.dy < 0) {\n                _weekCalendarStyles.style.opacity = Math.max(0, Math.min(Math.abs(gestureState.dy / 200), 1));\n            }\n        }\n        updateNativeStyles();\n    };\n    const handlePanResponderEnd = () => {\n        _height.current = Number(_wrapperStyles.current.style.height);\n        bounceToPosition();\n    };\n    const numberOfDaysCondition = useMemo(() => {\n        return !numberOfDays || numberOfDays && numberOfDays <= 1;\n    }, [numberOfDays]);\n    const panResponder = useMemo(() => numberOfDaysCondition ? PanResponder.create({\n        onMoveShouldSetPanResponder: handleMoveShouldSetPanResponder,\n        onPanResponderMove: handlePanResponderMove,\n        onPanResponderRelease: handlePanResponderEnd,\n        onPanResponderTerminate: handlePanResponderEnd\n    }) : PanResponder.create({}), [numberOfDays, position]);\n    /** Animated */\n    const bounceToPosition = (toValue = 0) => {\n        if (!disablePan) {\n            const threshold = isOpen ? openHeight.current - closeThreshold : closedHeight + openThreshold;\n            let _isOpen = _height.current >= threshold;\n            const newValue = _isOpen ? openHeight.current : closedHeight;\n            deltaY.setValue(_height.current); // set the start position for the animated value\n            _height.current = toValue || newValue;\n            _isOpen = _height.current >= threshold; // re-check after _height.current was set\n            Animated.spring(deltaY, {\n                toValue: _height.current,\n                speed: SPEED,\n                bounciness: BOUNCINESS,\n                useNativeDriver: false\n            }).start();\n            onCalendarToggled?.(_isOpen);\n            setPosition(() => _height.current === closedHeight ? Positions.CLOSED : Positions.OPEN);\n            closeHeader(_isOpen);\n            resetWeekCalendarOpacity(_isOpen);\n        }\n    };\n    const resetWeekCalendarOpacity = (isOpen) => {\n        _weekCalendarStyles.style.opacity = isOpen ? 0 : 1;\n        updateNativeStyles();\n    };\n    const closeHeader = (isOpen) => {\n        headerDeltaY.current.setValue(Number(_headerStyles.style.top)); // set the start position for the animated value\n        if (!horizontal && !isOpen) {\n            Animated.spring(headerDeltaY.current, {\n                toValue: 0,\n                speed: SPEED / 10,\n                bounciness: 1,\n                useNativeDriver: false\n            }).start();\n        }\n    };\n    const closeCalendar = useCallback(() => {\n        setTimeout(() => {\n            // to allows setDate to be completed\n            if (isOpen) {\n                bounceToPosition(closedHeight);\n            }\n        }, 0);\n    }, [isOpen, closedHeight]);\n    const toggleCalendarPosition = useCallback(() => {\n        bounceToPosition(isOpen ? closedHeight : openHeight.current);\n    }, [isOpen, bounceToPosition, closedHeight]);\n    /** Events */\n    const _onPressArrowLeft = useCallback((method, month) => {\n        onPressArrowLeft?.(method, month);\n        scrollPage(false);\n    }, [onPressArrowLeft, scrollPage]);\n    const _onPressArrowRight = useCallback((method, month) => {\n        onPressArrowRight?.(method, month);\n        scrollPage(true);\n    }, [onPressArrowRight, scrollPage]);\n    const _onDayPress = useCallback((value) => {\n        if (numberOfDaysCondition) {\n            setDate?.(value.dateString, UpdateSources.DAY_PRESS);\n        }\n        if (closeOnDayPress) {\n            closeCalendar();\n        }\n        onDayPress?.(value);\n    }, [onDayPress, closeOnDayPress, closeCalendar, numberOfDaysCondition]);\n    const onVisibleMonthsChange = useCallback(throttle((value) => {\n        const newDate = first(value);\n        if (newDate) {\n            const month = newDate.month;\n            if (month && visibleMonth.current !== month) {\n                visibleMonth.current = month;\n                const year = newDate.year;\n                if (year) {\n                    visibleYear.current = year;\n                }\n                // for horizontal scroll\n                if (visibleMonth.current !== getMonth(date)) {\n                    const next = isLaterDate(newDate, date);\n                    scrollPage(next);\n                }\n                // updating openHeight\n                setTimeout(() => {\n                    // to wait for setDate() call in horizontal scroll (scrollPage())\n                    const _numberOfWeeks = getNumberOfWeeksInMonth(newDate.dateString);\n                    if (_numberOfWeeks !== numberOfWeeks.current) {\n                        numberOfWeeks.current = _numberOfWeeks;\n                        openHeight.current = getOpenHeight();\n                        if (isOpen) {\n                            bounceToPosition(openHeight.current);\n                        }\n                    }\n                }, 0);\n            }\n        }\n    }, 100, { trailing: true, leading: false }), [date, scrollPage]);\n    /** Renders */\n    const _renderArrow = useCallback((direction) => {\n        if (isFunction(renderArrow)) {\n            return renderArrow(direction);\n        }\n        return (<Image source={direction === 'right' ? rightArrowImageSource : leftArrowImageSource} style={style.current.arrowImage} testID={`${testID}.${direction}Arrow`}/>);\n    }, [renderArrow, rightArrowImageSource, leftArrowImageSource, testID]);\n    const renderWeekDaysNames = () => {\n        return (<View style={weekDaysStyle}>\n        <WeekDaysNames firstDay={firstDay} style={style.current.dayHeader}/>\n      </View>);\n    };\n    const renderAnimatedHeader = () => {\n        const monthYear = new XDate(date)?.toString('MMMM yyyy');\n        return (<Animated.View ref={header} style={animatedHeaderStyle} pointerEvents={'none'}>\n        <Text allowFontScaling={false} style={style.current.headerTitle}>\n          {monthYear}\n        </Text>\n        {renderWeekDaysNames()}\n      </Animated.View>);\n    };\n    const renderKnob = () => {\n        return (<View style={style.current.knobContainer} pointerEvents={'box-none'}>\n        <TouchableOpacity style={style.current.knob} testID={`${testID}.knob`} onPress={toggleCalendarPosition} hitSlop={knobHitSlop} /* activeOpacity={isOpen ? undefined : 1} *//>\n      </View>);\n    };\n    const renderWeekCalendar = () => {\n        const WeekComponent = disableWeekScroll ? Week : WeekCalendar;\n        return (<Animated.View ref={weekCalendarWrapper} style={weekCalendarStyle} pointerEvents={isOpen ? 'none' : 'auto'}>\n        <WeekComponent testID={`${testID}.weekCalendar`} firstDay={firstDay} {...others} allowShadow={disableWeekScroll ? undefined : false} current={disableWeekScroll ? date : undefined} theme={themeObject} style={calendarStyle} hideDayNames={true} onDayPress={_onDayPress} accessibilityElementsHidden // iOS\n         importantForAccessibility={'no-hide-descendants'} // Android\n        />\n      </Animated.View>);\n    };\n    const renderCalendarList = () => {\n        return (<CalendarList testID={`${testID}.calendarList`} horizontal={horizontal} firstDay={firstDay} calendarStyle={calendarStyle} {...others} current={date} theme={themeObject} ref={calendarList} onDayPress={_onDayPress} onVisibleMonthsChange={onVisibleMonthsChange} pagingEnabled scrollEnabled={isOpen} hideArrows={shouldHideArrows} onPressArrowLeft={_onPressArrowLeft} onPressArrowRight={_onPressArrowRight} hideExtraDays={!horizontal && isOpen} renderArrow={_renderArrow} staticHeader numberOfDays={numberOfDays} headerStyle={_headerStyle} timelineLeftInset={timelineLeftInset} context={useContext(Context)}/>);\n    };\n    return (<View testID={testID} style={containerStyle}>\n      {screenReaderEnabled ? (<Calendar testID={`${testID}.calendarAccessible`} {...others} theme={themeObject} onDayPress={_onDayPress} hideExtraDays renderArrow={_renderArrow}/>) : (<Animated.View testID={`${testID}.expandableContainer`} ref={wrapper} style={wrapperStyle} {...panResponder.panHandlers}>\n          {renderCalendarList()}\n          {renderWeekCalendar()}\n          {!hideKnob && renderKnob()}\n          {!horizontal && renderAnimatedHeader()}\n        </Animated.View>)}\n    </View>);\n};\nexport default ExpandableCalendar;\nExpandableCalendar.displayName = 'ExpandableCalendar';\nExpandableCalendar.defaultProps = {\n    horizontal: true,\n    initialPosition: Positions.CLOSED,\n    firstDay: 0,\n    leftArrowImageSource: LEFT_ARROW,\n    rightArrowImageSource: RIGHT_ARROW,\n    allowShadow: true,\n    openThreshold: PAN_GESTURE_THRESHOLD,\n    closeThreshold: PAN_GESTURE_THRESHOLD,\n    closeOnDayPress: true\n};\nExpandableCalendar.positions = Positions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}