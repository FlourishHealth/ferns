{"ast":null,"code":"import range from'lodash/range';import times from'lodash/times';import React,{useCallback,useMemo,useRef}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import constants from'../commons/constants';import{buildTimeString,calcTimeByPosition,calcDateByPosition}from'./helpers/presenter';import{buildUnavailableHoursBlocks,HOUR_BLOCK_HEIGHT}from'./Packer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var dimensionWidth=constants.screenWidth;var EVENT_DIFF=20;var TimelineHours=function TimelineHours(props){var format24h=props.format24h,_props$start=props.start,start=_props$start===void 0?0:_props$start,_props$end=props.end,end=_props$end===void 0?24:_props$end,date=props.date,unavailableHours=props.unavailableHours,unavailableHoursColor=props.unavailableHoursColor,styles=props.styles,onBackgroundLongPress=props.onBackgroundLongPress,onBackgroundLongPressOut=props.onBackgroundLongPressOut,width=props.width,_props$numberOfDays=props.numberOfDays,numberOfDays=_props$numberOfDays===void 0?1:_props$numberOfDays,_props$timelineLeftIn=props.timelineLeftInset,timelineLeftInset=_props$timelineLeftIn===void 0?0:_props$timelineLeftIn;var lastLongPressEventTime=useRef();var offset=HOUR_BLOCK_HEIGHT;var unavailableHoursBlocks=buildUnavailableHoursBlocks(unavailableHours,{dayStart:start,dayEnd:end});var hours=useMemo(function(){return range(start,end+1).map(function(i){var timeText;if(i===start){timeText='';}else if(i<12){timeText=!format24h?`${i} AM`:`${i}:00`;}else if(i===12){timeText=!format24h?`${i} PM`:`${i}:00`;}else if(i===24){timeText=!format24h?'12 AM':'23:59';}else{timeText=!format24h?`${i-12} PM`:`${i}:00`;}return{timeText:timeText,time:i};});},[start,end,format24h]);var handleBackgroundPress=useCallback(function(event){var yPosition=event.nativeEvent.locationY;var xPosition=event.nativeEvent.locationX;var _calcTimeByPosition=calcTimeByPosition(yPosition,HOUR_BLOCK_HEIGHT),hour=_calcTimeByPosition.hour,minutes=_calcTimeByPosition.minutes;var dateByPosition=calcDateByPosition(xPosition,timelineLeftInset,numberOfDays,date);lastLongPressEventTime.current={hour:hour,minutes:minutes,date:dateByPosition};var timeString=buildTimeString(hour,minutes,dateByPosition);onBackgroundLongPress==null?void 0:onBackgroundLongPress(timeString,lastLongPressEventTime.current);},[onBackgroundLongPress,date]);var handlePressOut=useCallback(function(){if(lastLongPressEventTime.current){var _lastLongPressEventTi=lastLongPressEventTime.current,hour=_lastLongPressEventTi.hour,minutes=_lastLongPressEventTi.minutes,_date=_lastLongPressEventTi.date;var timeString=buildTimeString(hour,minutes,_date);onBackgroundLongPressOut==null?void 0:onBackgroundLongPressOut(timeString,lastLongPressEventTime.current);lastLongPressEventTime.current=undefined;}},[onBackgroundLongPressOut,date]);return _jsxs(_Fragment,{children:[_jsx(TouchableWithoutFeedback,{onLongPress:handleBackgroundPress,onPressOut:handlePressOut,children:_jsx(View,{style:StyleSheet.absoluteFillObject})}),unavailableHoursBlocks.map(function(block,index){return _jsx(View,{style:[styles.unavailableHoursBlock,block,unavailableHoursColor?{backgroundColor:unavailableHoursColor}:undefined,{left:timelineLeftInset}]},index);}),hours.map(function(_ref,index){var timeText=_ref.timeText,time=_ref.time;return _jsxs(React.Fragment,{children:[_jsx(Text,{style:[styles.timeLabel,{top:offset*index-6,width:timelineLeftInset-16}],children:timeText},`timeLabel${time}`),time===start?null:_jsx(View,{style:[styles.line,{top:offset*index,width:dimensionWidth-EVENT_DIFF,left:timelineLeftInset-16}]},`line${time}`),_jsx(View,{style:[styles.line,{top:offset*(index+0.5),width:dimensionWidth-EVENT_DIFF,left:timelineLeftInset-16}]},`lineHalf${time}`)]},time);}),times(numberOfDays,function(index){return _jsx(View,{style:[styles.verticalLine,{right:(index+1)*width/numberOfDays}]},index);})]});};export default React.memo(TimelineHours);","map":{"version":3,"names":["range","times","React","useCallback","useMemo","useRef","View","Text","TouchableWithoutFeedback","StyleSheet","constants","buildTimeString","calcTimeByPosition","calcDateByPosition","buildUnavailableHoursBlocks","HOUR_BLOCK_HEIGHT","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","dimensionWidth","screenWidth","EVENT_DIFF","TimelineHours","props","format24h","_props$start","start","_props$end","end","date","unavailableHours","unavailableHoursColor","styles","onBackgroundLongPress","onBackgroundLongPressOut","width","_props$numberOfDays","numberOfDays","_props$timelineLeftIn","timelineLeftInset","lastLongPressEventTime","offset","unavailableHoursBlocks","dayStart","dayEnd","hours","map","i","timeText","time","handleBackgroundPress","event","yPosition","nativeEvent","locationY","xPosition","locationX","_calcTimeByPosition","hour","minutes","dateByPosition","current","timeString","handlePressOut","_lastLongPressEventTi","undefined","children","onLongPress","onPressOut","style","absoluteFillObject","block","index","unavailableHoursBlock","backgroundColor","left","_ref","timeLabel","top","line","verticalLine","right","memo"],"sources":["/Users/josh/src/ui/node_modules/react-native-calendars/src/timeline/TimelineHours.js"],"sourcesContent":["import range from 'lodash/range';\nimport times from 'lodash/times';\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { View, Text, TouchableWithoutFeedback, StyleSheet } from 'react-native';\nimport constants from '../commons/constants';\nimport { buildTimeString, calcTimeByPosition, calcDateByPosition } from './helpers/presenter';\nimport { buildUnavailableHoursBlocks, HOUR_BLOCK_HEIGHT } from './Packer';\nconst dimensionWidth = constants.screenWidth;\nconst EVENT_DIFF = 20;\nconst TimelineHours = (props) => {\n    const { format24h, start = 0, end = 24, date, unavailableHours, unavailableHoursColor, styles, onBackgroundLongPress, onBackgroundLongPressOut, width, numberOfDays = 1, timelineLeftInset = 0 } = props;\n    const lastLongPressEventTime = useRef();\n    // const offset = this.calendarHeight / (end - start);\n    const offset = HOUR_BLOCK_HEIGHT;\n    const unavailableHoursBlocks = buildUnavailableHoursBlocks(unavailableHours, { dayStart: start, dayEnd: end });\n    const hours = useMemo(() => {\n        return range(start, end + 1).map(i => {\n            let timeText;\n            if (i === start) {\n                timeText = '';\n            }\n            else if (i < 12) {\n                timeText = !format24h ? `${i} AM` : `${i}:00`;\n            }\n            else if (i === 12) {\n                timeText = !format24h ? `${i} PM` : `${i}:00`;\n            }\n            else if (i === 24) {\n                timeText = !format24h ? '12 AM' : '23:59';\n            }\n            else {\n                timeText = !format24h ? `${i - 12} PM` : `${i}:00`;\n            }\n            return { timeText, time: i };\n        });\n    }, [start, end, format24h]);\n    const handleBackgroundPress = useCallback(event => {\n        const yPosition = event.nativeEvent.locationY;\n        const xPosition = event.nativeEvent.locationX;\n        const { hour, minutes } = calcTimeByPosition(yPosition, HOUR_BLOCK_HEIGHT);\n        const dateByPosition = calcDateByPosition(xPosition, timelineLeftInset, numberOfDays, date);\n        lastLongPressEventTime.current = { hour, minutes, date: dateByPosition };\n        const timeString = buildTimeString(hour, minutes, dateByPosition);\n        onBackgroundLongPress?.(timeString, lastLongPressEventTime.current);\n    }, [onBackgroundLongPress, date]);\n    const handlePressOut = useCallback(() => {\n        if (lastLongPressEventTime.current) {\n            const { hour, minutes, date } = lastLongPressEventTime.current;\n            const timeString = buildTimeString(hour, minutes, date);\n            onBackgroundLongPressOut?.(timeString, lastLongPressEventTime.current);\n            lastLongPressEventTime.current = undefined;\n        }\n    }, [onBackgroundLongPressOut, date]);\n    return (<>\n      <TouchableWithoutFeedback onLongPress={handleBackgroundPress} onPressOut={handlePressOut}>\n        <View style={StyleSheet.absoluteFillObject}/>\n      </TouchableWithoutFeedback>\n      {unavailableHoursBlocks.map((block, index) => (<View key={index} style={[\n                styles.unavailableHoursBlock,\n                block,\n                unavailableHoursColor ? { backgroundColor: unavailableHoursColor } : undefined,\n                { left: timelineLeftInset }\n            ]}></View>))}\n\n      {hours.map(({ timeText, time }, index) => {\n            return (<React.Fragment key={time}>\n            <Text key={`timeLabel${time}`} style={[styles.timeLabel, { top: offset * index - 6, width: timelineLeftInset - 16 }]}>\n              {timeText}\n            </Text>\n            {time === start ? null : (<View key={`line${time}`} style={[styles.line, { top: offset * index, width: dimensionWidth - EVENT_DIFF, left: timelineLeftInset - 16 }]}/>)}\n            {<View key={`lineHalf${time}`} style={[styles.line, { top: offset * (index + 0.5), width: dimensionWidth - EVENT_DIFF, left: timelineLeftInset - 16 }]}/>}\n          </React.Fragment>);\n        })}\n      {times(numberOfDays, (index) => <View key={index} style={[styles.verticalLine, { right: (index + 1) * width / numberOfDays }]}/>)}\n    </>);\n};\nexport default React.memo(TimelineHours);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}