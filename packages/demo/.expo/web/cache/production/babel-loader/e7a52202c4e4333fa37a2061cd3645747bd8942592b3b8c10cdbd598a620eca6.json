{"ast":null,"code":"'use strict';import{useRef}from'react';import{useSharedValue}from'./useSharedValue';import{getShadowNodeWrapperFromRef}from'../fabricUtils';import{makeShareableCloneRecursive,registerShareableMapping}from'../shareables';import Platform from\"react-native-web/dist/exports/Platform\";import findNodeHandle from\"react-native-web/dist/exports/findNodeHandle\";import{isFabric}from'../PlatformChecker';var IS_FABRIC=isFabric();function getComponentOrScrollable(component){if(IS_FABRIC&&component.getNativeScrollRef){return component.getNativeScrollRef();}else if(!IS_FABRIC&&component.getScrollableNode){return component.getScrollableNode();}return component;}var getTagValueFunction=IS_FABRIC?getShadowNodeWrapperFromRef:findNodeHandle;var _worklet_10709902486534_init_data={code:\"function anonymous(){const{tag,viewName}=this.__closure;const f=function(){return tag.value;};f.viewName=viewName;return f;}\"};export function useAnimatedRef(){var tag=useSharedValue(-1);var viewName=useSharedValue(null);var ref=useRef();if(!ref.current){var fun=function fun(component){if(component){tag.value=getTagValueFunction(getComponentOrScrollable(component));fun.current=component;if(\"web\"==='ios'&&!IS_FABRIC){var _viewConfig;viewName.value=(component===null||component===void 0?void 0:(_viewConfig=component.viewConfig)===null||_viewConfig===void 0?void 0:_viewConfig.uiViewClassName)||'RCTView';}}return tag.value;};fun.current=null;var remoteRef=makeShareableCloneRecursive({__init:function(){var anonymous=function anonymous(){var f=function f(){return tag.value;};f.viewName=viewName;return f;};anonymous.__closure={tag:tag,viewName:viewName};anonymous.__workletHash=10709902486534;anonymous.__initData=_worklet_10709902486534_init_data;return anonymous;}()});registerShareableMapping(fun,remoteRef);ref.current=fun;}return ref.current;}","map":{"version":3,"names":["useRef","useSharedValue","getShadowNodeWrapperFromRef","makeShareableCloneRecursive","registerShareableMapping","Platform","findNodeHandle","isFabric","IS_FABRIC","getComponentOrScrollable","component","getNativeScrollRef","getScrollableNode","getTagValueFunction","_worklet_10709902486534_init_data","code","useAnimatedRef","tag","viewName","ref","current","fun","value","_viewConfig","viewConfig","uiViewClassName","remoteRef","__init","anonymous","f","__closure","__workletHash","__initData"],"sources":["/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/hook/useAnimatedRef.ts"],"sourcesContent":["'use strict';\nimport type { Component } from 'react';\nimport { useRef } from 'react';\nimport { useSharedValue } from './useSharedValue';\nimport type { AnimatedRef } from './commonTypes';\nimport type { ShadowNodeWrapper } from '../commonTypes';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport {\n  makeShareableCloneRecursive,\n  registerShareableMapping,\n} from '../shareables';\nimport { Platform, findNodeHandle } from 'react-native';\nimport { isFabric } from '../PlatformChecker';\n\nconst IS_FABRIC = isFabric();\n\ninterface MaybeScrollableComponent extends Component {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getNativeScrollRef?: any;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getScrollableNode?: any;\n  viewConfig?: {\n    uiViewClassName?: string;\n  };\n}\n\nfunction getComponentOrScrollable(component: MaybeScrollableComponent) {\n  if (IS_FABRIC && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!IS_FABRIC && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\n\nconst getTagValueFunction = IS_FABRIC\n  ? getShadowNodeWrapperFromRef\n  : findNodeHandle;\n\n/**\n * Lets you get a reference of a view that you can use inside a worklet.\n *\n * @returns An object with a `.current` property which contains an instance of a component.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/useAnimatedRef\n */\nexport function useAnimatedRef<\n  TComponent extends Component\n>(): AnimatedRef<TComponent> {\n  const tag = useSharedValue<number | ShadowNodeWrapper | null>(-1);\n  const viewName = useSharedValue<string | null>(null);\n\n  const ref = useRef<AnimatedRef<TComponent>>();\n\n  if (!ref.current) {\n    const fun: AnimatedRef<TComponent> = <AnimatedRef<TComponent>>((\n      component\n    ) => {\n      // enters when ref is set by attaching to a component\n      if (component) {\n        tag.value = getTagValueFunction(getComponentOrScrollable(component));\n        fun.current = component;\n        // viewName is required only on iOS with Paper\n        if (Platform.OS === 'ios' && !IS_FABRIC) {\n          viewName.value =\n            (component as MaybeScrollableComponent)?.viewConfig\n              ?.uiViewClassName || 'RCTView';\n        }\n      }\n      return tag.value;\n    });\n\n    fun.current = null;\n\n    const remoteRef = makeShareableCloneRecursive({\n      __init: () => {\n        'worklet';\n        const f = () => tag.value;\n        f.viewName = viewName;\n        return f;\n      },\n    });\n    registerShareableMapping(fun, remoteRef);\n    ref.current = fun;\n  }\n\n  return ref.current;\n}\n"],"mappings":"AAAA,YAAY,CAEZ,OAASA,MAAM,KAAQ,OAAO,CAC9B,OAASC,cAAc,KAAQ,kBAAkB,CAGjD,OAASC,2BAA2B,KAAQ,gBAAgB,CAC5D,OACEC,2BAA2B,CAC3BC,wBAAwB,KACnB,eAAe,QAAAC,QAAA,qDAAAC,cAAA,oDAEtB,OAASC,QAAQ,KAAQ,oBAAoB,CAE7C,GAAM,CAAAC,SAAS,CAAGD,QAAQ,EAAE,CAY5B,QAAS,CAAAE,wBAAwBA,CAACC,SAAmC,CAAE,CACrE,GAAIF,SAAS,EAAIE,SAAS,CAACC,kBAAkB,CAAE,CAC7C,MAAO,CAAAD,SAAS,CAACC,kBAAkB,EAAE,CACvC,CAAC,IAAM,IAAI,CAACH,SAAS,EAAIE,SAAS,CAACE,iBAAiB,CAAE,CACpD,MAAO,CAAAF,SAAS,CAACE,iBAAiB,EAAE,CACtC,CACA,MAAO,CAAAF,SAAS,CAClB,CAEA,GAAM,CAAAG,mBAAmB,CAAGL,SAAS,CACjCN,2BAA2B,CAC3BI,cAAc,KAAAQ,iCAAA,EAAAC,IAAA,iIAQlB,MAAO,SAAS,CAAAC,cAAcA,CAAA,CAED,CAC3B,GAAM,CAAAC,GAAG,CAAGhB,cAAc,CAAoC,CAAC,CAAC,CAAC,CACjE,GAAM,CAAAiB,QAAQ,CAAGjB,cAAc,CAAgB,IAAI,CAAC,CAEpD,GAAM,CAAAkB,GAAG,CAAGnB,MAAM,EAA2B,CAE7C,GAAI,CAACmB,GAAG,CAACC,OAAO,CAAE,CAChB,GAAM,CAAAC,GAA4B,CAChC,QADI,CAAAA,GAA4BA,CAChCX,SAAS,CACN,CAEH,GAAIA,SAAS,CAAE,CACbO,GAAG,CAACK,KAAK,CAAGT,mBAAmB,CAACJ,wBAAwB,CAACC,SAAS,CAAC,CAAC,CACpEW,GAAG,CAACD,OAAO,CAAGV,SAAS,CAEvB,GAAI,QAAgB,KAAK,EAAI,CAACF,SAAS,CAAE,KAAAe,WAAA,CACvCL,QAAQ,CAACI,KAAK,CACZ,CAACZ,SAAS,SAATA,SAAS,kBAAAa,WAAA,CAATb,SAAS,CAA+Bc,UAAU,UAAAD,WAAA,iBAAnDA,WAAA,CACIE,eAAe,GAAI,SAAS,CACpC,CACF,CACA,MAAO,CAAAR,GAAG,CAACK,KAAK,CAClB,CAAE,CAEFD,GAAG,CAACD,OAAO,CAAG,IAAI,CAElB,GAAM,CAAAM,SAAS,CAAGvB,2BAA2B,CAAC,CAC5CwB,MAAM,CAAE,eAAAC,SAAA,UAAAA,UAAA,CAAM,CAEZ,GAAM,CAAAC,CAAC,CAAG,QAAJ,CAAAA,CAACA,CAAA,QAAS,CAAAZ,GAAG,CAACK,KAAK,GACzBO,CAAC,CAACX,QAAQ,CAAGA,QAAQ,CACrB,MAAO,CAAAW,CAAC,CACV,EAAAD,SAAA,CAAAE,SAAA,EAAAb,GAAA,CAHkBA,GAAG,CAAAC,QAAA,CACNA,QAAQ,EAAAU,SAAA,CAAAG,aAAA,gBAAAH,SAAA,CAAAI,UAAA,CAAAlB,iCAAA,QAAAc,SAAA,EAHf,EAMV,CAAC,CAAC,CACFxB,wBAAwB,CAACiB,GAAG,CAAEK,SAAS,CAAC,CACxCP,GAAG,CAACC,OAAO,CAAGC,GAAG,CACnB,CAEA,MAAO,CAAAF,GAAG,CAACC,OAAO,CACpB"},"metadata":{},"sourceType":"module","externalDependencies":[]}