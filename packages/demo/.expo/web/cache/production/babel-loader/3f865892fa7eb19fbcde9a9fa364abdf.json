{"ast":null,"code":"'use strict';import{Animations,TransitionType,WebEasings}from'./config';import{convertTransformToString}from'./animationParser';import{TransitionGenerator}from'./createAnimation';import{scheduleAnimationCleanup}from'./domUtils';import{_updatePropsJS}from'../../js-reanimated';import{ReduceMotion}from'../../commonTypes';import{useReducedMotion}from'../../hook/useReducedMotion';import{LayoutAnimationType}from'../animationBuilder/commonTypes';function getEasingFromConfig(config){var easingName=config.easingV!==undefined&&config.easingV.name in WebEasings?config.easingV.name:'linear';return`cubic-bezier(${WebEasings[easingName].toString()})`;}function getRandomDelay(){var maxDelay=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1000;return Math.floor(Math.random()*(maxDelay+1))/1000;}function getDelayFromConfig(config){var shouldRandomizeDelay=config.randomizeDelay;var delay=shouldRandomizeDelay?getRandomDelay():0;if(!config.delayV){return delay;}return shouldRandomizeDelay?getRandomDelay(config.delayV):config.delayV/1000;}export function getReducedMotionFromConfig(config){if(!config.reduceMotionV){return useReducedMotion();}switch(config.reduceMotionV){case ReduceMotion.Never:return false;case ReduceMotion.Always:return true;default:return useReducedMotion();}}function getDurationFromConfig(config,isLayoutTransition,animationName){var defaultDuration=isLayoutTransition?0.3:Animations[animationName].duration;return config.durationV!==undefined?config.durationV/1000:defaultDuration;}function getCallbackFromConfig(config){return config.callbackV!==undefined?config.callbackV:null;}function getReversedFromConfig(config){return!!config.reversed;}export function extractTransformFromStyle(style){if(!style){return;}if(typeof style.transform==='string'){throw new Error('[Reanimated] String transform is currently unsupported.');}if(!Array.isArray(style)){return style.transform;}for(var i=style.length-1;i>=0;--i){if(style[i].transform){return style[i].transform;}}}export function getProcessedConfig(animationName,animationType,config,initialAnimationName){return{animationName:animationName,animationType:animationType,duration:getDurationFromConfig(config,animationType===LayoutAnimationType.LAYOUT,initialAnimationName),delay:getDelayFromConfig(config),easing:getEasingFromConfig(config),callback:getCallbackFromConfig(config),reversed:getReversedFromConfig(config)};}export function makeElementVisible(element,delay){if(delay===0){_updatePropsJS({visibility:'initial'},{_component:element});}else{setTimeout(function(){_updatePropsJS({visibility:'initial'},{_component:element});},delay*1000);}}export function setElementAnimation(element,animationConfig,existingTransform){var animationName=animationConfig.animationName,duration=animationConfig.duration,delay=animationConfig.delay,easing=animationConfig.easing;element.style.animationName=animationName;element.style.animationDuration=`${duration}s`;element.style.animationDelay=`${delay}s`;element.style.animationTimingFunction=easing;element.onanimationend=function(){var _animationConfig$call;(_animationConfig$call=animationConfig.callback)===null||_animationConfig$call===void 0?void 0:_animationConfig$call.call(animationConfig,true);element.removeEventListener('animationcancel',animationCancelHandler);};var animationCancelHandler=function animationCancelHandler(){var _animationConfig$call2;(_animationConfig$call2=animationConfig.callback)===null||_animationConfig$call2===void 0?void 0:_animationConfig$call2.call(animationConfig,false);element.removeEventListener('animationcancel',animationCancelHandler);};element.onanimationstart=function(){if(animationConfig.animationType===LayoutAnimationType.ENTERING){_updatePropsJS({visibility:'initial'},{_component:element});}element.addEventListener('animationcancel',animationCancelHandler);element.style.transform=convertTransformToString(existingTransform);};scheduleAnimationCleanup(animationName,duration+delay);}export function handleLayoutTransition(element,animationConfig,transitionData,existingTransform){var animationName=animationConfig.animationName;var animationType;switch(animationName){case'LinearTransition':animationType=TransitionType.LINEAR;break;case'SequencedTransition':animationType=TransitionType.SEQUENCED;break;case'FadingTransition':animationType=TransitionType.FADING;break;default:animationType=TransitionType.LINEAR;break;}animationConfig.animationName=TransitionGenerator(animationType,transitionData,existingTransform);var transformCopy=existingTransform?structuredClone(existingTransform):[];transformCopy.push(transitionData);element.style.transform=convertTransformToString(transformCopy);setElementAnimation(element,animationConfig,existingTransform);}export function handleExitingAnimation(element,animationConfig){var parent=element.offsetParent;var dummy=element.cloneNode();element.style.animationName='';element.style.visibility='hidden';while(element.firstChild){dummy.appendChild(element.firstChild);}setElementAnimation(dummy,animationConfig);parent===null||parent===void 0?void 0:parent.appendChild(dummy);dummy.style.position='absolute';dummy.style.top=`${element.offsetTop}px`;dummy.style.left=`${element.offsetLeft}px`;dummy.style.margin='0px';var originalOnAnimationEnd=dummy.onanimationend;dummy.onanimationend=function(event){if(parent!==null&&parent!==void 0&&parent.contains(dummy)){parent.removeChild(dummy);}originalOnAnimationEnd===null||originalOnAnimationEnd===void 0?void 0:originalOnAnimationEnd.call(this,event);};}","map":{"version":3,"sources":["componentUtils.ts"],"names":["Animations","TransitionType","WebEasings","convertTransformToString","TransitionGenerator","scheduleAnimationCleanup","_updatePropsJS","ReduceMotion","useReducedMotion","LayoutAnimationType","getEasingFromConfig","config","easingName","easingV","undefined","name","toString","getRandomDelay","maxDelay","Math","floor","random","getDelayFromConfig","shouldRandomizeDelay","randomizeDelay","delay","delayV","getReducedMotionFromConfig","reduceMotionV","Never","Always","getDurationFromConfig","isLayoutTransition","animationName","defaultDuration","duration","durationV","getCallbackFromConfig","callbackV","getReversedFromConfig","reversed","extractTransformFromStyle","style","transform","Error","Array","isArray","i","length","getProcessedConfig","animationType","initialAnimationName","LAYOUT","easing","callback","makeElementVisible","element","visibility","_component","setTimeout","setElementAnimation","animationConfig","existingTransform","animationDuration","animationDelay","animationTimingFunction","onanimationend","removeEventListener","animationCancelHandler","onanimationstart","ENTERING","addEventListener","handleLayoutTransition","transitionData","LINEAR","SEQUENCED","FADING","transformCopy","structuredClone","push","handleExitingAnimation","parent","offsetParent","dummy","cloneNode","firstChild","appendChild","position","top","offsetTop","left","offsetLeft","margin","originalOnAnimationEnd","event","contains","removeChild","call"],"mappings":"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","sourcesContent":["'use strict';\n\nimport type { TransformsStyle } from 'react-native';\nimport { Animations, TransitionType, WebEasings } from './config';\nimport type {\n  AnimationCallback,\n  AnimationConfig,\n  AnimationNames,\n  CustomConfig,\n  WebEasingsNames,\n} from './config';\nimport { convertTransformToString } from './animationParser';\nimport type { TransitionData } from './animationParser';\nimport { TransitionGenerator } from './createAnimation';\nimport { scheduleAnimationCleanup } from './domUtils';\nimport { _updatePropsJS } from '../../js-reanimated';\nimport type { ReanimatedHTMLElement } from '../../js-reanimated';\nimport { ReduceMotion } from '../../commonTypes';\nimport type { StyleProps } from '../../commonTypes';\nimport { useReducedMotion } from '../../hook/useReducedMotion';\nimport { LayoutAnimationType } from '../animationBuilder/commonTypes';\n\nfunction getEasingFromConfig(config: CustomConfig): string {\n  const easingName = (\n    config.easingV !== undefined &&\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    config.easingV!.name in WebEasings\n      ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        config.easingV!.name\n      : 'linear'\n  ) as WebEasingsNames;\n\n  return `cubic-bezier(${WebEasings[easingName].toString()})`;\n}\n\nfunction getRandomDelay(maxDelay = 1000) {\n  return Math.floor(Math.random() * (maxDelay + 1)) / 1000;\n}\n\nfunction getDelayFromConfig(config: CustomConfig): number {\n  const shouldRandomizeDelay = config.randomizeDelay;\n\n  const delay = shouldRandomizeDelay ? getRandomDelay() : 0;\n\n  if (!config.delayV) {\n    return delay;\n  }\n\n  return shouldRandomizeDelay\n    ? getRandomDelay(config.delayV)\n    : // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      config.delayV! / 1000;\n}\n\nexport function getReducedMotionFromConfig(config: CustomConfig) {\n  if (!config.reduceMotionV) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    return useReducedMotion();\n  }\n\n  switch (config.reduceMotionV) {\n    case ReduceMotion.Never:\n      return false;\n    case ReduceMotion.Always:\n      return true;\n    default:\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      return useReducedMotion();\n  }\n}\n\nfunction getDurationFromConfig(\n  config: CustomConfig,\n  isLayoutTransition: boolean,\n  animationName: AnimationNames\n): number {\n  const defaultDuration = isLayoutTransition\n    ? 0.3\n    : Animations[animationName].duration;\n\n  return config.durationV !== undefined\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      config.durationV! / 1000\n    : defaultDuration;\n}\n\nfunction getCallbackFromConfig(config: CustomConfig): AnimationCallback {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  return config.callbackV !== undefined ? config.callbackV! : null;\n}\n\nfunction getReversedFromConfig(config: CustomConfig) {\n  return !!config.reversed;\n}\n\nexport function extractTransformFromStyle(style: StyleProps) {\n  if (!style) {\n    return;\n  }\n\n  if (typeof style.transform === 'string') {\n    throw new Error('[Reanimated] String transform is currently unsupported.');\n  }\n\n  if (!Array.isArray(style)) {\n    return style.transform;\n  }\n\n  // Only last transform should be considered\n  for (let i = style.length - 1; i >= 0; --i) {\n    if (style[i].transform) {\n      return style[i].transform;\n    }\n  }\n}\n\nexport function getProcessedConfig(\n  animationName: string,\n  animationType: LayoutAnimationType,\n  config: CustomConfig,\n  initialAnimationName: AnimationNames\n): AnimationConfig {\n  return {\n    animationName: animationName,\n    animationType: animationType,\n    duration: getDurationFromConfig(\n      config,\n      animationType === LayoutAnimationType.LAYOUT,\n      initialAnimationName\n    ),\n    delay: getDelayFromConfig(config),\n    easing: getEasingFromConfig(config),\n    callback: getCallbackFromConfig(config),\n    reversed: getReversedFromConfig(config),\n  };\n}\n\nexport function makeElementVisible(element: HTMLElement, delay: number) {\n  if (delay === 0) {\n    _updatePropsJS(\n      { visibility: 'initial' },\n      { _component: element as ReanimatedHTMLElement }\n    );\n  } else {\n    setTimeout(() => {\n      _updatePropsJS(\n        { visibility: 'initial' },\n        { _component: element as ReanimatedHTMLElement }\n      );\n    }, delay * 1000);\n  }\n}\n\nexport function setElementAnimation(\n  element: HTMLElement,\n  animationConfig: AnimationConfig,\n  existingTransform?: TransformsStyle['transform']\n) {\n  const { animationName, duration, delay, easing } = animationConfig;\n\n  element.style.animationName = animationName;\n  element.style.animationDuration = `${duration}s`;\n  element.style.animationDelay = `${delay}s`;\n  element.style.animationTimingFunction = easing;\n\n  element.onanimationend = () => {\n    animationConfig.callback?.(true);\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n\n  const animationCancelHandler = () => {\n    animationConfig.callback?.(false);\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n\n  // Here we have to use `addEventListener` since element.onanimationcancel doesn't work on chrome\n  element.onanimationstart = () => {\n    if (animationConfig.animationType === LayoutAnimationType.ENTERING) {\n      _updatePropsJS(\n        { visibility: 'initial' },\n        { _component: element as ReanimatedHTMLElement }\n      );\n    }\n\n    element.addEventListener('animationcancel', animationCancelHandler);\n    element.style.transform = convertTransformToString(existingTransform);\n  };\n\n  scheduleAnimationCleanup(animationName, duration + delay);\n}\n\nexport function handleLayoutTransition(\n  element: HTMLElement,\n  animationConfig: AnimationConfig,\n  transitionData: TransitionData,\n  existingTransform: TransformsStyle['transform'] | undefined\n) {\n  const { animationName } = animationConfig;\n\n  let animationType;\n\n  switch (animationName) {\n    case 'LinearTransition':\n      animationType = TransitionType.LINEAR;\n      break;\n    case 'SequencedTransition':\n      animationType = TransitionType.SEQUENCED;\n      break;\n    case 'FadingTransition':\n      animationType = TransitionType.FADING;\n      break;\n    default:\n      animationType = TransitionType.LINEAR;\n      break;\n  }\n\n  animationConfig.animationName = TransitionGenerator(\n    animationType,\n    transitionData,\n    existingTransform\n  );\n\n  const transformCopy = existingTransform\n    ? structuredClone(existingTransform)\n    : [];\n\n  // @ts-ignore `existingTransform` cannot be string because in that case\n  // we throw error in `extractTransformFromStyle`\n  transformCopy.push(transitionData);\n  element.style.transform = convertTransformToString(transformCopy);\n\n  setElementAnimation(element, animationConfig, existingTransform);\n}\n\nexport function handleExitingAnimation(\n  element: HTMLElement,\n  animationConfig: AnimationConfig\n) {\n  const parent = element.offsetParent;\n  const dummy = element.cloneNode() as HTMLElement;\n\n  element.style.animationName = '';\n  element.style.visibility = 'hidden';\n\n  // After cloning the element, we want to move all children from original element to its clone. This is because original element\n  // will be unmounted, therefore when this code executes in child component, parent will be either empty or removed soon.\n  // Using element.cloneNode(true) doesn't solve the problem, because it creates copy of children and we won't be able to set their animations\n  //\n  // This loop works because appendChild() moves element into its new parent instead of copying it\n  while (element.firstChild) {\n    dummy.appendChild(element.firstChild);\n  }\n\n  setElementAnimation(dummy, animationConfig);\n  parent?.appendChild(dummy);\n\n  // We hide current element so only its copy with proper animation will be displayed\n\n  dummy.style.position = 'absolute';\n  dummy.style.top = `${element.offsetTop}px`;\n  dummy.style.left = `${element.offsetLeft}px`;\n  dummy.style.margin = '0px'; // tmpElement has absolute position, so margin is not necessary\n\n  const originalOnAnimationEnd = dummy.onanimationend;\n\n  dummy.onanimationend = function (event: AnimationEvent) {\n    if (parent?.contains(dummy)) {\n      parent.removeChild(dummy);\n    }\n\n    // Given that this function overrides onAnimationEnd, it won't be null\n    originalOnAnimationEnd?.call(this, event);\n  };\n}\n"]},"metadata":{},"sourceType":"module"}