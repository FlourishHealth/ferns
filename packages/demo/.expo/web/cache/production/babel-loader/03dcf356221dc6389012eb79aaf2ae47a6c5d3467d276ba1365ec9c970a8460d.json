{"ast":null,"code":"'use strict';import{SLOPE_FACTOR,VELOCITY_EPS}from'./utils';var DERIVATIVE_EPS=0.1;var _worklet_5745456064385_init_data={code:\"function rubberBandDecay(animation,now,config){const{SLOPE_FACTOR,DERIVATIVE_EPS,VELOCITY_EPS}=this.__closure;const{lastTimestamp:lastTimestamp,startTimestamp:startTimestamp,current:current,velocity:velocity}=animation;const deltaTime=Math.min(now-lastTimestamp,64);const clampIndex=Math.abs(current-config.clamp[0])<Math.abs(current-config.clamp[1])?0:1;let derivative=0;if(current<config.clamp[0]||current>config.clamp[1]){derivative=current-config.clamp[clampIndex];}const v=velocity*Math.exp(-(1-config.deceleration)*(now-startTimestamp)*SLOPE_FACTOR)-derivative*config.rubberBandFactor;if(Math.abs(derivative)>DERIVATIVE_EPS){animation.springActive=true;}else if(animation.springActive){animation.current=config.clamp[clampIndex];return true;}else if(Math.abs(v)<VELOCITY_EPS){return true;}animation.current=current+v*config.velocityFactor*deltaTime/1000;animation.velocity=v;animation.lastTimestamp=now;return false;}\"};export var rubberBandDecay=function(){var rubberBandDecay=function rubberBandDecay(animation,now,config){var lastTimestamp=animation.lastTimestamp,startTimestamp=animation.startTimestamp,current=animation.current,velocity=animation.velocity;var deltaTime=Math.min(now-lastTimestamp,64);var clampIndex=Math.abs(current-config.clamp[0])<Math.abs(current-config.clamp[1])?0:1;var derivative=0;if(current<config.clamp[0]||current>config.clamp[1]){derivative=current-config.clamp[clampIndex];}var v=velocity*Math.exp(-(1-config.deceleration)*(now-startTimestamp)*SLOPE_FACTOR)-derivative*config.rubberBandFactor;if(Math.abs(derivative)>DERIVATIVE_EPS){animation.springActive=true;}else if(animation.springActive){animation.current=config.clamp[clampIndex];return true;}else if(Math.abs(v)<VELOCITY_EPS){return true;}animation.current=current+v*config.velocityFactor*deltaTime/1000;animation.velocity=v;animation.lastTimestamp=now;return false;};rubberBandDecay.__closure={SLOPE_FACTOR:SLOPE_FACTOR,DERIVATIVE_EPS:DERIVATIVE_EPS,VELOCITY_EPS:VELOCITY_EPS};rubberBandDecay.__workletHash=5745456064385;rubberBandDecay.__initData=_worklet_5745456064385_init_data;return rubberBandDecay;}();","map":{"version":3,"names":["SLOPE_FACTOR","VELOCITY_EPS","DERIVATIVE_EPS","_worklet_5745456064385_init_data","code","rubberBandDecay","animation","now","config","lastTimestamp","startTimestamp","current","velocity","deltaTime","Math","min","clampIndex","abs","clamp","derivative","v","exp","deceleration","rubberBandFactor","springActive","velocityFactor","__closure","__workletHash","__initData"],"sources":["/Users/josh/src/ui/node_modules/react-native-reanimated/lib/module/reanimated2/animation/decay/rubberBandDecay.ts"],"sourcesContent":["'use strict';\nimport type { RubberBandDecayConfig, InnerDecayAnimation } from './utils';\nimport { SLOPE_FACTOR, VELOCITY_EPS } from './utils';\n\nconst DERIVATIVE_EPS = 0.1;\n\nexport function rubberBandDecay(\n  animation: InnerDecayAnimation,\n  now: number,\n  config: RubberBandDecayConfig\n): boolean {\n  'worklet';\n  const { lastTimestamp, startTimestamp, current, velocity } = animation;\n\n  const deltaTime = Math.min(now - lastTimestamp, 64);\n  const clampIndex =\n    Math.abs(current - config.clamp[0]) < Math.abs(current - config.clamp[1])\n      ? 0\n      : 1;\n\n  let derivative = 0;\n  if (current < config.clamp[0] || current > config.clamp[1]) {\n    derivative = current - config.clamp[clampIndex];\n  }\n\n  const v =\n    velocity *\n      Math.exp(\n        -(1 - config.deceleration) * (now - startTimestamp) * SLOPE_FACTOR\n      ) -\n    derivative * config.rubberBandFactor;\n\n  if (Math.abs(derivative) > DERIVATIVE_EPS) {\n    animation.springActive = true;\n  } else if (animation.springActive) {\n    animation.current = config.clamp[clampIndex];\n    return true;\n  } else if (Math.abs(v) < VELOCITY_EPS) {\n    return true;\n  }\n\n  animation.current = current + (v * config.velocityFactor * deltaTime) / 1000;\n  animation.velocity = v;\n  animation.lastTimestamp = now;\n  return false;\n}\n"],"mappings":"AAAA,YAAY,CAEZ,OAASA,YAAY,CAAEC,YAAY,KAAQ,SAAS,CAEpD,GAAM,CAAAC,cAAc,CAAG,GAAG,KAAAC,gCAAA,EAAAC,IAAA,g6BAE1B,UAAgB,CAAAC,eAAe,CAAxB,eAAAA,eAAA,UAAAA,gBACLC,SAA8B,CAC9BC,GAAW,CACXC,MAA6B,CACpB,CAET,GAAQ,CAAAC,aAAa,CAAwCH,SAAS,CAA9DG,aAAa,CAAEC,cAAc,CAAwBJ,SAAS,CAA/CI,cAAc,CAAEC,OAAO,CAAeL,SAAS,CAA/BK,OAAO,CAAEC,QAAA,CAAaN,SAAS,CAAtBM,QAAA,CAEhD,GAAM,CAAAC,SAAS,CAAGC,IAAI,CAACC,GAAG,CAACR,GAAG,CAAGE,aAAa,CAAE,EAAE,CAAC,CACnD,GAAM,CAAAO,UAAU,CACdF,IAAI,CAACG,GAAG,CAACN,OAAO,CAAGH,MAAM,CAACU,KAAK,CAAC,CAAC,CAAC,CAAC,CAAGJ,IAAI,CAACG,GAAG,CAACN,OAAO,CAAGH,MAAM,CAACU,KAAK,CAAC,CAAC,CAAC,CAAC,CACrE,CAAC,CACD,CAAC,CAEP,GAAI,CAAAC,UAAU,CAAG,CAAC,CAClB,GAAIR,OAAO,CAAGH,MAAM,CAACU,KAAK,CAAC,CAAC,CAAC,EAAIP,OAAO,CAAGH,MAAM,CAACU,KAAK,CAAC,CAAC,CAAC,CAAE,CAC1DC,UAAU,CAAGR,OAAO,CAAGH,MAAM,CAACU,KAAK,CAACF,UAAU,CAAC,CACjD,CAEA,GAAM,CAAAI,CAAC,CACLR,QAAQ,CACNE,IAAI,CAACO,GAAG,CACN,EAAE,CAAC,CAAGb,MAAM,CAACc,YAAY,CAAC,EAAIf,GAAG,CAAGG,cAAc,CAAC,CAAGV,YAAY,CACnE,CACHmB,UAAU,CAAGX,MAAM,CAACe,gBAAgB,CAEtC,GAAIT,IAAI,CAACG,GAAG,CAACE,UAAU,CAAC,CAAGjB,cAAc,CAAE,CACzCI,SAAS,CAACkB,YAAY,CAAG,IAAI,CAC/B,CAAC,IAAM,IAAIlB,SAAS,CAACkB,YAAY,CAAE,CACjClB,SAAS,CAACK,OAAO,CAAGH,MAAM,CAACU,KAAK,CAACF,UAAU,CAAC,CAC5C,MAAO,KAAI,CACb,CAAC,IAAM,IAAIF,IAAI,CAACG,GAAG,CAACG,CAAC,CAAC,CAAGnB,YAAY,CAAE,CACrC,MAAO,KAAI,CACb,CAEAK,SAAS,CAACK,OAAO,CAAGA,OAAO,CAAIS,CAAC,CAAGZ,MAAM,CAACiB,cAAc,CAAGZ,SAAS,CAAI,IAAI,CAC5EP,SAAS,CAACM,QAAQ,CAAGQ,CAAC,CACtBd,SAAS,CAACG,aAAa,CAAGF,GAAG,CAC7B,MAAO,MAAK,CACd,EAAAF,eAAA,CAAAqB,SAAA,EAAA1B,YAAA,CAjB8DA,YAAY,CAAAE,cAAA,CAI7CA,cAAc,CAAAD,YAAA,CAKhBA,YAAY,EAAAI,eAAA,CAAAsB,aAAA,eAAAtB,eAAA,CAAAuB,UAAA,CAAAzB,gCAAA,QAAAE,eAAA,EA/BhC"},"metadata":{},"sourceType":"module","externalDependencies":[]}