{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import debounce from\"lodash/debounce\";import React,{useContext,useState}from\"react\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import Pressable from\"react-native-web/dist/exports/Pressable\";import View from\"react-native-web/dist/exports/View\";import{Box}from\"./Box\";import{Icon}from\"./Icon\";import{Modal}from\"./Modal\";import{Text}from\"./Text\";import{ThemeContext}from\"./Theme\";import{Tooltip}from\"./Tooltip\";import{Unifier}from\"./Unifier\";var buttonTextColor={blue:\"white\",lightGray:\"darkGray\",red:\"white\",transparent:\"white\",white:\"darkGray\",primary:\"white\",secondary:\"white\",accent:\"white\",tertiary:\"white\",facebook:\"white\",twitter:\"white\",google:\"white\"};var HEIGHTS={xs:30,sm:36,md:40,lg:48};export var Button=function Button(_ref){var alignSelf=_ref.alignSelf,_ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled,_ref$type=_ref.type,type=_ref$type===void 0?\"solid\":_ref$type,propsLoading=_ref.loading,text=_ref.text,_ref$inline=_ref.inline,inline=_ref$inline===void 0?false:_ref$inline,icon=_ref.icon,iconPrefix=_ref.iconPrefix,_ref$size=_ref.size,size=_ref$size===void 0?\"md\":_ref$size,onClick=_ref.onClick,_ref$color=_ref.color,color=_ref$color===void 0?\"gray\":_ref$color,_ref$withConfirmation=_ref.withConfirmation,withConfirmation=_ref$withConfirmation===void 0?false:_ref$withConfirmation,_ref$confirmationText=_ref.confirmationText,confirmationText=_ref$confirmationText===void 0?\"Are you sure you want to continue?\":_ref$confirmationText,_ref$confirmationHead=_ref.confirmationHeading,confirmationHeading=_ref$confirmationHead===void 0?\"Confirm\":_ref$confirmationHead,_ref$shape=_ref.shape,shape=_ref$shape===void 0?\"rounded\":_ref$shape,testID=_ref.testID,tooltip=_ref.tooltip;var _useState=useState(propsLoading),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showConfirmation=_useState4[0],setShowConfirmation=_useState4[1];var _useContext=useContext(ThemeContext),theme=_useContext.theme;var getBackgroundColor=function getBackgroundColor(backgroundColor){if(type===\"ghost\"||type===\"outline\"){return\"transparent\";}else{return theme[backgroundColor];}};var getTextColor=function getTextColor(textColor){if(type===\"ghost\"||type===\"outline\"){return textColor;}else if(textColor===undefined){return\"darkGray\";}else{return buttonTextColor[textColor]||\"white\";}};var getBorderColor=function getBorderColor(borderColor){if(type===\"outline\"){return theme[getTextColor(borderColor)];}else{return\"transparent\";}};if(color===\"gray\"){color=\"lightGray\";}var renderConfirmation=function renderConfirmation(){return React.createElement(Modal,{heading:confirmationHeading,primaryButtonOnClick:function primaryButtonOnClick(){onClick();setShowConfirmation(false);},primaryButtonText:\"Confirm\",secondaryButtonOnClick:function secondaryButtonOnClick(){return setShowConfirmation(false);},secondaryButtonText:\"Cancel\",size:\"sm\",visible:showConfirmation,onDismiss:function onDismiss(){setShowConfirmation(false);}},React.createElement(Text,null,confirmationText));};var renderButton=function renderButton(){return React.createElement(View,{style:{alignSelf:inline===true?undefined:alignSelf}},React.createElement(Pressable,{disabled:disabled||loading,style:{alignSelf:inline===true?undefined:\"stretch\",height:HEIGHTS[size||\"md\"],backgroundColor:getBackgroundColor(color),flexShrink:inline?1:0,alignItems:\"center\",justifyContent:\"center\",borderRadius:shape===\"pill\"?999:5,borderColor:getBorderColor(color),borderWidth:type===\"outline\"?2:0,opacity:disabled?0.4:1,flexDirection:\"row\",paddingHorizontal:size===\"xs\"?6:size===\"sm\"?12:8*2},testID:testID,onPress:debounce(_asyncToGenerator(function*(){yield Unifier.utils.haptic();setLoading(true);try{if(withConfirmation&&!showConfirmation){setShowConfirmation(true);}else if(onClick){yield onClick();}}catch(error){setLoading(false);throw error;}setLoading(false);}),500,{leading:true})},icon!==undefined&&(React.createElement(Box,{marginRight:2},React.createElement(Icon,{color:getTextColor(color),name:icon,prefix:iconPrefix||\"far\",size:size===\"xs\"?\"sm\":size}))),Boolean(text)&&(React.createElement(Text,{align:\"center\",color:getTextColor(color),font:\"button\",inline:inline,size:size===\"xs\"?\"sm\":size,skipLinking:true,weight:\"bold\"},text)),Boolean(loading)&&(React.createElement(Box,{marginLeft:2},React.createElement(ActivityIndicator,{color:getTextColor(color),size:\"small\"})))),Boolean(withConfirmation)&&renderConfirmation());};if(tooltip){return React.createElement(Tooltip,{idealDirection:tooltip.idealDirection,text:tooltip.text},renderButton());}else{return renderButton();}};","map":{"version":3,"sources":["../src/Button.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import debounce from \"lodash/debounce\";\nimport React, { useContext, useState } from \"react\";\nimport { ActivityIndicator, Pressable, View } from \"react-native\";\nimport { Box } from \"./Box\";\nimport { Icon } from \"./Icon\";\nimport { Modal } from \"./Modal\";\nimport { Text } from \"./Text\";\nimport { ThemeContext } from \"./Theme\";\nimport { Tooltip } from \"./Tooltip\";\nimport { Unifier } from \"./Unifier\";\nconst buttonTextColor = {\n    blue: \"white\",\n    lightGray: \"darkGray\",\n    red: \"white\",\n    transparent: \"white\",\n    white: \"darkGray\",\n    primary: \"white\",\n    secondary: \"white\",\n    accent: \"white\",\n    tertiary: \"white\",\n    facebook: \"white\",\n    twitter: \"white\",\n    google: \"white\",\n};\nconst HEIGHTS = {\n    xs: 30,\n    sm: 36,\n    md: 40,\n    lg: 48,\n};\nexport const Button = ({ alignSelf, disabled = false, type = \"solid\", loading: propsLoading, text, inline = false, icon, iconPrefix, size = \"md\", onClick, color = \"gray\", withConfirmation = false, confirmationText = \"Are you sure you want to continue?\", confirmationHeading = \"Confirm\", shape = \"rounded\", testID, tooltip, }) => {\n    const [loading, setLoading] = useState(propsLoading);\n    const [showConfirmation, setShowConfirmation] = useState(false);\n    const { theme } = useContext(ThemeContext);\n    const getBackgroundColor = (backgroundColor) => {\n        if (type === \"ghost\" || type === \"outline\") {\n            return \"transparent\";\n        }\n        else {\n            return theme[backgroundColor];\n        }\n    };\n    const getTextColor = (textColor) => {\n        if (type === \"ghost\" || type === \"outline\") {\n            return textColor;\n        }\n        else if (textColor === undefined) {\n            return \"darkGray\";\n        }\n        else {\n            return buttonTextColor[textColor] || \"white\";\n        }\n    };\n    const getBorderColor = (borderColor) => {\n        if (type === \"outline\") {\n            return theme[getTextColor(borderColor)];\n        }\n        else {\n            return \"transparent\";\n        }\n    };\n    if (color === \"gray\") {\n        color = \"lightGray\";\n    }\n    const renderConfirmation = () => {\n        return (React.createElement(Modal, { heading: confirmationHeading, primaryButtonOnClick: () => {\n                onClick();\n                setShowConfirmation(false);\n            }, primaryButtonText: \"Confirm\", secondaryButtonOnClick: () => setShowConfirmation(false), secondaryButtonText: \"Cancel\", size: \"sm\", visible: showConfirmation, onDismiss: () => {\n                setShowConfirmation(false);\n            } },\n            React.createElement(Text, null, confirmationText)));\n    };\n    const renderButton = () => {\n        return (React.createElement(View, { style: { alignSelf: inline === true ? undefined : alignSelf } },\n            React.createElement(Pressable, { disabled: disabled || loading, style: {\n                    alignSelf: inline === true ? undefined : \"stretch\",\n                    height: HEIGHTS[size || \"md\"],\n                    backgroundColor: getBackgroundColor(color),\n                    // width: inline === true ? undefined : \"100%\",\n                    flexShrink: inline ? 1 : 0,\n                    // flexGrow: inline ? 0 : 1,\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    borderRadius: shape === \"pill\" ? 999 : 5,\n                    borderColor: getBorderColor(color),\n                    borderWidth: type === \"outline\" ? 2 : 0,\n                    opacity: disabled ? 0.4 : 1,\n                    flexDirection: \"row\",\n                    paddingHorizontal: size === \"xs\" ? 6 : size === \"sm\" ? 12 : 8 * 2,\n                }, testID: testID, onPress: debounce(async () => {\n                    await Unifier.utils.haptic();\n                    setLoading(true);\n                    try {\n                        if (withConfirmation && !showConfirmation) {\n                            setShowConfirmation(true);\n                        }\n                        else if (onClick) {\n                            await onClick();\n                        }\n                    }\n                    catch (error) {\n                        setLoading(false);\n                        throw error;\n                    }\n                    setLoading(false);\n                }, 500, { leading: true }) },\n                icon !== undefined && (React.createElement(Box, { marginRight: 2 },\n                    React.createElement(Icon, { color: getTextColor(color), name: icon, prefix: iconPrefix || \"far\", size: size === \"xs\" ? \"sm\" : size }))),\n                Boolean(text) && (React.createElement(Text, { align: \"center\", color: getTextColor(color), font: \"button\", inline: inline, size: size === \"xs\" ? \"sm\" : size, skipLinking: true, weight: \"bold\" }, text)),\n                Boolean(loading) && (React.createElement(Box, { marginLeft: 2 },\n                    React.createElement(ActivityIndicator, { color: getTextColor(color), size: \"small\" })))),\n            Boolean(withConfirmation) && renderConfirmation()));\n    };\n    if (tooltip) {\n        return (React.createElement(Tooltip, { idealDirection: tooltip.idealDirection, text: tooltip.text }, renderButton()));\n    }\n    else {\n        return renderButton();\n    }\n};\n//# sourceMappingURL=Button.js.map"]},"metadata":{},"sourceType":"module"}