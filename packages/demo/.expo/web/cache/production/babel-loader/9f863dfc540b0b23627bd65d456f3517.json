{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols===\"function\")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t;};import React,{useContext,useImperativeHandle}from\"react\";import KeyboardAvoidingView from\"react-native-web/dist/exports/KeyboardAvoidingView\";import Platform from\"react-native-web/dist/exports/Platform\";import Pressable from\"react-native-web/dist/exports/Pressable\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import View from\"react-native-web/dist/exports/View\";import{ThemeContext}from\".\";import{SPACING}from\"./Common\";import{mediaQueryLargerThan}from\"./MediaQuery\";import{Unifier}from\"./Unifier\";var ALIGN_CONTENT={start:\"flex-start\",end:\"flex-end\",center:\"center\",between:\"space-between\",around:\"space-around\",stretch:\"stretch\"};var ALIGN_ITEMS={start:\"flex-start\",end:\"flex-end\",center:\"center\",baseline:\"baseline\",stretch:\"stretch\"};var ALIGN_SELF={auto:\"auto\",baseline:\"baseline\",start:\"flex-start\",end:\"flex-end\",center:\"center\",between:\"space-between\",around:\"space-around\",stretch:\"stretch\"};var BORDER_WIDTH=1;export var Box=React.forwardRef(function(props,ref){var _a;var _useContext=useContext(ThemeContext),theme=_useContext.theme;useImperativeHandle(ref,function(){return{scrollToEnd:function scrollToEnd(){if(scrollRef&&scrollRef.current){setTimeout(function(){scrollRef&&scrollRef.current&&scrollRef.current.scrollToEnd();},50);}},scrollTo:function scrollTo(y){if(scrollRef&&scrollRef.current){setTimeout(function(){scrollRef&&scrollRef.current&&scrollRef.current.scrollTo({y:y});},50);}}};});var BOX_STYLE_MAP={alignItems:function alignItems(value){return{alignItems:ALIGN_ITEMS[value]};},alignContent:function alignContent(value){return{alignContent:ALIGN_CONTENT[value]};},alignSelf:function alignSelf(value){return{alignSelf:ALIGN_SELF[value]};},color:function color(value){return{backgroundColor:theme[value]};},direction:function direction(value){return{flexDirection:value,display:\"flex\"};},smDirection:function smDirection(value){return mediaQueryLargerThan(\"sm\")?{flexDirection:value,display:\"flex\"}:{};},mdDirection:function mdDirection(value){return mediaQueryLargerThan(\"md\")?{flexDirection:value,display:\"flex\"}:{};},lgDirection:function lgDirection(value){return mediaQueryLargerThan(\"lg\")?{flexDirection:value,display:\"flex\"}:{};},display:function display(value){return value===\"flex\"?{flex:undefined}:{flex:0,flexDirection:\"row\"};},flex:function flex(value){if(value===\"grow\"){return{flexGrow:1,flexShrink:1,display:\"flex\"};}else if(value===\"shrink\"){return{flexShrink:1,display:\"flex\"};}else{return{flex:0,display:\"flex\"};}},justifyContent:function justifyContent(value){return{justifyContent:ALIGN_CONTENT[value]};},height:function height(value){if(props.border&&!isNaN(Number(value))){return{height:Number(value)+2*2};}else{return{height:value};}},margin:function margin(value){return{margin:value*SPACING};},marginRight:function marginRight(value){return{marginRight:value*SPACING};},marginLeft:function marginLeft(value){return{marginLeft:value*SPACING};},marginTop:function marginTop(value){return{marginTop:value*SPACING};},marginBottom:function marginBottom(value){return{marginBottom:value*SPACING};},paddingX:function paddingX(value){return{paddingLeft:value*SPACING,paddingRight:value*SPACING};},paddingY:function paddingY(value){return{paddingTop:value*SPACING,paddingBottom:value*SPACING};},padding:function padding(value){return{padding:value*SPACING};},zIndex:function zIndex(value){return{zIndex:value?value:undefined};},position:function position(value){return{position:value};},top:function top(_top){return{top:_top?0:undefined};},bottom:function bottom(_bottom){return{bottom:_bottom?0:undefined};},right:function right(_right){return{right:_right?0:undefined};},left:function left(_left){return{left:_left?0:undefined};},rounding:function rounding(_rounding,allProps){if(_rounding===\"circle\"){if(!allProps.height&&!allProps.width){console.warn(\"Cannot use Box rounding='circle' without height or width.\");return{borderRadius:undefined};}return{borderRadius:allProps.height||allProps.width};}if(_rounding===\"pill\"){return{borderRadius:999};}if(typeof _rounding===\"number\"){return{borderRadius:_rounding*4};}return{borderRadius:undefined};},overflow:function overflow(value){if(value===\"scrollY\"||value===\"scroll\"){return{overflow:\"scroll\"};}return{overflow:value};},width:function width(value){if(props.border&&!isNaN(Number(value))){return{width:Number(value)+2*2};}else{return{width:value};}},wrap:function wrap(value){return{flexWrap:value?\"wrap\":\"nowrap\",alignItems:\"flex-start\"};},shadow:function shadow(value){if(!value){return{};}if(\"web\"===\"ios\"||\"web\"===\"web\"){return{shadowColor:\"#999\",shadowOffset:{width:2,height:2},shadowRadius:2,shadowOpacity:1.0};}else{return{elevation:4};}},border:function border(value){if(!value){return{};}return{borderColor:theme[value],borderWidth:BORDER_WIDTH};},borderBottom:function borderBottom(value){if(!value){return{};}return{borderBottomColor:theme[value],borderBottomWidth:BORDER_WIDTH};},borderTop:function borderTop(value){if(!value){return{};}return{borderTopColor:theme[value],borderTopWidth:BORDER_WIDTH};},borderRight:function borderRight(value){if(!value){return{};}return{borderRightColor:theme[value],borderRightWidth:BORDER_WIDTH};},borderLeft:function borderLeft(value){if(!value){return{};}return{borderLeftColor:theme[value],borderLeftWidth:BORDER_WIDTH};}};var scrollRef=(_a=props.scrollRef)!==null&&_a!==void 0?_a:React.createRef();var propsToStyle=function propsToStyle(){var style={};for(var prop of Object.keys(props)){var value=props[prop];if(BOX_STYLE_MAP[prop]){Object.assign(style,BOX_STYLE_MAP[prop](value,props));}else if(prop!==\"children\"&&prop!==\"onClick\"){style[prop]=value;}}if(props.wrap&&props.alignItems){console.warn(\"React Native doesn't support wrap and alignItems together.\");}if(props.dangerouslySetInlineStyle){style=Object.assign(Object.assign({},style),props.dangerouslySetInlineStyle.__style);}return style;};var onHoverIn=function(){var _ref=_asyncToGenerator(function*(){var _a;yield(_a=props.onHoverStart)===null||_a===void 0?void 0:_a.call(props);});return function onHoverIn(){return _ref.apply(this,arguments);};}();var onHoverOut=function(){var _ref2=_asyncToGenerator(function*(){var _a;yield(_a=props.onHoverEnd)===null||_a===void 0?void 0:_a.call(props);});return function onHoverOut(){return _ref2.apply(this,arguments);};}();var box;if(props.onClick){box=React.createElement(Pressable,{style:propsToStyle(),testID:props.testID?`${props.testID}-clickable`:undefined,onLayout:props.onLayout,onPointerEnter:onHoverIn,onPointerLeave:onHoverOut,onPress:function(){var _onPress=_asyncToGenerator(function*(){yield Unifier.utils.haptic();yield props.onClick();});function onPress(){return _onPress.apply(this,arguments);}return onPress;}()},props.children);}else{box=React.createElement(View,{style:propsToStyle(),testID:props.testID,onPointerEnter:onHoverIn,onPointerLeave:onHoverOut},props.children);}if(props.scroll){var _b=propsToStyle(),justifyContent=_b.justifyContent,alignContent=_b.alignContent,alignItems=_b.alignItems,scrollStyle=__rest(_b,[\"justifyContent\",\"alignContent\",\"alignItems\"]);box=React.createElement(ScrollView,{ref:props.scrollRef||scrollRef,contentContainerStyle:{justifyContent:justifyContent,alignContent:alignContent,alignItems:alignItems},horizontal:props.overflow===\"scrollX\",keyboardShouldPersistTaps:\"handled\",nestedScrollEnabled:true,scrollEventThrottle:50,style:scrollStyle,onScroll:function onScroll(event){if(props.onScroll&&event){props.onScroll(event.nativeEvent.contentOffset.y);}}},box);}if(props.avoidKeyboard){box=React.createElement(KeyboardAvoidingView,{behavior:\"web\"===\"ios\"?\"padding\":\"height\",keyboardVerticalOffset:props.keyboardOffset,style:{flex:1,display:\"flex\"}},React.createElement(SafeAreaView,{style:{flex:1,display:\"flex\"}},box));}return box;});","map":{"version":3,"sources":["../src/Box.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/* eslint-disable react/prop-types */\nimport React, { useContext, useImperativeHandle } from \"react\";\nimport { KeyboardAvoidingView, Platform, Pressable, SafeAreaView, ScrollView, View, } from \"react-native\";\nimport { ThemeContext } from \".\";\nimport { SPACING } from \"./Common\";\nimport { mediaQueryLargerThan } from \"./MediaQuery\";\nimport { Unifier } from \"./Unifier\";\nconst ALIGN_CONTENT = {\n    start: \"flex-start\",\n    end: \"flex-end\",\n    center: \"center\",\n    between: \"space-between\",\n    around: \"space-around\",\n    stretch: \"stretch\",\n};\nconst ALIGN_ITEMS = {\n    start: \"flex-start\",\n    end: \"flex-end\",\n    center: \"center\",\n    baseline: \"baseline\",\n    stretch: \"stretch\",\n};\nconst ALIGN_SELF = {\n    auto: \"auto\",\n    baseline: \"baseline\",\n    start: \"flex-start\",\n    end: \"flex-end\",\n    center: \"center\",\n    between: \"space-between\",\n    around: \"space-around\",\n    stretch: \"stretch\",\n};\nconst BORDER_WIDTH = 1;\n// eslint-disable-next-line react/display-name\nexport const Box = React.forwardRef((props, ref) => {\n    var _a;\n    const { theme } = useContext(ThemeContext);\n    useImperativeHandle(ref, () => ({\n        scrollToEnd: () => {\n            if (scrollRef && scrollRef.current) {\n                // HACK HACK HACK...but it works. Probably need to do some onContentSizeChange or onLayout\n                // to avoid this, but it works well enough.\n                setTimeout(() => {\n                    scrollRef && scrollRef.current && scrollRef.current.scrollToEnd();\n                }, 50);\n            }\n        },\n        scrollTo: (y) => {\n            if (scrollRef && scrollRef.current) {\n                // HACK HACK HACK...but it works. Probably need to do some onContentSizeChange or onLayout\n                // to avoid this, but it works well enough.\n                setTimeout(() => {\n                    scrollRef && scrollRef.current && scrollRef.current.scrollTo({ y });\n                }, 50);\n            }\n        },\n    }));\n    const BOX_STYLE_MAP = {\n        alignItems: (value) => ({ alignItems: ALIGN_ITEMS[value] }),\n        alignContent: (value) => ({ alignContent: ALIGN_CONTENT[value] }),\n        alignSelf: (value) => ({ alignSelf: ALIGN_SELF[value] }),\n        color: (value) => ({ backgroundColor: theme[value] }),\n        direction: (value) => ({ flexDirection: value, display: \"flex\" }),\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        smDirection: (value) => mediaQueryLargerThan(\"sm\") ? { flexDirection: value, display: \"flex\" } : {},\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        mdDirection: (value) => mediaQueryLargerThan(\"md\") ? { flexDirection: value, display: \"flex\" } : {},\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        lgDirection: (value) => mediaQueryLargerThan(\"lg\") ? { flexDirection: value, display: \"flex\" } : {},\n        display: (value) => {\n            return value === \"flex\" ? { flex: undefined } : { flex: 0, flexDirection: \"row\" };\n        },\n        flex: (value) => {\n            if (value === \"grow\") {\n                return { flexGrow: 1, flexShrink: 1, display: \"flex\" };\n            }\n            else if (value === \"shrink\") {\n                return { flexShrink: 1, display: \"flex\" };\n            }\n            else {\n                return { flex: 0, display: \"flex\" };\n            }\n        },\n        justifyContent: (value) => ({ justifyContent: ALIGN_CONTENT[value] }),\n        height: (value) => {\n            if (props.border && !isNaN(Number(value))) {\n                return { height: Number(value) + 2 * 2 };\n            }\n            else {\n                return { height: value };\n            }\n        },\n        margin: (value) => ({ margin: value * SPACING }),\n        marginRight: (value) => ({ marginRight: value * SPACING }),\n        marginLeft: (value) => ({ marginLeft: value * SPACING }),\n        marginTop: (value) => ({ marginTop: value * SPACING }),\n        marginBottom: (value) => ({ marginBottom: value * SPACING }),\n        paddingX: (value) => ({ paddingLeft: value * SPACING, paddingRight: value * SPACING }),\n        paddingY: (value) => ({ paddingTop: value * SPACING, paddingBottom: value * SPACING }),\n        padding: (value) => ({ padding: value * SPACING }),\n        zIndex: (value) => ({ zIndex: value ? value : undefined }),\n        position: (value) => ({ position: value }),\n        top: (top) => ({ top: top ? 0 : undefined }),\n        bottom: (bottom) => ({ bottom: bottom ? 0 : undefined }),\n        right: (right) => ({ right: right ? 0 : undefined }),\n        left: (left) => ({ left: left ? 0 : undefined }),\n        rounding: (rounding, allProps) => {\n            if (rounding === \"circle\") {\n                if (!allProps.height && !allProps.width) {\n                    console.warn(\"Cannot use Box rounding='circle' without height or width.\");\n                    return { borderRadius: undefined };\n                }\n                return { borderRadius: allProps.height || allProps.width };\n            }\n            if (rounding === \"pill\") {\n                return { borderRadius: 999 };\n            }\n            if (typeof rounding === \"number\") {\n                return { borderRadius: rounding * 4 };\n            }\n            return { borderRadius: undefined };\n        },\n        overflow: (value) => {\n            if (value === \"scrollY\" || value === \"scroll\") {\n                return { overflow: \"scroll\" };\n            }\n            return { overflow: value };\n        },\n        width: (value) => {\n            if (props.border && !isNaN(Number(value))) {\n                return { width: Number(value) + 2 * 2 };\n            }\n            else {\n                return { width: value };\n            }\n        },\n        wrap: (value) => ({ flexWrap: value ? \"wrap\" : \"nowrap\", alignItems: \"flex-start\" }),\n        shadow: (value) => {\n            if (!value) {\n                return {};\n            }\n            if (Platform.OS === \"ios\" || Platform.OS === \"web\") {\n                return {\n                    shadowColor: \"#999\",\n                    shadowOffset: {\n                        width: 2,\n                        height: 2,\n                    },\n                    shadowRadius: 2,\n                    shadowOpacity: 1.0,\n                };\n            }\n            else {\n                return { elevation: 4 };\n            }\n        },\n        border: (value) => {\n            if (!value) {\n                return {};\n            }\n            return { borderColor: theme[value], borderWidth: BORDER_WIDTH };\n        },\n        borderBottom: (value) => {\n            if (!value) {\n                return {};\n            }\n            return { borderBottomColor: theme[value], borderBottomWidth: BORDER_WIDTH };\n        },\n        borderTop: (value) => {\n            if (!value) {\n                return {};\n            }\n            return { borderTopColor: theme[value], borderTopWidth: BORDER_WIDTH };\n        },\n        borderRight: (value) => {\n            if (!value) {\n                return {};\n            }\n            return { borderRightColor: theme[value], borderRightWidth: BORDER_WIDTH };\n        },\n        borderLeft: (value) => {\n            if (!value) {\n                return {};\n            }\n            return { borderLeftColor: theme[value], borderLeftWidth: BORDER_WIDTH };\n        },\n    };\n    const scrollRef = (_a = props.scrollRef) !== null && _a !== void 0 ? _a : React.createRef();\n    const propsToStyle = () => {\n        let style = {};\n        for (const prop of Object.keys(props)) {\n            const value = props[prop];\n            if (BOX_STYLE_MAP[prop]) {\n                Object.assign(style, BOX_STYLE_MAP[prop](value, props));\n            }\n            else if (prop !== \"children\" && prop !== \"onClick\") {\n                style[prop] = value;\n                // console.warn(`Box: unknown property ${prop}`);\n            }\n        }\n        if (props.wrap && props.alignItems) {\n            console.warn(\"React Native doesn't support wrap and alignItems together.\");\n        }\n        // Finally, dangerously set overrides.\n        if (props.dangerouslySetInlineStyle) {\n            style = Object.assign(Object.assign({}, style), props.dangerouslySetInlineStyle.__style);\n        }\n        return style;\n    };\n    const onHoverIn = async () => {\n        var _a;\n        await ((_a = props.onHoverStart) === null || _a === void 0 ? void 0 : _a.call(props));\n    };\n    const onHoverOut = async () => {\n        var _a;\n        await ((_a = props.onHoverEnd) === null || _a === void 0 ? void 0 : _a.call(props));\n    };\n    let box;\n    if (props.onClick) {\n        box = (React.createElement(Pressable, { style: propsToStyle(), testID: props.testID ? `${props.testID}-clickable` : undefined, onLayout: props.onLayout, onPointerEnter: onHoverIn, onPointerLeave: onHoverOut, onPress: async () => {\n                await Unifier.utils.haptic();\n                await props.onClick();\n            } }, props.children));\n    }\n    else {\n        box = (React.createElement(View, { style: propsToStyle(), testID: props.testID, onPointerEnter: onHoverIn, onPointerLeave: onHoverOut }, props.children));\n    }\n    if (props.scroll) {\n        const _b = propsToStyle(), { justifyContent, alignContent, alignItems } = _b, scrollStyle = __rest(_b, [\"justifyContent\", \"alignContent\", \"alignItems\"]);\n        box = (React.createElement(ScrollView, { ref: props.scrollRef || scrollRef, contentContainerStyle: { justifyContent, alignContent, alignItems }, horizontal: props.overflow === \"scrollX\", keyboardShouldPersistTaps: \"handled\", nestedScrollEnabled: true, scrollEventThrottle: 50, style: scrollStyle, onScroll: (event) => {\n                if (props.onScroll && event) {\n                    props.onScroll(event.nativeEvent.contentOffset.y);\n                }\n            } }, box));\n    }\n    if (props.avoidKeyboard) {\n        box = (React.createElement(KeyboardAvoidingView, { behavior: Platform.OS === \"ios\" ? \"padding\" : \"height\", keyboardVerticalOffset: props.keyboardOffset, style: { flex: 1, display: \"flex\" } },\n            React.createElement(SafeAreaView, { style: { flex: 1, display: \"flex\" } }, box)));\n    }\n    return box;\n});\n//# sourceMappingURL=Box.js.map"]},"metadata":{},"sourceType":"module"}