{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import PropTypes from'prop-types';import get from'lodash/get';import map from'lodash/map';import isFunction from'lodash/isFunction';import isUndefined from'lodash/isUndefined';import debounce from'lodash/debounce';import XDate from'xdate';import React,{useCallback,useContext,useEffect,useMemo,useRef}from'react';import SectionList from\"react-native-web/dist/exports/SectionList\";import{useDidUpdate}from'../hooks';import{getMoment}from'../momentResolver';import{isToday,isGTE,sameDate}from'../dateutils';import{parseDate}from'../interface';import{getDefaultLocale}from'../services';import{UpdateSources,todayString}from'./commons';import constants from'../commons/constants';import styleConstructor from'./style';import Context from'./Context';import InfiniteAgendaList from'./infiniteAgendaList';import{AgendaSectionHeader}from'./AgendaListsCommon';import{jsx as _jsx}from\"react/jsx-runtime\";var viewabilityConfig={itemVisiblePercentThreshold:20};var AgendaList=function AgendaList(props){var _sections$;if(props.infiniteListProps){return _jsx(InfiniteAgendaList,_objectSpread({},props));}var theme=props.theme,sections=props.sections,scrollToNextEvent=props.scrollToNextEvent,_props$viewOffset=props.viewOffset,viewOffset=_props$viewOffset===void 0?0:_props$viewOffset,avoidDateUpdates=props.avoidDateUpdates,onScroll=props.onScroll,onMomentumScrollBegin=props.onMomentumScrollBegin,onMomentumScrollEnd=props.onMomentumScrollEnd,onScrollToIndexFailed=props.onScrollToIndexFailed,renderSectionHeader=props.renderSectionHeader,sectionStyle=props.sectionStyle,keyExtractor=props.keyExtractor,dayFormatter=props.dayFormatter,_props$dayFormat=props.dayFormat,dayFormat=_props$dayFormat===void 0?'dddd, MMM d':_props$dayFormat,useMoment=props.useMoment,_props$markToday=props.markToday,markToday=_props$markToday===void 0?true:_props$markToday,onViewableItemsChanged=props.onViewableItemsChanged;var _useContext=useContext(Context),date=_useContext.date,updateSource=_useContext.updateSource,setDate=_useContext.setDate,setDisabled=_useContext.setDisabled;var style=useRef(styleConstructor(theme));var list=useRef();var _topSection=useRef((_sections$=sections[0])==null?void 0:_sections$.title);var didScroll=useRef(false);var sectionScroll=useRef(false);var sectionHeight=useRef(0);useEffect(function(){if(date!==_topSection.current){setTimeout(function(){scrollToSection(date);},500);}},[]);useDidUpdate(function(){if(updateSource!==UpdateSources.LIST_DRAG&&updateSource!==UpdateSources.CALENDAR_INIT){scrollToSection(date);}},[date]);var getSectionIndex=function getSectionIndex(date){var i;map(sections,function(section,index){if(section.title===date){i=index;}});return i;};var getNextSectionIndex=function getNextSectionIndex(date){var i=0;for(var j=1;j<sections.length;j++){var _sections,_sections$j;var prev=parseDate((_sections=sections[j-1])==null?void 0:_sections.title);var next=parseDate((_sections$j=sections[j])==null?void 0:_sections$j.title);var cur=new XDate(date);if(isGTE(cur,prev)&&isGTE(next,cur)){i=sameDate(prev,cur)?j-1:j;break;}else if(isGTE(cur,next)){i=j;}}return i;};var getSectionTitle=useCallback(function(title){if(!title)return;var sectionTitle=title;if(dayFormatter){sectionTitle=dayFormatter(title);}else if(dayFormat){if(useMoment){var moment=getMoment();sectionTitle=moment(title).format(dayFormat);}else{sectionTitle=new XDate(title).toString(dayFormat);}}if(markToday){var string=getDefaultLocale().today||todayString;var today=isToday(title);sectionTitle=today?`${string}, ${sectionTitle}`:sectionTitle;}return sectionTitle;},[]);var scrollToSection=useCallback(debounce(function(d){var sectionIndex=scrollToNextEvent?getNextSectionIndex(d):getSectionIndex(d);if(isUndefined(sectionIndex)){return;}if(list!=null&&list.current&&sectionIndex!==undefined){var _sections$sectionInde;sectionScroll.current=true;_topSection.current=(_sections$sectionInde=sections[sectionIndex])==null?void 0:_sections$sectionInde.title;list==null?void 0:list.current.scrollToLocation({animated:true,sectionIndex:sectionIndex,itemIndex:1,viewPosition:0,viewOffset:(constants.isAndroid?sectionHeight.current:0)+viewOffset});}},1000,{leading:false,trailing:true}),[viewOffset,sections]);var _onViewableItemsChanged=useCallback(function(info){if(info!=null&&info.viewableItems&&!sectionScroll.current){var topSection=get(info==null?void 0:info.viewableItems[0],'section.title');if(topSection&&topSection!==_topSection.current){_topSection.current=topSection;if(didScroll.current&&!avoidDateUpdates){setDate==null?void 0:setDate(_topSection.current,UpdateSources.LIST_DRAG);}}}onViewableItemsChanged==null?void 0:onViewableItemsChanged(info);},[avoidDateUpdates,setDate,onViewableItemsChanged]);var _onScroll=useCallback(function(event){if(!didScroll.current){didScroll.current=true;scrollToSection.cancel();}onScroll==null?void 0:onScroll(event);},[onScroll]);var _onMomentumScrollBegin=useCallback(function(event){setDisabled==null?void 0:setDisabled(true);onMomentumScrollBegin==null?void 0:onMomentumScrollBegin(event);},[onMomentumScrollBegin,setDisabled]);var _onMomentumScrollEnd=useCallback(function(event){sectionScroll.current=false;setDisabled==null?void 0:setDisabled(false);onMomentumScrollEnd==null?void 0:onMomentumScrollEnd(event);},[onMomentumScrollEnd,setDisabled]);var headerTextStyle=useMemo(function(){return[style.current.sectionText,sectionStyle];},[sectionStyle]);var _onScrollToIndexFailed=useCallback(function(info){if(onScrollToIndexFailed){onScrollToIndexFailed(info);}else{console.log('onScrollToIndexFailed info: ',info);}},[onScrollToIndexFailed]);var onHeaderLayout=useCallback(function(event){sectionHeight.current=event.nativeEvent.layout.height;},[]);var _renderSectionHeader=useCallback(function(info){var _info$section;var title=info==null?void 0:(_info$section=info.section)==null?void 0:_info$section.title;if(renderSectionHeader){return renderSectionHeader(title);}var headerTitle=getSectionTitle(title);return _jsx(AgendaSectionHeader,{title:headerTitle,style:headerTextStyle,onLayout:onHeaderLayout});},[headerTextStyle]);var _keyExtractor=useCallback(function(item,index){return isFunction(keyExtractor)?keyExtractor(item,index):String(index);},[keyExtractor]);return _jsx(SectionList,_objectSpread(_objectSpread({stickySectionHeadersEnabled:true},props),{},{ref:list,keyExtractor:_keyExtractor,showsVerticalScrollIndicator:false,onViewableItemsChanged:_onViewableItemsChanged,viewabilityConfig:viewabilityConfig,renderSectionHeader:_renderSectionHeader,onScroll:_onScroll,onMomentumScrollBegin:_onMomentumScrollBegin,onMomentumScrollEnd:_onMomentumScrollEnd,onScrollToIndexFailed:_onScrollToIndexFailed}));};export default AgendaList;AgendaList.displayName='AgendaList';AgendaList.propTypes={dayFormat:PropTypes.string,dayFormatter:PropTypes.func,useMoment:PropTypes.bool,markToday:PropTypes.bool,sectionStyle:PropTypes.oneOfType([PropTypes.object,PropTypes.number,PropTypes.array]),avoidDateUpdates:PropTypes.bool};","map":{"version":3,"names":["PropTypes","get","map","isFunction","isUndefined","debounce","XDate","React","useCallback","useContext","useEffect","useMemo","useRef","SectionList","useDidUpdate","getMoment","isToday","isGTE","sameDate","parseDate","getDefaultLocale","UpdateSources","todayString","constants","styleConstructor","Context","InfiniteAgendaList","AgendaSectionHeader","jsx","_jsx","viewabilityConfig","itemVisiblePercentThreshold","AgendaList","props","_sections$","infiniteListProps","_objectSpread","theme","sections","scrollToNextEvent","_props$viewOffset","viewOffset","avoidDateUpdates","onScroll","onMomentumScrollBegin","onMomentumScrollEnd","onScrollToIndexFailed","renderSectionHeader","sectionStyle","keyExtractor","dayFormatter","_props$dayFormat","dayFormat","useMoment","_props$markToday","markToday","onViewableItemsChanged","_useContext","date","updateSource","setDate","setDisabled","style","list","_topSection","title","didScroll","sectionScroll","sectionHeight","current","setTimeout","scrollToSection","LIST_DRAG","CALENDAR_INIT","getSectionIndex","i","section","index","getNextSectionIndex","j","length","_sections","_sections$j","prev","next","cur","getSectionTitle","sectionTitle","moment","format","toString","string","today","d","sectionIndex","undefined","_sections$sectionInde","scrollToLocation","animated","itemIndex","viewPosition","isAndroid","leading","trailing","_onViewableItemsChanged","info","viewableItems","topSection","_onScroll","event","cancel","_onMomentumScrollBegin","_onMomentumScrollEnd","headerTextStyle","sectionText","_onScrollToIndexFailed","console","log","onHeaderLayout","nativeEvent","layout","height","_renderSectionHeader","_info$section","headerTitle","onLayout","_keyExtractor","item","String","stickySectionHeadersEnabled","ref","showsVerticalScrollIndicator","displayName","propTypes","func","bool","oneOfType","object","number","array"],"sources":["/Users/josh/src/ui/node_modules/react-native-calendars/src/expandableCalendar/agendaList.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport map from 'lodash/map';\nimport isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef } from 'react';\nimport { SectionList, } from 'react-native';\nimport { useDidUpdate } from '../hooks';\nimport { getMoment } from '../momentResolver';\nimport { isToday, isGTE, sameDate } from '../dateutils';\nimport { parseDate } from '../interface';\nimport { getDefaultLocale } from '../services';\nimport { UpdateSources, todayString } from './commons';\nimport constants from '../commons/constants';\nimport styleConstructor from './style';\nimport Context from './Context';\nimport InfiniteAgendaList from './infiniteAgendaList';\nimport { AgendaSectionHeader } from './AgendaListsCommon';\nconst viewabilityConfig = {\n    itemVisiblePercentThreshold: 20 // 50 means if 50% of the item is visible\n};\n/**\n * @description: AgendaList component\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: SectionList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst AgendaList = (props) => {\n    if (props.infiniteListProps) {\n        return <InfiniteAgendaList {...props}/>;\n    }\n    const { theme, sections, scrollToNextEvent, viewOffset = 0, avoidDateUpdates, onScroll, onMomentumScrollBegin, onMomentumScrollEnd, onScrollToIndexFailed, renderSectionHeader, sectionStyle, keyExtractor, dayFormatter, dayFormat = 'dddd, MMM d', useMoment, markToday = true, onViewableItemsChanged, } = props;\n    const { date, updateSource, setDate, setDisabled } = useContext(Context);\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const _topSection = useRef(sections[0]?.title);\n    const didScroll = useRef(false);\n    const sectionScroll = useRef(false);\n    const sectionHeight = useRef(0);\n    useEffect(() => {\n        if (date !== _topSection.current) {\n            setTimeout(() => {\n                scrollToSection(date);\n            }, 500);\n        }\n    }, []);\n    useDidUpdate(() => {\n        // NOTE: on first init data should set first section to the current date!!!\n        if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n            scrollToSection(date);\n        }\n    }, [date]);\n    const getSectionIndex = (date) => {\n        let i;\n        map(sections, (section, index) => {\n            // NOTE: sections titles should match current date format!!!\n            if (section.title === date) {\n                i = index;\n            }\n        });\n        return i;\n    };\n    const getNextSectionIndex = (date) => {\n        let i = 0;\n        for (let j = 1; j < sections.length; j++) {\n            const prev = parseDate(sections[j - 1]?.title);\n            const next = parseDate(sections[j]?.title);\n            const cur = new XDate(date);\n            if (isGTE(cur, prev) && isGTE(next, cur)) {\n                i = sameDate(prev, cur) ? j - 1 : j;\n                break;\n            }\n            else if (isGTE(cur, next)) {\n                i = j;\n            }\n        }\n        return i;\n    };\n    const getSectionTitle = useCallback((title) => {\n        if (!title)\n            return;\n        let sectionTitle = title;\n        if (dayFormatter) {\n            sectionTitle = dayFormatter(title);\n        }\n        else if (dayFormat) {\n            if (useMoment) {\n                const moment = getMoment();\n                sectionTitle = moment(title).format(dayFormat);\n            }\n            else {\n                sectionTitle = new XDate(title).toString(dayFormat);\n            }\n        }\n        if (markToday) {\n            const string = getDefaultLocale().today || todayString;\n            const today = isToday(title);\n            sectionTitle = today ? `${string}, ${sectionTitle}` : sectionTitle;\n        }\n        return sectionTitle;\n    }, []);\n    const scrollToSection = useCallback(debounce((d) => {\n        const sectionIndex = scrollToNextEvent ? getNextSectionIndex(d) : getSectionIndex(d);\n        if (isUndefined(sectionIndex)) {\n            return;\n        }\n        if (list?.current && sectionIndex !== undefined) {\n            sectionScroll.current = true; // to avoid setDate() in onViewableItemsChanged\n            _topSection.current = sections[sectionIndex]?.title;\n            list?.current.scrollToLocation({\n                animated: true,\n                sectionIndex: sectionIndex,\n                itemIndex: 1,\n                viewPosition: 0,\n                viewOffset: (constants.isAndroid ? sectionHeight.current : 0) + viewOffset\n            });\n        }\n    }, 1000, { leading: false, trailing: true }), [viewOffset, sections]);\n    const _onViewableItemsChanged = useCallback((info) => {\n        if (info?.viewableItems && !sectionScroll.current) {\n            const topSection = get(info?.viewableItems[0], 'section.title');\n            if (topSection && topSection !== _topSection.current) {\n                _topSection.current = topSection;\n                if (didScroll.current && !avoidDateUpdates) {\n                    // to avoid setDate() on first load (while setting the initial context.date value)\n                    setDate?.(_topSection.current, UpdateSources.LIST_DRAG);\n                }\n            }\n        }\n        onViewableItemsChanged?.(info);\n    }, [avoidDateUpdates, setDate, onViewableItemsChanged]);\n    const _onScroll = useCallback((event) => {\n        if (!didScroll.current) {\n            didScroll.current = true;\n            scrollToSection.cancel();\n        }\n        onScroll?.(event);\n    }, [onScroll]);\n    const _onMomentumScrollBegin = useCallback((event) => {\n        setDisabled?.(true);\n        onMomentumScrollBegin?.(event);\n    }, [onMomentumScrollBegin, setDisabled]);\n    const _onMomentumScrollEnd = useCallback((event) => {\n        // when list momentum ends AND when scrollToSection scroll ends\n        sectionScroll.current = false;\n        setDisabled?.(false);\n        onMomentumScrollEnd?.(event);\n    }, [onMomentumScrollEnd, setDisabled]);\n    const headerTextStyle = useMemo(() => [style.current.sectionText, sectionStyle], [sectionStyle]);\n    const _onScrollToIndexFailed = useCallback((info) => {\n        if (onScrollToIndexFailed) {\n            onScrollToIndexFailed(info);\n        }\n        else {\n            console.log('onScrollToIndexFailed info: ', info);\n        }\n    }, [onScrollToIndexFailed]);\n    const onHeaderLayout = useCallback((event) => {\n        sectionHeight.current = event.nativeEvent.layout.height;\n    }, []);\n    const _renderSectionHeader = useCallback((info) => {\n        const title = info?.section?.title;\n        if (renderSectionHeader) {\n            return renderSectionHeader(title);\n        }\n        const headerTitle = getSectionTitle(title);\n        return <AgendaSectionHeader title={headerTitle} style={headerTextStyle} onLayout={onHeaderLayout}/>;\n    }, [headerTextStyle]);\n    const _keyExtractor = useCallback((item, index) => {\n        return isFunction(keyExtractor) ? keyExtractor(item, index) : String(index);\n    }, [keyExtractor]);\n    return (<SectionList stickySectionHeadersEnabled {...props} ref={list} keyExtractor={_keyExtractor} showsVerticalScrollIndicator={false} onViewableItemsChanged={_onViewableItemsChanged} viewabilityConfig={viewabilityConfig} renderSectionHeader={_renderSectionHeader} onScroll={_onScroll} onMomentumScrollBegin={_onMomentumScrollBegin} onMomentumScrollEnd={_onMomentumScrollEnd} onScrollToIndexFailed={_onScrollToIndexFailed}/>);\n    // _getItemLayout = (data, index) => {\n    //   return {length: constants.screenWidth, offset: constants.screenWidth * index, index};\n    // }\n};\nexport default AgendaList;\nAgendaList.displayName = 'AgendaList';\nAgendaList.propTypes = {\n    dayFormat: PropTypes.string,\n    dayFormatter: PropTypes.func,\n    useMoment: PropTypes.bool,\n    markToday: PropTypes.bool,\n    sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    avoidDateUpdates: PropTypes.bool\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}