{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Box}from\"./Box\";import{Button}from\"./Button\";import{Icon}from\"./Icon\";import{IconButton}from\"./IconButton\";import{Text}from\"./Text\";import{Unifier}from\"./Unifier\";function getKey(id){return`@FernsUI:${id}`;}export var hideBanner=function hideBanner(id){console.debug(`[banner] Hiding ${getKey(id)} `);return Unifier.storage.setItem(getKey(id),\"true\");};var BannerType={ACTION:\"action\",DISMISS:\"dismiss\",PERMANENT:\"permanent\",CUSTOM_BUTTON:\"customButton\"};export var Banner=function Banner(_ref){var id=_ref.id,customButtonProps=_ref.customButtonProps,text=_ref.text,subtext=_ref.subtext,_ref$color=_ref.color,color=_ref$color===void 0?\"secondaryDark\":_ref$color,iconName=_ref.iconName,_ref$textColor=_ref.textColor,textColor=_ref$textColor===void 0?\"white\":_ref$textColor,_ref$negativeXMargin=_ref.negativeXMargin,negativeXMargin=_ref$negativeXMargin===void 0?0:_ref$negativeXMargin,width=_ref.width,shape=_ref.shape,type=_ref.type,_onClick=_ref.onClick;var ACTION=BannerType.ACTION,DISMISS=BannerType.DISMISS,CUSTOM_BUTTON=BannerType.CUSTOM_BUTTON;var _useState=useState(type!==DISMISS),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];useEffect(function(){if(type===DISMISS){void Unifier.storage.getItem(getKey(id)).then(function(isSeen){console.debug(`[banner] ${getKey(id)} seen? ${isSeen}`);setShow(!isSeen);});}},[id,type]);var dismiss=function(){var _ref2=_asyncToGenerator(function*(){if(type!==DISMISS){return;}yield hideBanner(id);setShow(false);});return function dismiss(){return _ref2.apply(this,arguments);};}();var renderButton=function renderButton(){var _a,_b,_c;if(type===CUSTOM_BUTTON){return React.createElement(Button,Object.assign({},customButtonProps,{color:(_a=customButtonProps===null||customButtonProps===void 0?void 0:customButtonProps.color)!==null&&_a!==void 0?_a:\"primary\",size:(_b=customButtonProps===null||customButtonProps===void 0?void 0:customButtonProps.size)!==null&&_b!==void 0?_b:\"sm\",text:(_c=customButtonProps===null||customButtonProps===void 0?void 0:customButtonProps.text)!==null&&_c!==void 0?_c:\"\",onClick:_onClick}));}else if(type===ACTION){return React.createElement(Box,{alignItems:\"center\",display:\"block\",justifyContent:\"center\",width:40},React.createElement(IconButton,{accessibilityLabel:\"\",icon:\"arrow-right\",iconColor:textColor,prefix:\"fas\",onClick:function onClick(){return _onClick===null||_onClick===void 0?void 0:_onClick();}}));}else if(type===DISMISS){return React.createElement(Box,{alignItems:\"center\",display:\"block\",justifyContent:\"center\",width:40},React.createElement(IconButton,{accessibilityLabel:\"\",icon:\"times-circle\",iconColor:textColor,prefix:\"fas\",onClick:dismiss}));}else{return null;}};if(!show){return null;}if(type===ACTION&&!_onClick||type===CUSTOM_BUTTON&&!_onClick){console.warn(\"Banners with type action require an onClick property.\");}var negativeMargin=negativeXMargin*-4;return React.createElement(Box,{color:color,dangerouslySetInlineStyle:{__style:{marginLeft:negativeMargin,marginRight:negativeMargin}},direction:\"row\",justifyContent:\"between\",paddingX:3,paddingY:2,rounding:shape,shadow:true,width:width||Unifier.utils.dimensions().width||\"100%\",onClick:type===DISMISS?dismiss:undefined},iconName&&(React.createElement(Box,{justifyContent:\"center\",width:32},React.createElement(Icon,{color:textColor,name:iconName,size:\"lg\"}))),React.createElement(Box,{alignItems:\"center\",direction:\"column\",flex:\"shrink\",justifyContent:\"center\"},React.createElement(Box,{paddingY:1},React.createElement(Text,{align:\"center\",color:textColor,weight:\"bold\"},text)),subtext&&(React.createElement(Box,{paddingY:1},React.createElement(Text,{align:\"center\",color:textColor},subtext)))),renderButton());};","map":{"version":3,"sources":["../src/Banner.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Box } from \"./Box\";\nimport { Button } from \"./Button\";\nimport { Icon } from \"./Icon\";\nimport { IconButton } from \"./IconButton\";\nimport { Text } from \"./Text\";\nimport { Unifier } from \"./Unifier\";\nfunction getKey(id) {\n    return `@FernsUI:${id}`;\n}\nexport const hideBanner = (id) => {\n    console.debug(`[banner] Hiding ${getKey(id)} `);\n    return Unifier.storage.setItem(getKey(id), \"true\");\n};\nconst BannerType = {\n    ACTION: \"action\",\n    DISMISS: \"dismiss\",\n    PERMANENT: \"permanent\", // deprecated in favor of default behavior\n    CUSTOM_BUTTON: \"customButton\",\n};\nexport const Banner = ({ id, customButtonProps, text, subtext, color = \"secondaryDark\", iconName, textColor = \"white\", negativeXMargin = 0, width, shape, type, onClick, }) => {\n    // If the banner is not type dismiss, show it immediately.\n    const { ACTION, DISMISS, CUSTOM_BUTTON } = BannerType;\n    const [show, setShow] = useState(type !== DISMISS);\n    // Load seen from async storage.\n    useEffect(() => {\n        if (type === DISMISS) {\n            void Unifier.storage.getItem(getKey(id)).then((isSeen) => {\n                console.debug(`[banner] ${getKey(id)} seen? ${isSeen}`);\n                setShow(!isSeen);\n            });\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [id, type]);\n    const dismiss = async () => {\n        if (type !== DISMISS) {\n            return;\n        }\n        await hideBanner(id);\n        setShow(false);\n    };\n    const renderButton = () => {\n        var _a, _b, _c;\n        if (type === CUSTOM_BUTTON) {\n            return (React.createElement(Button, Object.assign({}, customButtonProps, { color: (_a = customButtonProps === null || customButtonProps === void 0 ? void 0 : customButtonProps.color) !== null && _a !== void 0 ? _a : \"primary\", size: (_b = customButtonProps === null || customButtonProps === void 0 ? void 0 : customButtonProps.size) !== null && _b !== void 0 ? _b : \"sm\", text: (_c = customButtonProps === null || customButtonProps === void 0 ? void 0 : customButtonProps.text) !== null && _c !== void 0 ? _c : \"\", onClick: onClick })));\n        }\n        else if (type === ACTION) {\n            return (React.createElement(Box, { alignItems: \"center\", display: \"block\", justifyContent: \"center\", width: 40 },\n                React.createElement(IconButton, { accessibilityLabel: \"\", icon: \"arrow-right\", iconColor: textColor, prefix: \"fas\", onClick: () => onClick === null || onClick === void 0 ? void 0 : onClick() })));\n        }\n        else if (type === DISMISS) {\n            return (React.createElement(Box, { alignItems: \"center\", display: \"block\", justifyContent: \"center\", width: 40 },\n                React.createElement(IconButton, { accessibilityLabel: \"\", icon: \"times-circle\", iconColor: textColor, prefix: \"fas\", onClick: dismiss })));\n        }\n        else {\n            return null;\n        }\n    };\n    if (!show) {\n        return null;\n    }\n    if ((type === ACTION && !onClick) || (type === CUSTOM_BUTTON && !onClick)) {\n        console.warn(\"Banners with type action require an onClick property.\");\n    }\n    const negativeMargin = negativeXMargin * -4;\n    return (React.createElement(Box, { color: color, dangerouslySetInlineStyle: {\n            __style: {\n                marginLeft: negativeMargin,\n                marginRight: negativeMargin,\n            },\n        }, direction: \"row\", justifyContent: \"between\", paddingX: 3, paddingY: 2, rounding: shape, shadow: true, width: width || Unifier.utils.dimensions().width || \"100%\", onClick: type === DISMISS ? dismiss : undefined },\n        iconName && (React.createElement(Box, { justifyContent: \"center\", width: 32 },\n            React.createElement(Icon, { color: textColor, name: iconName, size: \"lg\" }))),\n        React.createElement(Box, { alignItems: \"center\", direction: \"column\", flex: \"shrink\", justifyContent: \"center\" },\n            React.createElement(Box, { paddingY: 1 },\n                React.createElement(Text, { align: \"center\", color: textColor, weight: \"bold\" }, text)),\n            subtext && (React.createElement(Box, { paddingY: 1 },\n                React.createElement(Text, { align: \"center\", color: textColor }, subtext)))),\n        renderButton()));\n};\n//# sourceMappingURL=Banner.js.map"]},"metadata":{},"sourceType":"module"}