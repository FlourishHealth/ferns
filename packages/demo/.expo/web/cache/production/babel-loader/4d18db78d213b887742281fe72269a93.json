{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import PropTypes from'prop-types';import isUndefined from'lodash/isUndefined';import debounce from'lodash/debounce';import InfiniteList from'../infinite-list';import XDate from'xdate';import React,{useCallback,useContext,useEffect,useMemo,useRef,useState}from'react';import{useDidUpdate}from'../hooks';import{getMoment}from'../momentResolver';import{isGTE,isToday}from'../dateutils';import{getDefaultLocale}from'../services';import{UpdateSources,todayString}from'./commons';import styleConstructor from'./style';import Context from'./Context';import constants from\"../commons/constants\";import{parseDate}from\"../interface\";import{LayoutProvider}from\"recyclerlistview/dist/reactnative/core/dependencies/LayoutProvider\";import{AgendaSectionHeader}from\"./AgendaListsCommon\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var InfiniteAgendaList=function InfiniteAgendaList(props){var _sections$,_infiniteListProps$vi;var theme=props.theme,sections=props.sections,scrollToNextEvent=props.scrollToNextEvent,avoidDateUpdates=props.avoidDateUpdates,onScroll=props.onScroll,renderSectionHeader=props.renderSectionHeader,sectionStyle=props.sectionStyle,dayFormatter=props.dayFormatter,_props$dayFormat=props.dayFormat,dayFormat=_props$dayFormat===void 0?'dddd, MMM d':_props$dayFormat,useMoment=props.useMoment,_props$markToday=props.markToday,markToday=_props$markToday===void 0?true:_props$markToday,infiniteListProps=props.infiniteListProps,renderItem=props.renderItem,onEndReached=props.onEndReached,onEndReachedThreshold=props.onEndReachedThreshold,refreshControl=props.refreshControl;var _useContext=useContext(Context),date=_useContext.date,updateSource=_useContext.updateSource,setDate=_useContext.setDate;var style=useRef(styleConstructor(theme));var list=useRef();var _topSection=useRef((_sections$=sections[0])==null?void 0:_sections$.title);var didScroll=useRef(false);var sectionScroll=useRef(false);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var dataRef=useRef(data);useEffect(function(){var items=sections.reduce(function(acc,cur){return[].concat(_toConsumableArray(acc),[{title:cur.title,isTitle:true}],_toConsumableArray(cur.data));},[]);setData(items);dataRef.current=items;if(date!==_topSection.current){setTimeout(function(){scrollToSection(date);},500);}},[sections]);useDidUpdate(function(){if(updateSource!==UpdateSources.LIST_DRAG&&updateSource!==UpdateSources.CALENDAR_INIT){scrollToSection(date);}},[date]);var getSectionIndex=function getSectionIndex(date){var dataIndex=0;for(var i=0;i<sections.length;i++){if(sections[i].title===date){return dataIndex;}dataIndex+=sections[i].data.length+1;}};var getNextSectionIndex=function getNextSectionIndex(date){var cur=new XDate(date);var dataIndex=0;for(var i=0;i<sections.length;i++){var titleDate=parseDate(sections[i].title);if(isGTE(titleDate,cur)){return dataIndex;}dataIndex+=sections[i].data.length+1;}};var getSectionTitle=useCallback(function(title){if(!title)return;var sectionTitle=title;if(dayFormatter){sectionTitle=dayFormatter(title);}else if(dayFormat){if(useMoment){var moment=getMoment();sectionTitle=moment(title).format(dayFormat);}else{sectionTitle=new XDate(title).toString(dayFormat);}}if(markToday){var string=getDefaultLocale().today||todayString;var today=isToday(title);sectionTitle=today?`${string}, ${sectionTitle}`:sectionTitle;}return sectionTitle;},[]);var scrollToSection=useCallback(debounce(function(requestedDate){var sectionIndex=scrollToNextEvent?getNextSectionIndex(requestedDate):getSectionIndex(requestedDate);if(isUndefined(sectionIndex)){return;}if(list!=null&&list.current&&sectionIndex!==undefined){sectionScroll.current=true;if(requestedDate!==_topSection.current){var _sections$findItemTit,_list$current;_topSection.current=(_sections$findItemTit=sections[findItemTitleIndex(sectionIndex)])==null?void 0:_sections$findItemTit.title;(_list$current=list.current)==null?void 0:_list$current.scrollToIndex(sectionIndex,true);}setTimeout(function(){_onMomentumScrollEnd();},500);}},1000,{leading:false,trailing:true}),[sections]);var layoutProvider=useMemo(function(){return new LayoutProvider(function(index){var _dataRef$current$inde;return(_dataRef$current$inde=dataRef.current[index])!=null&&_dataRef$current$inde.isTitle?'title':'page';},function(type,dim){var _infiniteListProps$ti,_infiniteListProps$it;dim.width=constants.screenWidth;dim.height=type==='title'?(_infiniteListProps$ti=infiniteListProps==null?void 0:infiniteListProps.titleHeight)!=null?_infiniteListProps$ti:60:(_infiniteListProps$it=infiniteListProps==null?void 0:infiniteListProps.itemHeight)!=null?_infiniteListProps$it:80;});},[]);var _onScroll=useCallback(function(rawEvent){if(!didScroll.current){didScroll.current=true;scrollToSection.cancel();}var event={nativeEvent:{contentOffset:rawEvent.nativeEvent.contentOffset,layoutMeasurement:rawEvent.nativeEvent.layoutMeasurement,contentSize:rawEvent.nativeEvent.contentSize}};onScroll==null?void 0:onScroll(event);},[onScroll]);var _onVisibleIndicesChanged=useCallback(debounce(function(all){if(all&&all.length&&!sectionScroll.current){var topItemIndex=all[0];var topSection=data[findItemTitleIndex(topItemIndex)];if(topSection&&topSection!==_topSection.current){_topSection.current=topSection.title;if(didScroll.current&&!avoidDateUpdates){setDate==null?void 0:setDate(topSection.title,UpdateSources.LIST_DRAG);}}}},(_infiniteListProps$vi=infiniteListProps==null?void 0:infiniteListProps.visibleIndicesChangedDebounce)!=null?_infiniteListProps$vi:1000,{leading:false,trailing:true}),[avoidDateUpdates,setDate,data]);var findItemTitleIndex=useCallback(function(itemIndex){var titleIndex=itemIndex;while(titleIndex>0&&!((_data$titleIndex=data[titleIndex])!=null&&_data$titleIndex.isTitle)){var _data$titleIndex;titleIndex--;}return titleIndex;},[data]);var _onMomentumScrollEnd=useCallback(function(){sectionScroll.current=false;},[]);var headerTextStyle=useMemo(function(){return[style.current.sectionText,sectionStyle];},[sectionStyle]);var _renderSectionHeader=useCallback(function(info){var _info$section;var title=info==null?void 0:(_info$section=info.section)==null?void 0:_info$section.title;if(renderSectionHeader){return renderSectionHeader(title);}var headerTitle=getSectionTitle(title);return _jsx(AgendaSectionHeader,{title:headerTitle,style:headerTextStyle});},[headerTextStyle]);var _renderItem=useCallback(function(_type,item){if(item!=null&&item.isTitle){return _renderSectionHeader({section:item});}if(renderItem){return renderItem({item:item});}return _jsx(_Fragment,{});},[renderItem]);var _onEndReached=useCallback(function(){if(onEndReached){onEndReached({distanceFromEnd:0});}},[onEndReached]);return _jsx(InfiniteList,{ref:list,renderItem:_renderItem,data:data,style:style.current.container,layoutProvider:layoutProvider,onScroll:_onScroll,onVisibleIndicesChanged:_onVisibleIndicesChanged,scrollViewProps:{onMomentumScrollEnd:_onMomentumScrollEnd,nestedScrollEnabled:true,refreshControl:refreshControl},onEndReached:_onEndReached,onEndReachedThreshold:onEndReachedThreshold,disableScrollOnDataChange:true,renderFooter:infiniteListProps==null?void 0:infiniteListProps.renderFooter});};export default InfiniteAgendaList;InfiniteAgendaList.displayName='InfiniteAgendaList';InfiniteAgendaList.propTypes={dayFormat:PropTypes.string,dayFormatter:PropTypes.func,useMoment:PropTypes.bool,markToday:PropTypes.bool,sectionStyle:PropTypes.oneOfType([PropTypes.object,PropTypes.number,PropTypes.array]),avoidDateUpdates:PropTypes.bool};","map":{"version":3,"names":["PropTypes","isUndefined","debounce","InfiniteList","XDate","React","useCallback","useContext","useEffect","useMemo","useRef","useState","useDidUpdate","getMoment","isGTE","isToday","getDefaultLocale","UpdateSources","todayString","styleConstructor","Context","constants","parseDate","LayoutProvider","AgendaSectionHeader","jsx","_jsx","Fragment","_Fragment","InfiniteAgendaList","props","_sections$","_infiniteListProps$vi","theme","sections","scrollToNextEvent","avoidDateUpdates","onScroll","renderSectionHeader","sectionStyle","dayFormatter","_props$dayFormat","dayFormat","useMoment","_props$markToday","markToday","infiniteListProps","renderItem","onEndReached","onEndReachedThreshold","refreshControl","_useContext","date","updateSource","setDate","style","list","_topSection","title","didScroll","sectionScroll","_useState","_useState2","_slicedToArray","data","setData","dataRef","items","reduce","acc","cur","concat","_toConsumableArray","isTitle","current","setTimeout","scrollToSection","LIST_DRAG","CALENDAR_INIT","getSectionIndex","dataIndex","i","length","getNextSectionIndex","titleDate","getSectionTitle","sectionTitle","moment","format","toString","string","today","requestedDate","sectionIndex","undefined","_sections$findItemTit","_list$current","findItemTitleIndex","scrollToIndex","_onMomentumScrollEnd","leading","trailing","layoutProvider","index","_dataRef$current$inde","type","dim","_infiniteListProps$ti","_infiniteListProps$it","width","screenWidth","height","titleHeight","itemHeight","_onScroll","rawEvent","cancel","event","nativeEvent","contentOffset","layoutMeasurement","contentSize","_onVisibleIndicesChanged","all","topItemIndex","topSection","visibleIndicesChangedDebounce","itemIndex","titleIndex","_data$titleIndex","headerTextStyle","sectionText","_renderSectionHeader","info","_info$section","section","headerTitle","_renderItem","_type","item","_onEndReached","distanceFromEnd","ref","container","onVisibleIndicesChanged","scrollViewProps","onMomentumScrollEnd","nestedScrollEnabled","disableScrollOnDataChange","renderFooter","displayName","propTypes","func","bool","oneOfType","object","number","array"],"sources":["/Users/josh/src/ui/node_modules/react-native-calendars/src/expandableCalendar/infiniteAgendaList.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport InfiniteList from '../infinite-list';\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDidUpdate } from '../hooks';\nimport { getMoment } from '../momentResolver';\nimport { isGTE, isToday } from '../dateutils';\nimport { getDefaultLocale } from '../services';\nimport { UpdateSources, todayString } from './commons';\nimport styleConstructor from './style';\nimport Context from './Context';\nimport constants from \"../commons/constants\";\nimport { parseDate } from \"../interface\";\nimport { LayoutProvider } from \"recyclerlistview/dist/reactnative/core/dependencies/LayoutProvider\";\nimport { AgendaSectionHeader } from \"./AgendaListsCommon\";\n/**\n * @description: AgendaList component that use InfiniteList to improve performance\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: InfiniteList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst InfiniteAgendaList = (props) => {\n    const { theme, sections, scrollToNextEvent, avoidDateUpdates, onScroll, renderSectionHeader, sectionStyle, dayFormatter, dayFormat = 'dddd, MMM d', useMoment, markToday = true, infiniteListProps, renderItem, onEndReached, onEndReachedThreshold, refreshControl } = props;\n    const { date, updateSource, setDate } = useContext(Context);\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const _topSection = useRef(sections[0]?.title);\n    const didScroll = useRef(false);\n    const sectionScroll = useRef(false);\n    const [data, setData] = useState([]);\n    const dataRef = useRef(data);\n    useEffect(() => {\n        const items = sections.reduce((acc, cur) => {\n            return [...acc, { title: cur.title, isTitle: true }, ...cur.data];\n        }, []);\n        setData(items);\n        dataRef.current = items;\n        if (date !== _topSection.current) {\n            setTimeout(() => {\n                scrollToSection(date);\n            }, 500);\n        }\n    }, [sections]);\n    useDidUpdate(() => {\n        // NOTE: on first init data should set first section to the current date!!!\n        if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n            scrollToSection(date);\n        }\n    }, [date]);\n    const getSectionIndex = (date) => {\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            if (sections[i].title === date) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getNextSectionIndex = (date) => {\n        const cur = new XDate(date);\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            const titleDate = parseDate(sections[i].title);\n            if (isGTE(titleDate, cur)) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getSectionTitle = useCallback((title) => {\n        if (!title)\n            return;\n        let sectionTitle = title;\n        if (dayFormatter) {\n            sectionTitle = dayFormatter(title);\n        }\n        else if (dayFormat) {\n            if (useMoment) {\n                const moment = getMoment();\n                sectionTitle = moment(title).format(dayFormat);\n            }\n            else {\n                sectionTitle = new XDate(title).toString(dayFormat);\n            }\n        }\n        if (markToday) {\n            const string = getDefaultLocale().today || todayString;\n            const today = isToday(title);\n            sectionTitle = today ? `${string}, ${sectionTitle}` : sectionTitle;\n        }\n        return sectionTitle;\n    }, []);\n    const scrollToSection = useCallback(debounce((requestedDate) => {\n        const sectionIndex = scrollToNextEvent ? getNextSectionIndex(requestedDate) : getSectionIndex(requestedDate);\n        if (isUndefined(sectionIndex)) {\n            return;\n        }\n        if (list?.current && sectionIndex !== undefined) {\n            sectionScroll.current = true; // to avoid setDate() in _onVisibleIndicesChanged\n            if (requestedDate !== _topSection.current) {\n                _topSection.current = sections[findItemTitleIndex(sectionIndex)]?.title;\n                list.current?.scrollToIndex(sectionIndex, true);\n            }\n            setTimeout(() => {\n                _onMomentumScrollEnd(); // the RecyclerListView doesn't trigger onMomentumScrollEnd when calling scrollToSection\n            }, 500);\n        }\n    }, 1000, { leading: false, trailing: true }), [sections]);\n    const layoutProvider = useMemo(() => new LayoutProvider((index) => dataRef.current[index]?.isTitle ? 'title' : 'page', (type, dim) => {\n        dim.width = constants.screenWidth;\n        dim.height = type === 'title' ? infiniteListProps?.titleHeight ?? 60 : infiniteListProps?.itemHeight ?? 80;\n    }), []);\n    const _onScroll = useCallback((rawEvent) => {\n        if (!didScroll.current) {\n            didScroll.current = true;\n            scrollToSection.cancel();\n        }\n        // Convert to a format similar to NativeSyntheticEvent<NativeScrollEvent>\n        const event = {\n            nativeEvent: {\n                contentOffset: rawEvent.nativeEvent.contentOffset,\n                layoutMeasurement: rawEvent.nativeEvent.layoutMeasurement,\n                contentSize: rawEvent.nativeEvent.contentSize,\n            },\n        };\n        onScroll?.(event);\n    }, [onScroll]);\n    const _onVisibleIndicesChanged = useCallback(debounce((all) => {\n        if (all && all.length && !sectionScroll.current) {\n            const topItemIndex = all[0];\n            const topSection = data[findItemTitleIndex(topItemIndex)];\n            if (topSection && topSection !== _topSection.current) {\n                _topSection.current = topSection.title;\n                if (didScroll.current && !avoidDateUpdates) {\n                    // to avoid setDate() on first load (while setting the initial context.date value)\n                    setDate?.(topSection.title, UpdateSources.LIST_DRAG);\n                }\n            }\n        }\n    }, infiniteListProps?.visibleIndicesChangedDebounce ?? 1000, { leading: false, trailing: true }), [avoidDateUpdates, setDate, data]);\n    const findItemTitleIndex = useCallback((itemIndex) => {\n        let titleIndex = itemIndex;\n        while (titleIndex > 0 && !data[titleIndex]?.isTitle) {\n            titleIndex--;\n        }\n        return titleIndex;\n    }, [data]);\n    const _onMomentumScrollEnd = useCallback(() => {\n        sectionScroll.current = false;\n    }, []);\n    const headerTextStyle = useMemo(() => [style.current.sectionText, sectionStyle], [sectionStyle]);\n    const _renderSectionHeader = useCallback((info) => {\n        const title = info?.section?.title;\n        if (renderSectionHeader) {\n            return renderSectionHeader(title);\n        }\n        const headerTitle = getSectionTitle(title);\n        return <AgendaSectionHeader title={headerTitle} style={headerTextStyle}/>;\n    }, [headerTextStyle]);\n    const _renderItem = useCallback((_type, item) => {\n        if (item?.isTitle) {\n            return _renderSectionHeader({ section: item });\n        }\n        if (renderItem) {\n            return renderItem({ item });\n        }\n        return <></>;\n    }, [renderItem]);\n    const _onEndReached = useCallback(() => {\n        if (onEndReached) {\n            onEndReached({ distanceFromEnd: 0 }); // The RecyclerListView doesn't provide the distanceFromEnd, so we just pass 0\n        }\n    }, [onEndReached]);\n    return (<InfiniteList ref={list} renderItem={_renderItem} data={data} style={style.current.container} layoutProvider={layoutProvider} onScroll={_onScroll} onVisibleIndicesChanged={_onVisibleIndicesChanged} scrollViewProps={{ onMomentumScrollEnd: _onMomentumScrollEnd, nestedScrollEnabled: true, refreshControl }} onEndReached={_onEndReached} onEndReachedThreshold={onEndReachedThreshold} disableScrollOnDataChange renderFooter={infiniteListProps?.renderFooter}/>);\n};\nexport default InfiniteAgendaList;\nInfiniteAgendaList.displayName = 'InfiniteAgendaList';\nInfiniteAgendaList.propTypes = {\n    dayFormat: PropTypes.string,\n    dayFormatter: PropTypes.func,\n    useMoment: PropTypes.bool,\n    markToday: PropTypes.bool,\n    sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    avoidDateUpdates: PropTypes.bool\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}