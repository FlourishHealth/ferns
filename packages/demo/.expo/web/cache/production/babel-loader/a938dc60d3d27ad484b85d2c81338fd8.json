{"ast":null,"code":"\"use strict\";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result[\"default\"]=mod;return result;};Object.defineProperty(exports,\"__esModule\",{value:true});var React=__importStar(require(\"react\"));var react_native_1=require(\"react-native-web/dist/index\");var useKey_1=require(\"./hooks/useKey\");var Manager_1=require(\"./Manager\");exports.Context=React.createContext(null);exports.Host=function(_ref){var children=_ref.children,style=_ref.style;var managerRef=React.useRef(null);var queue=[];var _useKey_1$useKey=useKey_1.useKey(),generateKey=_useKey_1$useKey.generateKey,removeKey=_useKey_1$useKey.removeKey;React.useEffect(function(){var _a,_b,_c;while(queue.length&&managerRef.current){var action=queue.pop();if(action){switch(action.type){case'mount':(_a=managerRef.current)===null||_a===void 0?void 0:_a.mount(action.key,action.children);break;case'update':(_b=managerRef.current)===null||_b===void 0?void 0:_b.update(action.key,action.children);break;case'unmount':(_c=managerRef.current)===null||_c===void 0?void 0:_c.unmount(action.key);break;}}}},[]);var mount=function mount(children){var key=generateKey();if(managerRef.current){managerRef.current.mount(key,children);}else{queue.push({type:'mount',key:key,children:children});}return key;};var update=function update(key,children){if(managerRef.current){managerRef.current.update(key,children);}else{var op={type:'mount',key:key,children:children};var index=queue.findIndex(function(o){return o.type==='mount'||o.type==='update'&&o.key===key;});if(index>-1){queue[index]=op;}else{queue.push(op);}}};var unmount=function unmount(key){if(managerRef.current){managerRef.current.unmount(key);removeKey(key);}else{queue.push({type:'unmount',key:key});}};return React.createElement(exports.Context.Provider,{value:{mount:mount,update:update,unmount:unmount}},React.createElement(react_native_1.View,{style:[{flex:1},style],collapsable:false,pointerEvents:\"box-none\"},children),React.createElement(Manager_1.Manager,{ref:managerRef}));};","map":{"version":3,"names":["__importStar","mod","__esModule","result","k","Object","hasOwnProperty","call","defineProperty","exports","value","React","require","react_native_1","useKey_1","Manager_1","Context","createContext","Host","_ref","children","style","managerRef","useRef","queue","_useKey_1$useKey","useKey","generateKey","removeKey","useEffect","_a","_b","_c","length","current","action","pop","type","mount","key","update","unmount","push","op","index","findIndex","o","createElement","Provider","View","flex","collapsable","pointerEvents","Manager","ref"],"sources":["/Users/josh/src/ui/node_modules/react-native-portalize/lib/Host.js"],"sourcesContent":["\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst useKey_1 = require(\"./hooks/useKey\");\nconst Manager_1 = require(\"./Manager\");\nexports.Context = React.createContext(null);\nexports.Host = ({ children, style }) => {\n    const managerRef = React.useRef(null);\n    const queue = [];\n    const { generateKey, removeKey } = useKey_1.useKey();\n    React.useEffect(() => {\n        var _a, _b, _c;\n        while (queue.length && managerRef.current) {\n            const action = queue.pop();\n            if (action) {\n                switch (action.type) {\n                    case 'mount':\n                        (_a = managerRef.current) === null || _a === void 0 ? void 0 : _a.mount(action.key, action.children);\n                        break;\n                    case 'update':\n                        (_b = managerRef.current) === null || _b === void 0 ? void 0 : _b.update(action.key, action.children);\n                        break;\n                    case 'unmount':\n                        (_c = managerRef.current) === null || _c === void 0 ? void 0 : _c.unmount(action.key);\n                        break;\n                }\n            }\n        }\n    }, []);\n    const mount = (children) => {\n        const key = generateKey();\n        if (managerRef.current) {\n            managerRef.current.mount(key, children);\n        }\n        else {\n            queue.push({ type: 'mount', key, children });\n        }\n        return key;\n    };\n    const update = (key, children) => {\n        if (managerRef.current) {\n            managerRef.current.update(key, children);\n        }\n        else {\n            const op = { type: 'mount', key, children };\n            const index = queue.findIndex(o => o.type === 'mount' || (o.type === 'update' && o.key === key));\n            if (index > -1) {\n                queue[index] = op;\n            }\n            else {\n                queue.push(op);\n            }\n        }\n    };\n    const unmount = (key) => {\n        if (managerRef.current) {\n            managerRef.current.unmount(key);\n            removeKey(key);\n        }\n        else {\n            queue.push({ type: 'unmount', key });\n        }\n    };\n    return (React.createElement(exports.Context.Provider, { value: { mount, update, unmount } },\n        React.createElement(react_native_1.View, { style: [{ flex: 1 }, style], collapsable: false, pointerEvents: \"box-none\" }, children),\n        React.createElement(Manager_1.Manager, { ref: managerRef })));\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}