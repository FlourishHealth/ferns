{"ast":null,"code":"import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _defineProperty2 from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _get from\"@babel/runtime/helpers/get\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";var _excluded=[\"shouldActivateOnStart\",\"disallowInterruption\",\"shouldCancelWhenOutside\",\"minDurationMs\",\"maxDist\",\"minPointers\",\"maxPointers\"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty2(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import Hammer from'@egjs/hammerjs';import{State}from'../State';import{CONTENT_TOUCHES_DELAY,CONTENT_TOUCHES_QUICK_TAP_END_DELAY}from'./constants';import DiscreteGestureHandler from'./DiscreteGestureHandler';import{fireAfterInterval,isValidNumber,isnan}from'./utils';var PressGestureHandler=function(_DiscreteGestureHandl){_inherits(PressGestureHandler,_DiscreteGestureHandl);var _super=_createSuper(PressGestureHandler);function PressGestureHandler(){var _this;_classCallCheck(this,PressGestureHandler);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),\"visualFeedbackTimer\",void 0);_defineProperty(_assertThisInitialized(_this),\"initialEvent\",null);_defineProperty(_assertThisInitialized(_this),\"shouldDelayTouches\",true);return _this;}_createClass(PressGestureHandler,[{key:\"name\",get:function get(){return'press';}},{key:\"minDurationMs\",get:function get(){return isnan(this.config.minDurationMs)?5:this.config.minDurationMs;}},{key:\"maxDist\",get:function get(){return isnan(this.config.maxDist)?9:this.config.maxDist;}},{key:\"NativeGestureClass\",get:function get(){return Hammer.Press;}},{key:\"simulateCancelEvent\",value:function simulateCancelEvent(inputData){this.hasGestureFailed=true;this.cancelEvent(inputData);}},{key:\"updateHasCustomActivationCriteria\",value:function updateHasCustomActivationCriteria(_ref){var shouldCancelWhenOutside=_ref.shouldCancelWhenOutside,maxDistSq=_ref.maxDistSq;return shouldCancelWhenOutside||!isValidNumber(maxDistSq);}},{key:\"getState\",value:function getState(type){return _defineProperty2(_defineProperty2(_defineProperty2(_defineProperty2({},Hammer.INPUT_START,State.BEGAN),Hammer.INPUT_MOVE,State.ACTIVE),Hammer.INPUT_END,State.END),Hammer.INPUT_CANCEL,State.CANCELLED)[type];}},{key:\"getConfig\",value:function getConfig(){if(!this.hasCustomActivationCriteria){return{shouldCancelWhenOutside:true,maxDistSq:10};}return this.config;}},{key:\"getHammerConfig\",value:function getHammerConfig(){return _objectSpread(_objectSpread({},_get(_getPrototypeOf(PressGestureHandler.prototype),\"getHammerConfig\",this).call(this)),{},{time:this.minDurationMs});}},{key:\"onGestureActivated\",value:function onGestureActivated(ev){this.onGestureStart(ev);}},{key:\"shouldDelayTouchForEvent\",value:function shouldDelayTouchForEvent(_ref2){var pointerType=_ref2.pointerType;return this.shouldDelayTouches&&pointerType==='touch';}},{key:\"onGestureStart\",value:function onGestureStart(ev){var _this2=this;this.isGestureRunning=true;clearTimeout(this.visualFeedbackTimer);this.initialEvent=ev;this.visualFeedbackTimer=fireAfterInterval(function(){_this2.sendGestureStartedEvent(_this2.initialEvent);_this2.initialEvent=null;},this.shouldDelayTouchForEvent(ev)&&CONTENT_TOUCHES_DELAY);}},{key:\"sendGestureStartedEvent\",value:function sendGestureStartedEvent(ev){clearTimeout(this.visualFeedbackTimer);this.visualFeedbackTimer=null;this.sendEvent(_objectSpread(_objectSpread({},ev),{},{eventType:Hammer.INPUT_MOVE,isFirst:true}));}},{key:\"forceInvalidate\",value:function forceInvalidate(event){_get(_getPrototypeOf(PressGestureHandler.prototype),\"forceInvalidate\",this).call(this,event);clearTimeout(this.visualFeedbackTimer);this.visualFeedbackTimer=null;this.initialEvent=null;}},{key:\"onRawEvent\",value:function onRawEvent(ev){var _this3=this;_get(_getPrototypeOf(PressGestureHandler.prototype),\"onRawEvent\",this).call(this,ev);if(this.isGestureRunning){if(ev.isFinal){var timeout;if(this.visualFeedbackTimer){timeout=CONTENT_TOUCHES_QUICK_TAP_END_DELAY;this.sendGestureStartedEvent(this.initialEvent);this.initialEvent=null;}fireAfterInterval(function(){_this3.sendEvent(_objectSpread(_objectSpread({},ev),{},{eventType:Hammer.INPUT_END,isFinal:true}));_this3.onGestureEnded();},timeout);}else{this.sendEvent(_objectSpread(_objectSpread({},ev),{},{eventType:Hammer.INPUT_MOVE,isFinal:false}));}}}},{key:\"updateGestureConfig\",value:function updateGestureConfig(_ref3){var _ref3$shouldActivateO=_ref3.shouldActivateOnStart,shouldActivateOnStart=_ref3$shouldActivateO===void 0?false:_ref3$shouldActivateO,_ref3$disallowInterru=_ref3.disallowInterruption,disallowInterruption=_ref3$disallowInterru===void 0?false:_ref3$disallowInterru,_ref3$shouldCancelWhe=_ref3.shouldCancelWhenOutside,shouldCancelWhenOutside=_ref3$shouldCancelWhe===void 0?true:_ref3$shouldCancelWhe,_ref3$minDurationMs=_ref3.minDurationMs,minDurationMs=_ref3$minDurationMs===void 0?Number.NaN:_ref3$minDurationMs,_ref3$maxDist=_ref3.maxDist,maxDist=_ref3$maxDist===void 0?Number.NaN:_ref3$maxDist,_ref3$minPointers=_ref3.minPointers,minPointers=_ref3$minPointers===void 0?1:_ref3$minPointers,_ref3$maxPointers=_ref3.maxPointers,maxPointers=_ref3$maxPointers===void 0?1:_ref3$maxPointers,props=_objectWithoutProperties(_ref3,_excluded);return _get(_getPrototypeOf(PressGestureHandler.prototype),\"updateGestureConfig\",this).call(this,_objectSpread({shouldActivateOnStart:shouldActivateOnStart,disallowInterruption:disallowInterruption,shouldCancelWhenOutside:shouldCancelWhenOutside,minDurationMs:minDurationMs,maxDist:maxDist,minPointers:minPointers,maxPointers:maxPointers},props));}}]);return PressGestureHandler;}(DiscreteGestureHandler);export default PressGestureHandler;","map":{"version":3,"sources":["PressGestureHandler.ts"],"names":["Hammer","State","CONTENT_TOUCHES_DELAY","CONTENT_TOUCHES_QUICK_TAP_END_DELAY","DiscreteGestureHandler","fireAfterInterval","isValidNumber","isnan","PressGestureHandler","name","minDurationMs","config","maxDist","NativeGestureClass","Press","simulateCancelEvent","inputData","hasGestureFailed","cancelEvent","updateHasCustomActivationCriteria","shouldCancelWhenOutside","maxDistSq","getState","type","INPUT_START","BEGAN","INPUT_MOVE","ACTIVE","INPUT_END","END","INPUT_CANCEL","CANCELLED","getConfig","hasCustomActivationCriteria","getHammerConfig","time","onGestureActivated","ev","onGestureStart","shouldDelayTouchForEvent","pointerType","shouldDelayTouches","isGestureRunning","clearTimeout","visualFeedbackTimer","initialEvent","sendGestureStartedEvent","sendEvent","eventType","isFirst","forceInvalidate","event","onRawEvent","isFinal","timeout","onGestureEnded","updateGestureConfig","shouldActivateOnStart","disallowInterruption","Number","NaN","minPointers","maxPointers","props"],"mappings":"8sEAAA,MAAOA,CAAAA,MAAP,KAAmB,gBAAnB,CAEA,OAASC,KAAT,KAAsB,UAAtB,CACA,OACEC,qBADF,CAEEC,mCAFF,KAIO,aAJP,CAKA,MAAOC,CAAAA,sBAAP,KAAmC,0BAAnC,CAEA,OAASC,iBAAT,CAA4BC,aAA5B,CAA2CC,KAA3C,KAAwD,SAAxD,CAAA,GAEMC,CAAAA,mBAAN,UAAA,qBAAA,EAAA,SAAA,CAAA,mBAAA,CAAA,qBAAA,MAAA,MAAA,CAAA,YAAA,CAAA,mBAAA,EAAyD,SAAA,oBAAA,CAAA,KAAA,KAAA,CAAA,eAAA,MAAA,mBAAA,UAAA,IAAA,CAAA,SAAA,CAAA,MAAA,CAAA,IAAA,KAAA,KAAA,CAAA,IAAA,EAAA,IAAA,GAAA,IAAA,CAAA,IAAA,CAAA,IAAA,IAAA,IAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,GAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,MAAA,QAAA,MAAA,CAAA,IAAA,GAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,EAAA,qBAAA,CAAA,IAAA,EAAA,CAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,EAAA,cAAA,CAET,IAFS,CAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,EAAA,oBAAA,CAoBlC,IApBkC,CAAA,CAAA,OAAA,KAAA,CAAA,CAAA,YAAA,CAAA,mBAAA,GAAA,GAAA,QAAA,GAAA,CAGnDC,SAAAA,IAAAA,CAAO,CACT,MAAO,OAAP,CACD,CAAA,GAAA,GAAA,iBAAA,GAAA,CAEGC,SAAAA,IAAAA,CAAgB,CAElB,MAAOH,CAAAA,KAAK,CAAC,IAAA,CAAKI,MAAL,CAAYD,aAAb,CAALH,CAAmC,CAAnCA,CAAuC,IAAA,CAAKI,MAAL,CAAYD,aAA1D,CACD,CAAA,GAAA,GAAA,WAAA,GAAA,CAEGE,SAAAA,IAAAA,CAAU,CACZ,MAAOL,CAAAA,KAAK,CAAC,IAAA,CAAKI,MAAL,CAAYC,OAAb,CAALL,CAA6B,CAA7BA,CAAiC,IAAA,CAAKI,MAAL,CAAYC,OAApD,CACD,CAAA,GAAA,GAAA,sBAAA,GAAA,CAEGC,SAAAA,IAAAA,CAAqB,CACvB,MAAOb,CAAAA,MAAM,CAACc,KAAd,CACD,CAAA,GAAA,GAAA,uBAAA,KAAA,CAIDC,SAAAA,oBAAoBC,SAAD,CAA4B,CAE7C,IAAA,CAAKC,gBAAL,CAAwB,IAAxB,CACA,IAAA,CAAKC,WAAL,CAAiBF,SAAjB,CAAA,CACD,CAAA,GAAA,GAAA,qCAAA,KAAA,CAEDG,SAAAA,kCAAAA,IAAAA,CAGkD,IAFhDC,CAAAA,uBADgC,CAAA,IAAA,CAChCA,uBADgC,CAEhCC,SAAAA,CAAAA,IAAAA,CAAAA,SAAAA,CAEA,MAAOD,CAAAA,uBAAuB,EAAI,CAACd,aAAa,CAACe,SAAD,CAAhD,CACD,CAAA,GAAA,GAAA,YAAA,KAAA,CAEDC,SAAAA,SAASC,IAAD,CAA6C,CACnD,MAAO,CAAA,gBAAA,CAAA,gBAAA,CAAA,gBAAA,CAAA,gBAAA,IACJvB,MAAM,CAACwB,WAAR,CAAsBvB,KAAK,CAACwB,KADvB,EAEJzB,MAAM,CAAC0B,UAAR,CAAqBzB,KAAK,CAAC0B,MAFtB,EAGJ3B,MAAM,CAAC4B,SAAR,CAAoB3B,KAAK,CAAC4B,GAHrB,EAIJ7B,MAAM,CAAC8B,YAAR,CAAuB7B,KAAK,CAAC8B,SAAAA,EAC7BR,IALK,CAAP,CAMD,CAAA,GAAA,GAAA,aAAA,KAAA,CAEDS,SAAAA,UAAAA,CAAY,CACV,GAAI,CAAC,IAAA,CAAKC,2BAAV,CAAuC,CAGrC,MAAO,CACLb,uBAAuB,CAAE,IADpB,CAELC,SAAS,CAAE,EAFN,CAAP,CAID,CACD,MAAO,KAAA,CAAKV,MAAZ,CACD,CAAA,GAAA,GAAA,mBAAA,KAAA,CAEDuB,SAAAA,gBAAAA,CAAkB,CAChB,OAAA,aAAA,CAAA,aAAA,IAAA,IAAA,CAAA,eAAA,CAAA,mBAAA,CAAA,SAAA,0BAAA,IAAA,YAGEC,IAAI,CAAE,IAAA,CAAKzB,aAAAA,GAEd,CAAA,GAAA,GAAA,sBAAA,KAAA,CAED0B,SAAAA,mBAAmBC,EAAD,CAAqB,CACrC,IAAA,CAAKC,cAAL,CAAoBD,EAApB,CAAA,CACD,CAAA,GAAA,GAAA,4BAAA,KAAA,CAEDE,SAAAA,yBAAAA,KAAAA,CAA0D,IAA/BC,CAAAA,WAAAA,CAAAA,KAAAA,CAAAA,WAAAA,CAEzB,MAAO,KAAA,CAAKC,kBAAL,EAA2BD,WAAW,GAAK,OAAlD,CACD,CAAA,GAAA,GAAA,kBAAA,KAAA,CAEDF,SAAAA,eAAeD,EAAD,CAAqB,KAAA,MAAA,MACjC,IAAA,CAAKK,gBAAL,CAAwB,IAAxB,CACAC,YAAY,CAAC,IAAA,CAAKC,mBAAN,CAAZD,CACA,IAAA,CAAKE,YAAL,CAAoBR,EAApB,CACA,IAAA,CAAKO,mBAAL,CAA2BvC,iBAAiB,CAAC,UAAM,CACjD,MAAA,CAAKyC,uBAAL,CAA6B,MAAA,CAAKD,YAAlC,CAAA,CACA,MAAA,CAAKA,YAAL,CAAoB,IAApB,CACD,CAH2C,CAGzC,IAAA,CAAKN,wBAAL,CAA8BF,EAA9B,CAAA,EAAqCnC,qBAHI,CAA5C,CAID,CAAA,GAAA,GAAA,2BAAA,KAAA,CAED4C,SAAAA,wBAAwBT,EAAD,CAAqB,CAC1CM,YAAY,CAAC,IAAA,CAAKC,mBAAN,CAAZD,CACA,IAAA,CAAKC,mBAAL,CAA2B,IAA3B,CACA,IAAA,CAAKG,SAAL,CAAA,aAAA,CAAA,aAAA,IACKV,EADU,MAEbW,SAAS,CAAEhD,MAAM,CAAC0B,UAFL,CAGbuB,OAAO,CAAE,IAAA,EAHX,CAAA,CAKD,CAAA,GAAA,GAAA,mBAAA,KAAA,CAEDC,SAAAA,gBAAgBC,KAAD,CAAwB,CACrC,IAAA,CAAA,eAAA,CAAA,mBAAA,CAAA,SAAA,0BAAA,IAAA,MAAsBA,KAAtB,EACAR,YAAY,CAAC,IAAA,CAAKC,mBAAN,CAAZD,CACA,IAAA,CAAKC,mBAAL,CAA2B,IAA3B,CACA,IAAA,CAAKC,YAAL,CAAoB,IAApB,CACD,CAAA,GAAA,GAAA,cAAA,KAAA,CAEDO,SAAAA,WAAWf,EAAD,CAAqB,KAAA,MAAA,MAC7B,IAAA,CAAA,eAAA,CAAA,mBAAA,CAAA,SAAA,qBAAA,IAAA,MAAiBA,EAAjB,EACA,GAAI,IAAA,CAAKK,gBAAT,CAA2B,CACzB,GAAIL,EAAE,CAACgB,OAAP,CAAgB,CACd,GAAIC,CAAAA,OAAJ,CACA,GAAI,IAAA,CAAKV,mBAAT,CAA8B,CAI5BU,OAAO,CAAGnD,mCAAVmD,CACA,IAAA,CAAKR,uBAAL,CAA6B,IAAA,CAAKD,YAAlC,CAAA,CACA,IAAA,CAAKA,YAAL,CAAoB,IAApB,CACD,CACDxC,iBAAiB,CAAC,UAAM,CACtB,MAAA,CAAK0C,SAAL,CAAA,aAAA,CAAA,aAAA,IACKV,EADU,MAEbW,SAAS,CAAEhD,MAAM,CAAC4B,SAFL,CAGbyB,OAAO,CAAE,IAAA,EAHX,CADsB,CAOtB,MAAA,CAAKE,cAAL,CAAA,CAAA,CACD,CARgB,CAQdD,OARc,CAAjBjD,CASD,CAnBD,IAmBO,CACL,IAAA,CAAK0C,SAAL,CAAA,aAAA,CAAA,aAAA,IACKV,EADU,MAEbW,SAAS,CAAEhD,MAAM,CAAC0B,UAFL,CAGb2B,OAAO,CAAE,KAAA,EAHX,CAAA,CAKD,CACF,CACF,CAAA,GAAA,GAAA,uBAAA,KAAA,CAEDG,SAAAA,oBAAAA,KAAAA,CASG,KAAA,qBAAA,CAAA,KAAA,CARDC,qBAAqB,CAArBA,qBAAqB,CAAA,qBAAA,UAAG,KADN,CAAA,qBAAA,CAAA,qBAAA,CAAA,KAAA,CAElBC,oBAAoB,CAApBA,oBAAoB,CAAA,qBAAA,UAAG,KAFL,CAAA,qBAAA,CAAA,qBAAA,CAAA,KAAA,CAGlBtC,uBAAuB,CAAvBA,uBAAuB,CAAA,qBAAA,UAAG,IAHR,CAAA,qBAAA,CAAA,mBAAA,CAAA,KAAA,CAIlBV,aAAa,CAAbA,aAAa,CAAA,mBAAA,UAAGiD,MAAM,CAACC,GAJL,CAAA,mBAAA,CAAA,aAAA,CAAA,KAAA,CAKlBhD,OAAO,CAAPA,OAAO,CAAA,aAAA,UAAG+C,MAAM,CAACC,GALC,CAAA,aAAA,CAAA,iBAAA,CAAA,KAAA,CAMlBC,WAAW,CAAXA,WAAW,CAAA,iBAAA,UAAG,CANI,CAAA,iBAAA,CAAA,iBAAA,CAAA,KAAA,CAOlBC,WAAW,CAAXA,WAAW,CAAA,iBAAA,UAAG,CAPI,CAAA,iBAAA,CAQfC,KAAAA,CAAAA,wBAAAA,CAAAA,KAAAA,CAAAA,SAAAA,EAEH,OAAA,IAAA,CAAA,eAAA,CAAA,mBAAA,CAAA,SAAA,8BAAA,IAAA,MAAA,aAAA,EACEN,qBAD+B,CAC/BA,qBAD+B,CAE/BC,oBAF+B,CAE/BA,oBAF+B,CAG/BtC,uBAH+B,CAG/BA,uBAH+B,CAI/BV,aAJ+B,CAI/BA,aAJ+B,CAK/BE,OAL+B,CAK/BA,OAL+B,CAM/BiD,WAN+B,CAM/BA,WAN+B,CAO/BC,WAP+B,CAO/BA,WAP+B,EAQ5BC,KAAAA,GAEN,CAAA,WAAA,mBAAA,GAxJ+B3D,sBAAlC,EA0JA,cAAeI,CAAAA,mBAAf","sourcesContent":["import Hammer from '@egjs/hammerjs';\n\nimport { State } from '../State';\nimport {\n  CONTENT_TOUCHES_DELAY,\n  CONTENT_TOUCHES_QUICK_TAP_END_DELAY,\n  HammerInputNames,\n} from './constants';\nimport DiscreteGestureHandler from './DiscreteGestureHandler';\nimport { Config, HammerInputExt } from './GestureHandler';\nimport { fireAfterInterval, isValidNumber, isnan } from './utils';\n\nclass PressGestureHandler extends DiscreteGestureHandler {\n  private visualFeedbackTimer: any;\n  private initialEvent: HammerInputExt | null = null;\n  get name() {\n    return 'press';\n  }\n\n  get minDurationMs() {\n    // @ts-ignore FIXME(TS)\n    return isnan(this.config.minDurationMs) ? 5 : this.config.minDurationMs;\n  }\n\n  get maxDist() {\n    return isnan(this.config.maxDist) ? 9 : this.config.maxDist;\n  }\n\n  get NativeGestureClass() {\n    return Hammer.Press;\n  }\n\n  shouldDelayTouches = true;\n\n  simulateCancelEvent(inputData: HammerInputExt) {\n    // Long press never starts so we can't rely on the running event boolean.\n    this.hasGestureFailed = true;\n    this.cancelEvent(inputData);\n  }\n\n  updateHasCustomActivationCriteria({\n    shouldCancelWhenOutside,\n    maxDistSq,\n  }: Config & { shouldCancelWhenOutside: boolean }) {\n    return shouldCancelWhenOutside || !isValidNumber(maxDistSq);\n  }\n\n  getState(type: keyof typeof HammerInputNames): State {\n    return {\n      [Hammer.INPUT_START]: State.BEGAN,\n      [Hammer.INPUT_MOVE]: State.ACTIVE,\n      [Hammer.INPUT_END]: State.END,\n      [Hammer.INPUT_CANCEL]: State.CANCELLED,\n    }[type];\n  }\n\n  getConfig() {\n    if (!this.hasCustomActivationCriteria) {\n      // Default config\n      // If no params have been defined then this config should emulate the native gesture as closely as possible.\n      return {\n        shouldCancelWhenOutside: true,\n        maxDistSq: 10,\n      };\n    }\n    return this.config;\n  }\n\n  getHammerConfig() {\n    return {\n      ...super.getHammerConfig(),\n      // threshold: this.maxDist,\n      time: this.minDurationMs,\n    };\n  }\n\n  onGestureActivated(ev: HammerInputExt) {\n    this.onGestureStart(ev);\n  }\n\n  shouldDelayTouchForEvent({ pointerType }: HammerInputExt) {\n    // Don't disable event for mouse input\n    return this.shouldDelayTouches && pointerType === 'touch';\n  }\n\n  onGestureStart(ev: HammerInputExt) {\n    this.isGestureRunning = true;\n    clearTimeout(this.visualFeedbackTimer);\n    this.initialEvent = ev;\n    this.visualFeedbackTimer = fireAfterInterval(() => {\n      this.sendGestureStartedEvent(this.initialEvent as HammerInputExt);\n      this.initialEvent = null;\n    }, this.shouldDelayTouchForEvent(ev) && CONTENT_TOUCHES_DELAY);\n  }\n\n  sendGestureStartedEvent(ev: HammerInputExt) {\n    clearTimeout(this.visualFeedbackTimer);\n    this.visualFeedbackTimer = null;\n    this.sendEvent({\n      ...ev,\n      eventType: Hammer.INPUT_MOVE,\n      isFirst: true,\n    });\n  }\n\n  forceInvalidate(event: HammerInputExt) {\n    super.forceInvalidate(event);\n    clearTimeout(this.visualFeedbackTimer);\n    this.visualFeedbackTimer = null;\n    this.initialEvent = null;\n  }\n\n  onRawEvent(ev: HammerInputExt) {\n    super.onRawEvent(ev);\n    if (this.isGestureRunning) {\n      if (ev.isFinal) {\n        let timeout;\n        if (this.visualFeedbackTimer) {\n          // Aesthetic timing for a quick tap.\n          // We haven't activated the tap right away to emulate iOS `delaysContentTouches`\n          // Now we must send the initial activation event and wait a set amount of time before firing the end event.\n          timeout = CONTENT_TOUCHES_QUICK_TAP_END_DELAY;\n          this.sendGestureStartedEvent(this.initialEvent as HammerInputExt);\n          this.initialEvent = null;\n        }\n        fireAfterInterval(() => {\n          this.sendEvent({\n            ...ev,\n            eventType: Hammer.INPUT_END,\n            isFinal: true,\n          });\n          // @ts-ignore -- this should explicitly support undefined\n          this.onGestureEnded();\n        }, timeout);\n      } else {\n        this.sendEvent({\n          ...ev,\n          eventType: Hammer.INPUT_MOVE,\n          isFinal: false,\n        });\n      }\n    }\n  }\n\n  updateGestureConfig({\n    shouldActivateOnStart = false,\n    disallowInterruption = false,\n    shouldCancelWhenOutside = true,\n    minDurationMs = Number.NaN,\n    maxDist = Number.NaN,\n    minPointers = 1,\n    maxPointers = 1,\n    ...props\n  }) {\n    return super.updateGestureConfig({\n      shouldActivateOnStart,\n      disallowInterruption,\n      shouldCancelWhenOutside,\n      minDurationMs,\n      maxDist,\n      minPointers,\n      maxPointers,\n      ...props,\n    });\n  }\n}\nexport default PressGestureHandler;\n"]},"metadata":{},"sourceType":"module"}