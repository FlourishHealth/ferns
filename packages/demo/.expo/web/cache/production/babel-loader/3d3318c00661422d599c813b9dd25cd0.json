{"ast":null,"code":"'use strict';import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{useEffect,useRef}from'react';import{initializeSensor,registerSensor,unregisterSensor}from'../core';import{SensorType,IOSReferenceFrame}from'../commonTypes';import{callMicrotasks}from'../threads';var _worklet_3591825116582_init_data={code:\"function eulerToQuaternion(pitch,roll,yaw){const c1=Math.cos(pitch/2);const s1=Math.sin(pitch/2);const c2=Math.cos(roll/2);const s2=Math.sin(roll/2);const c3=Math.cos(yaw/2);const s3=Math.sin(yaw/2);return[s1*c2*c3-c1*s2*s3,c1*s2*c3+s1*c2*s3,c1*c2*s3+s1*s2*c3,c1*c2*c3-s1*s2*s3];}\"};var eulerToQuaternion=function(){var eulerToQuaternion=function eulerToQuaternion(pitch,roll,yaw){var c1=Math.cos(pitch/2);var s1=Math.sin(pitch/2);var c2=Math.cos(roll/2);var s2=Math.sin(roll/2);var c3=Math.cos(yaw/2);var s3=Math.sin(yaw/2);return[s1*c2*c3-c1*s2*s3,c1*s2*c3+s1*c2*s3,c1*c2*s3+s1*s2*c3,c1*c2*c3-s1*s2*s3];};eulerToQuaternion.__closure={};eulerToQuaternion.__workletHash=3591825116582;eulerToQuaternion.__initData=_worklet_3591825116582_init_data;return eulerToQuaternion;}();var _worklet_6333234931453_init_data={code:\"function adjustRotationToInterfaceOrientation(data){const{eulerToQuaternion}=this.__closure;const{interfaceOrientation:interfaceOrientation,pitch:pitch,roll:roll,yaw:yaw}=data;if(interfaceOrientation===90){data.pitch=roll;data.roll=-pitch;data.yaw=yaw-Math.PI/2;}else if(interfaceOrientation===270){data.pitch=-roll;data.roll=pitch;data.yaw=yaw+Math.PI/2;}else if(interfaceOrientation===180){data.pitch*=-1;data.roll*=-1;data.yaw*=-1;}const q=eulerToQuaternion(data.pitch,data.roll,data.yaw);data.qx=q[0];data.qy=q[1];data.qz=q[2];data.qw=q[3];return data;}\"};var adjustRotationToInterfaceOrientation=function(){var adjustRotationToInterfaceOrientation=function adjustRotationToInterfaceOrientation(data){var interfaceOrientation=data.interfaceOrientation,pitch=data.pitch,roll=data.roll,yaw=data.yaw;if(interfaceOrientation===90){data.pitch=roll;data.roll=-pitch;data.yaw=yaw-Math.PI/2;}else if(interfaceOrientation===270){data.pitch=-roll;data.roll=pitch;data.yaw=yaw+Math.PI/2;}else if(interfaceOrientation===180){data.pitch*=-1;data.roll*=-1;data.yaw*=-1;}var q=eulerToQuaternion(data.pitch,data.roll,data.yaw);data.qx=q[0];data.qy=q[1];data.qz=q[2];data.qw=q[3];return data;};adjustRotationToInterfaceOrientation.__closure={eulerToQuaternion:eulerToQuaternion};adjustRotationToInterfaceOrientation.__workletHash=6333234931453;adjustRotationToInterfaceOrientation.__initData=_worklet_6333234931453_init_data;return adjustRotationToInterfaceOrientation;}();var _worklet_14148869364242_init_data={code:\"function adjustVectorToInterfaceOrientation(data){const{interfaceOrientation:interfaceOrientation,x:x,y:y}=data;if(interfaceOrientation===90){data.x=-y;data.y=x;}else if(interfaceOrientation===270){data.x=y;data.y=-x;}else if(interfaceOrientation===180){data.x*=-1;data.y*=-1;}return data;}\"};var adjustVectorToInterfaceOrientation=function(){var adjustVectorToInterfaceOrientation=function adjustVectorToInterfaceOrientation(data){var interfaceOrientation=data.interfaceOrientation,x=data.x,y=data.y;if(interfaceOrientation===90){data.x=-y;data.y=x;}else if(interfaceOrientation===270){data.x=y;data.y=-x;}else if(interfaceOrientation===180){data.x*=-1;data.y*=-1;}return data;};adjustVectorToInterfaceOrientation.__closure={};adjustVectorToInterfaceOrientation.__workletHash=14148869364242;adjustVectorToInterfaceOrientation.__initData=_worklet_14148869364242_init_data;return adjustVectorToInterfaceOrientation;}();var _worklet_4762875893066_init_data={code:\"function anonymous(data){const{adjustToInterfaceOrientation,sensorType,SensorType,adjustRotationToInterfaceOrientation,adjustVectorToInterfaceOrientation,sensorData,callMicrotasks}=this.__closure;if(adjustToInterfaceOrientation){if(sensorType===SensorType.ROTATION){data=adjustRotationToInterfaceOrientation(data);}else{data=adjustVectorToInterfaceOrientation(data);}}sensorData.value=data;callMicrotasks();}\"};export function useAnimatedSensor(sensorType,userConfig){var config=_objectSpread({interval:'auto',adjustToInterfaceOrientation:true,iosReferenceFrame:IOSReferenceFrame.Auto},userConfig);var ref=useRef({sensor:initializeSensor(sensorType,config),unregister:function unregister(){},isAvailable:false,config:config});useEffect(function(){var newConfig=_objectSpread(_objectSpread({},config),userConfig);ref.current.sensor=initializeSensor(sensorType,newConfig);var sensorData=ref.current.sensor;var adjustToInterfaceOrientation=ref.current.config.adjustToInterfaceOrientation;var id=registerSensor(sensorType,config,function(){var anonymous=function anonymous(data){if(adjustToInterfaceOrientation){if(sensorType===SensorType.ROTATION){data=adjustRotationToInterfaceOrientation(data);}else{data=adjustVectorToInterfaceOrientation(data);}}sensorData.value=data;callMicrotasks();};anonymous.__closure={adjustToInterfaceOrientation:adjustToInterfaceOrientation,sensorType:sensorType,SensorType:SensorType,adjustRotationToInterfaceOrientation:adjustRotationToInterfaceOrientation,adjustVectorToInterfaceOrientation:adjustVectorToInterfaceOrientation,sensorData:sensorData,callMicrotasks:callMicrotasks};anonymous.__workletHash=4762875893066;anonymous.__initData=_worklet_4762875893066_init_data;return anonymous;}());if(id!==-1){ref.current.unregister=function(){return unregisterSensor(id);};ref.current.isAvailable=true;}else{ref.current.unregister=function(){};ref.current.isAvailable=false;}return function(){ref.current.unregister();};},[sensorType,userConfig]);return ref.current;}","map":{"version":3,"sources":["useAnimatedSensor.ts"],"names":["useEffect","useRef","initializeSensor","registerSensor","unregisterSensor","SensorType","IOSReferenceFrame","callMicrotasks","eulerToQuaternion","pitch","roll","yaw","c1","Math","cos","s1","sin","c2","s2","c3","s3","adjustRotationToInterfaceOrientation","data","interfaceOrientation","PI","q","qx","qy","qz","qw","adjustVectorToInterfaceOrientation","x","y","useAnimatedSensor","sensorType","userConfig","config","interval","adjustToInterfaceOrientation","iosReferenceFrame","Auto","ref","sensor","unregister","isAvailable","newConfig","current","sensorData","id","ROTATION","value"],"mappings":"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","sourcesContent":["'use strict';\nimport { useEffect, useRef } from 'react';\nimport { initializeSensor, registerSensor, unregisterSensor } from '../core';\nimport type {\n  SensorConfig,\n  AnimatedSensor,\n  Value3D,\n  ValueRotation,\n} from '../commonTypes';\nimport { SensorType, IOSReferenceFrame } from '../commonTypes';\nimport { callMicrotasks } from '../threads';\n\n// euler angles are in order ZXY, z = yaw, x = pitch, y = roll\n// https://github.com/mrdoob/three.js/blob/dev/src/math/Quaternion.js#L237\nfunction eulerToQuaternion(pitch: number, roll: number, yaw: number) {\n  'worklet';\n  const c1 = Math.cos(pitch / 2);\n  const s1 = Math.sin(pitch / 2);\n  const c2 = Math.cos(roll / 2);\n  const s2 = Math.sin(roll / 2);\n  const c3 = Math.cos(yaw / 2);\n  const s3 = Math.sin(yaw / 2);\n\n  return [\n    s1 * c2 * c3 - c1 * s2 * s3,\n    c1 * s2 * c3 + s1 * c2 * s3,\n    c1 * c2 * s3 + s1 * s2 * c3,\n    c1 * c2 * c3 - s1 * s2 * s3,\n  ];\n}\n\nfunction adjustRotationToInterfaceOrientation(data: ValueRotation) {\n  'worklet';\n  const { interfaceOrientation, pitch, roll, yaw } = data;\n  if (interfaceOrientation === 90) {\n    data.pitch = roll;\n    data.roll = -pitch;\n    data.yaw = yaw - Math.PI / 2;\n  } else if (interfaceOrientation === 270) {\n    data.pitch = -roll;\n    data.roll = pitch;\n    data.yaw = yaw + Math.PI / 2;\n  } else if (interfaceOrientation === 180) {\n    data.pitch *= -1;\n    data.roll *= -1;\n    data.yaw *= -1;\n  }\n\n  const q = eulerToQuaternion(data.pitch, data.roll, data.yaw);\n  data.qx = q[0];\n  data.qy = q[1];\n  data.qz = q[2];\n  data.qw = q[3];\n  return data;\n}\n\nfunction adjustVectorToInterfaceOrientation(data: Value3D) {\n  'worklet';\n  const { interfaceOrientation, x, y } = data;\n  if (interfaceOrientation === 90) {\n    data.x = -y;\n    data.y = x;\n  } else if (interfaceOrientation === 270) {\n    data.x = y;\n    data.y = -x;\n  } else if (interfaceOrientation === 180) {\n    data.x *= -1;\n    data.y *= -1;\n  }\n  return data;\n}\n\n/**\n * Lets you create animations based on data from the device's sensors.\n *\n * @param sensorType - Type of the sensor to use. Configured with {@link SensorType} enum.\n * @param config - The sensor configuration - {@link SensorConfig}.\n * @returns An object containing the sensor measurements [shared value](https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/glossary#shared-value) and a function to unregister the sensor\n * @see https://docs.swmansion.com/react-native-reanimated/docs/device/useAnimatedSensor\n */\nexport function useAnimatedSensor(\n  sensorType: SensorType.ROTATION,\n  userConfig?: Partial<SensorConfig>\n): AnimatedSensor<ValueRotation>;\nexport function useAnimatedSensor(\n  sensorType: Exclude<SensorType, SensorType.ROTATION>,\n  userConfig?: Partial<SensorConfig>\n): AnimatedSensor<Value3D>;\nexport function useAnimatedSensor(\n  sensorType: SensorType,\n  userConfig?: Partial<SensorConfig>\n): AnimatedSensor<ValueRotation | Value3D> {\n  const config: SensorConfig = {\n    interval: 'auto',\n    adjustToInterfaceOrientation: true,\n    iosReferenceFrame: IOSReferenceFrame.Auto,\n    ...userConfig,\n  };\n  const ref = useRef<AnimatedSensor<Value3D | ValueRotation>>({\n    sensor: initializeSensor(sensorType, config),\n    unregister: () => {\n      // NOOP\n    },\n    isAvailable: false,\n    config: config,\n  });\n\n  useEffect(() => {\n    const newConfig = {\n      ...config,\n      ...userConfig,\n    };\n    ref.current.sensor = initializeSensor(sensorType, newConfig);\n\n    const sensorData = ref.current.sensor;\n    const adjustToInterfaceOrientation =\n      ref.current.config.adjustToInterfaceOrientation;\n\n    const id = registerSensor(sensorType, config, (data) => {\n      'worklet';\n      if (adjustToInterfaceOrientation) {\n        if (sensorType === SensorType.ROTATION) {\n          data = adjustRotationToInterfaceOrientation(data as ValueRotation);\n        } else {\n          data = adjustVectorToInterfaceOrientation(data as Value3D);\n        }\n      }\n      sensorData.value = data;\n      callMicrotasks();\n    });\n\n    if (id !== -1) {\n      // if sensor is available\n      ref.current.unregister = () => unregisterSensor(id);\n      ref.current.isAvailable = true;\n    } else {\n      // if sensor is unavailable\n      ref.current.unregister = () => {\n        // NOOP\n      };\n      ref.current.isAvailable = false;\n    }\n\n    return () => {\n      ref.current.unregister();\n    };\n  }, [sensorType, userConfig]);\n\n  return ref.current;\n}\n"]},"metadata":{},"sourceType":"module"}