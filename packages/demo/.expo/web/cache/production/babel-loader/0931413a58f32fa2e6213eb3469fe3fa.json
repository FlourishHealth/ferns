{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import{getCalendars}from\"expo-localization\";import{AsYouType}from\"libphonenumber-js\";import React,{useCallback,useContext,useMemo,useState}from\"react\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import Platform from\"react-native-web/dist/exports/Platform\";import Pressable from\"react-native-web/dist/exports/Pressable\";import TextInput from\"react-native-web/dist/exports/TextInput\";import View from\"react-native-web/dist/exports/View\";import{Box}from\"./Box\";import{DateTimeActionSheet}from\"./DateTimeActionSheet\";import{printDate,printDateAndTime,printTime}from\"./DateUtilities\";import{DecimalRangeActionSheet}from\"./DecimalRangeActionSheet\";import{HeightActionSheet}from\"./HeightActionSheet\";import{Icon}from\"./Icon\";import{NumberPickerActionSheet}from\"./NumberPickerActionSheet\";import{ThemeContext}from\"./Theme\";import{WithLabel}from\"./WithLabel\";var keyboardMap={date:\"default\",email:\"email-address\",number:\"number-pad\",numberRange:\"number-pad\",decimalRange:\"decimal-pad\",decimal:\"decimal-pad\",height:\"default\",password:\"default\",phoneNumber:\"number-pad\",search:\"default\",text:\"default\",url:undefined,username:\"default\"};var textContentMap={date:\"none\",email:\"emailAddress\",number:\"none\",decimal:\"none\",decimalRange:\"none\",height:\"none\",password:\"password\",search:\"none\",text:\"none\",url:undefined,username:\"username\"};export var TextField=function TextField(_ref){var _ref$blurOnSubmit=_ref.blurOnSubmit,blurOnSubmit=_ref$blurOnSubmit===void 0?true:_ref$blurOnSubmit,value=_ref.value,propsHeight=_ref.height,_onChange=_ref.onChange,min=_ref.min,max=_ref.max,_ref$type=_ref.type,type=_ref$type===void 0?\"text\":_ref$type,searching=_ref.searching,autoComplete=_ref.autoComplete,autoFocus=_ref.autoFocus,disabled=_ref.disabled,errorMessage=_ref.errorMessage,errorMessageColor=_ref.errorMessageColor,inputRef=_ref.inputRef,multiline=_ref.multiline,rows=_ref.rows,placeholder=_ref.placeholder,grow=_ref.grow,label=_ref.label,labelColor=_ref.labelColor,returnKeyType=_ref.returnKeyType,_onBlur=_ref.onBlur,style=_ref.style,onEnter=_ref.onEnter,_onSubmitEditing=_ref.onSubmitEditing,testID=_ref.testID,transformValue=_ref.transformValue;var _a;var _useContext=useContext(ThemeContext),theme=_useContext.theme;var dateActionSheetRef=React.createRef();var numberRangeActionSheetRef=React.createRef();var decimalRangeActionSheetRef=React.createRef();var weightActionSheetRef=React.createRef();var calendar=getCalendars()[0];var localTimeZone=calendar===null||calendar===void 0?void 0:calendar.timeZone;if(!localTimeZone){console.warn(\"Could not automatically determine timezone.\");}var _useState=useState(false),_useState2=_slicedToArray(_useState,2),focused=_useState2[0],setFocused=_useState2[1];var _useState3=useState(propsHeight||40),_useState4=_slicedToArray(_useState3,2),height=_useState4[0],setHeight=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showDate=_useState6[0],setShowDate=_useState6[1];var renderIcon=function renderIcon(){if(type!==\"search\"){return null;}if(searching){return React.createElement(Box,{marginRight:4},React.createElement(ActivityIndicator,{color:theme.primary,size:\"small\"}));}else{return React.createElement(Box,{marginRight:2},React.createElement(Icon,{name:\"search\",prefix:\"far\",size:\"md\"}));}};var borderColor;if(errorMessage){borderColor=theme.red;}else if(focused){borderColor=theme.blue;}else{borderColor=theme.gray;}var getHeight=useCallback(function(){if(grow){return Math.max(40,height);}else if(multiline){return height||\"100%\";}else{return 40;}},[grow,height,multiline]);var defaultTextInputStyles=useMemo(function(){var defaultStyles=Object.assign({flex:1,paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:0,height:getHeight(),width:\"100%\",color:theme.darkGray,fontFamily:theme.primaryFont},style);if(\"web\"===\"web\"){defaultStyles.outline=0;}return defaultStyles;},[getHeight,style,theme.darkGray,theme.primaryFont]);var isHandledByModal=[\"date\",\"datetime\",\"time\",\"numberRange\",\"decimalRange\",\"height\"].includes(type);var isEditable=!disabled&&!isHandledByModal;var shouldAutocorrect=type===\"text\"&&(!autoComplete||autoComplete===\"on\");var keyboardType=keyboardMap[type];var textContentType=textContentMap[type||\"text\"];var withLabelProps={label:label,labelColor:labelColor};var onTap=useCallback(function(){var _a,_b,_c;if(disabled){return;}if([\"date\",\"datetime\",\"time\"].includes(type)){setShowDate(true);}else if(type===\"numberRange\"){(_a=numberRangeActionSheetRef===null||numberRangeActionSheetRef===void 0?void 0:numberRangeActionSheetRef.current)===null||_a===void 0?void 0:_a.show();}else if(type===\"decimalRange\"){(_b=decimalRangeActionSheetRef===null||decimalRangeActionSheetRef===void 0?void 0:decimalRangeActionSheetRef.current)===null||_b===void 0?void 0:_b.show();}else if(type===\"height\"){(_c=weightActionSheetRef===null||weightActionSheetRef===void 0?void 0:weightActionSheetRef.current)===null||_c===void 0?void 0:_c.show();}},[decimalRangeActionSheetRef,disabled,numberRangeActionSheetRef,type,weightActionSheetRef]);var displayValue=value;if(value){var timezone=((_a=transformValue===null||transformValue===void 0?void 0:transformValue.options)===null||_a===void 0?void 0:_a.timezone)||localTimeZone;if(type===\"date\"){displayValue=printDate(value,{ignoreTime:true});}else if(type===\"time\"){displayValue=printTime(value,{timezone:timezone,showTimezone:true});}else if(type===\"datetime\"){displayValue=printDateAndTime(value,{timezone:timezone,showTimezone:true});}else if(type===\"height\"){displayValue=`${Math.floor(Number(value)/12)} ft, ${Number(value)%12} in`;}else if(type===\"phoneNumber\"){var formattedPhoneNumber=new AsYouType(\"US\").input(value);if(displayValue!==formattedPhoneNumber&&value.length!==4){displayValue=formattedPhoneNumber;}}}else{if([\"date\",\"datetime\",\"time\"].includes(type)){displayValue=\"\";}}var Wrapper=isHandledByModal?Pressable:View;return React.createElement(React.Fragment,null,React.createElement(WithLabel,{label:errorMessage,labelColor:errorMessageColor||\"red\",labelPlacement:\"after\",labelSize:\"sm\"},React.createElement(WithLabel,Object.assign({},withLabelProps),React.createElement(Wrapper,{style:{flexDirection:\"row\",justifyContent:\"center\",alignItems:\"center\",minHeight:getHeight(),width:\"100%\",paddingHorizontal:focused?10:14,paddingVertical:focused?0:4,borderColor:borderColor,borderWidth:focused?5:1,borderRadius:16,backgroundColor:disabled?theme.gray:theme.white,overflow:\"hidden\"},onPress:function onPress(){onTap();},onTouchStart:function onTouchStart(){onTap();}},renderIcon(),React.createElement(TextInput,{ref:function ref(_ref2){if(inputRef){inputRef(_ref2);}},autoCapitalize:type===\"text\"?\"sentences\":\"none\",autoCorrect:shouldAutocorrect,autoFocus:autoFocus,blurOnSubmit:blurOnSubmit,editable:isEditable,keyboardType:keyboardType,multiline:multiline,numberOfLines:rows||4,placeholder:placeholder,placeholderTextColor:theme.gray,returnKeyType:type===\"number\"||type===\"decimal\"?\"done\":returnKeyType,secureTextEntry:type===\"password\",style:defaultTextInputStyles,testID:testID,textContentType:textContentType,underlineColorAndroid:\"transparent\",value:displayValue,onBlur:function onBlur(){if(!isHandledByModal){setFocused(false);}if(_onBlur){_onBlur({value:value!==null&&value!==void 0?value:\"\"});}},onChangeText:function onChangeText(text){if(!_onChange){return;}if(type===\"phoneNumber\"){var _formattedPhoneNumber=new AsYouType(\"US\").input(text);if(_formattedPhoneNumber===value){_onChange({value:text});}else{_onChange({value:_formattedPhoneNumber});}}else if(type===\"number\"){text=text.replace(/[^0-9]/g,\"\");_onChange({value:!isNaN(parseInt(text))?parseInt(text).toString():\"\"});}else if(type===\"date\"||type===\"datetime\"||type===\"time\"){}else{_onChange({value:text});}},onContentSizeChange:function onContentSizeChange(event){if(!grow){return;}setHeight(event.nativeEvent.contentSize.height);},onFocus:function onFocus(){if(!isHandledByModal){setFocused(true);}},onSubmitEditing:function onSubmitEditing(){if(onEnter){onEnter();}if(_onSubmitEditing){_onSubmitEditing();}}})))),(type===\"date\"||type===\"time\"||type===\"datetime\")&&(React.createElement(DateTimeActionSheet,{actionSheetRef:dateActionSheetRef,mode:type,transformValue:transformValue,value:value,visible:showDate,onChange:function onChange(result){_onChange(result);setShowDate(false);setFocused(false);},onDismiss:function onDismiss(){return setShowDate(false);}})),type===\"numberRange\"&&value&&(React.createElement(NumberPickerActionSheet,{actionSheetRef:numberRangeActionSheetRef,max:max||(min||0)+100,min:min||0,value:value,onChange:function onChange(result){return _onChange(result);}})),type===\"decimalRange\"&&value&&(React.createElement(DecimalRangeActionSheet,{actionSheetRef:decimalRangeActionSheetRef,max:max||(min||0)+100,min:min||0,value:value,onChange:function onChange(result){return _onChange(result);}})),type===\"height\"&&(React.createElement(HeightActionSheet,{actionSheetRef:weightActionSheetRef,value:value,onChange:function onChange(result){_onChange(result);}})));};","map":{"version":3,"sources":["../src/TextField.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { getCalendars } from \"expo-localization\";\nimport { AsYouType } from \"libphonenumber-js\";\nimport React, { useCallback, useContext, useMemo, useState } from \"react\";\nimport { ActivityIndicator, Platform, Pressable, TextInput, View, } from \"react-native\";\nimport { Box } from \"./Box\";\nimport { DateTimeActionSheet } from \"./DateTimeActionSheet\";\nimport { printDate, printDateAndTime, printTime } from \"./DateUtilities\";\nimport { DecimalRangeActionSheet } from \"./DecimalRangeActionSheet\";\nimport { HeightActionSheet } from \"./HeightActionSheet\";\nimport { Icon } from \"./Icon\";\nimport { NumberPickerActionSheet } from \"./NumberPickerActionSheet\";\nimport { ThemeContext } from \"./Theme\";\nimport { WithLabel } from \"./WithLabel\";\nconst keyboardMap = {\n    date: \"default\",\n    email: \"email-address\",\n    number: \"number-pad\",\n    numberRange: \"number-pad\",\n    decimalRange: \"decimal-pad\",\n    decimal: \"decimal-pad\",\n    height: \"default\",\n    password: \"default\",\n    phoneNumber: \"number-pad\",\n    search: \"default\",\n    text: \"default\",\n    url: Platform.select({\n        ios: \"url\",\n        android: \"default\",\n    }),\n    username: \"default\",\n};\n// Not an exhaustive list of all the textContent types, but the ones we use.\nconst textContentMap = {\n    date: \"none\",\n    email: \"emailAddress\",\n    number: \"none\",\n    decimal: \"none\",\n    decimalRange: \"none\",\n    height: \"none\",\n    password: \"password\",\n    search: \"none\",\n    text: \"none\",\n    url: Platform.select({\n        ios: \"URL\",\n        android: \"none\",\n    }),\n    username: \"username\",\n};\nexport const TextField = ({ blurOnSubmit = true, value, height: propsHeight, onChange, min, max, type = \"text\", searching, autoComplete, autoFocus, disabled, errorMessage, errorMessageColor, inputRef, multiline, rows, placeholder, grow, label, labelColor, returnKeyType, onBlur, style, onEnter, onSubmitEditing, testID, transformValue, }) => {\n    var _a;\n    const { theme } = useContext(ThemeContext);\n    const dateActionSheetRef = React.createRef();\n    const numberRangeActionSheetRef = React.createRef();\n    const decimalRangeActionSheetRef = React.createRef();\n    const weightActionSheetRef = React.createRef();\n    const calendar = getCalendars()[0];\n    const localTimeZone = calendar === null || calendar === void 0 ? void 0 : calendar.timeZone;\n    if (!localTimeZone) {\n        console.warn(\"Could not automatically determine timezone.\");\n    }\n    const [focused, setFocused] = useState(false);\n    const [height, setHeight] = useState(propsHeight || 40);\n    const [showDate, setShowDate] = useState(false);\n    const renderIcon = () => {\n        if (type !== \"search\") {\n            return null;\n        }\n        if (searching) {\n            return (React.createElement(Box, { marginRight: 4 },\n                React.createElement(ActivityIndicator, { color: theme.primary, size: \"small\" })));\n        }\n        else {\n            return (React.createElement(Box, { marginRight: 2 },\n                React.createElement(Icon, { name: \"search\", prefix: \"far\", size: \"md\" })));\n        }\n    };\n    let borderColor;\n    if (errorMessage) {\n        borderColor = theme.red;\n    }\n    else if (focused) {\n        borderColor = theme.blue;\n    }\n    else {\n        borderColor = theme.gray;\n    }\n    const getHeight = useCallback(() => {\n        if (grow) {\n            return Math.max(40, height);\n        }\n        else if (multiline) {\n            return height || \"100%\";\n        }\n        else {\n            return 40;\n        }\n    }, [grow, height, multiline]);\n    const defaultTextInputStyles = useMemo(() => {\n        const defaultStyles = Object.assign({ flex: 1, paddingTop: 4, paddingRight: 4, paddingBottom: 4, paddingLeft: 0, height: getHeight(), width: \"100%\", color: theme.darkGray, fontFamily: theme.primaryFont }, style);\n        if (Platform.OS === \"web\") {\n            defaultStyles.outline = 0;\n        }\n        return defaultStyles;\n    }, [getHeight, style, theme.darkGray, theme.primaryFont]);\n    const isHandledByModal = [\n        \"date\",\n        \"datetime\",\n        \"time\",\n        \"numberRange\",\n        \"decimalRange\",\n        \"height\",\n    ].includes(type);\n    const isEditable = !disabled && !isHandledByModal;\n    const shouldAutocorrect = type === \"text\" && (!autoComplete || autoComplete === \"on\");\n    const keyboardType = keyboardMap[type];\n    const textContentType = textContentMap[type || \"text\"];\n    const withLabelProps = {\n        label,\n        labelColor,\n    };\n    const onTap = useCallback(() => {\n        var _a, _b, _c;\n        if (disabled) {\n            return;\n        }\n        if ([\"date\", \"datetime\", \"time\"].includes(type)) {\n            setShowDate(true);\n        }\n        else if (type === \"numberRange\") {\n            (_a = numberRangeActionSheetRef === null || numberRangeActionSheetRef === void 0 ? void 0 : numberRangeActionSheetRef.current) === null || _a === void 0 ? void 0 : _a.show();\n        }\n        else if (type === \"decimalRange\") {\n            (_b = decimalRangeActionSheetRef === null || decimalRangeActionSheetRef === void 0 ? void 0 : decimalRangeActionSheetRef.current) === null || _b === void 0 ? void 0 : _b.show();\n        }\n        else if (type === \"height\") {\n            (_c = weightActionSheetRef === null || weightActionSheetRef === void 0 ? void 0 : weightActionSheetRef.current) === null || _c === void 0 ? void 0 : _c.show();\n        }\n    }, [decimalRangeActionSheetRef, disabled, numberRangeActionSheetRef, type, weightActionSheetRef]);\n    let displayValue = value;\n    if (value) {\n        const timezone = ((_a = transformValue === null || transformValue === void 0 ? void 0 : transformValue.options) === null || _a === void 0 ? void 0 : _a.timezone) || localTimeZone;\n        if (type === \"date\") {\n            displayValue = printDate(value, { ignoreTime: true });\n        }\n        else if (type === \"time\") {\n            displayValue = printTime(value, { timezone, showTimezone: true });\n        }\n        else if (type === \"datetime\") {\n            displayValue = printDateAndTime(value, { timezone, showTimezone: true });\n        }\n        else if (type === \"height\") {\n            displayValue = `${Math.floor(Number(value) / 12)} ft, ${Number(value) % 12} in`;\n        }\n        else if (type === \"phoneNumber\") {\n            // By default, if a value is something like `\"(123)\"`\n            // then Backspace would only erase the rightmost brace\n            // becoming something like `\"(123\"`\n            // which would give the same `\"123\"` value\n            // which would then be formatted back to `\"(123)\"`\n            // and so a user wouldn't be able to erase the phone number.\n            // This is the workaround for that.\n            const formattedPhoneNumber = new AsYouType(\"US\").input(value);\n            if (displayValue !== formattedPhoneNumber && value.length !== 4) {\n                displayValue = formattedPhoneNumber;\n            }\n        }\n    }\n    else {\n        // Set some default values for modal-edited fields so we don't go from uncontrolled to\n        // controlled when setting the date.\n        if ([\"date\", \"datetime\", \"time\"].includes(type)) {\n            displayValue = \"\";\n        }\n    }\n    const Wrapper = isHandledByModal ? Pressable : View;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(WithLabel, { label: errorMessage, labelColor: errorMessageColor || \"red\", labelPlacement: \"after\", labelSize: \"sm\" },\n            React.createElement(WithLabel, Object.assign({}, withLabelProps),\n                React.createElement(Wrapper, { style: {\n                        flexDirection: \"row\",\n                        justifyContent: \"center\",\n                        alignItems: \"center\",\n                        // height: multiline || grow ? undefined : 40,\n                        minHeight: getHeight(),\n                        width: \"100%\",\n                        // Add padding so the border doesn't mess up layouts\n                        paddingHorizontal: focused ? 10 : 14,\n                        paddingVertical: focused ? 0 : 4,\n                        borderColor,\n                        borderWidth: focused ? 5 : 1,\n                        borderRadius: 16,\n                        backgroundColor: disabled ? theme.gray : theme.white,\n                        overflow: \"hidden\",\n                    }, onPress: () => {\n                        // This runs on web\n                        onTap();\n                    }, onTouchStart: () => {\n                        // This runs on mobile\n                        onTap();\n                    } },\n                    renderIcon(),\n                    React.createElement(TextInput, { ref: (ref) => {\n                            if (inputRef) {\n                                inputRef(ref);\n                            }\n                        }, autoCapitalize: type === \"text\" ? \"sentences\" : \"none\", autoCorrect: shouldAutocorrect, autoFocus: autoFocus, blurOnSubmit: blurOnSubmit, editable: isEditable, keyboardType: keyboardType, multiline: multiline, numberOfLines: rows || 4, placeholder: placeholder, placeholderTextColor: theme.gray, returnKeyType: type === \"number\" || type === \"decimal\" ? \"done\" : returnKeyType, secureTextEntry: type === \"password\", style: defaultTextInputStyles, testID: testID, textContentType: textContentType, underlineColorAndroid: \"transparent\", value: displayValue, onBlur: () => {\n                            if (!isHandledByModal) {\n                                setFocused(false);\n                            }\n                            if (onBlur) {\n                                onBlur({ value: value !== null && value !== void 0 ? value : \"\" });\n                            }\n                            // if (type === \"date\") {\n                            //   actionSheetRef?.current?.hide();\n                            // }\n                        }, onChangeText: (text) => {\n                            if (!onChange) {\n                                return;\n                            }\n                            if (type === \"phoneNumber\") {\n                                const formattedPhoneNumber = new AsYouType(\"US\").input(text);\n                                // another workaround for the same issue as above with backspacing phone numbers\n                                if (formattedPhoneNumber === value) {\n                                    onChange({ value: text });\n                                }\n                                else {\n                                    onChange({ value: formattedPhoneNumber });\n                                }\n                            }\n                            else if (type === \"number\") {\n                                text = text.replace(/[^0-9]/g, \"\");\n                                onChange({ value: !isNaN(parseInt(text)) ? parseInt(text).toString() : \"\" });\n                            }\n                            else if (type === \"date\" || type === \"datetime\" || type === \"time\") {\n                                // Do nothing, this is handled by the date time action sheet\n                            }\n                            else {\n                                onChange({ value: text });\n                            }\n                        }, onContentSizeChange: (event) => {\n                            if (!grow) {\n                                return;\n                            }\n                            setHeight(event.nativeEvent.contentSize.height);\n                        }, onFocus: () => {\n                            if (!isHandledByModal) {\n                                setFocused(true);\n                            }\n                        }, onSubmitEditing: () => {\n                            if (onEnter) {\n                                onEnter();\n                            }\n                            if (onSubmitEditing) {\n                                onSubmitEditing();\n                            }\n                        } })))),\n        (type === \"date\" || type === \"time\" || type === \"datetime\") && (React.createElement(DateTimeActionSheet, { actionSheetRef: dateActionSheetRef, mode: type, transformValue: transformValue, value: value, visible: showDate, onChange: (result) => {\n                onChange(result);\n                setShowDate(false);\n                setFocused(false);\n            }, onDismiss: () => setShowDate(false) })),\n        type === \"numberRange\" && value && (React.createElement(NumberPickerActionSheet, { actionSheetRef: numberRangeActionSheetRef, max: max || (min || 0) + 100, min: min || 0, value: value, onChange: (result) => onChange(result) })),\n        type === \"decimalRange\" && value && (React.createElement(DecimalRangeActionSheet, { actionSheetRef: decimalRangeActionSheetRef, max: max || (min || 0) + 100, min: min || 0, value: value, onChange: (result) => onChange(result) })),\n        type === \"height\" && (React.createElement(HeightActionSheet, { actionSheetRef: weightActionSheetRef, value: value, onChange: (result) => {\n                onChange(result);\n            } }))));\n};\n//# sourceMappingURL=TextField.js.map"]},"metadata":{},"sourceType":"module"}