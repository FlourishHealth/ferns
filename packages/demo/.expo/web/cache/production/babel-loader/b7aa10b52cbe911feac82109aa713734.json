{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols===\"function\")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t;};import React,{useState}from\"react\";import Linking from\"react-native-web/dist/exports/Linking\";import{Box}from\"./Box\";import{Button}from\"./Button\";import{Field}from\"./Field\";import{Icon}from\"./Icon\";import{Text}from\"./Text\";import{Tooltip}from\"./Tooltip\";export function formatAddress(address){var asString=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var _a,_b,_c,_d;var city=\"\";if(address===null||address===void 0?void 0:address.city){city=(address===null||address===void 0?void 0:address.state)||address.zipcode?`${address.city}, `:`${address.city}`;}var state=\"\";if(address===null||address===void 0?void 0:address.state){state=(address===null||address===void 0?void 0:address.zipcode)?`${address.state} `:`${address.state}`;}var zip=(address===null||address===void 0?void 0:address.zipcode)||\"\";var countyName=(_a=address===null||address===void 0?void 0:address.countyName)!==null&&_a!==void 0?_a:\"\";var countyCode=(_b=address===null||address===void 0?void 0:address.countyCode)!==null&&_b!==void 0?_b:\"\";var addressLineOne=(_c=address===null||address===void 0?void 0:address.address1)!==null&&_c!==void 0?_c:\"\";var addressLineTwo=(_d=address===null||address===void 0?void 0:address.address2)!==null&&_d!==void 0?_d:\"\";var addressLineThree=`${city}${state}${zip}`;var addressLineFour=`${countyName}${(address===null||address===void 0?void 0:address.countyCode)?` [${countyCode}]`:\"\"}`;if(!asString){return`${addressLineOne}${addressLineOne&&(addressLineTwo||addressLineThree)?`\\n`:\"\"}${addressLineTwo}${addressLineTwo&&addressLineThree?`\\n`:\"\"}${addressLineThree}${addressLineThree&&addressLineFour?`\\n`:\"\"}${addressLineFour}`;}else{return`${addressLineOne}${addressLineOne&&(addressLineTwo||addressLineThree)?`, `:\"\"}${addressLineTwo}${addressLineTwo&&addressLineThree?`, `:\"\"}${addressLineThree}${addressLineThree&&addressLineFour?`, `:\"\"}${addressLineFour}`;}}export var TapToEdit=function TapToEdit(_a){var _b;var value=_a.value,setValue=_a.setValue,placeholder=_a.placeholder,title=_a.title,onSave=_a.onSave,_a$editable=_a.editable,editable=_a$editable===void 0?true:_a$editable,_a$isEditing=_a.isEditing,isEditing=_a$isEditing===void 0?false:_a$isEditing,rowBoxProps=_a.rowBoxProps,transform=_a.transform,fieldComponent=_a.fieldComponent,_a$withConfirmation=_a.withConfirmation,withConfirmation=_a$withConfirmation===void 0?false:_a$withConfirmation,_a$confirmationText=_a.confirmationText,confirmationText=_a$confirmationText===void 0?\"Are you sure you want to save your changes?\":_a$confirmationText,_a$confirmationHeadin=_a.confirmationHeading,confirmationHeading=_a$confirmationHeadin===void 0?\"Confirm\":_a$confirmationHeadin,propsDescription=_a.description,_a$showDescriptionAsT=_a.showDescriptionAsTooltip,showDescriptionAsTooltip=_a$showDescriptionAsT===void 0?false:_a$showDescriptionAsT,_a$onlyShowDescriptio=_a.onlyShowDescriptionWhileEditing,onlyShowDescriptionWhileEditing=_a$onlyShowDescriptio===void 0?true:_a$onlyShowDescriptio,fieldProps=__rest(_a,[\"value\",\"setValue\",\"placeholder\",\"title\",\"onSave\",\"editable\",\"isEditing\",\"rowBoxProps\",\"transform\",\"fieldComponent\",\"withConfirmation\",\"confirmationText\",\"confirmationHeading\",\"description\",\"showDescriptionAsTooltip\",\"onlyShowDescriptionWhileEditing\"]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useState3=useState(value),_useState4=_slicedToArray(_useState3,1),initialValue=_useState4[0];var description=propsDescription;if(editable&&!setValue){throw new Error(\"setValue is required if editable is true\");}if(editable&&(editing||isEditing)){return React.createElement(Box,{direction:\"column\"},fieldComponent?fieldComponent(setValue):(React.createElement(Field,Object.assign({helperText:description,label:title,placeholder:placeholder,value:value,onChange:setValue},fieldProps))),editing&&!isEditing&&(React.createElement(Box,{direction:\"row\"},React.createElement(Button,{color:\"blue\",confirmationHeading:confirmationHeading,confirmationText:confirmationText,inline:true,text:\"Save\",withConfirmation:withConfirmation,onClick:function(){var _onClick=_asyncToGenerator(function*(){if(!onSave){console.error(\"No onSave provided for editable TapToEdit\");}else{yield onSave(value);}setEditing(false);});function onClick(){return _onClick.apply(this,arguments);}return onClick;}()}),React.createElement(Box,{marginLeft:2},React.createElement(Button,{color:\"red\",inline:true,text:\"Cancel\",onClick:function onClick(){if(setValue){setValue(initialValue);}setEditing(false);}})))));}else{var displayValue=value;if(transform){displayValue=transform(value);}else{if((fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"boolean\"){displayValue=value?\"Yes\":\"No\";}else if((fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"percent\"){displayValue=`${parseFloat(parseFloat(String(value*100)).toPrecision(7))}%`;}else if((fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"currency\"){var formatter=new Intl.NumberFormat(\"en-US\",{style:\"currency\",currency:\"USD\",minimumFractionDigits:2});displayValue=formatter.format(value);}else if((fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"multiselect\"){displayValue=value.join(\", \");}else if((fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"url\"){try{var url=new URL(value);displayValue=(_b=url===null||url===void 0?void 0:url.hostname)!==null&&_b!==void 0?_b:value;}catch(error){if(value){console.debug(`Invalid URL: ${value}`);}displayValue=value;}}else if((fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"address\"){displayValue=formatAddress(value);}}var openLink=function(){var _ref=_asyncToGenerator(function*(){if((fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"url\"){yield Linking.openURL(value);}else if((fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"address\"){yield Linking.openURL(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(formatAddress(value,true))}`);}});return function openLink(){return _ref.apply(this,arguments);};}();var isClickable=(fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"url\"||(fieldProps===null||fieldProps===void 0?void 0:fieldProps.type)===\"address\";var renderTitleDescription=function renderTitleDescription(){return React.createElement(Box,{flex:\"grow\"},React.createElement(Text,{weight:\"bold\"},title,\":\"),Boolean(description&&!showDescriptionAsTooltip&&!onlyShowDescriptionWhileEditing)&&(React.createElement(Text,{color:\"gray\",size:\"sm\"},description)));};return React.createElement(Box,Object.assign({direction:\"row\",justifyContent:\"between\",paddingX:3,paddingY:2,width:\"100%\"},rowBoxProps),showDescriptionAsTooltip?(React.createElement(Tooltip,{idealDirection:\"top\",text:description},renderTitleDescription())):renderTitleDescription(),React.createElement(Box,{direction:\"row\",justifyContent:\"start\",marginLeft:2},React.createElement(Box,{justifyContent:\"start\",onClick:isClickable?openLink:undefined},React.createElement(Text,{align:\"right\",underline:isClickable},displayValue)),editable&&(React.createElement(Box,{marginLeft:2,onClick:function onClick(){return setEditing(true);}},React.createElement(Icon,{color:\"darkGray\",name:\"edit\",prefix:\"far\",size:\"md\"})))));}};","map":{"version":3,"sources":["../src/TapToEdit.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useState } from \"react\";\nimport { Linking } from \"react-native\";\nimport { Box } from \"./Box\";\nimport { Button } from \"./Button\";\nimport { Field } from \"./Field\";\nimport { Icon } from \"./Icon\";\n// import {useOpenAPISpec} from \"./OpenAPIContext\";\nimport { Text } from \"./Text\";\nimport { Tooltip } from \"./Tooltip\";\nexport function formatAddress(address, asString = false) {\n    var _a, _b, _c, _d;\n    let city = \"\";\n    if (address === null || address === void 0 ? void 0 : address.city) {\n        city = (address === null || address === void 0 ? void 0 : address.state) || address.zipcode ? `${address.city}, ` : `${address.city}`;\n    }\n    let state = \"\";\n    if (address === null || address === void 0 ? void 0 : address.state) {\n        state = (address === null || address === void 0 ? void 0 : address.zipcode) ? `${address.state} ` : `${address.state}`;\n    }\n    const zip = (address === null || address === void 0 ? void 0 : address.zipcode) || \"\";\n    const countyName = (_a = address === null || address === void 0 ? void 0 : address.countyName) !== null && _a !== void 0 ? _a : \"\";\n    const countyCode = (_b = address === null || address === void 0 ? void 0 : address.countyCode) !== null && _b !== void 0 ? _b : \"\";\n    const addressLineOne = (_c = address === null || address === void 0 ? void 0 : address.address1) !== null && _c !== void 0 ? _c : \"\";\n    const addressLineTwo = (_d = address === null || address === void 0 ? void 0 : address.address2) !== null && _d !== void 0 ? _d : \"\";\n    const addressLineThree = `${city}${state}${zip}`;\n    const addressLineFour = `${countyName}${(address === null || address === void 0 ? void 0 : address.countyCode) ? ` [${countyCode}]` : \"\"}`;\n    if (!asString) {\n        // Only add new lines if lines before and after are not empty to avoid awkward whitespace\n        return `${addressLineOne}${addressLineOne && (addressLineTwo || addressLineThree) ? `\\n` : \"\"}${addressLineTwo}${addressLineTwo && addressLineThree ? `\\n` : \"\"}${addressLineThree}${addressLineThree && addressLineFour ? `\\n` : \"\"}${addressLineFour}`;\n    }\n    else {\n        return `${addressLineOne}${addressLineOne && (addressLineTwo || addressLineThree) ? `, ` : \"\"}${addressLineTwo}${addressLineTwo && addressLineThree ? `, ` : \"\"}${addressLineThree}${addressLineThree && addressLineFour ? `, ` : \"\"}${addressLineFour}`;\n    }\n}\nexport const TapToEdit = (_a) => {\n    var _b;\n    var { value, setValue, placeholder, title, onSave, editable = true, isEditing = false, rowBoxProps, transform, fieldComponent, withConfirmation = false, confirmationText = \"Are you sure you want to save your changes?\", confirmationHeading = \"Confirm\", description: propsDescription, \n    // openApiModel,\n    // openApiField,\n    showDescriptionAsTooltip = false, onlyShowDescriptionWhileEditing = true } = _a, fieldProps = __rest(_a, [\"value\", \"setValue\", \"placeholder\", \"title\", \"onSave\", \"editable\", \"isEditing\", \"rowBoxProps\", \"transform\", \"fieldComponent\", \"withConfirmation\", \"confirmationText\", \"confirmationHeading\", \"description\", \"showDescriptionAsTooltip\", \"onlyShowDescriptionWhileEditing\"]);\n    const [editing, setEditing] = useState(false);\n    const [initialValue] = useState(value);\n    // const {getModelField} = useOpenAPISpec();\n    const description = propsDescription;\n    // if (!description && openApiModel && openApiField) {\n    //   description = getModelField(openApiModel, openApiField)?.description;\n    // }\n    if (editable && !setValue) {\n        throw new Error(\"setValue is required if editable is true\");\n    }\n    if (editable && (editing || isEditing)) {\n        return (React.createElement(Box, { direction: \"column\" },\n            fieldComponent ? (fieldComponent(setValue)) : (React.createElement(Field, Object.assign({ helperText: description, label: title, placeholder: placeholder, value: value, onChange: setValue }, fieldProps))),\n            editing && !isEditing && (React.createElement(Box, { direction: \"row\" },\n                React.createElement(Button, { color: \"blue\", confirmationHeading: confirmationHeading, confirmationText: confirmationText, inline: true, text: \"Save\", withConfirmation: withConfirmation, onClick: async () => {\n                        if (!onSave) {\n                            console.error(\"No onSave provided for editable TapToEdit\");\n                        }\n                        else {\n                            await onSave(value);\n                        }\n                        setEditing(false);\n                    } }),\n                React.createElement(Box, { marginLeft: 2 },\n                    React.createElement(Button, { color: \"red\", inline: true, text: \"Cancel\", onClick: () => {\n                            if (setValue) {\n                                setValue(initialValue);\n                            }\n                            setEditing(false);\n                        } }))))));\n    }\n    else {\n        let displayValue = value;\n        // If a transform props is present, that takes priority\n        if (transform) {\n            displayValue = transform(value);\n        }\n        else {\n            // If no transform, try and display the value reasonably.\n            if ((fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"boolean\") {\n                displayValue = value ? \"Yes\" : \"No\";\n            }\n            else if ((fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"percent\") {\n                // Prevent floating point errors from showing up by using parseFloat and precision.\n                // Pass through parseFloat again to trim off insignificant zeroes.\n                displayValue = `${parseFloat(parseFloat(String(value * 100)).toPrecision(7))}%`;\n            }\n            else if ((fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"currency\") {\n                // TODO: support currencies other than USD in Field and related components.\n                const formatter = new Intl.NumberFormat(\"en-US\", {\n                    style: \"currency\",\n                    currency: \"USD\",\n                    minimumFractionDigits: 2, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n                });\n                displayValue = formatter.format(value);\n            }\n            else if ((fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"multiselect\") {\n                // ???\n                displayValue = value.join(\", \");\n            }\n            else if ((fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"url\") {\n                // Show only the domain, full links are likely too long.\n                try {\n                    const url = new URL(value);\n                    displayValue = (_b = url === null || url === void 0 ? void 0 : url.hostname) !== null && _b !== void 0 ? _b : value;\n                }\n                catch (error) {\n                    // Don't print an error message for empty values.\n                    if (value) {\n                        console.debug(`Invalid URL: ${value}`);\n                    }\n                    displayValue = value;\n                }\n            }\n            else if ((fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"address\") {\n                displayValue = formatAddress(value);\n            }\n        }\n        const openLink = async () => {\n            if ((fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"url\") {\n                await Linking.openURL(value);\n            }\n            else if ((fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"address\") {\n                await Linking.openURL(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(formatAddress(value, true))}`);\n            }\n        };\n        const isClickable = (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"url\" || (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.type) === \"address\";\n        const renderTitleDescription = () => {\n            return (React.createElement(Box, { flex: \"grow\" },\n                React.createElement(Text, { weight: \"bold\" },\n                    title,\n                    \":\"),\n                Boolean(description && !showDescriptionAsTooltip && !onlyShowDescriptionWhileEditing) && (React.createElement(Text, { color: \"gray\", size: \"sm\" }, description))));\n        };\n        return (React.createElement(Box, Object.assign({ direction: \"row\", justifyContent: \"between\", paddingX: 3, paddingY: 2, width: \"100%\" }, rowBoxProps),\n            showDescriptionAsTooltip ? (React.createElement(Tooltip, { idealDirection: \"top\", text: description }, renderTitleDescription())) : (renderTitleDescription()),\n            React.createElement(Box, { direction: \"row\", justifyContent: \"start\", marginLeft: 2 },\n                React.createElement(Box, { justifyContent: \"start\", onClick: isClickable ? openLink : undefined },\n                    React.createElement(Text, { align: \"right\", underline: isClickable }, displayValue)),\n                editable && (React.createElement(Box, { marginLeft: 2, onClick: () => setEditing(true) },\n                    React.createElement(Icon, { color: \"darkGray\", name: \"edit\", prefix: \"far\", size: \"md\" }))))));\n    }\n};\n//# sourceMappingURL=TapToEdit.js.map"]},"metadata":{},"sourceType":"module"}