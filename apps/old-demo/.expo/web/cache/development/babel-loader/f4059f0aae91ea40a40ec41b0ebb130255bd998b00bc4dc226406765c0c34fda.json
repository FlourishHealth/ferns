{"ast":null,"code":"\"use strict\";\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar React = __importStar(require(\"react\"));\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar useKey_1 = require(\"./hooks/useKey\");\nvar Manager_1 = require(\"./Manager\");\nexports.Context = React.createContext(null);\nexports.Host = function (_ref) {\n  var children = _ref.children,\n    style = _ref.style;\n  var managerRef = React.useRef(null);\n  var queue = [];\n  var _useKey_1$useKey = useKey_1.useKey(),\n    generateKey = _useKey_1$useKey.generateKey,\n    removeKey = _useKey_1$useKey.removeKey;\n  React.useEffect(function () {\n    var _a, _b, _c;\n    while (queue.length && managerRef.current) {\n      var action = queue.pop();\n      if (action) {\n        switch (action.type) {\n          case 'mount':\n            (_a = managerRef.current) === null || _a === void 0 ? void 0 : _a.mount(action.key, action.children);\n            break;\n          case 'update':\n            (_b = managerRef.current) === null || _b === void 0 ? void 0 : _b.update(action.key, action.children);\n            break;\n          case 'unmount':\n            (_c = managerRef.current) === null || _c === void 0 ? void 0 : _c.unmount(action.key);\n            break;\n        }\n      }\n    }\n  }, []);\n  var mount = function mount(children) {\n    var key = generateKey();\n    if (managerRef.current) {\n      managerRef.current.mount(key, children);\n    } else {\n      queue.push({\n        type: 'mount',\n        key: key,\n        children: children\n      });\n    }\n    return key;\n  };\n  var update = function update(key, children) {\n    if (managerRef.current) {\n      managerRef.current.update(key, children);\n    } else {\n      var op = {\n        type: 'mount',\n        key: key,\n        children: children\n      };\n      var index = queue.findIndex(function (o) {\n        return o.type === 'mount' || o.type === 'update' && o.key === key;\n      });\n      if (index > -1) {\n        queue[index] = op;\n      } else {\n        queue.push(op);\n      }\n    }\n  };\n  var unmount = function unmount(key) {\n    if (managerRef.current) {\n      managerRef.current.unmount(key);\n      removeKey(key);\n    } else {\n      queue.push({\n        type: 'unmount',\n        key: key\n      });\n    }\n  };\n  return React.createElement(exports.Context.Provider, {\n    value: {\n      mount: mount,\n      update: update,\n      unmount: unmount\n    }\n  }, React.createElement(react_native_1.View, {\n    style: [{\n      flex: 1\n    }, style],\n    collapsable: false,\n    pointerEvents: \"box-none\"\n  }, children), React.createElement(Manager_1.Manager, {\n    ref: managerRef\n  }));\n};","map":{"version":3,"names":["__importStar","mod","__esModule","result","k","Object","hasOwnProperty","call","defineProperty","exports","value","React","require","react_native_1","useKey_1","Manager_1","Context","createContext","Host","_ref","children","style","managerRef","useRef","queue","_useKey_1$useKey","useKey","generateKey","removeKey","useEffect","_a","_b","_c","length","current","action","pop","type","mount","key","update","unmount","push","op","index","findIndex","o","createElement","Provider","View","flex","collapsable","pointerEvents","Manager","ref"],"sources":["/Users/josh/src/ui/apps/demo/node_modules/react-native-portalize/lib/Host.js"],"sourcesContent":["\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst useKey_1 = require(\"./hooks/useKey\");\nconst Manager_1 = require(\"./Manager\");\nexports.Context = React.createContext(null);\nexports.Host = ({ children, style }) => {\n    const managerRef = React.useRef(null);\n    const queue = [];\n    const { generateKey, removeKey } = useKey_1.useKey();\n    React.useEffect(() => {\n        var _a, _b, _c;\n        while (queue.length && managerRef.current) {\n            const action = queue.pop();\n            if (action) {\n                switch (action.type) {\n                    case 'mount':\n                        (_a = managerRef.current) === null || _a === void 0 ? void 0 : _a.mount(action.key, action.children);\n                        break;\n                    case 'update':\n                        (_b = managerRef.current) === null || _b === void 0 ? void 0 : _b.update(action.key, action.children);\n                        break;\n                    case 'unmount':\n                        (_c = managerRef.current) === null || _c === void 0 ? void 0 : _c.unmount(action.key);\n                        break;\n                }\n            }\n        }\n    }, []);\n    const mount = (children) => {\n        const key = generateKey();\n        if (managerRef.current) {\n            managerRef.current.mount(key, children);\n        }\n        else {\n            queue.push({ type: 'mount', key, children });\n        }\n        return key;\n    };\n    const update = (key, children) => {\n        if (managerRef.current) {\n            managerRef.current.update(key, children);\n        }\n        else {\n            const op = { type: 'mount', key, children };\n            const index = queue.findIndex(o => o.type === 'mount' || (o.type === 'update' && o.key === key));\n            if (index > -1) {\n                queue[index] = op;\n            }\n            else {\n                queue.push(op);\n            }\n        }\n    };\n    const unmount = (key) => {\n        if (managerRef.current) {\n            managerRef.current.unmount(key);\n            removeKey(key);\n        }\n        else {\n            queue.push({ type: 'unmount', key });\n        }\n    };\n    return (React.createElement(exports.Context.Provider, { value: { mount, update, unmount } },\n        React.createElement(react_native_1.View, { style: [{ flex: 1 }, style], collapsable: false, pointerEvents: \"box-none\" }, children),\n        React.createElement(Manager_1.Manager, { ref: managerRef })));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}